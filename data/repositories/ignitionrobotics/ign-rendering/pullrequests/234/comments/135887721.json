{"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-rendering/pullrequests/234/comments/135887721.json"}, "html": {"href": "#!/ignitionrobotics/ign-rendering/pull-requests/234/_/diff#comment-135887721"}}, "parent": {"id": 135487982, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-rendering/pullrequests/234/comments/135487982.json"}, "html": {"href": "#!/ignitionrobotics/ign-rendering/pull-requests/234/_/diff#comment-135487982"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 234, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-rendering/pullrequests/234.json"}, "html": {"href": "#!/ignitionrobotics/ign-rendering/pull-requests/234"}}, "title": "Prevent flaky crash"}, "content": {"raw": "I'm running the current version of this branch. I get this on the console at the time of crash:\n\n```\nInvalid parameter at line 387 (@foreach). 'hlms_lights_point' is not a number nor a variable\nterminate called after throwing an instance of 'Ogre::RenderingAPIException'\n  what():  OGRE EXCEPTION(3:RenderingAPIException): Fragment Program 536904192PixelShader_ps failed to compile. See compile log above for details. in GLSLShader::compile at /var/lib/jenkins/workspace/ogre-2.1-debbuilder/repo/RenderSystems/GL3Plus/src/GLSL/OgreGLSLShader.cpp (line 308)\n```\n\nAnd this shows up on the ogre logs:\n\n```\n13:42:06: There were HLMS syntax errors while parsing 536904192PixelShader_ps\n13:42:06: GLSL compile log: 536904192PixelShader_ps\n0(1) : error C0000: syntax error, unexpected $undefined at token \"@\"\n0(78) : error C0000: syntax error, unexpected ';', expecting \"::\" at token \";\"\n13:42:06: OGRE EXCEPTION(3:RenderingAPIException): Fragment Program 536904192PixelShader_ps failed to compile. See compile log above for details. in GLSLShader::compile at /var/lib/jenkins/workspace/ogre-2.1-debbuilder/repo/RenderSystems/GL3Plus/src/GLSL/OgreGLSLShader.cpp (line 308)\n```", "markup": "markdown", "html": "<p>I'm running the current version of this branch. I get this on the console at the time of crash:</p>\n<div class=\"codehilite\"><pre><span></span>Invalid parameter at line 387 (@foreach). &#39;hlms_lights_point&#39; is not a number nor a variable\nterminate called after throwing an instance of &#39;Ogre::RenderingAPIException&#39;\n  what():  OGRE EXCEPTION(3:RenderingAPIException): Fragment Program 536904192PixelShader_ps failed to compile. See compile log above for details. in GLSLShader::compile at /var/lib/jenkins/workspace/ogre-2.1-debbuilder/repo/RenderSystems/GL3Plus/src/GLSL/OgreGLSLShader.cpp (line 308)\n</pre></div>\n\n\n<p>And this shows up on the ogre logs:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"mi\">13</span><span class=\"o\">:</span><span class=\"mi\">42</span><span class=\"o\">:</span><span class=\"mo\">06</span><span class=\"o\">:</span> <span class=\"n\">There</span> <span class=\"n\">were</span> <span class=\"n\">HLMS</span> <span class=\"n\">syntax</span> <span class=\"n\">errors</span> <span class=\"k\">while</span> <span class=\"n\">parsing</span> <span class=\"mi\">536904192</span><span class=\"n\">PixelShader_ps</span>\n<span class=\"mi\">13</span><span class=\"o\">:</span><span class=\"mi\">42</span><span class=\"o\">:</span><span class=\"mo\">06</span><span class=\"o\">:</span> <span class=\"n\">GLSL</span> <span class=\"n\">compile</span> <span class=\"nl\">log</span><span class=\"p\">:</span> <span class=\"mi\">536904192</span><span class=\"n\">PixelShader_ps</span>\n<span class=\"mi\">0</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">)</span> <span class=\"o\">:</span> <span class=\"n\">error</span> <span class=\"nl\">C0000</span><span class=\"p\">:</span> <span class=\"n\">syntax</span> <span class=\"n\">error</span><span class=\"p\">,</span> <span class=\"n\">unexpected</span> <span class=\"err\">$</span><span class=\"n\">undefined</span> <span class=\"n\">at</span> <span class=\"n\">token</span> <span class=\"s\">&quot;@&quot;</span>\n<span class=\"mi\">0</span><span class=\"p\">(</span><span class=\"mi\">78</span><span class=\"p\">)</span> <span class=\"o\">:</span> <span class=\"n\">error</span> <span class=\"nl\">C0000</span><span class=\"p\">:</span> <span class=\"n\">syntax</span> <span class=\"n\">error</span><span class=\"p\">,</span> <span class=\"n\">unexpected</span> <span class=\"sc\">&#39;;&#39;</span><span class=\"p\">,</span> <span class=\"n\">expecting</span> <span class=\"s\">&quot;::&quot;</span> <span class=\"n\">at</span> <span class=\"n\">token</span> <span class=\"s\">&quot;;&quot;</span>\n<span class=\"mi\">13</span><span class=\"o\">:</span><span class=\"mi\">42</span><span class=\"o\">:</span><span class=\"mo\">06</span><span class=\"o\">:</span> <span class=\"n\">OGRE</span> <span class=\"n\">EXCEPTION</span><span class=\"p\">(</span><span class=\"mi\">3</span><span class=\"o\">:</span><span class=\"n\">RenderingAPIException</span><span class=\"p\">)</span><span class=\"o\">:</span> <span class=\"n\">Fragment</span> <span class=\"n\">Program</span> <span class=\"mi\">536904192</span><span class=\"n\">PixelShader_ps</span> <span class=\"n\">failed</span> <span class=\"n\">to</span> <span class=\"n\">compile</span><span class=\"p\">.</span> <span class=\"n\">See</span> <span class=\"n\">compile</span> <span class=\"n\">log</span> <span class=\"n\">above</span> <span class=\"k\">for</span> <span class=\"n\">details</span><span class=\"p\">.</span> <span class=\"k\">in</span> <span class=\"n\">GLSLShader</span><span class=\"o\">::</span><span class=\"n\">compile</span> <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">var</span><span class=\"o\">/</span><span class=\"n\">lib</span><span class=\"o\">/</span><span class=\"n\">jenkins</span><span class=\"o\">/</span><span class=\"n\">workspace</span><span class=\"o\">/</span><span class=\"n\">ogre</span><span class=\"o\">-</span><span class=\"mf\">2.1</span><span class=\"o\">-</span><span class=\"n\">debbuilder</span><span class=\"o\">/</span><span class=\"n\">repo</span><span class=\"o\">/</span><span class=\"n\">RenderSystems</span><span class=\"o\">/</span><span class=\"n\">GL3Plus</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">GLSL</span><span class=\"o\">/</span><span class=\"n\">OgreGLSLShader</span><span class=\"p\">.</span><span class=\"n\">cpp</span> <span class=\"p\">(</span><span class=\"n\">line</span> <span class=\"mi\">308</span><span class=\"p\">)</span>\n</pre></div>", "type": "rendered"}, "created_on": "2020-02-13T21:47:13.683885+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2020-02-13T21:47:13.695941+00:00", "type": "pullrequest_comment", "id": 135887721}