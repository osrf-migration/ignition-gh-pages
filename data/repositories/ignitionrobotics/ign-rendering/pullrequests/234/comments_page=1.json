{"pagelen": 100, "values": [{"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-rendering/pullrequests/234/comments/135299392.json"}, "html": {"href": "#!/ignitionrobotics/ign-rendering/pull-requests/234/_/diff#comment-135299392"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 234, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-rendering/pullrequests/234.json"}, "html": {"href": "#!/ignitionrobotics/ign-rendering/pull-requests/234"}}, "title": "Prevent flaky crash"}, "content": {"raw": "when do you get these crashes? when resizing the window or just regular use?", "markup": "markdown", "html": "<p>when do you get these crashes? when resizing the window or just regular use?</p>", "type": "rendered"}, "created_on": "2020-02-11T04:44:33.341533+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "updated_on": "2020-02-11T04:44:33.346767+00:00", "type": "pullrequest_comment", "id": 135299392}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-rendering/pullrequests/234/comments/135302678.json"}, "html": {"href": "#!/ignitionrobotics/ign-rendering/pull-requests/234/_/diff#comment-135302678"}}, "parent": {"id": 135299392, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-rendering/pullrequests/234/comments/135299392.json"}, "html": {"href": "#!/ignitionrobotics/ign-rendering/pull-requests/234/_/diff#comment-135299392"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 234, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-rendering/pullrequests/234.json"}, "html": {"href": "#!/ignitionrobotics/ign-rendering/pull-requests/234"}}, "title": "Prevent flaky crash"}, "content": {"raw": "Definitely not resizing the window. I think I was selecting and translating models. I'll keep my eye open in case it happens again without this PR.", "markup": "markdown", "html": "<p>Definitely not resizing the window. I think I was selecting and translating models. I'll keep my eye open in case it happens again without this PR.</p>", "type": "rendered"}, "created_on": "2020-02-11T05:38:37.778330+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2020-02-11T05:38:37.785314+00:00", "type": "pullrequest_comment", "id": 135302678}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-rendering/pullrequests/234/comments/135466549.json"}, "html": {"href": "#!/ignitionrobotics/ign-rendering/pull-requests/234/_/diff#comment-135466549"}}, "parent": {"id": 135302678, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-rendering/pullrequests/234/comments/135302678.json"}, "html": {"href": "#!/ignitionrobotics/ign-rendering/pull-requests/234/_/diff#comment-135302678"}}, "depth": 2}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 234, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-rendering/pullrequests/234.json"}, "html": {"href": "#!/ignitionrobotics/ign-rendering/pull-requests/234"}}, "title": "Prevent flaky crash"}, "content": {"raw": "The original PR was not actually having an effect, I got the same crash again, but again no backtrace.\n\nI had to clean my workspace for the change to act and it was actually wrong (I had removed an extra `@end`). So I fixed it, and later got another flaky crash on the `foreach` below:\n\n```\nInvalid parameter at line 382 (@foreach). 'hlms_lights_directional_non_caster' is not a number nor a variable               \nterminate called after throwing an instance of 'Ogre::ItemIdentityException'                                                          \n  what():  OGRE EXCEPTION(5:ItemIdentityException): Parameter called f3dGrid does not exist.  in GpuProgramParameters::_findNamedConstantDefinition at /var/lib/jenkins/workspac\ne/ogre-2.1-debbuilder/repo/OgreMain/src/OgreGpuProgramParams.cpp (line 2218)\n```\n\nSo I removed that as well. Will let you know what happens.", "markup": "markdown", "html": "<p>The original PR was not actually having an effect, I got the same crash again, but again no backtrace.</p>\n<p>I had to clean my workspace for the change to act and it was actually wrong (I had removed an extra <code>@end</code>). So I fixed it, and later got another flaky crash on the <code>foreach</code> below:</p>\n<div class=\"codehilite\"><pre><span></span>Invalid parameter at line 382 (@foreach). &#39;hlms_lights_directional_non_caster&#39; is not a number nor a variable               \nterminate called after throwing an instance of &#39;Ogre::ItemIdentityException&#39;                                                          \n  what():  OGRE EXCEPTION(5:ItemIdentityException): Parameter called f3dGrid does not exist.  in GpuProgramParameters::_findNamedConstantDefinition at /var/lib/jenkins/workspac\ne/ogre-2.1-debbuilder/repo/OgreMain/src/OgreGpuProgramParams.cpp (line 2218)\n</pre></div>\n\n\n<p>So I removed that as well. Will let you know what happens.</p>", "type": "rendered"}, "created_on": "2020-02-11T20:15:00.603946+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2020-02-11T20:15:00.713658+00:00", "type": "pullrequest_comment", "id": 135466549}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-rendering/pullrequests/234/comments/135487982.json"}, "html": {"href": "#!/ignitionrobotics/ign-rendering/pull-requests/234/_/diff#comment-135487982"}}, "parent": {"id": 135466549, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-rendering/pullrequests/234/comments/135466549.json"}, "html": {"href": "#!/ignitionrobotics/ign-rendering/pull-requests/234/_/diff#comment-135466549"}}, "depth": 3}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 234, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-rendering/pullrequests/234.json"}, "html": {"href": "#!/ignitionrobotics/ign-rendering/pull-requests/234"}}, "title": "Prevent flaky crash"}, "content": {"raw": "ok you can also check if there are any ogre exceptions in `~/.ignition/rendering/ogre2.log`", "markup": "markdown", "html": "<p>ok you can also check if there are any ogre exceptions in <code>~/.ignition/rendering/ogre2.log</code></p>", "type": "rendered"}, "created_on": "2020-02-11T23:17:46.313998+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "updated_on": "2020-02-11T23:17:46.323610+00:00", "type": "pullrequest_comment", "id": 135487982}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-rendering/pullrequests/234/comments/135887721.json"}, "html": {"href": "#!/ignitionrobotics/ign-rendering/pull-requests/234/_/diff#comment-135887721"}}, "parent": {"id": 135487982, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-rendering/pullrequests/234/comments/135487982.json"}, "html": {"href": "#!/ignitionrobotics/ign-rendering/pull-requests/234/_/diff#comment-135487982"}}, "depth": 4}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 234, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-rendering/pullrequests/234.json"}, "html": {"href": "#!/ignitionrobotics/ign-rendering/pull-requests/234"}}, "title": "Prevent flaky crash"}, "content": {"raw": "I'm running the current version of this branch. I get this on the console at the time of crash:\n\n```\nInvalid parameter at line 387 (@foreach). 'hlms_lights_point' is not a number nor a variable\nterminate called after throwing an instance of 'Ogre::RenderingAPIException'\n  what():  OGRE EXCEPTION(3:RenderingAPIException): Fragment Program 536904192PixelShader_ps failed to compile. See compile log above for details. in GLSLShader::compile at /var/lib/jenkins/workspace/ogre-2.1-debbuilder/repo/RenderSystems/GL3Plus/src/GLSL/OgreGLSLShader.cpp (line 308)\n```\n\nAnd this shows up on the ogre logs:\n\n```\n13:42:06: There were HLMS syntax errors while parsing 536904192PixelShader_ps\n13:42:06: GLSL compile log: 536904192PixelShader_ps\n0(1) : error C0000: syntax error, unexpected $undefined at token \"@\"\n0(78) : error C0000: syntax error, unexpected ';', expecting \"::\" at token \";\"\n13:42:06: OGRE EXCEPTION(3:RenderingAPIException): Fragment Program 536904192PixelShader_ps failed to compile. See compile log above for details. in GLSLShader::compile at /var/lib/jenkins/workspace/ogre-2.1-debbuilder/repo/RenderSystems/GL3Plus/src/GLSL/OgreGLSLShader.cpp (line 308)\n```", "markup": "markdown", "html": "<p>I'm running the current version of this branch. I get this on the console at the time of crash:</p>\n<div class=\"codehilite\"><pre><span></span>Invalid parameter at line 387 (@foreach). &#39;hlms_lights_point&#39; is not a number nor a variable\nterminate called after throwing an instance of &#39;Ogre::RenderingAPIException&#39;\n  what():  OGRE EXCEPTION(3:RenderingAPIException): Fragment Program 536904192PixelShader_ps failed to compile. See compile log above for details. in GLSLShader::compile at /var/lib/jenkins/workspace/ogre-2.1-debbuilder/repo/RenderSystems/GL3Plus/src/GLSL/OgreGLSLShader.cpp (line 308)\n</pre></div>\n\n\n<p>And this shows up on the ogre logs:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"mi\">13</span><span class=\"o\">:</span><span class=\"mi\">42</span><span class=\"o\">:</span><span class=\"mo\">06</span><span class=\"o\">:</span> <span class=\"n\">There</span> <span class=\"n\">were</span> <span class=\"n\">HLMS</span> <span class=\"n\">syntax</span> <span class=\"n\">errors</span> <span class=\"k\">while</span> <span class=\"n\">parsing</span> <span class=\"mi\">536904192</span><span class=\"n\">PixelShader_ps</span>\n<span class=\"mi\">13</span><span class=\"o\">:</span><span class=\"mi\">42</span><span class=\"o\">:</span><span class=\"mo\">06</span><span class=\"o\">:</span> <span class=\"n\">GLSL</span> <span class=\"n\">compile</span> <span class=\"nl\">log</span><span class=\"p\">:</span> <span class=\"mi\">536904192</span><span class=\"n\">PixelShader_ps</span>\n<span class=\"mi\">0</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">)</span> <span class=\"o\">:</span> <span class=\"n\">error</span> <span class=\"nl\">C0000</span><span class=\"p\">:</span> <span class=\"n\">syntax</span> <span class=\"n\">error</span><span class=\"p\">,</span> <span class=\"n\">unexpected</span> <span class=\"err\">$</span><span class=\"n\">undefined</span> <span class=\"n\">at</span> <span class=\"n\">token</span> <span class=\"s\">&quot;@&quot;</span>\n<span class=\"mi\">0</span><span class=\"p\">(</span><span class=\"mi\">78</span><span class=\"p\">)</span> <span class=\"o\">:</span> <span class=\"n\">error</span> <span class=\"nl\">C0000</span><span class=\"p\">:</span> <span class=\"n\">syntax</span> <span class=\"n\">error</span><span class=\"p\">,</span> <span class=\"n\">unexpected</span> <span class=\"sc\">&#39;;&#39;</span><span class=\"p\">,</span> <span class=\"n\">expecting</span> <span class=\"s\">&quot;::&quot;</span> <span class=\"n\">at</span> <span class=\"n\">token</span> <span class=\"s\">&quot;;&quot;</span>\n<span class=\"mi\">13</span><span class=\"o\">:</span><span class=\"mi\">42</span><span class=\"o\">:</span><span class=\"mo\">06</span><span class=\"o\">:</span> <span class=\"n\">OGRE</span> <span class=\"n\">EXCEPTION</span><span class=\"p\">(</span><span class=\"mi\">3</span><span class=\"o\">:</span><span class=\"n\">RenderingAPIException</span><span class=\"p\">)</span><span class=\"o\">:</span> <span class=\"n\">Fragment</span> <span class=\"n\">Program</span> <span class=\"mi\">536904192</span><span class=\"n\">PixelShader_ps</span> <span class=\"n\">failed</span> <span class=\"n\">to</span> <span class=\"n\">compile</span><span class=\"p\">.</span> <span class=\"n\">See</span> <span class=\"n\">compile</span> <span class=\"n\">log</span> <span class=\"n\">above</span> <span class=\"k\">for</span> <span class=\"n\">details</span><span class=\"p\">.</span> <span class=\"k\">in</span> <span class=\"n\">GLSLShader</span><span class=\"o\">::</span><span class=\"n\">compile</span> <span class=\"n\">at</span> <span class=\"o\">/</span><span class=\"n\">var</span><span class=\"o\">/</span><span class=\"n\">lib</span><span class=\"o\">/</span><span class=\"n\">jenkins</span><span class=\"o\">/</span><span class=\"n\">workspace</span><span class=\"o\">/</span><span class=\"n\">ogre</span><span class=\"o\">-</span><span class=\"mf\">2.1</span><span class=\"o\">-</span><span class=\"n\">debbuilder</span><span class=\"o\">/</span><span class=\"n\">repo</span><span class=\"o\">/</span><span class=\"n\">RenderSystems</span><span class=\"o\">/</span><span class=\"n\">GL3Plus</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">GLSL</span><span class=\"o\">/</span><span class=\"n\">OgreGLSLShader</span><span class=\"p\">.</span><span class=\"n\">cpp</span> <span class=\"p\">(</span><span class=\"n\">line</span> <span class=\"mi\">308</span><span class=\"p\">)</span>\n</pre></div>", "type": "rendered"}, "created_on": "2020-02-13T21:47:13.683885+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2020-02-13T21:47:13.695941+00:00", "type": "pullrequest_comment", "id": 135887721}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-rendering/pullrequests/234/comments/135702312.json"}, "html": {"href": "#!/ignitionrobotics/ign-rendering/pull-requests/234/_/diff#comment-135702312"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 234, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-rendering/pullrequests/234.json"}, "html": {"href": "#!/ignitionrobotics/ign-rendering/pull-requests/234"}}, "title": "Prevent flaky crash"}, "content": {"raw": "I managed to catch this crash in gdb with stacktrace: \n\n```\nInvalid parameter at line 374 (@foreach). 'hlms_lights_directional' is not a number nor a variable\nterminate called after throwing an instance of 'Ogre::RenderingAPIException'\n  what():  OGRE EXCEPTION(3:RenderingAPIException): Fragment Program 536904192PixelShader_ps failed to compile. See compile log above for details. in GLSLShader::compile at /var/lib/jenkins/workspace/ogre-2.1-debbuilder/repo/RenderSystems/GL3Plus/src/GLSL/OgreGLSLShader.cpp (line 308)\n\nThread 15 \"ignition::gazeb\" received signal SIGABRT, Aborted.\n[Switching to Thread 0x7fff95c74700 (LWP 32581)]\n__GI_raise (sig=sig@entry=6) at ../sysdeps/unix/sysv/linux/raise.c:51\n51\t../sysdeps/unix/sysv/linux/raise.c: No such file or directory.\n(gdb) up\n#1  0x00007ffff7573801 in __GI_abort () at abort.c:79\n79\tabort.c: No such file or directory.\n(gdb) \n#2  0x00007ffff0b9e87e in ?? () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n(gdb) \n#3  0x00007ffff0baa486 in ?? () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n(gdb) \n#4  0x00007ffff0baa4f1 in std::terminate() () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n(gdb) \n#5  0x00007ffff0baa745 in __cxa_throw () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n(gdb) \n#6  0x00007fff8f271b11 in Ogre::GLSLShader::compile(bool) () from /usr/lib/x86_64-linux-gnu/OGRE-2.1/OGRE/RenderSystem_GL3Plus.so\n(gdb) \n#7  0x00007fff8f25d5d6 in Ogre::GLSLMonolithicProgram::compileAndLink() () from /usr/lib/x86_64-linux-gnu/OGRE-2.1/OGRE/RenderSystem_GL3Plus.so\n(gdb) \n#8  0x00007fff8f25d229 in Ogre::GLSLMonolithicProgram::activate() () from /usr/lib/x86_64-linux-gnu/OGRE-2.1/OGRE/RenderSystem_GL3Plus.so\n(gdb) \n#9  0x00007fff8f25ef99 in Ogre::GLSLMonolithicProgramManager::getActiveMonolithicProgram() () from /usr/lib/x86_64-linux-gnu/OGRE-2.1/OGRE/RenderSystem_GL3Plus.so\n(gdb) \n#10 0x00007fff8f2a80f5 in Ogre::GL3PlusRenderSystem::_setPipelineStateObject(Ogre::HlmsPso const*) () from /usr/lib/x86_64-linux-gnu/OGRE-2.1/OGRE/RenderSystem_GL3Plus.so\n(gdb) \n#11 0x00007fff945a9901 in Ogre::HlmsPbs::createShaderCacheEntry(unsigned int, Ogre::HlmsCache const&, unsigned int, Ogre::QueuedRenderable const&) () from /usr/lib/x86_64-linux-gnu/libOgreHlmsPbs.so.2.1.0\n(gdb) \n#12 0x00007fff94ae4d34 in Ogre::RenderQueue::renderGL3(bool, bool, Ogre::HlmsCache*, Ogre::RenderQueue::RenderQueueGroup const&, Ogre::IndirectBufferPacked*, unsigned char*, unsigned char*) ()\n   from /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n(gdb) \n#13 0x00007fff94ae74a9 in Ogre::RenderQueue::render(Ogre::RenderSystem*, unsigned char, unsigned char, bool, bool) () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n(gdb) \n#14 0x00007fff94b2e802 in Ogre::SceneManager::_renderPhase02(Ogre::Camera*, Ogre::Camera const*, Ogre::Viewport*, unsigned char, unsigned char, bool) () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n(gdb) \n#15 0x00007fff94948716 in Ogre::Camera::_renderScenePhase02(Ogre::Camera const*, Ogre::Viewport*, unsigned char, unsigned char, bool) () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n(gdb) \n#16 0x00007fff94b019b9 in Ogre::RenderTarget::_updateViewportRenderPhase02(Ogre::Viewport*, Ogre::Camera*, Ogre::Camera const*, unsigned char, unsigned char, bool) ()\n   from /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n(gdb) \n#17 0x00007fff94c599ca in Ogre::CompositorPassScene::execute(Ogre::Camera const*) () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n(gdb) \n#18 0x00007fff94c34c67 in Ogre::CompositorNode::_update(Ogre::Camera const*, Ogre::SceneManager*) () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n(gdb) \n#19 0x00007fff94c40f57 in Ogre::CompositorShadowNode::_update(Ogre::Camera*, Ogre::Camera const*, Ogre::SceneManager*) () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n(gdb) \n#20 0x00007fff94c5988d in Ogre::CompositorPassScene::execute(Ogre::Camera const*) () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n(gdb) \n#21 0x00007fff94c34c67 in Ogre::CompositorNode::_update(Ogre::Camera const*, Ogre::SceneManager*) () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n(gdb) \n#22 0x00007fff94c478ca in Ogre::CompositorWorkspace::_update() () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n(gdb) \n#23 0x00007fff94c2f3c1 in Ogre::CompositorManager2::_updateImplementation(Ogre::SceneManagerEnumerator&, Ogre::HlmsManager*) () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n(gdb) \n#24 0x00007fff94b20f95 in Ogre::Root::_updateAllRenderTargets() () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n(gdb) \n#25 0x00007fff94b210fc in Ogre::Root::renderOneFrame() () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n(gdb) \n\n#26 0x00007fff950f77a5 in ignition::rendering::v2::Ogre2RenderTarget::Render (this=0x7fff886e2e70) at /home/john/ign-ws/src/ign-rendering/ogre2/src/Ogre2RenderTarget.cc:173\n173\t  engine->OgreRoot()->renderOneFrame();\n(gdb) \n\n#27 0x00007fff950ad3f6 in ignition::rendering::v2::BaseCamera<ignition::rendering::v2::Ogre2Sensor>::Update (this=0x7fff886c39f0) at /usr/include/c++/8/ext/atomicity.h:82\n82\t      return __exchange_and_add(__mem, __val);\n(gdb) \n#28 0x00007fffac58451d in ignition::gazebo::v2::IgnRenderer::Render (this=0x555556fc5c00) at /usr/include/c++/8/bits/shared_ptr_base.h:1018\n1018\t      _M_get() const noexcept\n(gdb) \n#29 0x00007fffac585276 in ignition::gazebo::v2::RenderThread::RenderNext (this=0x555556fc5be0) at /home/john/ign-ws/src/ign-gazebo/src/gui/plugins/scene3d/Scene3D.cc:1317\n1317\t  this->ignRenderer.Render();\n(gdb) \n#30 0x00007ffff119f0c2 in QObject::event(QEvent*) () from /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n(gdb) \n#31 0x00007ffff116f76a in QCoreApplication::notify(QObject*, QEvent*) () from /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n(gdb) up\n#32 0x00007ffff116f8d8 in QCoreApplication::notifyInternal2(QObject*, QEvent*) () from /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n(gdb) \n#33 0x00007ffff117204d in QCoreApplicationPrivate::sendPostedEvents(QObject*, int, QThreadData*) () from /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n(gdb) \n#34 0x00007ffff11c9263 in ?? () from /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n(gdb) \n#35 0x00007fffed86b417 in g_main_context_dispatch () from /usr/lib/x86_64-linux-gnu/libglib-2.0.so.0\n(gdb) \n#36 0x00007fffed86b650 in ?? () from /usr/lib/x86_64-linux-gnu/libglib-2.0.so.0\n(gdb) \n#37 0x00007fffed86b6dc in g_main_context_iteration () from /usr/lib/x86_64-linux-gnu/libglib-2.0.so.0\n(gdb) \n#38 0x00007ffff11c888f in QEventDispatcherGlib::processEvents(QFlags<QEventLoop::ProcessEventsFlag>) () from /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n(gdb) \n#39 0x00007ffff116d90a in QEventLoop::exec(QFlags<QEventLoop::ProcessEventsFlag>) () from /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n(gdb) \n#40 0x00007ffff0f8c23a in QThread::exec() () from /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n(gdb) \n#41 0x00007ffff0f9117d in ?? () from /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n(gdb) \n#42 0x00007ffff731b6db in start_thread (arg=0x7fff95c74700) at pthread_create.c:463\n463\tpthread_create.c: No such file or directory.\n(gdb) \n#43 0x00007ffff765488f in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:95\n95\t../sysdeps/unix/sysv/linux/x86_64/clone.S: No such file or directory.\n```\n\n\u200c", "markup": "markdown", "html": "<p>I managed to catch this crash in gdb with stacktrace: </p>\n<div class=\"codehilite\"><pre><span></span>Invalid parameter at line 374 (@foreach). &#39;hlms_lights_directional&#39; is not a number nor a variable\nterminate called after throwing an instance of &#39;Ogre::RenderingAPIException&#39;\n  what():  OGRE EXCEPTION(3:RenderingAPIException): Fragment Program 536904192PixelShader_ps failed to compile. See compile log above for details. in GLSLShader::compile at /var/lib/jenkins/workspace/ogre-2.1-debbuilder/repo/RenderSystems/GL3Plus/src/GLSL/OgreGLSLShader.cpp (line 308)\n\nThread 15 &quot;ignition::gazeb&quot; received signal SIGABRT, Aborted.\n[Switching to Thread 0x7fff95c74700 (LWP 32581)]\n__GI_raise (sig=sig@entry=6) at ../sysdeps/unix/sysv/linux/raise.c:51\n51  ../sysdeps/unix/sysv/linux/raise.c: No such file or directory.\n(gdb) up\n#1  0x00007ffff7573801 in __GI_abort () at abort.c:79\n79  abort.c: No such file or directory.\n(gdb) \n#2  0x00007ffff0b9e87e in ?? () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n(gdb) \n#3  0x00007ffff0baa486 in ?? () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n(gdb) \n#4  0x00007ffff0baa4f1 in std::terminate() () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n(gdb) \n#5  0x00007ffff0baa745 in __cxa_throw () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n(gdb) \n#6  0x00007fff8f271b11 in Ogre::GLSLShader::compile(bool) () from /usr/lib/x86_64-linux-gnu/OGRE-2.1/OGRE/RenderSystem_GL3Plus.so\n(gdb) \n#7  0x00007fff8f25d5d6 in Ogre::GLSLMonolithicProgram::compileAndLink() () from /usr/lib/x86_64-linux-gnu/OGRE-2.1/OGRE/RenderSystem_GL3Plus.so\n(gdb) \n#8  0x00007fff8f25d229 in Ogre::GLSLMonolithicProgram::activate() () from /usr/lib/x86_64-linux-gnu/OGRE-2.1/OGRE/RenderSystem_GL3Plus.so\n(gdb) \n#9  0x00007fff8f25ef99 in Ogre::GLSLMonolithicProgramManager::getActiveMonolithicProgram() () from /usr/lib/x86_64-linux-gnu/OGRE-2.1/OGRE/RenderSystem_GL3Plus.so\n(gdb) \n#10 0x00007fff8f2a80f5 in Ogre::GL3PlusRenderSystem::_setPipelineStateObject(Ogre::HlmsPso const*) () from /usr/lib/x86_64-linux-gnu/OGRE-2.1/OGRE/RenderSystem_GL3Plus.so\n(gdb) \n#11 0x00007fff945a9901 in Ogre::HlmsPbs::createShaderCacheEntry(unsigned int, Ogre::HlmsCache const&amp;, unsigned int, Ogre::QueuedRenderable const&amp;) () from /usr/lib/x86_64-linux-gnu/libOgreHlmsPbs.so.2.1.0\n(gdb) \n#12 0x00007fff94ae4d34 in Ogre::RenderQueue::renderGL3(bool, bool, Ogre::HlmsCache*, Ogre::RenderQueue::RenderQueueGroup const&amp;, Ogre::IndirectBufferPacked*, unsigned char*, unsigned char*) ()\n   from /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n(gdb) \n#13 0x00007fff94ae74a9 in Ogre::RenderQueue::render(Ogre::RenderSystem*, unsigned char, unsigned char, bool, bool) () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n(gdb) \n#14 0x00007fff94b2e802 in Ogre::SceneManager::_renderPhase02(Ogre::Camera*, Ogre::Camera const*, Ogre::Viewport*, unsigned char, unsigned char, bool) () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n(gdb) \n#15 0x00007fff94948716 in Ogre::Camera::_renderScenePhase02(Ogre::Camera const*, Ogre::Viewport*, unsigned char, unsigned char, bool) () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n(gdb) \n#16 0x00007fff94b019b9 in Ogre::RenderTarget::_updateViewportRenderPhase02(Ogre::Viewport*, Ogre::Camera*, Ogre::Camera const*, unsigned char, unsigned char, bool) ()\n   from /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n(gdb) \n#17 0x00007fff94c599ca in Ogre::CompositorPassScene::execute(Ogre::Camera const*) () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n(gdb) \n#18 0x00007fff94c34c67 in Ogre::CompositorNode::_update(Ogre::Camera const*, Ogre::SceneManager*) () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n(gdb) \n#19 0x00007fff94c40f57 in Ogre::CompositorShadowNode::_update(Ogre::Camera*, Ogre::Camera const*, Ogre::SceneManager*) () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n(gdb) \n#20 0x00007fff94c5988d in Ogre::CompositorPassScene::execute(Ogre::Camera const*) () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n(gdb) \n#21 0x00007fff94c34c67 in Ogre::CompositorNode::_update(Ogre::Camera const*, Ogre::SceneManager*) () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n(gdb) \n#22 0x00007fff94c478ca in Ogre::CompositorWorkspace::_update() () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n(gdb) \n#23 0x00007fff94c2f3c1 in Ogre::CompositorManager2::_updateImplementation(Ogre::SceneManagerEnumerator&amp;, Ogre::HlmsManager*) () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n(gdb) \n#24 0x00007fff94b20f95 in Ogre::Root::_updateAllRenderTargets() () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n(gdb) \n#25 0x00007fff94b210fc in Ogre::Root::renderOneFrame() () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n(gdb) \n\n#26 0x00007fff950f77a5 in ignition::rendering::v2::Ogre2RenderTarget::Render (this=0x7fff886e2e70) at /home/john/ign-ws/src/ign-rendering/ogre2/src/Ogre2RenderTarget.cc:173\n173   engine-&gt;OgreRoot()-&gt;renderOneFrame();\n(gdb) \n\n#27 0x00007fff950ad3f6 in ignition::rendering::v2::BaseCamera&lt;ignition::rendering::v2::Ogre2Sensor&gt;::Update (this=0x7fff886c39f0) at /usr/include/c++/8/ext/atomicity.h:82\n82        return __exchange_and_add(__mem, __val);\n(gdb) \n#28 0x00007fffac58451d in ignition::gazebo::v2::IgnRenderer::Render (this=0x555556fc5c00) at /usr/include/c++/8/bits/shared_ptr_base.h:1018\n1018          _M_get() const noexcept\n(gdb) \n#29 0x00007fffac585276 in ignition::gazebo::v2::RenderThread::RenderNext (this=0x555556fc5be0) at /home/john/ign-ws/src/ign-gazebo/src/gui/plugins/scene3d/Scene3D.cc:1317\n1317      this-&gt;ignRenderer.Render();\n(gdb) \n#30 0x00007ffff119f0c2 in QObject::event(QEvent*) () from /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n(gdb) \n#31 0x00007ffff116f76a in QCoreApplication::notify(QObject*, QEvent*) () from /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n(gdb) up\n#32 0x00007ffff116f8d8 in QCoreApplication::notifyInternal2(QObject*, QEvent*) () from /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n(gdb) \n#33 0x00007ffff117204d in QCoreApplicationPrivate::sendPostedEvents(QObject*, int, QThreadData*) () from /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n(gdb) \n#34 0x00007ffff11c9263 in ?? () from /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n(gdb) \n#35 0x00007fffed86b417 in g_main_context_dispatch () from /usr/lib/x86_64-linux-gnu/libglib-2.0.so.0\n(gdb) \n#36 0x00007fffed86b650 in ?? () from /usr/lib/x86_64-linux-gnu/libglib-2.0.so.0\n(gdb) \n#37 0x00007fffed86b6dc in g_main_context_iteration () from /usr/lib/x86_64-linux-gnu/libglib-2.0.so.0\n(gdb) \n#38 0x00007ffff11c888f in QEventDispatcherGlib::processEvents(QFlags&lt;QEventLoop::ProcessEventsFlag&gt;) () from /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n(gdb) \n#39 0x00007ffff116d90a in QEventLoop::exec(QFlags&lt;QEventLoop::ProcessEventsFlag&gt;) () from /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n(gdb) \n#40 0x00007ffff0f8c23a in QThread::exec() () from /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n(gdb) \n#41 0x00007ffff0f9117d in ?? () from /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n(gdb) \n#42 0x00007ffff731b6db in start_thread (arg=0x7fff95c74700) at pthread_create.c:463\n463 pthread_create.c: No such file or directory.\n(gdb) \n#43 0x00007ffff765488f in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:95\n95  ../sysdeps/unix/sysv/linux/x86_64/clone.S: No such file or directory.\n</pre></div>\n\n\n<p>\u200c</p>", "type": "rendered"}, "created_on": "2020-02-13T01:05:36.845090+00:00", "user": {"display_name": "John Shepherd", "uuid": "{c4803212-effe-4921-9323-02cd01b8bc9c}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc4803212-effe-4921-9323-02cd01b8bc9c%7D"}, "html": {"href": "https://bitbucket.org/%7Bc4803212-effe-4921-9323-02cd01b8bc9c%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5d114073a232e50bd6f26983/41da687b-99ee-4c7e-a527-0202b6dc55f5/128"}}, "nickname": "John Shepherd", "type": "user", "account_id": "5d114073a232e50bd6f26983"}, "updated_on": "2020-02-13T01:05:36.865921+00:00", "type": "pullrequest_comment", "id": 135702312}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-rendering/pullrequests/234/comments/135703444.json"}, "html": {"href": "#!/ignitionrobotics/ign-rendering/pull-requests/234/_/diff#comment-135703444"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 234, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-rendering/pullrequests/234.json"}, "html": {"href": "#!/ignitionrobotics/ign-rendering/pull-requests/234"}}, "title": "Prevent flaky crash"}, "content": {"raw": "While running this branch, I just got a crash somewhere else. This is clearly not the fix, it's just pushing the problem to another place :smile: \n\n~~~\nInvalid parameter at line 387 (@foreach). 'hlms_lights_point' is not a number nor a variable\nterminate called after throwing an instance of 'Ogre::RenderingAPIException'\n  what():  OGRE EXCEPTION(3:RenderingAPIException): Fragment Program 536904064PixelShader_ps failed to compile. See compile log above for details. in GLSLShader::compile at /var/lib/jenkins/workspace/ogre-2.1-debbuilder/repo/RenderSystems/GL3Plus/src/GLSL/OgreGLSLShader.cpp (line 308)\n~~~", "markup": "markdown", "html": "<p>While running this branch, I just got a crash somewhere else. This is clearly not the fix, it's just pushing the problem to another place <img class=\"emoji\" src=\"data/pf-emoji-service--cdn.us-east-1.prod.public.atl-paas.net/standard/551c9814-1d37-4573-819d-afab3afeaf32/48x48/1f604.png\" alt=\"\ud83d\ude04\" title=\":smile:\" data-emoji-short-name=\":smile:\" /> </p>\n<div class=\"codehilite\"><pre><span></span>Invalid parameter at line 387 (@foreach). &#39;hlms_lights_point&#39; is not a number nor a variable\nterminate called after throwing an instance of &#39;Ogre::RenderingAPIException&#39;\n  what():  OGRE EXCEPTION(3:RenderingAPIException): Fragment Program 536904064PixelShader_ps failed to compile. See compile log above for details. in GLSLShader::compile at /var/lib/jenkins/workspace/ogre-2.1-debbuilder/repo/RenderSystems/GL3Plus/src/GLSL/OgreGLSLShader.cpp (line 308)\n</pre></div>", "type": "rendered"}, "created_on": "2020-02-13T01:26:41.601484+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2020-02-13T01:26:41.614832+00:00", "type": "pullrequest_comment", "id": 135703444}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-rendering/pullrequests/234/comments/135703770.json"}, "html": {"href": "#!/ignitionrobotics/ign-rendering/pull-requests/234/_/diff#comment-135703770"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 234, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-rendering/pullrequests/234.json"}, "html": {"href": "#!/ignitionrobotics/ign-rendering/pull-requests/234"}}, "title": "Prevent flaky crash"}, "content": {"raw": "Yeah, I think there\u2019s some underlying issue\u2026  I\u2019ve gotten multiple Ogre related crashes, mostly referencing `hlm_lights_point` but sometimes giving other error messages.  I\u2019ll continue running in gdb and hopefully be able to catch more stacktraces of the other Ogre crashes.", "markup": "markdown", "html": "<p>Yeah, I think there\u2019s some underlying issue\u2026  I\u2019ve gotten multiple Ogre related crashes, mostly referencing <code>hlm_lights_point</code> but sometimes giving other error messages.  I\u2019ll continue running in gdb and hopefully be able to catch more stacktraces of the other Ogre crashes.</p>", "type": "rendered"}, "created_on": "2020-02-13T01:33:12.561115+00:00", "user": {"display_name": "John Shepherd", "uuid": "{c4803212-effe-4921-9323-02cd01b8bc9c}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc4803212-effe-4921-9323-02cd01b8bc9c%7D"}, "html": {"href": "https://bitbucket.org/%7Bc4803212-effe-4921-9323-02cd01b8bc9c%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5d114073a232e50bd6f26983/41da687b-99ee-4c7e-a527-0202b6dc55f5/128"}}, "nickname": "John Shepherd", "type": "user", "account_id": "5d114073a232e50bd6f26983"}, "updated_on": "2020-02-13T01:33:12.569111+00:00", "type": "pullrequest_comment", "id": 135703770}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-rendering/pullrequests/234/comments/135705128.json"}, "html": {"href": "#!/ignitionrobotics/ign-rendering/pull-requests/234/_/diff#comment-135705128"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 234, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-rendering/pullrequests/234.json"}, "html": {"href": "#!/ignitionrobotics/ign-rendering/pull-requests/234"}}, "title": "Prevent flaky crash"}, "content": {"raw": "Pasting likely related Ogre bug stacktrace for reference:\n\n```\nruby: /var/lib/jenkins/workspace/ogre-2.1-debbuilder/repo/Components/Hlms/Pbs/src/OgreHlmsPbs.cpp:1700: virtual Ogre::HlmsCache Ogre::HlmsPbs::preparePassHash(const Ogre::CompositorShadowNode*, bool, bool, Ogre::SceneManager*): Assertion `(size_t)(passBufferPtr - startupPtr) * 4u == mapSize' failed.\n\nThread 15 \"ignition::gazeb\" received signal SIGABRT, Aborted.\n[Switching to Thread 0x7fff95c74700 (LWP 29014)]\n__GI_raise (sig=sig@entry=6) at ../sysdeps/unix/sysv/linux/raise.c:51\n51\t../sysdeps/unix/sysv/linux/raise.c: No such file or directory.\n(gdb) up\n#1  0x00007ffff7573801 in __GI_abort () at abort.c:79\n79\tabort.c: No such file or directory.\n(gdb) \n#2  0x00007ffff756339a in __assert_fail_base (fmt=0x7ffff76ea7d8 \"%s%s%s:%u: %s%sAssertion `%s' failed.\\n%n\", assertion=assertion@entry=0x7fff945b1308 \"(size_t)(passBufferPtr - startupPtr) * 4u == mapSize\", \n    file=file@entry=0x7fff945b0ba0 \"/var/lib/jenkins/workspace/ogre-2.1-debbuilder/repo/Components/Hlms/Pbs/src/OgreHlmsPbs.cpp\", line=line@entry=1700, \n    function=function@entry=0x7fff945b1f40 \"virtual Ogre::HlmsCache Ogre::HlmsPbs::preparePassHash(const Ogre::CompositorShadowNode*, bool, bool, Ogre::SceneManager*)\") at assert.c:92\n92\tassert.c: No such file or directory.\n(gdb) \n#3  0x00007ffff7563412 in __GI___assert_fail (assertion=0x7fff945b1308 \"(size_t)(passBufferPtr - startupPtr) * 4u == mapSize\", \n    file=0x7fff945b0ba0 \"/var/lib/jenkins/workspace/ogre-2.1-debbuilder/repo/Components/Hlms/Pbs/src/OgreHlmsPbs.cpp\", line=1700, \n    function=0x7fff945b1f40 \"virtual Ogre::HlmsCache Ogre::HlmsPbs::preparePassHash(const Ogre::CompositorShadowNode*, bool, bool, Ogre::SceneManager*)\") at assert.c:101\n101\tin assert.c\n(gdb) \n#4  0x00007fff94588c48 in Ogre::HlmsPbs::preparePassHash(Ogre::CompositorShadowNode const*, bool, bool, Ogre::SceneManager*) () from /usr/lib/x86_64-linux-gnu/libOgreHlmsPbs.so.2.1.0\n(gdb) \n#5  0x00007fff94ac6e70 in Ogre::RenderQueue::render(Ogre::RenderSystem*, unsigned char, unsigned char, bool, bool) () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n(gdb) \n#6  0x00007fff94b0e802 in Ogre::SceneManager::_renderPhase02(Ogre::Camera*, Ogre::Camera const*, Ogre::Viewport*, unsigned char, unsigned char, bool) () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n(gdb) \n#7  0x00007fff94928716 in Ogre::Camera::_renderScenePhase02(Ogre::Camera const*, Ogre::Viewport*, unsigned char, unsigned char, bool) () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n(gdb) \n#8  0x00007fff94ae19b9 in Ogre::RenderTarget::_updateViewportRenderPhase02(Ogre::Viewport*, Ogre::Camera*, Ogre::Camera const*, unsigned char, unsigned char, bool) ()\n   from /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n(gdb) \n#9  0x00007fff94c399ca in Ogre::CompositorPassScene::execute(Ogre::Camera const*) () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n(gdb) \n#10 0x00007fff94c14c67 in Ogre::CompositorNode::_update(Ogre::Camera const*, Ogre::SceneManager*) () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n(gdb) \n#11 0x00007fff94c278ca in Ogre::CompositorWorkspace::_update() () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n(gdb) \n#12 0x00007fff94c0f3c1 in Ogre::CompositorManager2::_updateImplementation(Ogre::SceneManagerEnumerator&, Ogre::HlmsManager*) () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n(gdb) \n#13 0x00007fff94b00f95 in Ogre::Root::_updateAllRenderTargets() () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n(gdb) \n#14 0x00007fff94b010fc in Ogre::Root::renderOneFrame() () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n(gdb) \n\n#15 0x00007fff950d77a5 in ignition::rendering::v2::Ogre2RenderTarget::Render (this=0x7fff886e5fb0) at /home/john/ign-ws/src/ign-rendering/ogre2/src/Ogre2RenderTarget.cc:173\n173\t  engine->OgreRoot()->renderOneFrame();\n(gdb) \n\n#16 0x00007fff9508d3f6 in ignition::rendering::v2::BaseCamera<ignition::rendering::v2::Ogre2Sensor>::Update (this=0x7fff886c3a20) at /usr/include/c++/8/ext/atomicity.h:82\n82\t      return __exchange_and_add(__mem, __val);\n(gdb) \n\n#17 0x00007fffac56451d in ignition::gazebo::v2::IgnRenderer::Render (this=0x555556fc76a0) at /usr/include/c++/8/bits/shared_ptr_base.h:1018\n1018\t      _M_get() const noexcept\n(gdb) \n#18 0x00007fffac565276 in ignition::gazebo::v2::RenderThread::RenderNext (this=0x555556fc7680) at /home/john/ign-ws/src/ign-gazebo/src/gui/plugins/scene3d/Scene3D.cc:1323\n1323\t  this->ignRenderer.Render();\n(gdb) \n#19 0x00007ffff117e0c2 in QObject::event(QEvent*) () from /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n(gdb) \n#20 0x00007ffff114e76a in QCoreApplication::notify(QObject*, QEvent*) () from /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n(gdb) \n#21 0x00007ffff114e8d8 in QCoreApplication::notifyInternal2(QObject*, QEvent*) () from /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n(gdb) \n#22 0x00007ffff115104d in QCoreApplicationPrivate::sendPostedEvents(QObject*, int, QThreadData*) () from /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n(gdb) \n#23 0x00007ffff11a8263 in ?? () from /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n(gdb) \n#24 0x00007fffed84a417 in g_main_context_dispatch () from /usr/lib/x86_64-linux-gnu/libglib-2.0.so.0\n(gdb) \n#25 0x00007fffed84a650 in ?? () from /usr/lib/x86_64-linux-gnu/libglib-2.0.so.0\n(gdb) \n#26 0x00007fffed84a6dc in g_main_context_iteration () from /usr/lib/x86_64-linux-gnu/libglib-2.0.so.0\n(gdb) \n#27 0x00007ffff11a788f in QEventDispatcherGlib::processEvents(QFlags<QEventLoop::ProcessEventsFlag>) () from /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n(gdb) \n#28 0x00007ffff114c90a in QEventLoop::exec(QFlags<QEventLoop::ProcessEventsFlag>) () from /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n(gdb) \n#29 0x00007ffff0f6b23a in QThread::exec() () from /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n(gdb) \n#30 0x00007ffff0f7017d in ?? () from /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n(gdb) \n#31 0x00007ffff731b6db in start_thread (arg=0x7fff95c74700) at pthread_create.c:463\n463\tpthread_create.c: No such file or directory.\n(gdb) \n#32 0x00007ffff765488f in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:95\n95\t../sysdeps/unix/sysv/linux/x86_64/clone.S: No such file or directory.\n(gdb) \n```\n\n\u200c", "markup": "markdown", "html": "<p>Pasting likely related Ogre bug stacktrace for reference:</p>\n<div class=\"codehilite\"><pre><span></span>ruby: /var/lib/jenkins/workspace/ogre-2.1-debbuilder/repo/Components/Hlms/Pbs/src/OgreHlmsPbs.cpp:1700: virtual Ogre::HlmsCache Ogre::HlmsPbs::preparePassHash(const Ogre::CompositorShadowNode*, bool, bool, Ogre::SceneManager*): Assertion `(size_t)(passBufferPtr - startupPtr) * 4u == mapSize&#39; failed.\n\nThread 15 &quot;ignition::gazeb&quot; received signal SIGABRT, Aborted.\n[Switching to Thread 0x7fff95c74700 (LWP 29014)]\n__GI_raise (sig=sig@entry=6) at ../sysdeps/unix/sysv/linux/raise.c:51\n51  ../sysdeps/unix/sysv/linux/raise.c: No such file or directory.\n(gdb) up\n#1  0x00007ffff7573801 in __GI_abort () at abort.c:79\n79  abort.c: No such file or directory.\n(gdb) \n#2  0x00007ffff756339a in __assert_fail_base (fmt=0x7ffff76ea7d8 &quot;%s%s%s:%u: %s%sAssertion `%s&#39; failed.\\n%n&quot;, assertion=assertion@entry=0x7fff945b1308 &quot;(size_t)(passBufferPtr - startupPtr) * 4u == mapSize&quot;, \n    file=file@entry=0x7fff945b0ba0 &quot;/var/lib/jenkins/workspace/ogre-2.1-debbuilder/repo/Components/Hlms/Pbs/src/OgreHlmsPbs.cpp&quot;, line=line@entry=1700, \n    function=function@entry=0x7fff945b1f40 &quot;virtual Ogre::HlmsCache Ogre::HlmsPbs::preparePassHash(const Ogre::CompositorShadowNode*, bool, bool, Ogre::SceneManager*)&quot;) at assert.c:92\n92  assert.c: No such file or directory.\n(gdb) \n#3  0x00007ffff7563412 in __GI___assert_fail (assertion=0x7fff945b1308 &quot;(size_t)(passBufferPtr - startupPtr) * 4u == mapSize&quot;, \n    file=0x7fff945b0ba0 &quot;/var/lib/jenkins/workspace/ogre-2.1-debbuilder/repo/Components/Hlms/Pbs/src/OgreHlmsPbs.cpp&quot;, line=1700, \n    function=0x7fff945b1f40 &quot;virtual Ogre::HlmsCache Ogre::HlmsPbs::preparePassHash(const Ogre::CompositorShadowNode*, bool, bool, Ogre::SceneManager*)&quot;) at assert.c:101\n101 in assert.c\n(gdb) \n#4  0x00007fff94588c48 in Ogre::HlmsPbs::preparePassHash(Ogre::CompositorShadowNode const*, bool, bool, Ogre::SceneManager*) () from /usr/lib/x86_64-linux-gnu/libOgreHlmsPbs.so.2.1.0\n(gdb) \n#5  0x00007fff94ac6e70 in Ogre::RenderQueue::render(Ogre::RenderSystem*, unsigned char, unsigned char, bool, bool) () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n(gdb) \n#6  0x00007fff94b0e802 in Ogre::SceneManager::_renderPhase02(Ogre::Camera*, Ogre::Camera const*, Ogre::Viewport*, unsigned char, unsigned char, bool) () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n(gdb) \n#7  0x00007fff94928716 in Ogre::Camera::_renderScenePhase02(Ogre::Camera const*, Ogre::Viewport*, unsigned char, unsigned char, bool) () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n(gdb) \n#8  0x00007fff94ae19b9 in Ogre::RenderTarget::_updateViewportRenderPhase02(Ogre::Viewport*, Ogre::Camera*, Ogre::Camera const*, unsigned char, unsigned char, bool) ()\n   from /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n(gdb) \n#9  0x00007fff94c399ca in Ogre::CompositorPassScene::execute(Ogre::Camera const*) () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n(gdb) \n#10 0x00007fff94c14c67 in Ogre::CompositorNode::_update(Ogre::Camera const*, Ogre::SceneManager*) () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n(gdb) \n#11 0x00007fff94c278ca in Ogre::CompositorWorkspace::_update() () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n(gdb) \n#12 0x00007fff94c0f3c1 in Ogre::CompositorManager2::_updateImplementation(Ogre::SceneManagerEnumerator&amp;, Ogre::HlmsManager*) () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n(gdb) \n#13 0x00007fff94b00f95 in Ogre::Root::_updateAllRenderTargets() () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n(gdb) \n#14 0x00007fff94b010fc in Ogre::Root::renderOneFrame() () from /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n(gdb) \n\n#15 0x00007fff950d77a5 in ignition::rendering::v2::Ogre2RenderTarget::Render (this=0x7fff886e5fb0) at /home/john/ign-ws/src/ign-rendering/ogre2/src/Ogre2RenderTarget.cc:173\n173   engine-&gt;OgreRoot()-&gt;renderOneFrame();\n(gdb) \n\n#16 0x00007fff9508d3f6 in ignition::rendering::v2::BaseCamera&lt;ignition::rendering::v2::Ogre2Sensor&gt;::Update (this=0x7fff886c3a20) at /usr/include/c++/8/ext/atomicity.h:82\n82        return __exchange_and_add(__mem, __val);\n(gdb) \n\n#17 0x00007fffac56451d in ignition::gazebo::v2::IgnRenderer::Render (this=0x555556fc76a0) at /usr/include/c++/8/bits/shared_ptr_base.h:1018\n1018          _M_get() const noexcept\n(gdb) \n#18 0x00007fffac565276 in ignition::gazebo::v2::RenderThread::RenderNext (this=0x555556fc7680) at /home/john/ign-ws/src/ign-gazebo/src/gui/plugins/scene3d/Scene3D.cc:1323\n1323      this-&gt;ignRenderer.Render();\n(gdb) \n#19 0x00007ffff117e0c2 in QObject::event(QEvent*) () from /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n(gdb) \n#20 0x00007ffff114e76a in QCoreApplication::notify(QObject*, QEvent*) () from /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n(gdb) \n#21 0x00007ffff114e8d8 in QCoreApplication::notifyInternal2(QObject*, QEvent*) () from /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n(gdb) \n#22 0x00007ffff115104d in QCoreApplicationPrivate::sendPostedEvents(QObject*, int, QThreadData*) () from /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n(gdb) \n#23 0x00007ffff11a8263 in ?? () from /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n(gdb) \n#24 0x00007fffed84a417 in g_main_context_dispatch () from /usr/lib/x86_64-linux-gnu/libglib-2.0.so.0\n(gdb) \n#25 0x00007fffed84a650 in ?? () from /usr/lib/x86_64-linux-gnu/libglib-2.0.so.0\n(gdb) \n#26 0x00007fffed84a6dc in g_main_context_iteration () from /usr/lib/x86_64-linux-gnu/libglib-2.0.so.0\n(gdb) \n#27 0x00007ffff11a788f in QEventDispatcherGlib::processEvents(QFlags&lt;QEventLoop::ProcessEventsFlag&gt;) () from /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n(gdb) \n#28 0x00007ffff114c90a in QEventLoop::exec(QFlags&lt;QEventLoop::ProcessEventsFlag&gt;) () from /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n(gdb) \n#29 0x00007ffff0f6b23a in QThread::exec() () from /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n(gdb) \n#30 0x00007ffff0f7017d in ?? () from /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n(gdb) \n#31 0x00007ffff731b6db in start_thread (arg=0x7fff95c74700) at pthread_create.c:463\n463 pthread_create.c: No such file or directory.\n(gdb) \n#32 0x00007ffff765488f in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:95\n95  ../sysdeps/unix/sysv/linux/x86_64/clone.S: No such file or directory.\n(gdb) \n</pre></div>\n\n\n<p>\u200c</p>", "type": "rendered"}, "created_on": "2020-02-13T01:59:37.738092+00:00", "user": {"display_name": "John Shepherd", "uuid": "{c4803212-effe-4921-9323-02cd01b8bc9c}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc4803212-effe-4921-9323-02cd01b8bc9c%7D"}, "html": {"href": "https://bitbucket.org/%7Bc4803212-effe-4921-9323-02cd01b8bc9c%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5d114073a232e50bd6f26983/41da687b-99ee-4c7e-a527-0202b6dc55f5/128"}}, "nickname": "John Shepherd", "type": "user", "account_id": "5d114073a232e50bd6f26983"}, "updated_on": "2020-02-13T01:59:37.744511+00:00", "type": "pullrequest_comment", "id": 135705128}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-rendering/pullrequests/234/comments/135706124.json"}, "html": {"href": "#!/ignitionrobotics/ign-rendering/pull-requests/234/_/diff#comment-135706124"}}, "parent": {"id": 135705128, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-rendering/pullrequests/234/comments/135705128.json"}, "html": {"href": "#!/ignitionrobotics/ign-rendering/pull-requests/234/_/diff#comment-135705128"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 234, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-rendering/pullrequests/234.json"}, "html": {"href": "#!/ignitionrobotics/ign-rendering/pull-requests/234"}}, "title": "Prevent flaky crash"}, "content": {"raw": "This is useful. Can you try commenting out this [whole block](#!/ignitionrobotics/ign-rendering/src/e5086aa412be5741ed583c7cc5b5767e352c632a/ogre2/src/Ogre2Scene.cc#lines-101) \\(shadows won\u2019t work correctly\\) and see if you\u2019re still able to get the crash. ", "markup": "markdown", "html": "<p>This is useful. Can you try commenting out this <a data-is-external-link=\"true\" href=\"#!/ignitionrobotics/ign-rendering/src/e5086aa412be5741ed583c7cc5b5767e352c632a/ogre2/src/Ogre2Scene.cc#lines-101\" rel=\"nofollow\">whole block</a> (shadows won\u2019t work correctly) and see if you\u2019re still able to get the crash. </p>", "type": "rendered"}, "created_on": "2020-02-13T02:21:03.699392+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "updated_on": "2020-02-13T02:21:03.706871+00:00", "type": "pullrequest_comment", "id": 135706124}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-rendering/pullrequests/234/comments/136884992.json"}, "html": {"href": "#!/ignitionrobotics/ign-rendering/pull-requests/234/_/diff#comment-136884992"}}, "parent": {"id": 135706124, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-rendering/pullrequests/234/comments/135706124.json"}, "html": {"href": "#!/ignitionrobotics/ign-rendering/pull-requests/234/_/diff#comment-135706124"}}, "depth": 2}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 234, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-rendering/pullrequests/234.json"}, "html": {"href": "#!/ignitionrobotics/ign-rendering/pull-requests/234"}}, "title": "Prevent flaky crash"}, "content": {"raw": "I was able to reproduce the crash with that entire block commented out. My backtrace looks different from John's though:\n\n```\nInvalid parameter at line 374 (@foreach). 'hlms_lights_directional' is not a number nor a variable\nterminate called after throwing an instance of 'Ogre::ItemIdentityException'\n  what():  OGRE EXCEPTION(5:ItemIdentityException): Parameter called f3dGrid does not exist.  in GpuProgramParameters::_findNamedConstantDefinition at /var/lib/jenkins/workspace/ogre-2.1-debbuilder/repo/OgreMain/src/OgreGpuProgramParams.cpp (line 2218)\n\nThread 13 \"ignition::gazeb\" received signal SIGABRT, Aborted.\n[Switching to Thread 0x7fffa31fe700 (LWP 8843)]\n__GI_raise (sig=sig@entry=6) at ../sysdeps/unix/sysv/linux/raise.c:51\n51      ../sysdeps/unix/sysv/linux/raise.c: No such file or directory.\n(gdb) bt\n#0  0x00007ffff7571e97 in __GI_raise (sig=sig@entry=6) at ../sysdeps/unix/sysv/linux/raise.c:51\n#1  0x00007ffff7573801 in __GI_abort () at abort.c:79\n#2  0x00007ffff1be0957 in  () at /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n#3  0x00007ffff1be6ab6 in  () at /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n#4  0x00007ffff1be6af1 in  () at /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n#5  0x00007ffff1be6d24 in  () at /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n#6  0x00007fffa1fa5a8e in  () at /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n#7  0x00007fffa202681b in Ogre::GpuProgramParameters::_findNamedConstantDefinition(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, bool) const () at /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n#8  0x00007fffa2026b7d in Ogre::GpuProgramParameters::setNamedConstant(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, int) ()\n    at /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n#9  0x00007fffa1c33260 in Ogre::HlmsPbs::createShaderCacheEntry(unsigned int, Ogre::HlmsCache const&, unsigned int, Ogre::QueuedRenderable const&) ()\n    at /usr/lib/x86_64-linux-gnu/libOgreHlmsPbs.so.2.1.0\n#10 0x00007fffa216ed34 in Ogre::RenderQueue::renderGL3(bool, bool, Ogre::HlmsCache*, Ogre::RenderQueue::RenderQueueGroup const&, Ogre::IndirectBufferPacked*, unsigned char*, unsigned char*) () at /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n#11 0x00007fffa21714a9 in Ogre::RenderQueue::render(Ogre::RenderSystem*, unsigned char, unsigned char, bool, bool) () at /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n#12 0x00007fffa21b8802 in Ogre::SceneManager::_renderPhase02(Ogre::Camera*, Ogre::Camera const*, Ogre::Viewport*, unsigned char, unsigned char, bool) ()\n    at /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n#13 0x00007fffa1fd2716 in Ogre::Camera::_renderScenePhase02(Ogre::Camera const*, Ogre::Viewport*, unsigned char, unsigned char, bool) ()\n    at /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n#14 0x00007fffa218b9b9 in Ogre::RenderTarget::_updateViewportRenderPhase02(Ogre::Viewport*, Ogre::Camera*, Ogre::Camera const*, unsigned char, unsigned char, bool) ()\n    at /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n#15 0x00007fffa22e39ca in Ogre::CompositorPassScene::execute(Ogre::Camera const*) () at /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n#16 0x00007fffa22bec67 in Ogre::CompositorNode::_update(Ogre::Camera const*, Ogre::SceneManager*) () at /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n#17 0x00007fffa22d18ca in Ogre::CompositorWorkspace::_update() () at /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n#18 0x00007fffa22b93c1 in Ogre::CompositorManager2::_updateImplementation(Ogre::SceneManagerEnumerator&, Ogre::HlmsManager*) ()\n    at /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n#19 0x00007fffa21aaf95 in Ogre::Root::_updateAllRenderTargets() () at /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n#20 0x00007fffa21ab0fc in Ogre::Root::renderOneFrame() () at /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n#21 0x00007fffa2781785 in ignition::rendering::v2::Ogre2RenderTarget::Render() (this=0x7fff982fedd0)\n    at /home/chapulina/blueprint_ws/src/ign-rendering/ogre2/src/Ogre2RenderTarget.cc:173\n#22 0x00007fffa27373d6 in ignition::rendering::v2::BaseCamera<ignition::rendering::v2::Ogre2Sensor>::Update() (this=0x7fff982cdce0) at /usr/include/c++/8/ext/atomicity.h:82\n#23 0x00007fffbc91236d in ignition::gazebo::v2::IgnRenderer::Render() (this=0x555556dfc530) at /usr/include/c++/8/bits/shared_ptr_base.h:1018\n#24 0x00007fffbc9130c6 in ignition::gazebo::v2::RenderThread::RenderNext() (this=0x555556dfc510)\n    at /home/chapulina/blueprint_ws/src/ign-gazebo/src/gui/plugins/scene3d/Scene3D.cc:1337\n#25 0x00007ffff2197122 in QObject::event(QEvent*) () at /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n#26 0x00007ffff216783a in QCoreApplication::notify(QObject*, QEvent*) () at /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n#27 0x00007ffff21679a8 in QCoreApplication::notifyInternal2(QObject*, QEvent*) () at /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n#28 0x00007ffff216a11d in QCoreApplicationPrivate::sendPostedEvents(QObject*, int, QThreadData*) () at /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n#29 0x00007ffff21c12c3 in  () at /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n---Type <return> to continue, or q <return> to quit---\n#30 0x00007fffeec36417 in g_main_context_dispatch () at /usr/lib/x86_64-linux-gnu/libglib-2.0.so.0\n#31 0x00007fffeec36650 in  () at /usr/lib/x86_64-linux-gnu/libglib-2.0.so.0\n#32 0x00007fffeec366dc in g_main_context_iteration () at /usr/lib/x86_64-linux-gnu/libglib-2.0.so.0\n#33 0x00007ffff21c08ef in QEventDispatcherGlib::processEvents(QFlags<QEventLoop::ProcessEventsFlag>) () at /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n#34 0x00007ffff21659ea in QEventLoop::exec(QFlags<QEventLoop::ProcessEventsFlag>) () at /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n#35 0x00007ffff1f8422a in QThread::exec() () at /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n#36 0x00007ffff1f8916d in  () at /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n#37 0x00007ffff731b6db in start_thread (arg=0x7fffa31fe700) at pthread_create.c:463\n#38 0x00007ffff765488f in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:95\n```", "markup": "markdown", "html": "<p>I was able to reproduce the crash with that entire block commented out. My backtrace looks different from John's though:</p>\n<div class=\"codehilite\"><pre><span></span>Invalid parameter at line 374 (@foreach). &#39;hlms_lights_directional&#39; is not a number nor a variable\nterminate called after throwing an instance of &#39;Ogre::ItemIdentityException&#39;\n  what():  OGRE EXCEPTION(5:ItemIdentityException): Parameter called f3dGrid does not exist.  in GpuProgramParameters::_findNamedConstantDefinition at /var/lib/jenkins/workspace/ogre-2.1-debbuilder/repo/OgreMain/src/OgreGpuProgramParams.cpp (line 2218)\n\nThread 13 &quot;ignition::gazeb&quot; received signal SIGABRT, Aborted.\n[Switching to Thread 0x7fffa31fe700 (LWP 8843)]\n__GI_raise (sig=sig@entry=6) at ../sysdeps/unix/sysv/linux/raise.c:51\n51      ../sysdeps/unix/sysv/linux/raise.c: No such file or directory.\n(gdb) bt\n#0  0x00007ffff7571e97 in __GI_raise (sig=sig@entry=6) at ../sysdeps/unix/sysv/linux/raise.c:51\n#1  0x00007ffff7573801 in __GI_abort () at abort.c:79\n#2  0x00007ffff1be0957 in  () at /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n#3  0x00007ffff1be6ab6 in  () at /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n#4  0x00007ffff1be6af1 in  () at /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n#5  0x00007ffff1be6d24 in  () at /usr/lib/x86_64-linux-gnu/libstdc++.so.6\n#6  0x00007fffa1fa5a8e in  () at /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n#7  0x00007fffa202681b in Ogre::GpuProgramParameters::_findNamedConstantDefinition(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;, bool) const () at /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n#8  0x00007fffa2026b7d in Ogre::GpuProgramParameters::setNamedConstant(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;, int) ()\n    at /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n#9  0x00007fffa1c33260 in Ogre::HlmsPbs::createShaderCacheEntry(unsigned int, Ogre::HlmsCache const&amp;, unsigned int, Ogre::QueuedRenderable const&amp;) ()\n    at /usr/lib/x86_64-linux-gnu/libOgreHlmsPbs.so.2.1.0\n#10 0x00007fffa216ed34 in Ogre::RenderQueue::renderGL3(bool, bool, Ogre::HlmsCache*, Ogre::RenderQueue::RenderQueueGroup const&amp;, Ogre::IndirectBufferPacked*, unsigned char*, unsigned char*) () at /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n#11 0x00007fffa21714a9 in Ogre::RenderQueue::render(Ogre::RenderSystem*, unsigned char, unsigned char, bool, bool) () at /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n#12 0x00007fffa21b8802 in Ogre::SceneManager::_renderPhase02(Ogre::Camera*, Ogre::Camera const*, Ogre::Viewport*, unsigned char, unsigned char, bool) ()\n    at /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n#13 0x00007fffa1fd2716 in Ogre::Camera::_renderScenePhase02(Ogre::Camera const*, Ogre::Viewport*, unsigned char, unsigned char, bool) ()\n    at /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n#14 0x00007fffa218b9b9 in Ogre::RenderTarget::_updateViewportRenderPhase02(Ogre::Viewport*, Ogre::Camera*, Ogre::Camera const*, unsigned char, unsigned char, bool) ()\n    at /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n#15 0x00007fffa22e39ca in Ogre::CompositorPassScene::execute(Ogre::Camera const*) () at /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n#16 0x00007fffa22bec67 in Ogre::CompositorNode::_update(Ogre::Camera const*, Ogre::SceneManager*) () at /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n#17 0x00007fffa22d18ca in Ogre::CompositorWorkspace::_update() () at /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n#18 0x00007fffa22b93c1 in Ogre::CompositorManager2::_updateImplementation(Ogre::SceneManagerEnumerator&amp;, Ogre::HlmsManager*) ()\n    at /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n#19 0x00007fffa21aaf95 in Ogre::Root::_updateAllRenderTargets() () at /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n#20 0x00007fffa21ab0fc in Ogre::Root::renderOneFrame() () at /usr/lib/x86_64-linux-gnu/libOgreMain.so.2.1.0\n#21 0x00007fffa2781785 in ignition::rendering::v2::Ogre2RenderTarget::Render() (this=0x7fff982fedd0)\n    at /home/chapulina/blueprint_ws/src/ign-rendering/ogre2/src/Ogre2RenderTarget.cc:173\n#22 0x00007fffa27373d6 in ignition::rendering::v2::BaseCamera&lt;ignition::rendering::v2::Ogre2Sensor&gt;::Update() (this=0x7fff982cdce0) at /usr/include/c++/8/ext/atomicity.h:82\n#23 0x00007fffbc91236d in ignition::gazebo::v2::IgnRenderer::Render() (this=0x555556dfc530) at /usr/include/c++/8/bits/shared_ptr_base.h:1018\n#24 0x00007fffbc9130c6 in ignition::gazebo::v2::RenderThread::RenderNext() (this=0x555556dfc510)\n    at /home/chapulina/blueprint_ws/src/ign-gazebo/src/gui/plugins/scene3d/Scene3D.cc:1337\n#25 0x00007ffff2197122 in QObject::event(QEvent*) () at /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n#26 0x00007ffff216783a in QCoreApplication::notify(QObject*, QEvent*) () at /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n#27 0x00007ffff21679a8 in QCoreApplication::notifyInternal2(QObject*, QEvent*) () at /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n#28 0x00007ffff216a11d in QCoreApplicationPrivate::sendPostedEvents(QObject*, int, QThreadData*) () at /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n#29 0x00007ffff21c12c3 in  () at /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n---Type &lt;return&gt; to continue, or q &lt;return&gt; to quit---\n#30 0x00007fffeec36417 in g_main_context_dispatch () at /usr/lib/x86_64-linux-gnu/libglib-2.0.so.0\n#31 0x00007fffeec36650 in  () at /usr/lib/x86_64-linux-gnu/libglib-2.0.so.0\n#32 0x00007fffeec366dc in g_main_context_iteration () at /usr/lib/x86_64-linux-gnu/libglib-2.0.so.0\n#33 0x00007ffff21c08ef in QEventDispatcherGlib::processEvents(QFlags&lt;QEventLoop::ProcessEventsFlag&gt;) () at /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n#34 0x00007ffff21659ea in QEventLoop::exec(QFlags&lt;QEventLoop::ProcessEventsFlag&gt;) () at /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n#35 0x00007ffff1f8422a in QThread::exec() () at /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n#36 0x00007ffff1f8916d in  () at /usr/lib/x86_64-linux-gnu/libQt5Core.so.5\n#37 0x00007ffff731b6db in start_thread (arg=0x7fffa31fe700) at pthread_create.c:463\n#38 0x00007ffff765488f in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:95\n</pre></div>", "type": "rendered"}, "created_on": "2020-02-20T23:06:46.613159+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2020-02-20T23:06:46.624179+00:00", "type": "pullrequest_comment", "id": 136884992}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-rendering/pullrequests/234/comments/137035530.json"}, "html": {"href": "#!/ignitionrobotics/ign-rendering/pull-requests/234/_/diff#comment-137035530"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 234, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-rendering/pullrequests/234.json"}, "html": {"href": "#!/ignitionrobotics/ign-rendering/pull-requests/234"}}, "title": "Prevent flaky crash"}, "content": {"raw": "I changed the `ign-gazebo` PR to use the correct thread and I can't reproduce the crashes anymore. Declining this!", "markup": "markdown", "html": "<p>I changed the <code>ign-gazebo</code> PR to use the correct thread and I can't reproduce the crashes anymore. Declining this!</p>", "type": "rendered"}, "created_on": "2020-02-21T19:15:30.264741+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2020-02-21T19:15:30.270237+00:00", "type": "pullrequest_comment", "id": 137035530}], "page": 1, "size": 12}