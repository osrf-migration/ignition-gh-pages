{"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-rendering/pullrequests/65/comments/68412664.json"}, "html": {"href": "#!/ignitionrobotics/ign-rendering/pull-requests/65/_/diff#comment-68412664"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 65, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-rendering/pullrequests/65.json"}, "html": {"href": "#!/ignitionrobotics/ign-rendering/pull-requests/65"}}, "title": "Several MSVC fixes: standard pointers and enable FreeImage/Ogre in Windows (take II)"}, "content": {"raw": "there are some codecheck errors:\n\n* [![Build Status](https://build.osrfoundation.org/buildStatus/icon?job=ignition_rendering-ci-pr_any-xenial-amd64&build=22)](https://build.osrfoundation.org/job/ignition_rendering-ci-pr_any-xenial-amd64/22/) https://build.osrfoundation.org/job/ignition_rendering-ci-pr_any-xenial-amd64/22/cppcheckResult/\n\nI think the following patch will fix them all:\n\n~~~\ndiff -r 62e72338329d ogre/src/OgreRenderEngine.cc\n--- a/ogre/src/OgreRenderEngine.cc\tWed Jun 27 00:14:09 2018 +0200\n+++ b/ogre/src/OgreRenderEngine.cc\tWed Jun 27 15:00:27 2018 -0700\n@@ -219,11 +219,13 @@\n                 Ogre::MaterialManager::getSingleton().getByName(\n                     fullPath);\n \n+              bool matPtrNotNull;\n               #if (OGRE_VERSION_MAJOR == 1 && OGRE_VERSION_MAJOR < 10)\n-              if (! matPtr.isNull())\n-              #elif\n-              if (matPtr)\n+              matPtrNotNull = !matPtr.isNull();\n+              #else\n+              matPtrNotNull = matPtr != nullptr;\n               #endif\n+              if (matPtrNotNull)\n               {\n                 // is this necessary to do here? Someday try it without\n                 matPtr->compile();\ndiff -r 62e72338329d ogre/src/OgreSelectionBuffer.cc\n--- a/ogre/src/OgreSelectionBuffer.cc\tWed Jun 27 00:14:09 2018 +0200\n+++ b/ogre/src/OgreSelectionBuffer.cc\tWed Jun 27 15:00:27 2018 -0700\n@@ -131,7 +131,7 @@\n void OgreSelectionBuffer::DeleteRTTBuffer()\n {\n #if OGRE_VERSION_MAJOR == 1 && OGRE_VERSION_MINOR < 10\n-  if (! this->dataPtr->texture.isNull() && this->dataPtr->texture->isLoaded())\n+  if (!this->dataPtr->texture.isNull() && this->dataPtr->texture->isLoaded())\n #else\n   if (this->dataPtr->texture && this->dataPtr->texture->isLoaded())\n #endif\n~~~", "markup": "markdown", "html": "<p>there are some codecheck errors:</p>\n<ul>\n<li><a data-is-external-link=\"true\" href=\"https://build.osrfoundation.org/job/ignition_rendering-ci-pr_any-xenial-amd64/22/\" rel=\"nofollow\"><img alt=\"Build Status\" src=\"https://build.osrfoundation.org/buildStatus/icon?job=ignition_rendering-ci-pr_any-xenial-amd64&amp;build=22\" /></a> <a href=\"https://build.osrfoundation.org/job/ignition_rendering-ci-pr_any-xenial-amd64/22/cppcheckResult/\" rel=\"nofollow\" class=\"ap-connect-link\">https://build.osrfoundation.org/job/ignition_rendering-ci-pr_any-xenial-amd64/22/cppcheckResult/</a></li>\n</ul>\n<p>I think the following patch will fix them all:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"gh\">diff -r 62e72338329d ogre/src/OgreRenderEngine.cc</span>\n<span class=\"gd\">--- a/ogre/src/OgreRenderEngine.cc  Wed Jun 27 00:14:09 2018 +0200</span>\n<span class=\"gi\">+++ b/ogre/src/OgreRenderEngine.cc  Wed Jun 27 15:00:27 2018 -0700</span>\n<span class=\"gu\">@@ -219,11 +219,13 @@</span>\n                 Ogre::MaterialManager::getSingleton().getByName(\n                     fullPath);\n\n<span class=\"gi\">+              bool matPtrNotNull;</span>\n               #if (OGRE_VERSION_MAJOR == 1 &amp;&amp; OGRE_VERSION_MAJOR &lt; 10)\n<span class=\"gd\">-              if (! matPtr.isNull())</span>\n<span class=\"gd\">-              #elif</span>\n<span class=\"gd\">-              if (matPtr)</span>\n<span class=\"gi\">+              matPtrNotNull = !matPtr.isNull();</span>\n<span class=\"gi\">+              #else</span>\n<span class=\"gi\">+              matPtrNotNull = matPtr != nullptr;</span>\n               #endif\n<span class=\"gi\">+              if (matPtrNotNull)</span>\n               {\n                 // is this necessary to do here? Someday try it without\n                 matPtr-&gt;compile();\n<span class=\"gh\">diff -r 62e72338329d ogre/src/OgreSelectionBuffer.cc</span>\n<span class=\"gd\">--- a/ogre/src/OgreSelectionBuffer.cc   Wed Jun 27 00:14:09 2018 +0200</span>\n<span class=\"gi\">+++ b/ogre/src/OgreSelectionBuffer.cc   Wed Jun 27 15:00:27 2018 -0700</span>\n<span class=\"gu\">@@ -131,7 +131,7 @@</span>\n void OgreSelectionBuffer::DeleteRTTBuffer()\n {\n #if OGRE_VERSION_MAJOR == 1 &amp;&amp; OGRE_VERSION_MINOR &lt; 10\n<span class=\"gd\">-  if (! this-&gt;dataPtr-&gt;texture.isNull() &amp;&amp; this-&gt;dataPtr-&gt;texture-&gt;isLoaded())</span>\n<span class=\"gi\">+  if (!this-&gt;dataPtr-&gt;texture.isNull() &amp;&amp; this-&gt;dataPtr-&gt;texture-&gt;isLoaded())</span>\n #else\n   if (this-&gt;dataPtr-&gt;texture &amp;&amp; this-&gt;dataPtr-&gt;texture-&gt;isLoaded())\n #endif\n</pre></div>", "type": "rendered"}, "created_on": "2018-06-27T22:01:09.833364+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2018-06-27T22:01:09.840440+00:00", "type": "pullrequest_comment", "id": 68412664}