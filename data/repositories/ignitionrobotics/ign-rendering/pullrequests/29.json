{"rendered": {"description": {"raw": "This fixes a crash we are seeing in Delphyne during initialization.\r\n\r\nThe problem was introduced between changesets 215 and 217 (215 works, 217 does not).  I did some debugging, and I found that what was happening was that a nullptr was being passed into `OgreRTShaderSystem::AttachViewport()`, and then being dereferenced, causing the crash.  In changeset 215 and earlier, this didn't happen because the \"initialized\" check at the start of `AttachViewport()` returned false.  In the new code, apparently `IsInitialized()` returns true, leading to this crash.  Adding this nullptr check seems to fix the problem for me, but it may not be the \"right\" solution, so consider this an RFC.", "markup": "markdown", "html": "<p>This fixes a crash we are seeing in Delphyne during initialization.</p>\n<p>The problem was introduced between changesets 215 and 217 (215 works, 217 does not).  I did some debugging, and I found that what was happening was that a nullptr was being passed into <code>OgreRTShaderSystem::AttachViewport()</code>, and then being dereferenced, causing the crash.  In changeset 215 and earlier, this didn't happen because the \"initialized\" check at the start of <code>AttachViewport()</code> returned false.  In the new code, apparently <code>IsInitialized()</code> returns true, leading to this crash.  Adding this nullptr check seems to fix the problem for me, but it may not be the \"right\" solution, so consider this an RFC.</p>", "type": "rendered"}, "title": {"raw": "Check to make sure the scene isn't nullptr before dereferencing.", "markup": "markdown", "html": "<p>Check to make sure the scene isn't nullptr before dereferencing.</p>", "type": "rendered"}}, "type": "pullrequest", "description": "This fixes a crash we are seeing in Delphyne during initialization.\r\n\r\nThe problem was introduced between changesets 215 and 217 (215 works, 217 does not).  I did some debugging, and I found that what was happening was that a nullptr was being passed into `OgreRTShaderSystem::AttachViewport()`, and then being dereferenced, causing the crash.  In changeset 215 and earlier, this didn't happen because the \"initialized\" check at the start of `AttachViewport()` returned false.  In the new code, apparently `IsInitialized()` returns true, leading to this crash.  Adding this nullptr check seems to fix the problem for me, but it may not be the \"right\" solution, so consider this an RFC.", "links": {"decline": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-rendering/pullrequests/29/decline"}, "diffstat": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-rendering/diffstat/ignitionrobotics/ign-rendering:2f218aa8e7b4%0D03355b046476?from_pullrequest_id=29"}, "commits": {"href": "data/repositories/ignitionrobotics/ign-rendering/pullrequests/29/commits.json"}, "self": {"href": "data/repositories/ignitionrobotics/ign-rendering/pullrequests/29.json"}, "comments": {"href": "data/repositories/ignitionrobotics/ign-rendering/pullrequests/29/comments_page=1.json"}, "merge": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-rendering/pullrequests/29/merge"}, "html": {"href": "#!/ignitionrobotics/ign-rendering/pull-requests/29"}, "activity": {"href": "data/repositories/ignitionrobotics/ign-rendering/pullrequests/29/activity.json"}, "diff": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-rendering/diff/ignitionrobotics/ign-rendering:2f218aa8e7b4%0D03355b046476?from_pullrequest_id=29"}, "approve": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-rendering/pullrequests/29/approve"}, "statuses": {"href": "data/repositories/ignitionrobotics/ign-rendering/pullrequests/29/statuses_page=1.json"}}, "title": "Check to make sure the scene isn't nullptr before dereferencing.", "close_source_branch": true, "reviewers": [{"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}], "id": 29, "destination": {"commit": {"hash": "03355b046476", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-rendering/commit/03355b046476.json"}, "html": {"href": "#!/ignitionrobotics/ign-rendering/commits/03355b046476"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-rendering.json"}, "html": {"href": "#!/ignitionrobotics/ign-rendering"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f6b404b6-f373-460d-a470-69ff6f27cd93}ts=1533308"}}, "type": "repository", "name": "ign-rendering", "full_name": "ignitionrobotics/ign-rendering", "uuid": "{f6b404b6-f373-460d-a470-69ff6f27cd93}"}, "branch": {"name": "default"}}, "created_on": "2017-09-26T23:33:32.680664+00:00", "summary": {"raw": "This fixes a crash we are seeing in Delphyne during initialization.\r\n\r\nThe problem was introduced between changesets 215 and 217 (215 works, 217 does not).  I did some debugging, and I found that what was happening was that a nullptr was being passed into `OgreRTShaderSystem::AttachViewport()`, and then being dereferenced, causing the crash.  In changeset 215 and earlier, this didn't happen because the \"initialized\" check at the start of `AttachViewport()` returned false.  In the new code, apparently `IsInitialized()` returns true, leading to this crash.  Adding this nullptr check seems to fix the problem for me, but it may not be the \"right\" solution, so consider this an RFC.", "markup": "markdown", "html": "<p>This fixes a crash we are seeing in Delphyne during initialization.</p>\n<p>The problem was introduced between changesets 215 and 217 (215 works, 217 does not).  I did some debugging, and I found that what was happening was that a nullptr was being passed into <code>OgreRTShaderSystem::AttachViewport()</code>, and then being dereferenced, causing the crash.  In changeset 215 and earlier, this didn't happen because the \"initialized\" check at the start of <code>AttachViewport()</code> returned false.  In the new code, apparently <code>IsInitialized()</code> returns true, leading to this crash.  Adding this nullptr check seems to fix the problem for me, but it may not be the \"right\" solution, so consider this an RFC.</p>", "type": "rendered"}, "source": {"commit": {"hash": "271f6848ec86", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-rendering/commit/271f6848ec86.json"}, "html": {"href": "#!/ignitionrobotics/ign-rendering/commits/271f6848ec86"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-rendering.json"}, "html": {"href": "#!/ignitionrobotics/ign-rendering"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f6b404b6-f373-460d-a470-69ff6f27cd93}ts=1533308"}}, "type": "repository", "name": "ign-rendering", "full_name": "ignitionrobotics/ign-rendering", "uuid": "{f6b404b6-f373-460d-a470-69ff6f27cd93}"}, "branch": {"name": "fix-null-scene-crash"}}, "comment_count": 0, "state": "MERGED", "task_count": 0, "participants": [{"role": "REVIEWER", "participated_on": "2017-09-27T14:20:55.367165+00:00", "type": "participant", "approved": true, "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}}, {"role": "REVIEWER", "participated_on": null, "type": "participant", "approved": false, "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}}], "reason": "", "updated_on": "2017-09-27T15:53:51.112048+00:00", "author": {"display_name": "clalancette", "uuid": "{02b311e1-297d-4232-89c4-5485d0a02911}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B02b311e1-297d-4232-89c4-5485d0a02911%7D"}, "html": {"href": "https://bitbucket.org/%7B02b311e1-297d-4232-89c4-5485d0a02911%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:ad6ed80b-ec66-45cb-9504-b1094a415b7f/048a0933-60ac-4910-a6a5-ed058bdea8eb/128"}}, "nickname": "clalancette", "type": "user", "account_id": "557058:ad6ed80b-ec66-45cb-9504-b1094a415b7f"}, "merge_commit": {"hash": "2f218aa8e7b4", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-rendering/commit/2f218aa8e7b4.json"}, "html": {"href": "#!/ignitionrobotics/ign-rendering/commits/2f218aa8e7b4"}}}, "closed_by": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}}