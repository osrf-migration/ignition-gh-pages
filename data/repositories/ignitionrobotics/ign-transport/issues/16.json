{"priority": "critical", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport"}, "avatar": {"href": "data/bytebucket.org/ravatar/{4249390a-7f55-404b-990d-817ba94cc7ac}ts=1533306"}}, "type": "repository", "name": "ign-transport", "full_name": "ignitionrobotics/ign-transport", "uuid": "{4249390a-7f55-404b-990d-817ba94cc7ac}"}, "links": {"attachments": {"href": "data/repositories/ignitionrobotics/ign-transport/issues/16/attachments_page=1.json"}, "self": {"href": "data/repositories/ignitionrobotics/ign-transport/issues/16.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-transport/issues/16/watch"}, "comments": {"href": "data/repositories/ignitionrobotics/ign-transport/issues/16/comments_page=1.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/issues/16/communication-blocked-after-some-time"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-transport/issues/16/vote"}}, "reporter": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "title": "Communication blocked after some time doing request-response", "component": null, "votes": 0, "watches": 2, "content": {"raw": "If you request service calls in a loop, after 20k-50k calls the communications blocks. This is because I have been using a zeromq DEALER-DEALER pattern with a temporary socket used only for sending the requests. Each time there's a service request a new temporary DEALER socket is created and that was causing problems in zeromq. The solution is to redesign the way the service calls were requested by using ROUTER-ROUTER sockets and no temporary sockets. Now, there's one ROUTER socket for sending requests, one ROUTER socket for receiving service requests and sending responses, and one ROUTER socket for receiving the responses.\r\n\r\nROUTER sockets need the zeromq identity of the destination, so this information has been added into the discovery information.\r\n\r\nPull request #23 addresses the problem.", "markup": "markdown", "html": "<p>If you request service calls in a loop, after 20k-50k calls the communications blocks. This is because I have been using a zeromq DEALER-DEALER pattern with a temporary socket used only for sending the requests. Each time there's a service request a new temporary DEALER socket is created and that was causing problems in zeromq. The solution is to redesign the way the service calls were requested by using ROUTER-ROUTER sockets and no temporary sockets. Now, there's one ROUTER socket for sending requests, one ROUTER socket for receiving service requests and sending responses, and one ROUTER socket for receiving the responses.</p>\n<p>ROUTER sockets need the zeromq identity of the destination, so this information has been added into the discovery information.</p>\n<p><a href=\"#!/ignitionrobotics/ign-transport/pull-requests/23/fix-issue-16\" rel=\"nofollow\" class=\"ap-connect-link\">Pull request #23</a> addresses the problem.</p>", "type": "rendered"}, "assignee": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "state": "resolved", "version": null, "edited_on": null, "created_on": "2014-10-04T16:51:03.204179+00:00", "milestone": null, "updated_on": "2014-10-18T00:39:43.589899+00:00", "type": "issue", "id": 16}