{"priority": "trivial", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport"}, "avatar": {"href": "data/bytebucket.org/ravatar/{4249390a-7f55-404b-990d-817ba94cc7ac}ts=1533306"}}, "type": "repository", "name": "ign-transport", "full_name": "ignitionrobotics/ign-transport", "uuid": "{4249390a-7f55-404b-990d-817ba94cc7ac}"}, "links": {"attachments": {"href": "data/repositories/ignitionrobotics/ign-transport/issues/41/attachments_page=1.json"}, "self": {"href": "data/repositories/ignitionrobotics/ign-transport/issues/41.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-transport/issues/41/watch"}, "comments": {"href": "data/repositories/ignitionrobotics/ign-transport/issues/41/comments_page=1.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/issues/41/publisher-subscriber-example"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-transport/issues/41/vote"}}, "reporter": {"display_name": "Robert Walenta", "uuid": "{163d972b-09f5-43f3-9197-a3948d0ea7d7}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B163d972b-09f5-43f3-9197-a3948d0ea7d7%7D"}, "html": {"href": "https://bitbucket.org/%7B163d972b-09f5-43f3-9197-a3948d0ea7d7%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/b0709ddc7f038a6de523f36c67e7e7add=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsRW-2.png"}}, "nickname": "TwoBit01", "type": "user", "account_id": "557058:c797651d-b30c-4901-925e-651edd65bf77"}, "title": "Publisher Subscriber Example", "component": null, "votes": 0, "watches": 1, "content": {"raw": "Hi Ignition Team,\r\n\r\nmaking my first steps with ign-transport lib. After installing it and trying to build the pub/sub example from source, it had first some issues with the proto file that could not be build. After installing all other binary dependencies, I guess libignition-msgs* was missing, this error was solved.\r\n\r\nAfter a new compile run the Publisher method is throwing now an error and not excepting the msg type, here the compile output:\r\n\r\n```\r\n#!c++\r\nScanning dependencies of target protobuf_compilation\r\n[ 33%] Running C++ protocol buffer compiler on stringmsg.proto\r\n[ 33%] Built target protobuf_compilation\r\nScanning dependencies of target publisher\r\n[ 66%] Building CXX object CMakeFiles/publisher.dir/publisher.cc.o\r\n/home/twobit/gazebo_ws/socket_comm/ign_transport/publisher.cc: In function \u2018int main(int, char**)\u2019:\r\n/home/twobit/gazebo_ws/socket_comm/ign_transport/publisher.cc:66:33: error: no matching function for call to \u2018ignition::transport::Node::Publish(bool&, example::msgs::StringMsg&)\u2019\r\n     if (!node.Publish(pubId, msg))\r\n                                 ^\r\n/home/twobit/gazebo_ws/socket_comm/ign_transport/publisher.cc:66:33: note: candidate is:\r\nIn file included from /usr/include/ignition/transport1/ignition/transport.hh:9:0,\r\n                 from /home/twobit/gazebo_ws/socket_comm/ign_transport/publisher.cc:24:\r\n/usr/include/ignition/transport1/ignition/transport/Node.hh:125:20: note: bool ignition::transport::Node::Publish(const string&, const ProtoMsg&)\r\n       public: bool Publish(const std::string &_topic,\r\n                    ^\r\n/usr/include/ignition/transport1/ignition/transport/Node.hh:125:20: note:   no known conversion for argument 1 from \u2018bool\u2019 to \u2018const string& {aka const std::basic_string<char>&}\u2019\r\nmake[3]: *** [CMakeFiles/publisher.dir/publisher.cc.o] Error 1\r\nmake[2]: *** [CMakeFiles/publisher.dir/all] Error 2\r\nmake[1]: *** [CMakeFiles/publisher.dir/rule] Error 2\r\nmake: *** [publisher] Error 2\r\n```\r\nAfter that I tried to use a predefine message and included:\r\n```\r\n#!c++\r\n  #include <ignition/msgs0/ignition/msgs/stringmsg.pb.h>\r\n```\r\n\r\nBut after using the ignition::msgs::StringMsg Class the compiler is complaining about a missing <ignition/msgs/System.hh>\r\n\r\nI would really like to work with ign-transport but the tutorial:\r\n[http://ignition-transport.readthedocs.io/en/latest/installation/installation.html](Link URL)\r\nshould be refactored.", "markup": "markdown", "html": "<p>Hi Ignition Team,</p>\n<p>making my first steps with ign-transport lib. After installing it and trying to build the pub/sub example from source, it had first some issues with the proto file that could not be build. After installing all other binary dependencies, I guess libignition-msgs* was missing, this error was solved.</p>\n<p>After a new compile run the Publisher method is throwing now an error and not excepting the msg type, here the compile output:</p>\n<div class=\"codehilite language-c++\"><pre><span></span><span class=\"n\">Scanning</span> <span class=\"n\">dependencies</span> <span class=\"n\">of</span> <span class=\"n\">target</span> <span class=\"n\">protobuf_compilation</span>\n<span class=\"p\">[</span> <span class=\"mi\">33</span><span class=\"o\">%</span><span class=\"p\">]</span> <span class=\"n\">Running</span> <span class=\"n\">C</span><span class=\"o\">++</span> <span class=\"n\">protocol</span> <span class=\"n\">buffer</span> <span class=\"n\">compiler</span> <span class=\"n\">on</span> <span class=\"n\">stringmsg</span><span class=\"p\">.</span><span class=\"n\">proto</span>\n<span class=\"p\">[</span> <span class=\"mi\">33</span><span class=\"o\">%</span><span class=\"p\">]</span> <span class=\"n\">Built</span> <span class=\"n\">target</span> <span class=\"n\">protobuf_compilation</span>\n<span class=\"n\">Scanning</span> <span class=\"n\">dependencies</span> <span class=\"n\">of</span> <span class=\"n\">target</span> <span class=\"n\">publisher</span>\n<span class=\"p\">[</span> <span class=\"mi\">66</span><span class=\"o\">%</span><span class=\"p\">]</span> <span class=\"n\">Building</span> <span class=\"n\">CXX</span> <span class=\"n\">object</span> <span class=\"n\">CMakeFiles</span><span class=\"o\">/</span><span class=\"n\">publisher</span><span class=\"p\">.</span><span class=\"n\">dir</span><span class=\"o\">/</span><span class=\"n\">publisher</span><span class=\"p\">.</span><span class=\"n\">cc</span><span class=\"p\">.</span><span class=\"n\">o</span>\n<span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">twobit</span><span class=\"o\">/</span><span class=\"n\">gazebo_ws</span><span class=\"o\">/</span><span class=\"n\">socket_comm</span><span class=\"o\">/</span><span class=\"n\">ign_transport</span><span class=\"o\">/</span><span class=\"n\">publisher</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span> <span class=\"n\">In</span> <span class=\"n\">function</span> <span class=\"err\">\u2018</span><span class=\"kt\">int</span> <span class=\"n\">main</span><span class=\"p\">(</span><span class=\"kt\">int</span><span class=\"p\">,</span> <span class=\"kt\">char</span><span class=\"o\">**</span><span class=\"p\">)</span><span class=\"err\">\u2019</span><span class=\"o\">:</span>\n<span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">twobit</span><span class=\"o\">/</span><span class=\"n\">gazebo_ws</span><span class=\"o\">/</span><span class=\"n\">socket_comm</span><span class=\"o\">/</span><span class=\"n\">ign_transport</span><span class=\"o\">/</span><span class=\"n\">publisher</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">66</span><span class=\"o\">:</span><span class=\"mi\">33</span><span class=\"o\">:</span> <span class=\"nl\">error</span><span class=\"p\">:</span> <span class=\"n\">no</span> <span class=\"n\">matching</span> <span class=\"n\">function</span> <span class=\"k\">for</span> <span class=\"n\">call</span> <span class=\"n\">to</span> <span class=\"err\">\u2018</span><span class=\"n\">ignition</span><span class=\"o\">::</span><span class=\"n\">transport</span><span class=\"o\">::</span><span class=\"n\">Node</span><span class=\"o\">::</span><span class=\"n\">Publish</span><span class=\"p\">(</span><span class=\"kt\">bool</span><span class=\"o\">&amp;</span><span class=\"p\">,</span> <span class=\"n\">example</span><span class=\"o\">::</span><span class=\"n\">msgs</span><span class=\"o\">::</span><span class=\"n\">StringMsg</span><span class=\"o\">&amp;</span><span class=\"p\">)</span><span class=\"err\">\u2019</span>\n     <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"o\">!</span><span class=\"n\">node</span><span class=\"p\">.</span><span class=\"n\">Publish</span><span class=\"p\">(</span><span class=\"n\">pubId</span><span class=\"p\">,</span> <span class=\"n\">msg</span><span class=\"p\">))</span>\n                                 <span class=\"o\">^</span>\n<span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">twobit</span><span class=\"o\">/</span><span class=\"n\">gazebo_ws</span><span class=\"o\">/</span><span class=\"n\">socket_comm</span><span class=\"o\">/</span><span class=\"n\">ign_transport</span><span class=\"o\">/</span><span class=\"n\">publisher</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">66</span><span class=\"o\">:</span><span class=\"mi\">33</span><span class=\"o\">:</span> <span class=\"nl\">note</span><span class=\"p\">:</span> <span class=\"n\">candidate</span> <span class=\"nl\">is</span><span class=\"p\">:</span>\n<span class=\"n\">In</span> <span class=\"n\">file</span> <span class=\"n\">included</span> <span class=\"n\">from</span> <span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">include</span><span class=\"o\">/</span><span class=\"n\">ignition</span><span class=\"o\">/</span><span class=\"n\">transport1</span><span class=\"o\">/</span><span class=\"n\">ignition</span><span class=\"o\">/</span><span class=\"n\">transport</span><span class=\"p\">.</span><span class=\"nl\">hh</span><span class=\"p\">:</span><span class=\"mi\">9</span><span class=\"o\">:</span><span class=\"mi\">0</span><span class=\"p\">,</span>\n                 <span class=\"n\">from</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">twobit</span><span class=\"o\">/</span><span class=\"n\">gazebo_ws</span><span class=\"o\">/</span><span class=\"n\">socket_comm</span><span class=\"o\">/</span><span class=\"n\">ign_transport</span><span class=\"o\">/</span><span class=\"n\">publisher</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">24</span><span class=\"o\">:</span>\n<span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">include</span><span class=\"o\">/</span><span class=\"n\">ignition</span><span class=\"o\">/</span><span class=\"n\">transport1</span><span class=\"o\">/</span><span class=\"n\">ignition</span><span class=\"o\">/</span><span class=\"n\">transport</span><span class=\"o\">/</span><span class=\"n\">Node</span><span class=\"p\">.</span><span class=\"nl\">hh</span><span class=\"p\">:</span><span class=\"mi\">125</span><span class=\"o\">:</span><span class=\"mi\">20</span><span class=\"o\">:</span> <span class=\"nl\">note</span><span class=\"p\">:</span> <span class=\"kt\">bool</span> <span class=\"n\">ignition</span><span class=\"o\">::</span><span class=\"n\">transport</span><span class=\"o\">::</span><span class=\"n\">Node</span><span class=\"o\">::</span><span class=\"n\">Publish</span><span class=\"p\">(</span><span class=\"k\">const</span> <span class=\"n\">string</span><span class=\"o\">&amp;</span><span class=\"p\">,</span> <span class=\"k\">const</span> <span class=\"n\">ProtoMsg</span><span class=\"o\">&amp;</span><span class=\"p\">)</span>\n       <span class=\"k\">public</span><span class=\"o\">:</span> <span class=\"kt\">bool</span> <span class=\"n\">Publish</span><span class=\"p\">(</span><span class=\"k\">const</span> <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">string</span> <span class=\"o\">&amp;</span><span class=\"n\">_topic</span><span class=\"p\">,</span>\n                    <span class=\"o\">^</span>\n<span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">include</span><span class=\"o\">/</span><span class=\"n\">ignition</span><span class=\"o\">/</span><span class=\"n\">transport1</span><span class=\"o\">/</span><span class=\"n\">ignition</span><span class=\"o\">/</span><span class=\"n\">transport</span><span class=\"o\">/</span><span class=\"n\">Node</span><span class=\"p\">.</span><span class=\"nl\">hh</span><span class=\"p\">:</span><span class=\"mi\">125</span><span class=\"o\">:</span><span class=\"mi\">20</span><span class=\"o\">:</span> <span class=\"nl\">note</span><span class=\"p\">:</span>   <span class=\"n\">no</span> <span class=\"n\">known</span> <span class=\"n\">conversion</span> <span class=\"k\">for</span> <span class=\"n\">argument</span> <span class=\"mi\">1</span> <span class=\"n\">from</span> <span class=\"err\">\u2018</span><span class=\"kt\">bool</span><span class=\"err\">\u2019</span> <span class=\"n\">to</span> <span class=\"err\">\u2018</span><span class=\"k\">const</span> <span class=\"n\">string</span><span class=\"o\">&amp;</span> <span class=\"p\">{</span><span class=\"n\">aka</span> <span class=\"k\">const</span> <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">basic_string</span><span class=\"o\">&lt;</span><span class=\"kt\">char</span><span class=\"o\">&gt;&amp;</span><span class=\"p\">}</span><span class=\"err\">\u2019</span>\n<span class=\"n\">make</span><span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">]</span><span class=\"o\">:</span> <span class=\"o\">***</span> <span class=\"p\">[</span><span class=\"n\">CMakeFiles</span><span class=\"o\">/</span><span class=\"n\">publisher</span><span class=\"p\">.</span><span class=\"n\">dir</span><span class=\"o\">/</span><span class=\"n\">publisher</span><span class=\"p\">.</span><span class=\"n\">cc</span><span class=\"p\">.</span><span class=\"n\">o</span><span class=\"p\">]</span> <span class=\"n\">Error</span> <span class=\"mi\">1</span>\n<span class=\"n\">make</span><span class=\"p\">[</span><span class=\"mi\">2</span><span class=\"p\">]</span><span class=\"o\">:</span> <span class=\"o\">***</span> <span class=\"p\">[</span><span class=\"n\">CMakeFiles</span><span class=\"o\">/</span><span class=\"n\">publisher</span><span class=\"p\">.</span><span class=\"n\">dir</span><span class=\"o\">/</span><span class=\"n\">all</span><span class=\"p\">]</span> <span class=\"n\">Error</span> <span class=\"mi\">2</span>\n<span class=\"n\">make</span><span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">]</span><span class=\"o\">:</span> <span class=\"o\">***</span> <span class=\"p\">[</span><span class=\"n\">CMakeFiles</span><span class=\"o\">/</span><span class=\"n\">publisher</span><span class=\"p\">.</span><span class=\"n\">dir</span><span class=\"o\">/</span><span class=\"n\">rule</span><span class=\"p\">]</span> <span class=\"n\">Error</span> <span class=\"mi\">2</span>\n<span class=\"nl\">make</span><span class=\"p\">:</span> <span class=\"o\">***</span> <span class=\"p\">[</span><span class=\"n\">publisher</span><span class=\"p\">]</span> <span class=\"n\">Error</span> <span class=\"mi\">2</span>\n</pre></div>\n\n\n<p>After that I tried to use a predefine message and included:</p>\n<div class=\"codehilite language-c++\"><pre><span></span>  <span class=\"cp\">#include</span> <span class=\"cpf\">&lt;ignition/msgs0/ignition/msgs/stringmsg.pb.h&gt;</span><span class=\"cp\"></span>\n</pre></div>\n\n\n<p>But after using the ignition::msgs::StringMsg Class the compiler is complaining about a missing &lt;ignition/msgs/System.hh&gt;</p>\n<p>I would really like to work with ign-transport but the tutorial:\n<a data-is-external-link=\"true\" href=\"/ignitionrobotics/ign-transport/src/330771b756d744e78c2e8fa2e102533aa9e8a861/Link%20URL\" rel=\"nofollow\">http://ignition-transport.readthedocs.io/en/latest/installation/installation.html</a>\nshould be refactored.</p>", "type": "rendered"}, "assignee": null, "state": "resolved", "version": null, "edited_on": null, "created_on": "2016-05-25T09:23:05.206803+00:00", "milestone": null, "updated_on": "2019-10-18T14:28:17.968972+00:00", "type": "issue", "id": 41}