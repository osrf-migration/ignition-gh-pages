{"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport"}, "avatar": {"href": "data/bytebucket.org/ravatar/{4249390a-7f55-404b-990d-817ba94cc7ac}ts=1533306"}}, "type": "repository", "name": "ign-transport", "full_name": "ignitionrobotics/ign-transport", "uuid": "{4249390a-7f55-404b-990d-817ba94cc7ac}"}, "links": {"attachments": {"href": "data/repositories/ignitionrobotics/ign-transport/issues/118/attachments_page=1.json"}, "self": {"href": "data/repositories/ignitionrobotics/ign-transport/issues/118.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-transport/issues/118/watch"}, "comments": {"href": "data/repositories/ignitionrobotics/ign-transport/issues/118/comments_page=1.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/issues/118/creating-node-sometimes-segfaults-in-linux"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-transport/issues/118/vote"}}, "reporter": {"display_name": "Poh Zhi-Ee", "uuid": "{0f9e52f8-3527-4ec6-9f81-b618bf1ce891}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0f9e52f8-3527-4ec6-9f81-b618bf1ce891%7D"}, "html": {"href": "https://bitbucket.org/%7B0f9e52f8-3527-4ec6-9f81-b618bf1ce891%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/d8fdff74a679579375081904f622bc42d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsPZ-3.png"}}, "nickname": "Poh Zhi-Ee", "type": "user", "account_id": "5e6f1dcbfad9000c325ce609"}, "title": "Creating node sometimes segfaults in linux", "component": null, "votes": 0, "watches": 1, "content": {"raw": "This is due to the lack of error handling for the `getpwuid_r()` call in the `username()` function in NetUtils.cc  \r\nAccording to the `getpwuid_r` [manpage](https://linux.die.net/man/3/getpwuid_r) the function is not always successful. Failing to handle the errors but continuing to use the `passwd` struct can result in the use of a corrupted data structure which causes a segfault.\r\n\r\nAdditional information:  \r\nStack trace of the segfault\r\n\r\n![](data/bitbucket.org/repo/og7EBq/images/2140815835-image.png)\r\n\u200c", "markup": "markdown", "html": "<p>This is due to the lack of error handling for the <code>getpwuid_r()</code> call in the <code>username()</code> function in NetUtils.cc<br />\nAccording to the <code>getpwuid_r</code> <a data-is-external-link=\"true\" href=\"https://linux.die.net/man/3/getpwuid_r\" rel=\"nofollow\">manpage</a> the function is not always successful. Failing to handle the errors but continuing to use the <code>passwd</code> struct can result in the use of a corrupted data structure which causes a segfault.</p>\n<p>Additional information:<br />\nStack trace of the segfault</p>\n<p><img alt=\"\" src=\"data/bitbucket.org/repo/og7EBq/images/2140815835-image.png\" />\n\u200c</p>", "type": "rendered"}, "assignee": null, "state": "new", "version": null, "edited_on": null, "created_on": "2020-03-16T07:00:09.966872+00:00", "milestone": null, "updated_on": "2020-04-07T00:26:04.982530+00:00", "type": "issue", "id": 118}