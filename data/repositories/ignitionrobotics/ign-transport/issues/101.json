{"priority": "critical", "kind": "enhancement", "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport"}, "avatar": {"href": "data/bytebucket.org/ravatar/{4249390a-7f55-404b-990d-817ba94cc7ac}ts=1533306"}}, "type": "repository", "name": "ign-transport", "full_name": "ignitionrobotics/ign-transport", "uuid": "{4249390a-7f55-404b-990d-817ba94cc7ac}"}, "links": {"attachments": {"href": "data/repositories/ignitionrobotics/ign-transport/issues/101/attachments_page=1.json"}, "self": {"href": "data/repositories/ignitionrobotics/ign-transport/issues/101.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-transport/issues/101/watch"}, "comments": {"href": "data/repositories/ignitionrobotics/ign-transport/issues/101/comments_page=1.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/issues/101/remove-nodeshared-singleton"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-transport/issues/101/vote"}}, "reporter": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "title": "Remove NodeShared singleton", "component": null, "votes": 0, "watches": 1, "content": {"raw": "# Summary\r\n\r\nNodeShared is a singleton, which can lead to runtime problems particularly during shutdown. One problem occurs when two nodes are in the same process, with one node publishing messages that the other node consumes and then publishes new messages. I see a segfault when running this code (#!/ignitionrobotics/ign-launch/commits/11b5830128da4561711a043c6450545a7b90c0a4) with this configuration file( #!/ignitionrobotics/ign-launch/commits/11b5830128da4561711a043c6450545a7b90c0a4#chg-config/gazebo.ign). When this version of `ign-launch` is installed, you can test using `ign launch -f config/gazebo.ign`. \r\n\r\n\r\n# Motivation\r\n\r\nIn addition to the above error, we are trying to remove singletons from our code base. For reasons see https://stackoverflow.com/questions/137975/what-is-so-bad-about-singletons/138012#138012 and https://cocoacasts.com/are-singletons-bad.\r\n\r\n# Describe alternatives you've considered\r\n\r\nI think @caguero mentioned that we could potentially use features built into ZeroMq to avoid the NodeShared singleton.", "markup": "markdown", "html": "<h1 id=\"markdown-header-summary\">Summary</h1>\n<p>NodeShared is a singleton, which can lead to runtime problems particularly during shutdown. One problem occurs when two nodes are in the same process, with one node publishing messages that the other node consumes and then publishes new messages. I see a segfault when running this code (<a href=\"#!/ignitionrobotics/ign-launch/commits/11b5830128da4561711a043c6450545a7b90c0a4\" rel=\"nofollow\" class=\"ap-connect-link\">#!/ignitionrobotics/ign-launch/commits/11b5830128da4561711a043c6450545a7b90c0a4</a>) with this configuration file( <a href=\"#!/ignitionrobotics/ign-launch/commits/11b5830128da4561711a043c6450545a7b90c0a4#chg-config/gazebo.ign\" rel=\"nofollow\" class=\"ap-connect-link\">#!/ignitionrobotics/ign-launch/commits/11b5830128da4561711a043c6450545a7b90c0a4#chg-config/gazebo.ign</a>). When this version of <code>ign-launch</code> is installed, you can test using <code>ign launch -f config/gazebo.ign</code>. </p>\n<h1 id=\"markdown-header-motivation\">Motivation</h1>\n<p>In addition to the above error, we are trying to remove singletons from our code base. For reasons see <a href=\"https://stackoverflow.com/questions/137975/what-is-so-bad-about-singletons/138012#138012\" rel=\"nofollow\" class=\"ap-connect-link\">https://stackoverflow.com/questions/137975/what-is-so-bad-about-singletons/138012#138012</a> and <a href=\"https://cocoacasts.com/are-singletons-bad\" rel=\"nofollow\" class=\"ap-connect-link\">https://cocoacasts.com/are-singletons-bad</a>.</p>\n<h1 id=\"markdown-header-describe-alternatives-youve-considered\">Describe alternatives you've considered</h1>\n<p>I think @caguero mentioned that we could potentially use features built into ZeroMq to avoid the NodeShared singleton.</p>", "type": "rendered"}, "assignee": null, "state": "new", "version": null, "edited_on": null, "created_on": "2019-02-04T20:52:15.260122+00:00", "milestone": null, "updated_on": "2019-02-04T20:52:15.260122+00:00", "type": "issue", "id": 101}