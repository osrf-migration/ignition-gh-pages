{"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/issues/19/comments/13280243.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/issues/19#comment-13280243"}}, "issue": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/issues/19.json"}}, "type": "issue", "id": 19, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport"}, "avatar": {"href": "data/bytebucket.org/ravatar/{4249390a-7f55-404b-990d-817ba94cc7ac}ts=1533306"}}, "type": "repository", "name": "ign-transport", "full_name": "ignitionrobotics/ign-transport", "uuid": "{4249390a-7f55-404b-990d-817ba94cc7ac}"}, "title": "Proper implementation of PIMPL"}, "content": {"raw": "I tried to implement this in [branch issue_19](#!/ignitionrobotics/ign-transport/branches/compare/issue_19..win_support_testsuite#diff), but there is a big problem with the templated functions in [Node.hh](#!/ignitionrobotics/ign-transport/src/2750d202a863cce85d4ec511472a90fa9c0f1ee4/include/ignition/transport/Node.hh#cl-84). These templated functions need to be implemented in the header, so we shouldn't try use the PIMPL idiom for any of the data need by these functions. According to PIMPL, we shouldn't ever dereference `this->dataPtr` in any functions defined in the header file.\n\nWe should refactor the Node class to separate out what is truly private data.", "markup": "markdown", "html": "<p>I tried to implement this in <a data-is-external-link=\"true\" href=\"#!/ignitionrobotics/ign-transport/branches/compare/issue_19..win_support_testsuite#diff\" rel=\"nofollow\">branch issue_19</a>, but there is a big problem with the templated functions in <a data-is-external-link=\"true\" href=\"#!/ignitionrobotics/ign-transport/src/2750d202a863cce85d4ec511472a90fa9c0f1ee4/include/ignition/transport/Node.hh#cl-84\" rel=\"nofollow\">Node.hh</a>. These templated functions need to be implemented in the header, so we shouldn't try use the PIMPL idiom for any of the data need by these functions. According to PIMPL, we shouldn't ever dereference <code>this-&gt;dataPtr</code> in any functions defined in the header file.</p>\n<p>We should refactor the Node class to separate out what is truly private data.</p>", "type": "rendered"}, "created_on": "2014-10-29T00:03:10.985264+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 13280243}