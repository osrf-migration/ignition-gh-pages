{"pagelen": 50, "values": [{"update": {"description": "The new method ```bool Node::WaitForSubscribers(const std::string &_topic, const int _timeout = -1);``` is added. New classes ```TopicWatcher```, ```TopicWatcherPrivate```, ```TopicWatcherStorage``` were added to provide the opportunity to use this function.\r\n\r\nIn the ```NodeShared``` class there is  ```TopicWatcherStorage```. The data is a map where the keys are topics, the values are another map, where the key is nuuid, the value is shared_ptr<TopicWatcher>.\r\n\r\nWe could check ```NodeShared::localSubscriptions``` and ```NodeShared::remoteSubscribers``` first. Then if there is no subscriptions we create a topic watcher and call ```wait```. ", "title": "Issue_47: Wait for subscribers", "destination": {"commit": {"hash": "2a041435ea45", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/commit/2a041435ea45.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/commits/2a041435ea45"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport"}, "avatar": {"href": "data/bytebucket.org/ravatar/{4249390a-7f55-404b-990d-817ba94cc7ac}ts=1533306"}}, "type": "repository", "name": "ign-transport", "full_name": "ignitionrobotics/ign-transport", "uuid": "{4249390a-7f55-404b-990d-817ba94cc7ac}"}, "branch": {"name": "default"}}, "reason": "This pull request is almost there except a few details. We'll work on it offline and will create the pull request again when ready.", "source": {"commit": {"hash": "3373fe1e0958", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/nampi/ign-transport/commit/3373fe1e0958"}, "html": {"href": "https://bitbucket.org/nampi/ign-transport/commits/3373fe1e0958"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/nampi/ign-transport"}, "html": {"href": "https://bitbucket.org/nampi/ign-transport"}, "avatar": {"href": "data/bytebucket.org/ravatar/{a078025c-a14f-47ce-90a1-781a93700a2c}ts=c_plus_plus"}}, "type": "repository", "name": "ign-transport", "full_name": "nampi/ign-transport", "uuid": "{a078025c-a14f-47ce-90a1-781a93700a2c}"}, "branch": {"name": "issue_47"}}, "state": "DECLINED", "author": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "date": "2016-11-07T22:06:36.722181+00:00"}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/24216878.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-24216878"}}, "parent": {"id": 23810519, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/23810519.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-23810519"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "Let's go for the easier version for now.", "markup": "markdown", "html": "<p>Let's go for the easier version for now.</p>", "type": "rendered"}, "created_on": "2016-09-23T20:51:48.135930+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "inline": {}, "updated_on": "2016-09-23T20:51:48.138353+00:00", "type": "pullrequest_comment", "id": 24216878}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/23811591.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-23811591"}}, "parent": {"id": 23689518, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/23689518.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-23689518"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "I didn't get it. I test the situations with local subscribers in `Node_TEST.cc` in `TEST(NodeTest, waitForSubscribers)`. I have a problem to check situation with remote subscribers.", "markup": "markdown", "html": "<p>I didn't get it. I test the situations with local subscribers in <code>Node_TEST.cc</code> in <code>TEST(NodeTest, waitForSubscribers)</code>. I have a problem to check situation with remote subscribers.</p>", "type": "rendered"}, "created_on": "2016-09-15T19:15:58.490365+00:00", "user": {"display_name": "nampi", "uuid": "{89a67bdd-09e6-4c17-8014-48d97fa5c4c8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D"}, "html": {"href": "https://bitbucket.org/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8/38230840-603b-4875-93fb-c2e81928dd69/128"}}, "nickname": "nampi", "type": "user", "account_id": "557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8"}, "inline": {}, "updated_on": "2016-09-15T19:15:58.498558+00:00", "type": "pullrequest_comment", "id": 23811591}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/23810519.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-23810519"}}, "parent": {"id": 23688627, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/23688627.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-23688627"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "I think that it takes some time to solve issue#54, so we decided to do issue#54 in a different pull request, but add different types support here. Do you prefer to add different types later (maybe never) and now use `WaitForSubscribers` as simple as possible? ", "markup": "markdown", "html": "<p>I think that it takes some time to solve issue<a href=\"#!/ignitionrobotics/ign-transport/issues/54/publish-on-the-topics-with-the-same-names\" rel=\"nofollow\" title=\"Publish on the topics with the same names but different topic types\" class=\"ap-connect-link\">#54</a>, so we decided to do issue<a href=\"#!/ignitionrobotics/ign-transport/issues/54/publish-on-the-topics-with-the-same-names\" rel=\"nofollow\" title=\"Publish on the topics with the same names but different topic types\" class=\"ap-connect-link\">#54</a> in a different pull request, but add different types support here. Do you prefer to add different types later (maybe never) and now use <code>WaitForSubscribers</code> as simple as possible? </p>", "type": "rendered"}, "created_on": "2016-09-15T18:54:13.555341+00:00", "user": {"display_name": "nampi", "uuid": "{89a67bdd-09e6-4c17-8014-48d97fa5c4c8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D"}, "html": {"href": "https://bitbucket.org/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8/38230840-603b-4875-93fb-c2e81928dd69/128"}}, "nickname": "nampi", "type": "user", "account_id": "557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8"}, "inline": {}, "updated_on": "2016-09-15T18:54:39.886336+00:00", "type": "pullrequest_comment", "id": 23810519}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/23689518.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-23689518"}}, "parent": {"id": 23622154, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/23622154.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-23622154"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "Sorry, I meant a test similar to this one:\n\n\n```\n#!c++\n\ntransport::Node node;\ntransport::Node node2;\nunsigned int timeout = 1000;\n\nEXPECT_TRUE(node2.Advertise<ignition::msgs::Vector3d>(g_topic));\nEXPECT_TRUE(node.Advertise<ignition::msgs::Int32>(g_topic));\n\nstd::string subscriberPath = testing::portablePathUnion(\n   PROJECT_BINARY_PATH,\n   \"test/integration/INTEGRATION_waitForSubscribers_aux\");\ntesting::forkHandlerType pi = testing::forkAndRun(subscriberPath.c_str(),\n  partition.c_str());\n\nEXPECT_FALSE(node.WaitForSubscribers<ignition::msgs::Int32>(g_topic,\n  timeout));\n```\n\nAnd this other test should trigger the condition `if (subscriptionHandlerPtr->TypeName() == _typeName)`:\n\n\n```\n#!c++\n\ntransport::Node node;\ntransport::Node node2;\nunsigned int timeout = 1000;\n\nEXPECT_TRUE(node2.Subscribe(g_topic, cb));\nEXPECT_TRUE(node.Advertise<ignition::msgs::Int32>(g_topic));\n\nstd::string subscriberPath = testing::portablePathUnion(\n   PROJECT_BINARY_PATH,\n   \"test/integration/INTEGRATION_waitForSubscribers_aux\");\ntesting::forkHandlerType pi = testing::forkAndRun(subscriberPath.c_str(),\n  partition.c_str());\n\nEXPECT_TRUE(node.WaitForSubscribers<ignition::msgs::Int32>(g_topic,\n  timeout));\n```\n\n", "markup": "markdown", "html": "<p>Sorry, I meant a test similar to this one:</p>\n<div class=\"codehilite language-c++\"><pre><span></span><span class=\"n\">transport</span><span class=\"o\">::</span><span class=\"n\">Node</span> <span class=\"n\">node</span><span class=\"p\">;</span>\n<span class=\"n\">transport</span><span class=\"o\">::</span><span class=\"n\">Node</span> <span class=\"n\">node2</span><span class=\"p\">;</span>\n<span class=\"kt\">unsigned</span> <span class=\"kt\">int</span> <span class=\"n\">timeout</span> <span class=\"o\">=</span> <span class=\"mi\">1000</span><span class=\"p\">;</span>\n\n<span class=\"n\">EXPECT_TRUE</span><span class=\"p\">(</span><span class=\"n\">node2</span><span class=\"p\">.</span><span class=\"n\">Advertise</span><span class=\"o\">&lt;</span><span class=\"n\">ignition</span><span class=\"o\">::</span><span class=\"n\">msgs</span><span class=\"o\">::</span><span class=\"n\">Vector3d</span><span class=\"o\">&gt;</span><span class=\"p\">(</span><span class=\"n\">g_topic</span><span class=\"p\">));</span>\n<span class=\"n\">EXPECT_TRUE</span><span class=\"p\">(</span><span class=\"n\">node</span><span class=\"p\">.</span><span class=\"n\">Advertise</span><span class=\"o\">&lt;</span><span class=\"n\">ignition</span><span class=\"o\">::</span><span class=\"n\">msgs</span><span class=\"o\">::</span><span class=\"n\">Int32</span><span class=\"o\">&gt;</span><span class=\"p\">(</span><span class=\"n\">g_topic</span><span class=\"p\">));</span>\n\n<span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">string</span> <span class=\"n\">subscriberPath</span> <span class=\"o\">=</span> <span class=\"n\">testing</span><span class=\"o\">::</span><span class=\"n\">portablePathUnion</span><span class=\"p\">(</span>\n   <span class=\"n\">PROJECT_BINARY_PATH</span><span class=\"p\">,</span>\n   <span class=\"s\">&quot;test/integration/INTEGRATION_waitForSubscribers_aux&quot;</span><span class=\"p\">);</span>\n<span class=\"n\">testing</span><span class=\"o\">::</span><span class=\"n\">forkHandlerType</span> <span class=\"n\">pi</span> <span class=\"o\">=</span> <span class=\"n\">testing</span><span class=\"o\">::</span><span class=\"n\">forkAndRun</span><span class=\"p\">(</span><span class=\"n\">subscriberPath</span><span class=\"p\">.</span><span class=\"n\">c_str</span><span class=\"p\">(),</span>\n  <span class=\"n\">partition</span><span class=\"p\">.</span><span class=\"n\">c_str</span><span class=\"p\">());</span>\n\n<span class=\"n\">EXPECT_FALSE</span><span class=\"p\">(</span><span class=\"n\">node</span><span class=\"p\">.</span><span class=\"n\">WaitForSubscribers</span><span class=\"o\">&lt;</span><span class=\"n\">ignition</span><span class=\"o\">::</span><span class=\"n\">msgs</span><span class=\"o\">::</span><span class=\"n\">Int32</span><span class=\"o\">&gt;</span><span class=\"p\">(</span><span class=\"n\">g_topic</span><span class=\"p\">,</span>\n  <span class=\"n\">timeout</span><span class=\"p\">));</span>\n</pre></div>\n\n\n<p>And this other test should trigger the condition <code>if (subscriptionHandlerPtr-&gt;TypeName() == _typeName)</code>:</p>\n<div class=\"codehilite language-c++\"><pre><span></span><span class=\"n\">transport</span><span class=\"o\">::</span><span class=\"n\">Node</span> <span class=\"n\">node</span><span class=\"p\">;</span>\n<span class=\"n\">transport</span><span class=\"o\">::</span><span class=\"n\">Node</span> <span class=\"n\">node2</span><span class=\"p\">;</span>\n<span class=\"kt\">unsigned</span> <span class=\"kt\">int</span> <span class=\"n\">timeout</span> <span class=\"o\">=</span> <span class=\"mi\">1000</span><span class=\"p\">;</span>\n\n<span class=\"n\">EXPECT_TRUE</span><span class=\"p\">(</span><span class=\"n\">node2</span><span class=\"p\">.</span><span class=\"n\">Subscribe</span><span class=\"p\">(</span><span class=\"n\">g_topic</span><span class=\"p\">,</span> <span class=\"n\">cb</span><span class=\"p\">));</span>\n<span class=\"n\">EXPECT_TRUE</span><span class=\"p\">(</span><span class=\"n\">node</span><span class=\"p\">.</span><span class=\"n\">Advertise</span><span class=\"o\">&lt;</span><span class=\"n\">ignition</span><span class=\"o\">::</span><span class=\"n\">msgs</span><span class=\"o\">::</span><span class=\"n\">Int32</span><span class=\"o\">&gt;</span><span class=\"p\">(</span><span class=\"n\">g_topic</span><span class=\"p\">));</span>\n\n<span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">string</span> <span class=\"n\">subscriberPath</span> <span class=\"o\">=</span> <span class=\"n\">testing</span><span class=\"o\">::</span><span class=\"n\">portablePathUnion</span><span class=\"p\">(</span>\n   <span class=\"n\">PROJECT_BINARY_PATH</span><span class=\"p\">,</span>\n   <span class=\"s\">&quot;test/integration/INTEGRATION_waitForSubscribers_aux&quot;</span><span class=\"p\">);</span>\n<span class=\"n\">testing</span><span class=\"o\">::</span><span class=\"n\">forkHandlerType</span> <span class=\"n\">pi</span> <span class=\"o\">=</span> <span class=\"n\">testing</span><span class=\"o\">::</span><span class=\"n\">forkAndRun</span><span class=\"p\">(</span><span class=\"n\">subscriberPath</span><span class=\"p\">.</span><span class=\"n\">c_str</span><span class=\"p\">(),</span>\n  <span class=\"n\">partition</span><span class=\"p\">.</span><span class=\"n\">c_str</span><span class=\"p\">());</span>\n\n<span class=\"n\">EXPECT_TRUE</span><span class=\"p\">(</span><span class=\"n\">node</span><span class=\"p\">.</span><span class=\"n\">WaitForSubscribers</span><span class=\"o\">&lt;</span><span class=\"n\">ignition</span><span class=\"o\">::</span><span class=\"n\">msgs</span><span class=\"o\">::</span><span class=\"n\">Int32</span><span class=\"o\">&gt;</span><span class=\"p\">(</span><span class=\"n\">g_topic</span><span class=\"p\">,</span>\n  <span class=\"n\">timeout</span><span class=\"p\">));</span>\n</pre></div>", "type": "rendered"}, "created_on": "2016-09-13T23:17:06.303706+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "inline": {}, "updated_on": "2016-09-13T23:21:14.463611+00:00", "type": "pullrequest_comment", "id": 23689518}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/23688627.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-23688627"}}, "parent": {"id": 23619459, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/23619459.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-23619459"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "`msg->GetTypeName()` returns a `std::string` value and the template parameter needs to be a protobuf type, not a string (e.g.: `ignition::msgs::Int32`). This is why you see the error.\n\nI believe you can get a type from a variable at compilation time doing `decltype(my_var)`. However, in this case it's not as easy because the return value of `ignition::msgs::Factory::New()` is a pointer to a generic `google::protobuf::Message`, not the derived type.\n\n~~Leave it as it's because this is kind of hard to solve and out of the scope of this pull request.~~\n\nWell, per issue #54, we now know that we shouldn't have more than one type per topic advertised within the same node. So, I believe there's no need to use a template anymore (in fact, the message type shouldn't be a parameter anymore, we can internally get the type). If we remove it, we'll solve this issue, right? Sorry for all these changes.", "markup": "markdown", "html": "<p><code>msg-&gt;GetTypeName()</code> returns a <code>std::string</code> value and the template parameter needs to be a protobuf type, not a string (e.g.: <code>ignition::msgs::Int32</code>). This is why you see the error.</p>\n<p>I believe you can get a type from a variable at compilation time doing <code>decltype(my_var)</code>. However, in this case it's not as easy because the return value of <code>ignition::msgs::Factory::New()</code> is a pointer to a generic <code>google::protobuf::Message</code>, not the derived type.</p>\n<p><del>Leave it as it's because this is kind of hard to solve and out of the scope of this pull request.</del></p>\n<p>Well, per issue <a href=\"#!/ignitionrobotics/ign-transport/issues/54/publish-on-the-topics-with-the-same-names\" rel=\"nofollow\" title=\"Publish on the topics with the same names but different topic types\" class=\"ap-connect-link\">#54</a>, we now know that we shouldn't have more than one type per topic advertised within the same node. So, I believe there's no need to use a template anymore (in fact, the message type shouldn't be a parameter anymore, we can internally get the type). If we remove it, we'll solve this issue, right? Sorry for all these changes.</p>", "type": "rendered"}, "created_on": "2016-09-13T22:43:04.024457+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "inline": {}, "updated_on": "2016-09-13T23:12:44.316782+00:00", "type": "pullrequest_comment", "id": 23688627}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/23685610.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-23685610"}}, "parent": {"id": 23619727, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/23619727.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-23619727"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "That's very true. No need to change anything.", "markup": "markdown", "html": "<p>That's very true. No need to change anything.</p>", "type": "rendered"}, "created_on": "2016-09-13T21:10:16.905987+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "inline": {}, "updated_on": "2016-09-13T21:10:16.908133+00:00", "type": "pullrequest_comment", "id": 23685610}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/23622154.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-23622154"}}, "parent": {"id": 23114672, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/23114672.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-23114672"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "This test is for this check:\n\n```\n#!c++\nif (pub.MsgTypeName() != _typeName)\n{\n    std::cerr << \"Node::WaitForSubscribers() Type mismatch.\" << std::endl\n        << \"\\t* Type advertised: \" << pub.MsgTypeName() << std::endl\n        << \"\\t* Type published: \" << _typeName << std::endl;\n    return false;\n}\n\n```\n\nI think we can not have the situation for this block:\n\n               \n```\n#!c++\n\nif (subscriptionHandlerPtr->TypeName() == _typeName)\n    return true;\n```\n\n\n\n", "markup": "markdown", "html": "<p>This test is for this check:</p>\n<div class=\"codehilite language-c++\"><pre><span></span><span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"n\">pub</span><span class=\"p\">.</span><span class=\"n\">MsgTypeName</span><span class=\"p\">()</span> <span class=\"o\">!=</span> <span class=\"n\">_typeName</span><span class=\"p\">)</span>\n<span class=\"p\">{</span>\n    <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">cerr</span> <span class=\"o\">&lt;&lt;</span> <span class=\"s\">&quot;Node::WaitForSubscribers() Type mismatch.&quot;</span> <span class=\"o\">&lt;&lt;</span> <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">endl</span>\n        <span class=\"o\">&lt;&lt;</span> <span class=\"s\">&quot;</span><span class=\"se\">\\t</span><span class=\"s\">* Type advertised: &quot;</span> <span class=\"o\">&lt;&lt;</span> <span class=\"n\">pub</span><span class=\"p\">.</span><span class=\"n\">MsgTypeName</span><span class=\"p\">()</span> <span class=\"o\">&lt;&lt;</span> <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">endl</span>\n        <span class=\"o\">&lt;&lt;</span> <span class=\"s\">&quot;</span><span class=\"se\">\\t</span><span class=\"s\">* Type published: &quot;</span> <span class=\"o\">&lt;&lt;</span> <span class=\"n\">_typeName</span> <span class=\"o\">&lt;&lt;</span> <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">endl</span><span class=\"p\">;</span>\n    <span class=\"k\">return</span> <span class=\"nb\">false</span><span class=\"p\">;</span>\n<span class=\"p\">}</span>\n</pre></div>\n\n\n<p>I think we can not have the situation for this block:</p>\n<div class=\"codehilite language-c++\"><pre><span></span><span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"n\">subscriptionHandlerPtr</span><span class=\"o\">-&gt;</span><span class=\"n\">TypeName</span><span class=\"p\">()</span> <span class=\"o\">==</span> <span class=\"n\">_typeName</span><span class=\"p\">)</span>\n    <span class=\"k\">return</span> <span class=\"nb\">true</span><span class=\"p\">;</span>\n</pre></div>", "type": "rendered"}, "created_on": "2016-09-12T22:58:02.059175+00:00", "user": {"display_name": "nampi", "uuid": "{89a67bdd-09e6-4c17-8014-48d97fa5c4c8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D"}, "html": {"href": "https://bitbucket.org/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8/38230840-603b-4875-93fb-c2e81928dd69/128"}}, "nickname": "nampi", "type": "user", "account_id": "557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8"}, "inline": {}, "updated_on": "2016-09-12T22:58:02.065907+00:00", "type": "pullrequest_comment", "id": 23622154}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/23621439.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-23621439"}}, "parent": {"id": 23115051, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/23115051.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-23115051"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "Updated here [[8429fe5](https://bitbucket.org/nampi/ign-transport/commits/8429fe5d303a5b66f3deea89efd231f7015c8a38?at=default)].", "markup": "markdown", "html": "<p>Updated here [<a data-is-external-link=\"true\" href=\"https://bitbucket.org/nampi/ign-transport/commits/8429fe5d303a5b66f3deea89efd231f7015c8a38?at=default\" rel=\"nofollow\">8429fe5</a>].</p>", "type": "rendered"}, "created_on": "2016-09-12T22:32:47.603901+00:00", "user": {"display_name": "nampi", "uuid": "{89a67bdd-09e6-4c17-8014-48d97fa5c4c8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D"}, "html": {"href": "https://bitbucket.org/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8/38230840-603b-4875-93fb-c2e81928dd69/128"}}, "nickname": "nampi", "type": "user", "account_id": "557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8"}, "inline": {}, "updated_on": "2016-09-12T22:33:27.316926+00:00", "type": "pullrequest_comment", "id": 23621439}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/23621468.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-23621468"}}, "parent": {"id": 23115044, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/23115044.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-23115044"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "Updated here [[8429fe5](https://bitbucket.org/nampi/ign-transport/commits/8429fe5d303a5b66f3deea89efd231f7015c8a38?at=default)].", "markup": "markdown", "html": "<p>Updated here [<a data-is-external-link=\"true\" href=\"https://bitbucket.org/nampi/ign-transport/commits/8429fe5d303a5b66f3deea89efd231f7015c8a38?at=default\" rel=\"nofollow\">8429fe5</a>].</p>", "type": "rendered"}, "created_on": "2016-09-12T22:33:23.660596+00:00", "user": {"display_name": "nampi", "uuid": "{89a67bdd-09e6-4c17-8014-48d97fa5c4c8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D"}, "html": {"href": "https://bitbucket.org/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8/38230840-603b-4875-93fb-c2e81928dd69/128"}}, "nickname": "nampi", "type": "user", "account_id": "557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8"}, "inline": {}, "updated_on": "2016-09-12T22:33:23.666310+00:00", "type": "pullrequest_comment", "id": 23621468}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/23621435.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-23621435"}}, "parent": {"id": 23115060, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/23115060.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-23115060"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "Updated here [[8429fe5](https://bitbucket.org/nampi/ign-transport/commits/8429fe5d303a5b66f3deea89efd231f7015c8a38?at=default)].", "markup": "markdown", "html": "<p>Updated here [<a data-is-external-link=\"true\" href=\"https://bitbucket.org/nampi/ign-transport/commits/8429fe5d303a5b66f3deea89efd231f7015c8a38?at=default\" rel=\"nofollow\">8429fe5</a>].</p>", "type": "rendered"}, "created_on": "2016-09-12T22:32:42.780138+00:00", "user": {"display_name": "nampi", "uuid": "{89a67bdd-09e6-4c17-8014-48d97fa5c4c8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D"}, "html": {"href": "https://bitbucket.org/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8/38230840-603b-4875-93fb-c2e81928dd69/128"}}, "nickname": "nampi", "type": "user", "account_id": "557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8"}, "inline": {}, "updated_on": "2016-09-12T22:33:13.908493+00:00", "type": "pullrequest_comment", "id": 23621435}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/23621407.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-23621407"}}, "parent": {"id": 23115071, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/23115071.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-23115071"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "Updated here [[8429fe5](https://bitbucket.org/nampi/ign-transport/commits/8429fe5d303a5b66f3deea89efd231f7015c8a38?at=default)].", "markup": "markdown", "html": "<p>Updated here [<a data-is-external-link=\"true\" href=\"https://bitbucket.org/nampi/ign-transport/commits/8429fe5d303a5b66f3deea89efd231f7015c8a38?at=default\" rel=\"nofollow\">8429fe5</a>].</p>", "type": "rendered"}, "created_on": "2016-09-12T22:31:50.706950+00:00", "user": {"display_name": "nampi", "uuid": "{89a67bdd-09e6-4c17-8014-48d97fa5c4c8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D"}, "html": {"href": "https://bitbucket.org/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8/38230840-603b-4875-93fb-c2e81928dd69/128"}}, "nickname": "nampi", "type": "user", "account_id": "557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8"}, "inline": {}, "updated_on": "2016-09-12T22:31:50.709955+00:00", "type": "pullrequest_comment", "id": 23621407}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/23621397.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-23621397"}}, "parent": {"id": 23132173, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/23132173.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-23132173"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "Updated here [[8429fe5](https://bitbucket.org/nampi/ign-transport/commits/8429fe5d303a5b66f3deea89efd231f7015c8a38?at=default)].", "markup": "markdown", "html": "<p>Updated here [<a data-is-external-link=\"true\" href=\"https://bitbucket.org/nampi/ign-transport/commits/8429fe5d303a5b66f3deea89efd231f7015c8a38?at=default\" rel=\"nofollow\">8429fe5</a>].</p>", "type": "rendered"}, "created_on": "2016-09-12T22:31:34.006232+00:00", "user": {"display_name": "nampi", "uuid": "{89a67bdd-09e6-4c17-8014-48d97fa5c4c8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D"}, "html": {"href": "https://bitbucket.org/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8/38230840-603b-4875-93fb-c2e81928dd69/128"}}, "nickname": "nampi", "type": "user", "account_id": "557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8"}, "inline": {}, "updated_on": "2016-09-12T22:31:34.009739+00:00", "type": "pullrequest_comment", "id": 23621397}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/23621394.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-23621394"}}, "parent": {"id": 23116143, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/23116143.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-23116143"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "Updated here [[8429fe5](https://bitbucket.org/nampi/ign-transport/commits/8429fe5d303a5b66f3deea89efd231f7015c8a38?at=default)].", "markup": "markdown", "html": "<p>Updated here [<a data-is-external-link=\"true\" href=\"https://bitbucket.org/nampi/ign-transport/commits/8429fe5d303a5b66f3deea89efd231f7015c8a38?at=default\" rel=\"nofollow\">8429fe5</a>].</p>", "type": "rendered"}, "created_on": "2016-09-12T22:31:28.245187+00:00", "user": {"display_name": "nampi", "uuid": "{89a67bdd-09e6-4c17-8014-48d97fa5c4c8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D"}, "html": {"href": "https://bitbucket.org/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8/38230840-603b-4875-93fb-c2e81928dd69/128"}}, "nickname": "nampi", "type": "user", "account_id": "557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8"}, "inline": {}, "updated_on": "2016-09-12T22:31:28.249489+00:00", "type": "pullrequest_comment", "id": 23621394}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/23621354.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-23621354"}}, "parent": {"id": 23111035, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/23111035.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-23111035"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "This is connected to different behaviours if I delete `if (handler.second->TypeName() != _pub.MsgTypeName())` line in `NodeShared`. There is the same behaviour with this line. The duplicated test is deleted here [[3373fe1](https://bitbucket.org/nampi/ign-transport/commits/3373fe1e09584efa333f78a5645d2cd5a0ad5439?at=default)].", "markup": "markdown", "html": "<p>This is connected to different behaviours if I delete <code>if (handler.second-&gt;TypeName() != _pub.MsgTypeName())</code> line in <code>NodeShared</code>. There is the same behaviour with this line. The duplicated test is deleted here [<a data-is-external-link=\"true\" href=\"https://bitbucket.org/nampi/ign-transport/commits/3373fe1e09584efa333f78a5645d2cd5a0ad5439?at=default\" rel=\"nofollow\">3373fe1</a>].</p>", "type": "rendered"}, "created_on": "2016-09-12T22:30:10.404675+00:00", "user": {"display_name": "nampi", "uuid": "{89a67bdd-09e6-4c17-8014-48d97fa5c4c8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D"}, "html": {"href": "https://bitbucket.org/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8/38230840-603b-4875-93fb-c2e81928dd69/128"}}, "nickname": "nampi", "type": "user", "account_id": "557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8"}, "inline": {}, "updated_on": "2016-09-12T22:30:34.792469+00:00", "type": "pullrequest_comment", "id": 23621354}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/23621357.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-23621357"}}, "parent": {"id": 23110854, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/23110854.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-23110854"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "This is connected to different behaviour if I delete `if (handler.second->TypeName() != _pub.MsgTypeName())` line in `NodeShared`. There is the same behaviour with this line. The duplicated test is deleted here [[3373fe1](https://bitbucket.org/nampi/ign-transport/commits/3373fe1e09584efa333f78a5645d2cd5a0ad5439?at=default)].", "markup": "markdown", "html": "<p>This is connected to different behaviour if I delete <code>if (handler.second-&gt;TypeName() != _pub.MsgTypeName())</code> line in <code>NodeShared</code>. There is the same behaviour with this line. The duplicated test is deleted here [<a data-is-external-link=\"true\" href=\"https://bitbucket.org/nampi/ign-transport/commits/3373fe1e09584efa333f78a5645d2cd5a0ad5439?at=default\" rel=\"nofollow\">3373fe1</a>].</p>", "type": "rendered"}, "created_on": "2016-09-12T22:30:23.635864+00:00", "user": {"display_name": "nampi", "uuid": "{89a67bdd-09e6-4c17-8014-48d97fa5c4c8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D"}, "html": {"href": "https://bitbucket.org/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8/38230840-603b-4875-93fb-c2e81928dd69/128"}}, "nickname": "nampi", "type": "user", "account_id": "557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8"}, "inline": {}, "updated_on": "2016-09-12T22:30:23.642543+00:00", "type": "pullrequest_comment", "id": 23621357}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"update": {"description": "The new method ```bool Node::WaitForSubscribers(const std::string &_topic, const int _timeout = -1);``` is added. New classes ```TopicWatcher```, ```TopicWatcherPrivate```, ```TopicWatcherStorage``` were added to provide the opportunity to use this function.\r\n\r\nIn the ```NodeShared``` class there is  ```TopicWatcherStorage```. The data is a map where the keys are topics, the values are another map, where the key is nuuid, the value is shared_ptr<TopicWatcher>.\r\n\r\nWe could check ```NodeShared::localSubscriptions``` and ```NodeShared::remoteSubscribers``` first. Then if there is no subscriptions we create a topic watcher and call ```wait```. ", "title": "Issue_47: Wait for subscribers", "destination": {"commit": {"hash": "f63548f31172", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/commit/f63548f31172.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/commits/f63548f31172"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport"}, "avatar": {"href": "data/bytebucket.org/ravatar/{4249390a-7f55-404b-990d-817ba94cc7ac}ts=1533306"}}, "type": "repository", "name": "ign-transport", "full_name": "ignitionrobotics/ign-transport", "uuid": "{4249390a-7f55-404b-990d-817ba94cc7ac}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "3373fe1e0958", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/nampi/ign-transport/commit/3373fe1e0958"}, "html": {"href": "https://bitbucket.org/nampi/ign-transport/commits/3373fe1e0958"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/nampi/ign-transport"}, "html": {"href": "https://bitbucket.org/nampi/ign-transport"}, "avatar": {"href": "data/bytebucket.org/ravatar/{a078025c-a14f-47ce-90a1-781a93700a2c}ts=c_plus_plus"}}, "type": "repository", "name": "ign-transport", "full_name": "nampi/ign-transport", "uuid": "{a078025c-a14f-47ce-90a1-781a93700a2c}"}, "branch": {"name": "issue_47"}}, "state": "OPEN", "author": {"display_name": "nampi", "uuid": "{89a67bdd-09e6-4c17-8014-48d97fa5c4c8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D"}, "html": {"href": "https://bitbucket.org/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8/38230840-603b-4875-93fb-c2e81928dd69/128"}}, "nickname": "nampi", "type": "user", "account_id": "557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8"}, "date": "2016-09-12T22:29:04.239447+00:00"}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/23619880.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-23619880"}}, "parent": {"id": 22664600, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22664600.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22664600"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "Updated here [[bd1f27b](https://bitbucket.org/nampi/ign-transport/commits/bd1f27bebc8509ba624d00affbf72251517bcca9?at=default)].", "markup": "markdown", "html": "<p>Updated here [<a data-is-external-link=\"true\" href=\"https://bitbucket.org/nampi/ign-transport/commits/bd1f27bebc8509ba624d00affbf72251517bcca9?at=default\" rel=\"nofollow\">bd1f27b</a>].</p>", "type": "rendered"}, "created_on": "2016-09-12T21:43:44.906167+00:00", "user": {"display_name": "nampi", "uuid": "{89a67bdd-09e6-4c17-8014-48d97fa5c4c8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D"}, "html": {"href": "https://bitbucket.org/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8/38230840-603b-4875-93fb-c2e81928dd69/128"}}, "nickname": "nampi", "type": "user", "account_id": "557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8"}, "inline": {}, "updated_on": "2016-09-12T21:43:44.909512+00:00", "type": "pullrequest_comment", "id": 23619880}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/23619727.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-23619727"}}, "parent": {"id": 23115002, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/23115002.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-23115002"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "I do not understand why it is important here. Here I use function for current instance of class: `this->`. In `Node::AdvertisedTopics()` function I see the mutex `std::lock_guard<std::recursive_mutex> lk(this->dataPtr->shared->mutex);`. I think it will be double check.\n", "markup": "markdown", "html": "<p>I do not understand why it is important here. Here I use function for current instance of class: <code>this-&gt;</code>. In <code>Node::AdvertisedTopics()</code> function I see the mutex <code>std::lock_guard&lt;std::recursive_mutex&gt; lk(this-&gt;dataPtr-&gt;shared-&gt;mutex);</code>. I think it will be double check.</p>", "type": "rendered"}, "created_on": "2016-09-12T21:40:50.394649+00:00", "user": {"display_name": "nampi", "uuid": "{89a67bdd-09e6-4c17-8014-48d97fa5c4c8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D"}, "html": {"href": "https://bitbucket.org/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8/38230840-603b-4875-93fb-c2e81928dd69/128"}}, "nickname": "nampi", "type": "user", "account_id": "557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8"}, "inline": {}, "updated_on": "2016-09-12T21:40:50.400175+00:00", "type": "pullrequest_comment", "id": 23619727}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/23619459.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-23619459"}}, "parent": {"id": 23114927, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/23114927.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-23114927"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "I have a problem with `cmdTopicPub()` function in `ign.cc`. I can call WaitForSubscribers:\n\n```\n#!c++\n\nnode.WaitForSubscribers(_topic, msg->GetTypeName(), 800);\n```\n\nIn this case\n\n```\n#!c++\n\nnode.WaitForSubscribers<msg->GetTypeName()>(_topic, 800);\n```\nthere is an error:\n\n```\n#!bash\n\n/usr/include/c++/4.9/bits/basic_string.h:112:11: note: \u2018std::basic_string<char>\u2019 is not literal because:\n     class basic_string\n           ^\n/usr/include/c++/4.9/bits/basic_string.h:112:11: note:   \u2018std::basic_string<char>\u2019 has a non-trivial destructor\n/home/user/code/issue_47_wait/src/ign.cc:170:62: error: no matching function for call to \u2018ignition::transport::Node::WaitForSubscribers(const char*&, int)\u2019\n       node.WaitForSubscribers<msg->GetTypeName()>(_topic, 800);\n                                                              ^\n/home/user/code/issue_47_wait/src/ign.cc:170:62: note: candidate is:\nIn file included from /home/user/code/issue_47_wait/src/ign.cc:33:0:\n/home/user/code/issue_47_wait/include/ignition/transport/Node.hh:960:41: note: template<class T> bool ignition::transport::Node::WaitForSubscribers(const string&, int)\n       public: template<typename T> bool WaitForSubscribers(\n\n\n\n\n```\n\nI created two API functions like `Advertise()`. How can I call `WaitForSubscribers` correctly?\n", "markup": "markdown", "html": "<p>I have a problem with <code>cmdTopicPub()</code> function in <code>ign.cc</code>. I can call WaitForSubscribers:</p>\n<div class=\"codehilite language-c++\"><pre><span></span><span class=\"n\">node</span><span class=\"p\">.</span><span class=\"n\">WaitForSubscribers</span><span class=\"p\">(</span><span class=\"n\">_topic</span><span class=\"p\">,</span> <span class=\"n\">msg</span><span class=\"o\">-&gt;</span><span class=\"n\">GetTypeName</span><span class=\"p\">(),</span> <span class=\"mi\">800</span><span class=\"p\">);</span>\n</pre></div>\n\n\n<p>In this case</p>\n<div class=\"codehilite language-c++\"><pre><span></span><span class=\"n\">node</span><span class=\"p\">.</span><span class=\"n\">WaitForSubscribers</span><span class=\"o\">&lt;</span><span class=\"n\">msg</span><span class=\"o\">-&gt;</span><span class=\"n\">GetTypeName</span><span class=\"p\">()</span><span class=\"o\">&gt;</span><span class=\"p\">(</span><span class=\"n\">_topic</span><span class=\"p\">,</span> <span class=\"mi\">800</span><span class=\"p\">);</span>\n</pre></div>\n\n\n<p>there is an error:</p>\n<div class=\"codehilite language-bash\"><pre><span></span>/usr/include/c++/4.9/bits/basic_string.h:112:11: note: \u2018std::basic_string&lt;char&gt;\u2019 is not literal because:\n     class basic_string\n           ^\n/usr/include/c++/4.9/bits/basic_string.h:112:11: note:   \u2018std::basic_string&lt;char&gt;\u2019 has a non-trivial destructor\n/home/user/code/issue_47_wait/src/ign.cc:170:62: error: no matching <span class=\"k\">function</span> <span class=\"k\">for</span> call to \u2018ignition::transport::Node::WaitForSubscribers<span class=\"o\">(</span>const char*<span class=\"p\">&amp;</span>, int<span class=\"o\">)</span>\u2019\n       node.WaitForSubscribers&lt;msg-&gt;GetTypeName<span class=\"o\">()</span>&gt;<span class=\"o\">(</span>_topic, <span class=\"m\">800</span><span class=\"o\">)</span><span class=\"p\">;</span>\n                                                              ^\n/home/user/code/issue_47_wait/src/ign.cc:170:62: note: candidate is:\nIn file included from /home/user/code/issue_47_wait/src/ign.cc:33:0:\n/home/user/code/issue_47_wait/include/ignition/transport/Node.hh:960:41: note: template&lt;class T&gt; bool ignition::transport::Node::WaitForSubscribers<span class=\"o\">(</span>const string<span class=\"p\">&amp;</span>, int<span class=\"o\">)</span>\n       public: template&lt;typename T&gt; bool WaitForSubscribers<span class=\"o\">(</span>\n</pre></div>\n\n\n<p>I created two API functions like <code>Advertise()</code>. How can I call <code>WaitForSubscribers</code> correctly?</p>", "type": "rendered"}, "created_on": "2016-09-12T21:33:19.144776+00:00", "user": {"display_name": "nampi", "uuid": "{89a67bdd-09e6-4c17-8014-48d97fa5c4c8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D"}, "html": {"href": "https://bitbucket.org/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8/38230840-603b-4875-93fb-c2e81928dd69/128"}}, "nickname": "nampi", "type": "user", "account_id": "557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8"}, "inline": {}, "updated_on": "2016-09-12T21:33:19.146742+00:00", "type": "pullrequest_comment", "id": 23619459}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/23132214.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-23132214"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "Build is currently clean on [Trusty](http://build.osrfoundation.org/job/ignition_transport-ci-pr_any-trusty-amd64/159/). All tests are passing in my wily Ubuntu system.", "markup": "markdown", "html": "<p>Build is currently clean on <a data-is-external-link=\"true\" href=\"http://build.osrfoundation.org/job/ignition_transport-ci-pr_any-trusty-amd64/159/\" rel=\"nofollow\">Trusty</a>. All tests are passing in my wily Ubuntu system.</p>", "type": "rendered"}, "created_on": "2016-08-31T23:51:03.089537+00:00", "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "updated_on": "2016-08-31T23:57:26.874871+00:00", "type": "pullrequest_comment", "id": 23132214}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/23132173.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-23132173"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "Clang compiler [is complaining](http://build.osrfoundation.org/job/ignition_transport-ci-pr_any-homebrew-amd64/160/warnings8Result/new/) in Mac about `_mgs` not being used.", "markup": "markdown", "html": "<p>Clang compiler <a data-is-external-link=\"true\" href=\"http://build.osrfoundation.org/job/ignition_transport-ci-pr_any-homebrew-amd64/160/warnings8Result/new/\" rel=\"nofollow\">is complaining</a> in Mac about <code>_mgs</code> not being used.</p>", "type": "rendered"}, "created_on": "2016-08-31T23:49:29.829880+00:00", "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "inline": {}, "updated_on": "2016-08-31T23:49:29.835164+00:00", "type": "pullrequest_comment", "id": 23132173}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/23132140.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-23132140"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "This max and min function from std will probably need an `#include <algorithm>` to work on Windows ([currently failing](http://build.osrfoundation.org/job/ignition_transport-ci-pr_any-windows7-amd64/305/consoleFull#3515377186ea37b8d-a6d4-40ae-8431-d90c018842af))", "markup": "markdown", "html": "<p>This max and min function from std will probably need an <code>#include &lt;algorithm&gt;</code> to work on Windows (<a data-is-external-link=\"true\" href=\"http://build.osrfoundation.org/job/ignition_transport-ci-pr_any-windows7-amd64/305/consoleFull#3515377186ea37b8d-a6d4-40ae-8431-d90c018842af\" rel=\"nofollow\">currently failing</a>)</p>", "type": "rendered"}, "created_on": "2016-08-31T23:48:23.258507+00:00", "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "inline": {}, "updated_on": "2016-08-31T23:48:23.263939+00:00", "type": "pullrequest_comment", "id": 23132140}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/23115044.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-23115044"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "Unused variable", "markup": "markdown", "html": "<p>Unused variable</p>", "type": "rendered"}, "created_on": "2016-08-31T17:20:57.085934+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "inline": {}, "updated_on": "2016-08-31T17:41:36.600999+00:00", "type": "pullrequest_comment", "id": 23115044}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/23115051.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-23115051"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "Unused variable", "markup": "markdown", "html": "<p>Unused variable</p>", "type": "rendered"}, "created_on": "2016-08-31T17:21:03.022680+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "inline": {}, "updated_on": "2016-08-31T17:41:31.832051+00:00", "type": "pullrequest_comment", "id": 23115051}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/23115071.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-23115071"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "Unused variable", "markup": "markdown", "html": "<p>Unused variable</p>", "type": "rendered"}, "created_on": "2016-08-31T17:21:23.537804+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "inline": {}, "updated_on": "2016-08-31T17:41:25.424442+00:00", "type": "pullrequest_comment", "id": 23115071}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/23115060.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-23115060"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "Unused variable", "markup": "markdown", "html": "<p>Unused variable</p>", "type": "rendered"}, "created_on": "2016-08-31T17:21:13.204705+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "inline": {}, "updated_on": "2016-08-31T17:41:20.366452+00:00", "type": "pullrequest_comment", "id": 23115060}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/23116143.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-23116143"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "Add `#include <thread>`", "markup": "markdown", "html": "<p>Add <code>#include &lt;thread&gt;</code></p>", "type": "rendered"}, "created_on": "2016-08-31T17:40:29.647472+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "inline": {}, "updated_on": "2016-08-31T17:40:29.650638+00:00", "type": "pullrequest_comment", "id": 23116143}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/23116054.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-23116054"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "Unused messages", "markup": "markdown", "html": "<p>Unused messages</p>", "type": "rendered"}, "created_on": "2016-08-31T17:38:36.063521+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "inline": {}, "updated_on": "2016-08-31T17:38:36.069920+00:00", "type": "pullrequest_comment", "id": 23116054}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/23116048.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-23116048"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "Unused messages", "markup": "markdown", "html": "<p>Unused messages</p>", "type": "rendered"}, "created_on": "2016-08-31T17:38:31.465292+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "inline": {}, "updated_on": "2016-08-31T17:38:31.471644+00:00", "type": "pullrequest_comment", "id": 23116048}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/23116043.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-23116043"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "Unused message", "markup": "markdown", "html": "<p>Unused message</p>", "type": "rendered"}, "created_on": "2016-08-31T17:38:26.269645+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "inline": {}, "updated_on": "2016-08-31T17:38:26.274916+00:00", "type": "pullrequest_comment", "id": 23116043}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/23116034.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-23116034"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "Unused messages", "markup": "markdown", "html": "<p>Unused messages</p>", "type": "rendered"}, "created_on": "2016-08-31T17:38:15.890175+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "inline": {}, "updated_on": "2016-08-31T17:38:15.892744+00:00", "type": "pullrequest_comment", "id": 23116034}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/23115002.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-23115002"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "Could you move this block after the `std::unique_lock<std::recursive_mutex> lk(this->Shared()->mutex);`? There's risk of race condition here.", "markup": "markdown", "html": "<p>Could you move this block after the <code>std::unique_lock&lt;std::recursive_mutex&gt; lk(this-&gt;Shared()-&gt;mutex);</code>? There's risk of race condition here.</p>", "type": "rendered"}, "created_on": "2016-08-31T17:20:09.320363+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "inline": {}, "updated_on": "2016-08-31T17:20:09.324226+00:00", "type": "pullrequest_comment", "id": 23115002}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/23114927.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-23114927"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "Let's keep only this `WaitForSubscribers()` signature for not growing the API a lot.", "markup": "markdown", "html": "<p>Let's keep only this <code>WaitForSubscribers()</code> signature for not growing the API a lot.</p>", "type": "rendered"}, "created_on": "2016-08-31T17:18:44.628155+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "inline": {}, "updated_on": "2016-08-31T17:18:44.633623+00:00", "type": "pullrequest_comment", "id": 23114927}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/23114672.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-23114672"}}, "parent": {"id": 23000203, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/23000203.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-23000203"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "I think is still needed. The first part of `WaitForSubscribers()` guarantees that your node has advertised the topic before with the requested type (`type1` for example). This part checks whether there are already remote subscribers. We need it because other node within our process could advertise the same topic but different type (`type2` for example) and other node in a separate process might be subscribed using `type2` too. In this scenario, we'll have a remote subscriber for our topic but we're not interested on it because our type is `type1`. We should create a test case for this scenario:\n\n\n```\n#!c++\n\nreset();\n\ntransport::Node node;\ntransport::Node node2;\nunsigned int timeout = 1000;\nEXPECT_TRUE(node.Advertise<ignition::msgs::Vector3d>(g_topic));\nEXPECT_TRUE(node2.Advertise<ignition::msgs::Int32>(g_topic));\n\nstd::string subscriberPath = testing::portablePathUnion(\n   PROJECT_BINARY_PATH,\n   \"test/integration/INTEGRATION_waitForSubscribers_aux\");\ntesting::forkHandlerType pi = testing::forkAndRun(subscriberPath.c_str(),\n  partition.c_str());\nstd::this_thread::sleep_for(std::chrono::milliseconds(timeout));\n\nEXPECT_FALSE(node2.WaitForSubscribers<ignition::msgs::Vector3d>(g_topic,\n  timeout));\n\ntesting::waitAndCleanupFork(pi);\n```\n", "markup": "markdown", "html": "<p>I think is still needed. The first part of <code>WaitForSubscribers()</code> guarantees that your node has advertised the topic before with the requested type (<code>type1</code> for example). This part checks whether there are already remote subscribers. We need it because other node within our process could advertise the same topic but different type (<code>type2</code> for example) and other node in a separate process might be subscribed using <code>type2</code> too. In this scenario, we'll have a remote subscriber for our topic but we're not interested on it because our type is <code>type1</code>. We should create a test case for this scenario:</p>\n<div class=\"codehilite language-c++\"><pre><span></span><span class=\"n\">reset</span><span class=\"p\">();</span>\n\n<span class=\"n\">transport</span><span class=\"o\">::</span><span class=\"n\">Node</span> <span class=\"n\">node</span><span class=\"p\">;</span>\n<span class=\"n\">transport</span><span class=\"o\">::</span><span class=\"n\">Node</span> <span class=\"n\">node2</span><span class=\"p\">;</span>\n<span class=\"kt\">unsigned</span> <span class=\"kt\">int</span> <span class=\"n\">timeout</span> <span class=\"o\">=</span> <span class=\"mi\">1000</span><span class=\"p\">;</span>\n<span class=\"n\">EXPECT_TRUE</span><span class=\"p\">(</span><span class=\"n\">node</span><span class=\"p\">.</span><span class=\"n\">Advertise</span><span class=\"o\">&lt;</span><span class=\"n\">ignition</span><span class=\"o\">::</span><span class=\"n\">msgs</span><span class=\"o\">::</span><span class=\"n\">Vector3d</span><span class=\"o\">&gt;</span><span class=\"p\">(</span><span class=\"n\">g_topic</span><span class=\"p\">));</span>\n<span class=\"n\">EXPECT_TRUE</span><span class=\"p\">(</span><span class=\"n\">node2</span><span class=\"p\">.</span><span class=\"n\">Advertise</span><span class=\"o\">&lt;</span><span class=\"n\">ignition</span><span class=\"o\">::</span><span class=\"n\">msgs</span><span class=\"o\">::</span><span class=\"n\">Int32</span><span class=\"o\">&gt;</span><span class=\"p\">(</span><span class=\"n\">g_topic</span><span class=\"p\">));</span>\n\n<span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">string</span> <span class=\"n\">subscriberPath</span> <span class=\"o\">=</span> <span class=\"n\">testing</span><span class=\"o\">::</span><span class=\"n\">portablePathUnion</span><span class=\"p\">(</span>\n   <span class=\"n\">PROJECT_BINARY_PATH</span><span class=\"p\">,</span>\n   <span class=\"s\">&quot;test/integration/INTEGRATION_waitForSubscribers_aux&quot;</span><span class=\"p\">);</span>\n<span class=\"n\">testing</span><span class=\"o\">::</span><span class=\"n\">forkHandlerType</span> <span class=\"n\">pi</span> <span class=\"o\">=</span> <span class=\"n\">testing</span><span class=\"o\">::</span><span class=\"n\">forkAndRun</span><span class=\"p\">(</span><span class=\"n\">subscriberPath</span><span class=\"p\">.</span><span class=\"n\">c_str</span><span class=\"p\">(),</span>\n  <span class=\"n\">partition</span><span class=\"p\">.</span><span class=\"n\">c_str</span><span class=\"p\">());</span>\n<span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">this_thread</span><span class=\"o\">::</span><span class=\"n\">sleep_for</span><span class=\"p\">(</span><span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">chrono</span><span class=\"o\">::</span><span class=\"n\">milliseconds</span><span class=\"p\">(</span><span class=\"n\">timeout</span><span class=\"p\">));</span>\n\n<span class=\"n\">EXPECT_FALSE</span><span class=\"p\">(</span><span class=\"n\">node2</span><span class=\"p\">.</span><span class=\"n\">WaitForSubscribers</span><span class=\"o\">&lt;</span><span class=\"n\">ignition</span><span class=\"o\">::</span><span class=\"n\">msgs</span><span class=\"o\">::</span><span class=\"n\">Vector3d</span><span class=\"o\">&gt;</span><span class=\"p\">(</span><span class=\"n\">g_topic</span><span class=\"p\">,</span>\n  <span class=\"n\">timeout</span><span class=\"p\">));</span>\n\n<span class=\"n\">testing</span><span class=\"o\">::</span><span class=\"n\">waitAndCleanupFork</span><span class=\"p\">(</span><span class=\"n\">pi</span><span class=\"p\">);</span>\n</pre></div>", "type": "rendered"}, "created_on": "2016-08-31T17:13:55.681760+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "inline": {}, "updated_on": "2016-08-31T17:14:31.892932+00:00", "type": "pullrequest_comment", "id": 23114672}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/23111331.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-23111331"}}, "parent": {"id": 23000203, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/23000203.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-23000203"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "1. Your test `WaitForSubscribersDifferentTypeNames` is exercising that line, no need to create an additional test. You can test it with:\n\n\n```\n#!c++\n\n./test/integration/INTEGRATION_twoProcessesPubSub --gtest_filter=\"*WaitForSubscribersDifferentTypeNames\"\n```\nIf you modify the code to print a message or debug it with `gdb`, you should observe that the condition `handler.second->TypeName() != _pub.MsgTypeName()` is `true` and the `NodeShared` does not send a message to the control address of the publisher (which is the correct behavior).", "markup": "markdown", "html": "<ol>\n<li>Your test <code>WaitForSubscribersDifferentTypeNames</code> is exercising that line, no need to create an additional test. You can test it with:</li>\n</ol>\n<div class=\"codehilite language-c++\"><pre><span></span><span class=\"p\">.</span><span class=\"o\">/</span><span class=\"n\">test</span><span class=\"o\">/</span><span class=\"n\">integration</span><span class=\"o\">/</span><span class=\"n\">INTEGRATION_twoProcessesPubSub</span> <span class=\"o\">--</span><span class=\"n\">gtest_filter</span><span class=\"o\">=</span><span class=\"s\">&quot;*WaitForSubscribersDifferentTypeNames&quot;</span>\n</pre></div>\n\n\n<p>If you modify the code to print a message or debug it with <code>gdb</code>, you should observe that the condition <code>handler.second-&gt;TypeName() != _pub.MsgTypeName()</code> is <code>true</code> and the <code>NodeShared</code> does not send a message to the control address of the publisher (which is the correct behavior).</p>", "type": "rendered"}, "created_on": "2016-08-31T16:17:29.713157+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "inline": {}, "updated_on": "2016-08-31T16:18:34.425193+00:00", "type": "pullrequest_comment", "id": 23111331}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/23111035.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-23111035"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "I see that this sleep is the only difference with the previous test. What are you trying to accomplish in this test that's not covered by the previous one?", "markup": "markdown", "html": "<p>I see that this sleep is the only difference with the previous test. What are you trying to accomplish in this test that's not covered by the previous one?</p>", "type": "rendered"}, "created_on": "2016-08-31T16:13:10.054696+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "inline": {}, "updated_on": "2016-08-31T16:13:10.059728+00:00", "type": "pullrequest_comment", "id": 23111035}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/23110854.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-23110854"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "I see that this `sleep` is the only difference with the previous test. What are you trying to accomplish in this test that's not covered by the previous one?", "markup": "markdown", "html": "<p>I see that this <code>sleep</code> is the only difference with the previous test. What are you trying to accomplish in this test that's not covered by the previous one?</p>", "type": "rendered"}, "created_on": "2016-08-31T16:10:00.597178+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "inline": {}, "updated_on": "2016-08-31T16:10:00.599856+00:00", "type": "pullrequest_comment", "id": 23110854}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/23059858.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-23059858"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "I believe everything is ready except the clarification about the instruction ` if (handler.second->TypeName() != _pub.MsgTypeName())` in `NodeShared`. I'll take a look at it soon but this PR is almost ready to go.", "markup": "markdown", "html": "<p>I believe everything is ready except the clarification about the instruction <code>if (handler.second-&gt;TypeName() != _pub.MsgTypeName())</code> in <code>NodeShared</code>. I'll take a look at it soon but this PR is almost ready to go.</p>", "type": "rendered"}, "created_on": "2016-08-30T21:33:08.232104+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "updated_on": "2016-08-30T21:33:08.234611+00:00", "type": "pullrequest_comment", "id": 23059858}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/23059472.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-23059472"}}, "parent": {"id": 22879518, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22879518.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22879518"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "Thanks. Pull request #169 takes care of this but it's not an easy fix, so I make it an illegal operation if you do it on the same node.", "markup": "markdown", "html": "<p>Thanks. <a href=\"#!/ignitionrobotics/ign-transport/pull-requests/169/address-issue-54\" rel=\"nofollow\" class=\"ap-connect-link\">Pull request #169</a> takes care of this but it's not an easy fix, so I make it an illegal operation if you do it on the same node.</p>", "type": "rendered"}, "created_on": "2016-08-30T21:24:55.863776+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "inline": {}, "updated_on": "2016-08-30T21:26:50.674930+00:00", "type": "pullrequest_comment", "id": 23059472}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/23002331.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-23002331"}}, "parent": {"id": 22738993, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22738993.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22738993"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "Yes, you are right. Now, I understand the problem: \"the behaviour is differ from the descriptions of method and variables\". Fixed [[78fff8d](https://bitbucket.org/nampi/ign-transport/commits/78fff8d7b20265ad06c7229679c6130adb0cdec2?at=default)].", "markup": "markdown", "html": "<p>Yes, you are right. Now, I understand the problem: \"the behaviour is differ from the descriptions of method and variables\". Fixed [<a data-is-external-link=\"true\" href=\"https://bitbucket.org/nampi/ign-transport/commits/78fff8d7b20265ad06c7229679c6130adb0cdec2?at=default\" rel=\"nofollow\">78fff8d</a>].</p>", "type": "rendered"}, "created_on": "2016-08-30T01:21:09.187658+00:00", "user": {"display_name": "nampi", "uuid": "{89a67bdd-09e6-4c17-8014-48d97fa5c4c8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D"}, "html": {"href": "https://bitbucket.org/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8/38230840-603b-4875-93fb-c2e81928dd69/128"}}, "nickname": "nampi", "type": "user", "account_id": "557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8"}, "inline": {}, "updated_on": "2016-08-30T01:21:36.929279+00:00", "type": "pullrequest_comment", "id": 23002331}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"update": {"description": "The new method ```bool Node::WaitForSubscribers(const std::string &_topic, const int _timeout = -1);``` is added. New classes ```TopicWatcher```, ```TopicWatcherPrivate```, ```TopicWatcherStorage``` were added to provide the opportunity to use this function.\r\n\r\nIn the ```NodeShared``` class there is  ```TopicWatcherStorage```. The data is a map where the keys are topics, the values are another map, where the key is nuuid, the value is shared_ptr<TopicWatcher>.\r\n\r\nWe could check ```NodeShared::localSubscriptions``` and ```NodeShared::remoteSubscribers``` first. Then if there is no subscriptions we create a topic watcher and call ```wait```. ", "title": "Issue_47: Wait for subscribers", "destination": {"commit": {"hash": "f63548f31172", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/commit/f63548f31172.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/commits/f63548f31172"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport"}, "avatar": {"href": "data/bytebucket.org/ravatar/{4249390a-7f55-404b-990d-817ba94cc7ac}ts=1533306"}}, "type": "repository", "name": "ign-transport", "full_name": "ignitionrobotics/ign-transport", "uuid": "{4249390a-7f55-404b-990d-817ba94cc7ac}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "78fff8d7b202", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/nampi/ign-transport/commit/78fff8d7b202"}, "html": {"href": "https://bitbucket.org/nampi/ign-transport/commits/78fff8d7b202"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/nampi/ign-transport"}, "html": {"href": "https://bitbucket.org/nampi/ign-transport"}, "avatar": {"href": "data/bytebucket.org/ravatar/{a078025c-a14f-47ce-90a1-781a93700a2c}ts=c_plus_plus"}}, "type": "repository", "name": "ign-transport", "full_name": "nampi/ign-transport", "uuid": "{a078025c-a14f-47ce-90a1-781a93700a2c}"}, "branch": {"name": "issue_47"}}, "state": "OPEN", "author": {"display_name": "nampi", "uuid": "{89a67bdd-09e6-4c17-8014-48d97fa5c4c8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D"}, "html": {"href": "https://bitbucket.org/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8/38230840-603b-4875-93fb-c2e81928dd69/128"}}, "nickname": "nampi", "type": "user", "account_id": "557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8"}, "date": "2016-08-30T01:20:19.913235+00:00"}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/23000203.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-23000203"}}, "parent": {"id": 22745230, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22745230.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22745230"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "1. I retrieved this line in commit [[dd3e7b2](https://bitbucket.org/nampi/ign-transport/commits/dd3e7b24636d14b8d38fbfdfd854e29f7b61df81?at=default)]. I agree with you it is better to check the type here. Could you write a test case (maybe in issue tracker) to cover this behaviour (it is important to have this type check on subscriber side), please?\n2. There are also tests with the same types. In the test ``twoProcPubSub.WaitForSubscribersSameTypeNamesRemoteSubscribers`` the program checks the remote subscriber. The remote subscriber exists and it checks in ``Node::WaitForSubscribers``. The test ``twoProcPubSub.WaitForSubscribersDifferentTypeNamesRemoteSubscribers`` has different types. With this line ``if (handler.second->TypeName() != _pub.MsgTypeName())`` the check in ```Node::WaitForSUbscribers```:\n\n```\n#!c++\n\n        // Remote subscribers. Check message type names.\n        if (hasRemoteSubscribers)\n        {\n          for (const auto &proc : subscribers)\n          {\n            const auto &v = proc.second;\n            for (const auto &subscriber : v)\n            {\n              if (subscriber.MsgTypeName() == _typeName)\n                return true;\n            }\n          }\n        }\n```\nis redundant. Is it better to remove this check?", "markup": "markdown", "html": "<ol>\n<li>I retrieved this line in commit [<a data-is-external-link=\"true\" href=\"https://bitbucket.org/nampi/ign-transport/commits/dd3e7b24636d14b8d38fbfdfd854e29f7b61df81?at=default\" rel=\"nofollow\">dd3e7b2</a>]. I agree with you it is better to check the type here. Could you write a test case (maybe in issue tracker) to cover this behaviour (it is important to have this type check on subscriber side), please?</li>\n<li>There are also tests with the same types. In the test <code>twoProcPubSub.WaitForSubscribersSameTypeNamesRemoteSubscribers</code> the program checks the remote subscriber. The remote subscriber exists and it checks in <code>Node::WaitForSubscribers</code>. The test <code>twoProcPubSub.WaitForSubscribersDifferentTypeNamesRemoteSubscribers</code> has different types. With this line <code>if (handler.second-&gt;TypeName() != _pub.MsgTypeName())</code> the check in <code>Node::WaitForSUbscribers</code>:</li>\n</ol>\n<div class=\"codehilite language-c++\"><pre><span></span>        <span class=\"c1\">// Remote subscribers. Check message type names.</span>\n        <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"n\">hasRemoteSubscribers</span><span class=\"p\">)</span>\n        <span class=\"p\">{</span>\n          <span class=\"k\">for</span> <span class=\"p\">(</span><span class=\"k\">const</span> <span class=\"k\">auto</span> <span class=\"o\">&amp;</span><span class=\"nl\">proc</span> <span class=\"p\">:</span> <span class=\"n\">subscribers</span><span class=\"p\">)</span>\n          <span class=\"p\">{</span>\n            <span class=\"k\">const</span> <span class=\"k\">auto</span> <span class=\"o\">&amp;</span><span class=\"n\">v</span> <span class=\"o\">=</span> <span class=\"n\">proc</span><span class=\"p\">.</span><span class=\"n\">second</span><span class=\"p\">;</span>\n            <span class=\"k\">for</span> <span class=\"p\">(</span><span class=\"k\">const</span> <span class=\"k\">auto</span> <span class=\"o\">&amp;</span><span class=\"nl\">subscriber</span> <span class=\"p\">:</span> <span class=\"n\">v</span><span class=\"p\">)</span>\n            <span class=\"p\">{</span>\n              <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"n\">subscriber</span><span class=\"p\">.</span><span class=\"n\">MsgTypeName</span><span class=\"p\">()</span> <span class=\"o\">==</span> <span class=\"n\">_typeName</span><span class=\"p\">)</span>\n                <span class=\"k\">return</span> <span class=\"nb\">true</span><span class=\"p\">;</span>\n            <span class=\"p\">}</span>\n          <span class=\"p\">}</span>\n        <span class=\"p\">}</span>\n</pre></div>\n\n\n<p>is redundant. Is it better to remove this check?</p>", "type": "rendered"}, "created_on": "2016-08-29T23:39:36.291495+00:00", "user": {"display_name": "nampi", "uuid": "{89a67bdd-09e6-4c17-8014-48d97fa5c4c8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D"}, "html": {"href": "https://bitbucket.org/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8/38230840-603b-4875-93fb-c2e81928dd69/128"}}, "nickname": "nampi", "type": "user", "account_id": "557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8"}, "inline": {}, "updated_on": "2016-08-29T23:39:36.298346+00:00", "type": "pullrequest_comment", "id": 23000203}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"update": {"description": "The new method ```bool Node::WaitForSubscribers(const std::string &_topic, const int _timeout = -1);``` is added. New classes ```TopicWatcher```, ```TopicWatcherPrivate```, ```TopicWatcherStorage``` were added to provide the opportunity to use this function.\r\n\r\nIn the ```NodeShared``` class there is  ```TopicWatcherStorage```. The data is a map where the keys are topics, the values are another map, where the key is nuuid, the value is shared_ptr<TopicWatcher>.\r\n\r\nWe could check ```NodeShared::localSubscriptions``` and ```NodeShared::remoteSubscribers``` first. Then if there is no subscriptions we create a topic watcher and call ```wait```. ", "title": "Issue_47: Wait for subscribers", "destination": {"commit": {"hash": "f63548f31172", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/commit/f63548f31172.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/commits/f63548f31172"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport"}, "avatar": {"href": "data/bytebucket.org/ravatar/{4249390a-7f55-404b-990d-817ba94cc7ac}ts=1533306"}}, "type": "repository", "name": "ign-transport", "full_name": "ignitionrobotics/ign-transport", "uuid": "{4249390a-7f55-404b-990d-817ba94cc7ac}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "dd3e7b24636d", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/nampi/ign-transport/commit/dd3e7b24636d"}, "html": {"href": "https://bitbucket.org/nampi/ign-transport/commits/dd3e7b24636d"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/nampi/ign-transport"}, "html": {"href": "https://bitbucket.org/nampi/ign-transport"}, "avatar": {"href": "data/bytebucket.org/ravatar/{a078025c-a14f-47ce-90a1-781a93700a2c}ts=c_plus_plus"}}, "type": "repository", "name": "ign-transport", "full_name": "nampi/ign-transport", "uuid": "{a078025c-a14f-47ce-90a1-781a93700a2c}"}, "branch": {"name": "issue_47"}}, "state": "OPEN", "author": {"display_name": "nampi", "uuid": "{89a67bdd-09e6-4c17-8014-48d97fa5c4c8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D"}, "html": {"href": "https://bitbucket.org/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8/38230840-603b-4875-93fb-c2e81928dd69/128"}}, "nickname": "nampi", "type": "user", "account_id": "557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8"}, "date": "2016-08-29T23:21:13.225026+00:00"}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22942810.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22942810"}}, "parent": {"id": 22739493, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22739493.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22739493"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "Commit [[0bf23a1](https://bitbucket.org/nampi/ign-transport/commits/0bf23a194bf3eebab6459b3bc975d604db0eb78b?at=default)].", "markup": "markdown", "html": "<p>Commit [<a data-is-external-link=\"true\" href=\"https://bitbucket.org/nampi/ign-transport/commits/0bf23a194bf3eebab6459b3bc975d604db0eb78b?at=default\" rel=\"nofollow\">0bf23a1</a>].</p>", "type": "rendered"}, "created_on": "2016-08-28T22:40:25.733432+00:00", "user": {"display_name": "nampi", "uuid": "{89a67bdd-09e6-4c17-8014-48d97fa5c4c8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D"}, "html": {"href": "https://bitbucket.org/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8/38230840-603b-4875-93fb-c2e81928dd69/128"}}, "nickname": "nampi", "type": "user", "account_id": "557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8"}, "inline": {}, "updated_on": "2016-08-28T22:40:25.738674+00:00", "type": "pullrequest_comment", "id": 22942810}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"update": {"description": "The new method ```bool Node::WaitForSubscribers(const std::string &_topic, const int _timeout = -1);``` is added. New classes ```TopicWatcher```, ```TopicWatcherPrivate```, ```TopicWatcherStorage``` were added to provide the opportunity to use this function.\r\n\r\nIn the ```NodeShared``` class there is  ```TopicWatcherStorage```. The data is a map where the keys are topics, the values are another map, where the key is nuuid, the value is shared_ptr<TopicWatcher>.\r\n\r\nWe could check ```NodeShared::localSubscriptions``` and ```NodeShared::remoteSubscribers``` first. Then if there is no subscriptions we create a topic watcher and call ```wait```. ", "title": "Issue_47: Wait for subscribers", "destination": {"commit": {"hash": "f63548f31172", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/commit/f63548f31172.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/commits/f63548f31172"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport"}, "avatar": {"href": "data/bytebucket.org/ravatar/{4249390a-7f55-404b-990d-817ba94cc7ac}ts=1533306"}}, "type": "repository", "name": "ign-transport", "full_name": "ignitionrobotics/ign-transport", "uuid": "{4249390a-7f55-404b-990d-817ba94cc7ac}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "0bf23a194bf3", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/nampi/ign-transport/commit/0bf23a194bf3"}, "html": {"href": "https://bitbucket.org/nampi/ign-transport/commits/0bf23a194bf3"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/nampi/ign-transport"}, "html": {"href": "https://bitbucket.org/nampi/ign-transport"}, "avatar": {"href": "data/bytebucket.org/ravatar/{a078025c-a14f-47ce-90a1-781a93700a2c}ts=c_plus_plus"}}, "type": "repository", "name": "ign-transport", "full_name": "nampi/ign-transport", "uuid": "{a078025c-a14f-47ce-90a1-781a93700a2c}"}, "branch": {"name": "issue_47"}}, "state": "OPEN", "author": {"display_name": "nampi", "uuid": "{89a67bdd-09e6-4c17-8014-48d97fa5c4c8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D"}, "html": {"href": "https://bitbucket.org/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8/38230840-603b-4875-93fb-c2e81928dd69/128"}}, "nickname": "nampi", "type": "user", "account_id": "557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8"}, "date": "2016-08-28T22:39:37.953721+00:00"}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22879518.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22879518"}}, "parent": {"id": 22741369, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22741369.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22741369"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "Here is a new issue: [Issue 54: Publish on the topics with the same names but different topic types](#!/ignitionrobotics/ign-transport/issues/54/publish-on-the-topics-with-the-same-names).", "markup": "markdown", "html": "<p>Here is a new issue: <a data-is-external-link=\"true\" href=\"#!/ignitionrobotics/ign-transport/issues/54/publish-on-the-topics-with-the-same-names\" rel=\"nofollow\">Issue 54: Publish on the topics with the same names but different topic types</a>.</p>", "type": "rendered"}, "created_on": "2016-08-25T23:38:51.826162+00:00", "user": {"display_name": "nampi", "uuid": "{89a67bdd-09e6-4c17-8014-48d97fa5c4c8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D"}, "html": {"href": "https://bitbucket.org/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8/38230840-603b-4875-93fb-c2e81928dd69/128"}}, "nickname": "nampi", "type": "user", "account_id": "557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8"}, "inline": {}, "updated_on": "2016-08-25T23:38:51.828056+00:00", "type": "pullrequest_comment", "id": 22879518}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22745230.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22745230"}}, "parent": {"id": 22682557, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22682557.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22682557"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "I think we should keep the line. That line executes on the subscriber side. This function is running when the discovery discovers a new topic. Then, we check if we have a local subscriber on that topic. If we have it, we have to check that the types match. If so, we send a message to the control address of the publisher to notify that we are a new remote subscriber. I haven't debug it but I think that we should be able to check that the types match here.\n\nIn the integration tests, `waitForSubscribers_aux` subscribes using a callback with type `ignition::msgs::Vector3d`. On the file `twoProcessesPubSub`, in both of your tests you're advertising with a different type. In that case I would say that there's no real remote subscriber, right? This seems like the correct behavior. We should try a third case where we advertise an `ignition::msgs::Vector3d` message, then we should see the remote subscriber.\n\nDoes it make sense?", "markup": "markdown", "html": "<p>I think we should keep the line. That line executes on the subscriber side. This function is running when the discovery discovers a new topic. Then, we check if we have a local subscriber on that topic. If we have it, we have to check that the types match. If so, we send a message to the control address of the publisher to notify that we are a new remote subscriber. I haven't debug it but I think that we should be able to check that the types match here.</p>\n<p>In the integration tests, <code>waitForSubscribers_aux</code> subscribes using a callback with type <code>ignition::msgs::Vector3d</code>. On the file <code>twoProcessesPubSub</code>, in both of your tests you're advertising with a different type. In that case I would say that there's no real remote subscriber, right? This seems like the correct behavior. We should try a third case where we advertise an <code>ignition::msgs::Vector3d</code> message, then we should see the remote subscriber.</p>\n<p>Does it make sense?</p>", "type": "rendered"}, "created_on": "2016-08-23T20:52:09.352473+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "inline": {}, "updated_on": "2016-08-23T20:52:42.593763+00:00", "type": "pullrequest_comment", "id": 22745230}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22741369.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22741369"}}, "parent": {"id": 22685429, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22685429.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22685429"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "This seems like a bug or something that we didn't try before. Do you mind to create a separate issue for this?", "markup": "markdown", "html": "<p>This seems like a bug or something that we didn't try before. Do you mind to create a separate issue for this?</p>", "type": "rendered"}, "created_on": "2016-08-23T19:32:10.303177+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "inline": {}, "updated_on": "2016-08-23T19:32:10.306267+00:00", "type": "pullrequest_comment", "id": 22741369}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22739493.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22739493"}}, "parent": {"id": 22686744, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22686744.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22686744"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "This is because we cannot access a member variable of NodePrivate from Node.hh. NodePrivate is suppose to be accessible only from Node.cc. Take a look at [PIMPL pattern](https://en.wikipedia.org/wiki/Opaque_pointer). Instead, use `this->NodeUuid()`.", "markup": "markdown", "html": "<p>This is because we cannot access a member variable of NodePrivate from Node.hh. NodePrivate is suppose to be accessible only from Node.cc. Take a look at <a data-is-external-link=\"true\" href=\"https://en.wikipedia.org/wiki/Opaque_pointer\" rel=\"nofollow\">PIMPL pattern</a>. Instead, use <code>this-&gt;NodeUuid()</code>.</p>", "type": "rendered"}, "created_on": "2016-08-23T18:54:37.881679+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "inline": {}, "updated_on": "2016-08-23T18:54:37.889453+00:00", "type": "pullrequest_comment", "id": 22739493}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}], "next": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/activity_ctx=r5fxAu4ub.json"}