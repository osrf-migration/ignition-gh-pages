{"pagelen": 50, "values": [{"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22738993.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22738993"}}, "parent": {"id": 22688645, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22688645.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22688645"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "`Blocked()` should tell us whether the watcher is blocked or not. This is a public method and the behavior should be clear. If we agree on that, why `Blocked()` should return `true` if someone calls it after a `wait_until()` that times out? The thread is not blocked at that point, right?", "markup": "markdown", "html": "<p><code>Blocked()</code> should tell us whether the watcher is blocked or not. This is a public method and the behavior should be clear. If we agree on that, why <code>Blocked()</code> should return <code>true</code> if someone calls it after a <code>wait_until()</code> that times out? The thread is not blocked at that point, right?</p>", "type": "rendered"}, "created_on": "2016-08-23T18:47:14.119654+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "inline": {}, "updated_on": "2016-08-23T18:47:14.123260+00:00", "type": "pullrequest_comment", "id": 22738993}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22688645.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22688645"}}, "parent": {"id": 22668227, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22668227.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22668227"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "Yes, ```blocked``` is ```true```. But this situation is ok. We use this variable to control the behaviour of class. In test I check that the return value of ```wait``` was ```false``` and ```blocked``` was ```true``` and the opposite situation.\n\nWhat do you think?\n", "markup": "markdown", "html": "<p>Yes, <code>blocked</code> is <code>true</code>. But this situation is ok. We use this variable to control the behaviour of class. In test I check that the return value of <code>wait</code> was <code>false</code> and <code>blocked</code> was <code>true</code> and the opposite situation.</p>\n<p>What do you think?</p>", "type": "rendered"}, "created_on": "2016-08-23T01:59:45.050209+00:00", "user": {"display_name": "nampi", "uuid": "{89a67bdd-09e6-4c17-8014-48d97fa5c4c8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D"}, "html": {"href": "https://bitbucket.org/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8/38230840-603b-4875-93fb-c2e81928dd69/128"}}, "nickname": "nampi", "type": "user", "account_id": "557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8"}, "inline": {}, "updated_on": "2016-08-23T01:59:45.052647+00:00", "type": "pullrequest_comment", "id": 22688645}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"update": {"description": "The new method ```bool Node::WaitForSubscribers(const std::string &_topic, const int _timeout = -1);``` is added. New classes ```TopicWatcher```, ```TopicWatcherPrivate```, ```TopicWatcherStorage``` were added to provide the opportunity to use this function.\r\n\r\nIn the ```NodeShared``` class there is  ```TopicWatcherStorage```. The data is a map where the keys are topics, the values are another map, where the key is nuuid, the value is shared_ptr<TopicWatcher>.\r\n\r\nWe could check ```NodeShared::localSubscriptions``` and ```NodeShared::remoteSubscribers``` first. Then if there is no subscriptions we create a topic watcher and call ```wait```. ", "title": "Issue_47: Wait for subscribers", "destination": {"commit": {"hash": "8f5488436c7c", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/commit/8f5488436c7c.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/commits/8f5488436c7c"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport"}, "avatar": {"href": "data/bytebucket.org/ravatar/{4249390a-7f55-404b-990d-817ba94cc7ac}ts=1533306"}}, "type": "repository", "name": "ign-transport", "full_name": "ignitionrobotics/ign-transport", "uuid": "{4249390a-7f55-404b-990d-817ba94cc7ac}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "9a512e427ebe", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/nampi/ign-transport/commit/9a512e427ebe"}, "html": {"href": "https://bitbucket.org/nampi/ign-transport/commits/9a512e427ebe"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/nampi/ign-transport"}, "html": {"href": "https://bitbucket.org/nampi/ign-transport"}, "avatar": {"href": "data/bytebucket.org/ravatar/{a078025c-a14f-47ce-90a1-781a93700a2c}ts=c_plus_plus"}}, "type": "repository", "name": "ign-transport", "full_name": "nampi/ign-transport", "uuid": "{a078025c-a14f-47ce-90a1-781a93700a2c}"}, "branch": {"name": "issue_47"}}, "state": "OPEN", "author": {"display_name": "nampi", "uuid": "{89a67bdd-09e6-4c17-8014-48d97fa5c4c8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D"}, "html": {"href": "https://bitbucket.org/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8/38230840-603b-4875-93fb-c2e81928dd69/128"}}, "nickname": "nampi", "type": "user", "account_id": "557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8"}, "date": "2016-08-23T01:37:17.842798+00:00"}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22687982.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22687982"}}, "parent": {"id": 22670726, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22670726.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22670726"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "I think that TopicWatcher constructor with message type is better. Good idea! Updated in [[fc0c0bc](https://bitbucket.org/nampi/ign-transport/commits/fc0c0bc2541ddbaacefb040f571f71ab16dd631b)].", "markup": "markdown", "html": "<p>I think that TopicWatcher constructor with message type is better. Good idea! Updated in [<a data-is-external-link=\"true\" href=\"https://bitbucket.org/nampi/ign-transport/commits/fc0c0bc2541ddbaacefb040f571f71ab16dd631b\" rel=\"nofollow\">fc0c0bc</a>].</p>", "type": "rendered"}, "created_on": "2016-08-23T01:26:48.543552+00:00", "user": {"display_name": "nampi", "uuid": "{89a67bdd-09e6-4c17-8014-48d97fa5c4c8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D"}, "html": {"href": "https://bitbucket.org/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8/38230840-603b-4875-93fb-c2e81928dd69/128"}}, "nickname": "nampi", "type": "user", "account_id": "557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8"}, "inline": {}, "updated_on": "2016-08-23T01:26:57.243071+00:00", "type": "pullrequest_comment", "id": 22687982}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"update": {"description": "The new method ```bool Node::WaitForSubscribers(const std::string &_topic, const int _timeout = -1);``` is added. New classes ```TopicWatcher```, ```TopicWatcherPrivate```, ```TopicWatcherStorage``` were added to provide the opportunity to use this function.\r\n\r\nIn the ```NodeShared``` class there is  ```TopicWatcherStorage```. The data is a map where the keys are topics, the values are another map, where the key is nuuid, the value is shared_ptr<TopicWatcher>.\r\n\r\nWe could check ```NodeShared::localSubscriptions``` and ```NodeShared::remoteSubscribers``` first. Then if there is no subscriptions we create a topic watcher and call ```wait```. ", "title": "Issue_47: Wait for subscribers", "destination": {"commit": {"hash": "8f5488436c7c", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/commit/8f5488436c7c.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/commits/8f5488436c7c"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport"}, "avatar": {"href": "data/bytebucket.org/ravatar/{4249390a-7f55-404b-990d-817ba94cc7ac}ts=1533306"}}, "type": "repository", "name": "ign-transport", "full_name": "ignitionrobotics/ign-transport", "uuid": "{4249390a-7f55-404b-990d-817ba94cc7ac}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "fc0c0bc2541d", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/nampi/ign-transport/commit/fc0c0bc2541d"}, "html": {"href": "https://bitbucket.org/nampi/ign-transport/commits/fc0c0bc2541d"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/nampi/ign-transport"}, "html": {"href": "https://bitbucket.org/nampi/ign-transport"}, "avatar": {"href": "data/bytebucket.org/ravatar/{a078025c-a14f-47ce-90a1-781a93700a2c}ts=c_plus_plus"}}, "type": "repository", "name": "ign-transport", "full_name": "nampi/ign-transport", "uuid": "{a078025c-a14f-47ce-90a1-781a93700a2c}"}, "branch": {"name": "issue_47"}}, "state": "OPEN", "author": {"display_name": "nampi", "uuid": "{89a67bdd-09e6-4c17-8014-48d97fa5c4c8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D"}, "html": {"href": "https://bitbucket.org/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8/38230840-603b-4875-93fb-c2e81928dd69/128"}}, "nickname": "nampi", "type": "user", "account_id": "557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8"}, "date": "2016-08-23T01:24:57.380028+00:00"}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22686744.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22686744"}}, "parent": {"id": 22671904, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22671904.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22671904"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "I have an implementation problem. There is a line ```std::string nodeUuid = this->dataPtr->nUuid;```  in ```Node::WaitForSubscriber()```. I have a compiler error:\n\n\n```\n#!bash\n/home/user/code/issue_47_wait/include/ignition/transport/Node.hh:991:45: error: invalid use of incomplete type \u2018class ignition::transport::NodePrivate\u2019\n         std::string nodeUuid = this->dataPtr->nUuid;\n                                             ^\n/home/user/code/issue_47_wait/include/ignition/transport/Node.hh:62:11: error: forward declaration of \u2018class ignition::transport::NodePrivate\u2019\n     class NodePrivate;\n\n\n```\nHow can I use ```nUuid```?", "markup": "markdown", "html": "<p>I have an implementation problem. There is a line <code>std::string nodeUuid = this-&gt;dataPtr-&gt;nUuid;</code>  in <code>Node::WaitForSubscriber()</code>. I have a compiler error:</p>\n<div class=\"codehilite language-bash\"><pre><span></span>/home/user/code/issue_47_wait/include/ignition/transport/Node.hh:991:45: error: invalid use of incomplete <span class=\"nb\">type</span> \u2018class ignition::transport::NodePrivate\u2019\n         std::string <span class=\"nv\">nodeUuid</span> <span class=\"o\">=</span> this-&gt;dataPtr-&gt;nUuid<span class=\"p\">;</span>\n                                             ^\n/home/user/code/issue_47_wait/include/ignition/transport/Node.hh:62:11: error: forward declaration of \u2018class ignition::transport::NodePrivate\u2019\n     class NodePrivate<span class=\"p\">;</span>\n</pre></div>\n\n\n<p>How can I use <code>nUuid</code>?</p>", "type": "rendered"}, "created_on": "2016-08-23T00:24:42.559127+00:00", "user": {"display_name": "nampi", "uuid": "{89a67bdd-09e6-4c17-8014-48d97fa5c4c8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D"}, "html": {"href": "https://bitbucket.org/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8/38230840-603b-4875-93fb-c2e81928dd69/128"}}, "nickname": "nampi", "type": "user", "account_id": "557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8"}, "inline": {}, "updated_on": "2016-08-23T00:24:42.565172+00:00", "type": "pullrequest_comment", "id": 22686744}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22685919.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22685919"}}, "parent": {"id": 22671434, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22671434.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22671434"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "Updated in [[bd1f27b](https://bitbucket.org/nampi/ign-transport/commits/bd1f27bebc8509ba624d00affbf72251517bcca9)].", "markup": "markdown", "html": "<p>Updated in [<a data-is-external-link=\"true\" href=\"https://bitbucket.org/nampi/ign-transport/commits/bd1f27bebc8509ba624d00affbf72251517bcca9\" rel=\"nofollow\">bd1f27b</a>].</p>", "type": "rendered"}, "created_on": "2016-08-22T23:43:20.491871+00:00", "user": {"display_name": "nampi", "uuid": "{89a67bdd-09e6-4c17-8014-48d97fa5c4c8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D"}, "html": {"href": "https://bitbucket.org/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8/38230840-603b-4875-93fb-c2e81928dd69/128"}}, "nickname": "nampi", "type": "user", "account_id": "557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8"}, "inline": {}, "updated_on": "2016-08-22T23:43:20.499101+00:00", "type": "pullrequest_comment", "id": 22685919}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22685911.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22685911"}}, "parent": {"id": 22670917, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22670917.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22670917"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "Deleted in [[bd1f27b](https://bitbucket.org/nampi/ign-transport/commits/bd1f27bebc8509ba624d00affbf72251517bcca9)].", "markup": "markdown", "html": "<p>Deleted in [<a data-is-external-link=\"true\" href=\"https://bitbucket.org/nampi/ign-transport/commits/bd1f27bebc8509ba624d00affbf72251517bcca9\" rel=\"nofollow\">bd1f27b</a>].</p>", "type": "rendered"}, "created_on": "2016-08-22T23:42:53.979736+00:00", "user": {"display_name": "nampi", "uuid": "{89a67bdd-09e6-4c17-8014-48d97fa5c4c8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D"}, "html": {"href": "https://bitbucket.org/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8/38230840-603b-4875-93fb-c2e81928dd69/128"}}, "nickname": "nampi", "type": "user", "account_id": "557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8"}, "inline": {}, "updated_on": "2016-08-22T23:42:53.984158+00:00", "type": "pullrequest_comment", "id": 22685911}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22685897.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22685897"}}, "parent": {"id": 22670893, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22670893.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22670893"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "No. Deleted in [[bd1f27b](https://bitbucket.org/nampi/ign-transport/commits/bd1f27bebc8509ba624d00affbf72251517bcca9)].", "markup": "markdown", "html": "<p>No. Deleted in [<a data-is-external-link=\"true\" href=\"https://bitbucket.org/nampi/ign-transport/commits/bd1f27bebc8509ba624d00affbf72251517bcca9\" rel=\"nofollow\">bd1f27b</a>].</p>", "type": "rendered"}, "created_on": "2016-08-22T23:42:31.227732+00:00", "user": {"display_name": "nampi", "uuid": "{89a67bdd-09e6-4c17-8014-48d97fa5c4c8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D"}, "html": {"href": "https://bitbucket.org/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8/38230840-603b-4875-93fb-c2e81928dd69/128"}}, "nickname": "nampi", "type": "user", "account_id": "557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8"}, "inline": {}, "updated_on": "2016-08-22T23:42:31.229577+00:00", "type": "pullrequest_comment", "id": 22685897}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22685871.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22685871"}}, "parent": {"id": 22670835, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22670835.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22670835"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "No, it is not. Deleted here [[bd1f27b](https://bitbucket.org/nampi/ign-transport/commits/bd1f27bebc8509ba624d00affbf72251517bcca9)].", "markup": "markdown", "html": "<p>No, it is not. Deleted here [<a data-is-external-link=\"true\" href=\"https://bitbucket.org/nampi/ign-transport/commits/bd1f27bebc8509ba624d00affbf72251517bcca9\" rel=\"nofollow\">bd1f27b</a>].</p>", "type": "rendered"}, "created_on": "2016-08-22T23:41:17.528363+00:00", "user": {"display_name": "nampi", "uuid": "{89a67bdd-09e6-4c17-8014-48d97fa5c4c8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D"}, "html": {"href": "https://bitbucket.org/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8/38230840-603b-4875-93fb-c2e81928dd69/128"}}, "nickname": "nampi", "type": "user", "account_id": "557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8"}, "inline": {}, "updated_on": "2016-08-22T23:41:17.530198+00:00", "type": "pullrequest_comment", "id": 22685871}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22685864.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22685864"}}, "parent": {"id": 22670212, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22670212.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22670212"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "Updated in [[bd1f27b](https://bitbucket.org/nampi/ign-transport/commits/bd1f27bebc8509ba624d00affbf72251517bcca9)].", "markup": "markdown", "html": "<p>Updated in [<a data-is-external-link=\"true\" href=\"https://bitbucket.org/nampi/ign-transport/commits/bd1f27bebc8509ba624d00affbf72251517bcca9\" rel=\"nofollow\">bd1f27b</a>].</p>", "type": "rendered"}, "created_on": "2016-08-22T23:40:42.785672+00:00", "user": {"display_name": "nampi", "uuid": "{89a67bdd-09e6-4c17-8014-48d97fa5c4c8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D"}, "html": {"href": "https://bitbucket.org/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8/38230840-603b-4875-93fb-c2e81928dd69/128"}}, "nickname": "nampi", "type": "user", "account_id": "557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8"}, "inline": {}, "updated_on": "2016-08-22T23:40:42.791066+00:00", "type": "pullrequest_comment", "id": 22685864}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22685855.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22685855"}}, "parent": {"id": 22670037, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22670037.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22670037"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "Updated in [[bd1f27b](https://bitbucket.org/nampi/ign-transport/commits/bd1f27bebc8509ba624d00affbf72251517bcca9)].", "markup": "markdown", "html": "<p>Updated in [<a data-is-external-link=\"true\" href=\"https://bitbucket.org/nampi/ign-transport/commits/bd1f27bebc8509ba624d00affbf72251517bcca9\" rel=\"nofollow\">bd1f27b</a>].</p>", "type": "rendered"}, "created_on": "2016-08-22T23:40:21.022691+00:00", "user": {"display_name": "nampi", "uuid": "{89a67bdd-09e6-4c17-8014-48d97fa5c4c8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D"}, "html": {"href": "https://bitbucket.org/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8/38230840-603b-4875-93fb-c2e81928dd69/128"}}, "nickname": "nampi", "type": "user", "account_id": "557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8"}, "inline": {}, "updated_on": "2016-08-22T23:40:21.024934+00:00", "type": "pullrequest_comment", "id": 22685855}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22685845.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22685845"}}, "parent": {"id": 22669261, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22669261.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22669261"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "Updated in [[bd1f27b](https://bitbucket.org/nampi/ign-transport/commits/bd1f27bebc8509ba624d00affbf72251517bcca9)].", "markup": "markdown", "html": "<p>Updated in [<a data-is-external-link=\"true\" href=\"https://bitbucket.org/nampi/ign-transport/commits/bd1f27bebc8509ba624d00affbf72251517bcca9\" rel=\"nofollow\">bd1f27b</a>].</p>", "type": "rendered"}, "created_on": "2016-08-22T23:40:06.762891+00:00", "user": {"display_name": "nampi", "uuid": "{89a67bdd-09e6-4c17-8014-48d97fa5c4c8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D"}, "html": {"href": "https://bitbucket.org/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8/38230840-603b-4875-93fb-c2e81928dd69/128"}}, "nickname": "nampi", "type": "user", "account_id": "557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8"}, "inline": {}, "updated_on": "2016-08-22T23:40:06.767443+00:00", "type": "pullrequest_comment", "id": 22685845}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22685824.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22685824"}}, "parent": {"id": 22668723, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22668723.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22668723"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "Updated in [[cdc49d8](https://bitbucket.org/nampi/ign-transport/commits/cdc49d8669f8080ff7faab17f4b31cac7769652c)].", "markup": "markdown", "html": "<p>Updated in [<a data-is-external-link=\"true\" href=\"https://bitbucket.org/nampi/ign-transport/commits/cdc49d8669f8080ff7faab17f4b31cac7769652c\" rel=\"nofollow\">cdc49d8</a>].</p>", "type": "rendered"}, "created_on": "2016-08-22T23:39:05.203518+00:00", "user": {"display_name": "nampi", "uuid": "{89a67bdd-09e6-4c17-8014-48d97fa5c4c8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D"}, "html": {"href": "https://bitbucket.org/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8/38230840-603b-4875-93fb-c2e81928dd69/128"}}, "nickname": "nampi", "type": "user", "account_id": "557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8"}, "inline": {}, "updated_on": "2016-08-22T23:39:05.205680+00:00", "type": "pullrequest_comment", "id": 22685824}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"update": {"description": "The new method ```bool Node::WaitForSubscribers(const std::string &_topic, const int _timeout = -1);``` is added. New classes ```TopicWatcher```, ```TopicWatcherPrivate```, ```TopicWatcherStorage``` were added to provide the opportunity to use this function.\r\n\r\nIn the ```NodeShared``` class there is  ```TopicWatcherStorage```. The data is a map where the keys are topics, the values are another map, where the key is nuuid, the value is shared_ptr<TopicWatcher>.\r\n\r\nWe could check ```NodeShared::localSubscriptions``` and ```NodeShared::remoteSubscribers``` first. Then if there is no subscriptions we create a topic watcher and call ```wait```. ", "title": "Issue_47: Wait for subscribers", "destination": {"commit": {"hash": "8f5488436c7c", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/commit/8f5488436c7c.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/commits/8f5488436c7c"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport"}, "avatar": {"href": "data/bytebucket.org/ravatar/{4249390a-7f55-404b-990d-817ba94cc7ac}ts=1533306"}}, "type": "repository", "name": "ign-transport", "full_name": "ignitionrobotics/ign-transport", "uuid": "{4249390a-7f55-404b-990d-817ba94cc7ac}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "cdc49d8669f8", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/nampi/ign-transport/commit/cdc49d8669f8"}, "html": {"href": "https://bitbucket.org/nampi/ign-transport/commits/cdc49d8669f8"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/nampi/ign-transport"}, "html": {"href": "https://bitbucket.org/nampi/ign-transport"}, "avatar": {"href": "data/bytebucket.org/ravatar/{a078025c-a14f-47ce-90a1-781a93700a2c}ts=c_plus_plus"}}, "type": "repository", "name": "ign-transport", "full_name": "nampi/ign-transport", "uuid": "{a078025c-a14f-47ce-90a1-781a93700a2c}"}, "branch": {"name": "issue_47"}}, "state": "OPEN", "author": {"display_name": "nampi", "uuid": "{89a67bdd-09e6-4c17-8014-48d97fa5c4c8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D"}, "html": {"href": "https://bitbucket.org/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8/38230840-603b-4875-93fb-c2e81928dd69/128"}}, "nickname": "nampi", "type": "user", "account_id": "557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8"}, "date": "2016-08-22T23:34:05.965507+00:00"}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22685429.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22685429"}}, "parent": {"id": 22672281, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22672281.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22672281"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "It looks like I can not write this test. I modified ```example/publisher.cc```:\n\n\n```\n#!c++\n\n  // Create a transport node and advertise a topic.\n  ignition::transport::Node node;\n  std::string topic = \"/foo\";\n\n  auto pubId = node.Advertise<ignition::msgs::StringMsg>(topic);\n  auto pubId1 = node.Advertise<ignition::msgs::Int32>(topic);\n  if (!pubId)\n  {\n    std::cerr << \"Error advertising topic [\" << topic << \"]\" << std::endl;\n    return -1;\n  }\n  if (!pubId1)\n  {\n    std::cerr << \"Error advertising topic [\" << topic << \"]\" << std::endl;\n    return -1;\n  }\n\n  // Prepare the message.\n  ignition::msgs::StringMsg msg;\n  ignition::msgs::Int32 msg1;\n  msg.set_data(\"HELLO\");\n  msg1.set_data(12);\n\n  // Publish messages at 1Hz.\n  while (!g_terminatePub)\n  {\n    if (!node.Publish(pubId, msg))\n      break;\n    if (!node.Publish(pubId1, msg1))\n      break;\n  }\n\n```\n\nI have this error:\n```\nNode::Publish() Type mismatch.\n\t* Type advertised: ignition.msgs.StringMsg\n\t* Type published: ignition.msgs.Int32\n```\n\nDid I understand your requirement?", "markup": "markdown", "html": "<p>It looks like I can not write this test. I modified <code>example/publisher.cc</code>:</p>\n<div class=\"codehilite language-c++\"><pre><span></span>  <span class=\"c1\">// Create a transport node and advertise a topic.</span>\n  <span class=\"n\">ignition</span><span class=\"o\">::</span><span class=\"n\">transport</span><span class=\"o\">::</span><span class=\"n\">Node</span> <span class=\"n\">node</span><span class=\"p\">;</span>\n  <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">string</span> <span class=\"n\">topic</span> <span class=\"o\">=</span> <span class=\"s\">&quot;/foo&quot;</span><span class=\"p\">;</span>\n\n  <span class=\"k\">auto</span> <span class=\"n\">pubId</span> <span class=\"o\">=</span> <span class=\"n\">node</span><span class=\"p\">.</span><span class=\"n\">Advertise</span><span class=\"o\">&lt;</span><span class=\"n\">ignition</span><span class=\"o\">::</span><span class=\"n\">msgs</span><span class=\"o\">::</span><span class=\"n\">StringMsg</span><span class=\"o\">&gt;</span><span class=\"p\">(</span><span class=\"n\">topic</span><span class=\"p\">);</span>\n  <span class=\"k\">auto</span> <span class=\"n\">pubId1</span> <span class=\"o\">=</span> <span class=\"n\">node</span><span class=\"p\">.</span><span class=\"n\">Advertise</span><span class=\"o\">&lt;</span><span class=\"n\">ignition</span><span class=\"o\">::</span><span class=\"n\">msgs</span><span class=\"o\">::</span><span class=\"n\">Int32</span><span class=\"o\">&gt;</span><span class=\"p\">(</span><span class=\"n\">topic</span><span class=\"p\">);</span>\n  <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"o\">!</span><span class=\"n\">pubId</span><span class=\"p\">)</span>\n  <span class=\"p\">{</span>\n    <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">cerr</span> <span class=\"o\">&lt;&lt;</span> <span class=\"s\">&quot;Error advertising topic [&quot;</span> <span class=\"o\">&lt;&lt;</span> <span class=\"n\">topic</span> <span class=\"o\">&lt;&lt;</span> <span class=\"s\">&quot;]&quot;</span> <span class=\"o\">&lt;&lt;</span> <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">endl</span><span class=\"p\">;</span>\n    <span class=\"k\">return</span> <span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">;</span>\n  <span class=\"p\">}</span>\n  <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"o\">!</span><span class=\"n\">pubId1</span><span class=\"p\">)</span>\n  <span class=\"p\">{</span>\n    <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">cerr</span> <span class=\"o\">&lt;&lt;</span> <span class=\"s\">&quot;Error advertising topic [&quot;</span> <span class=\"o\">&lt;&lt;</span> <span class=\"n\">topic</span> <span class=\"o\">&lt;&lt;</span> <span class=\"s\">&quot;]&quot;</span> <span class=\"o\">&lt;&lt;</span> <span class=\"n\">std</span><span class=\"o\">::</span><span class=\"n\">endl</span><span class=\"p\">;</span>\n    <span class=\"k\">return</span> <span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">;</span>\n  <span class=\"p\">}</span>\n\n  <span class=\"c1\">// Prepare the message.</span>\n  <span class=\"n\">ignition</span><span class=\"o\">::</span><span class=\"n\">msgs</span><span class=\"o\">::</span><span class=\"n\">StringMsg</span> <span class=\"n\">msg</span><span class=\"p\">;</span>\n  <span class=\"n\">ignition</span><span class=\"o\">::</span><span class=\"n\">msgs</span><span class=\"o\">::</span><span class=\"n\">Int32</span> <span class=\"n\">msg1</span><span class=\"p\">;</span>\n  <span class=\"n\">msg</span><span class=\"p\">.</span><span class=\"n\">set_data</span><span class=\"p\">(</span><span class=\"s\">&quot;HELLO&quot;</span><span class=\"p\">);</span>\n  <span class=\"n\">msg1</span><span class=\"p\">.</span><span class=\"n\">set_data</span><span class=\"p\">(</span><span class=\"mi\">12</span><span class=\"p\">);</span>\n\n  <span class=\"c1\">// Publish messages at 1Hz.</span>\n  <span class=\"k\">while</span> <span class=\"p\">(</span><span class=\"o\">!</span><span class=\"n\">g_terminatePub</span><span class=\"p\">)</span>\n  <span class=\"p\">{</span>\n    <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"o\">!</span><span class=\"n\">node</span><span class=\"p\">.</span><span class=\"n\">Publish</span><span class=\"p\">(</span><span class=\"n\">pubId</span><span class=\"p\">,</span> <span class=\"n\">msg</span><span class=\"p\">))</span>\n      <span class=\"k\">break</span><span class=\"p\">;</span>\n    <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"o\">!</span><span class=\"n\">node</span><span class=\"p\">.</span><span class=\"n\">Publish</span><span class=\"p\">(</span><span class=\"n\">pubId1</span><span class=\"p\">,</span> <span class=\"n\">msg1</span><span class=\"p\">))</span>\n      <span class=\"k\">break</span><span class=\"p\">;</span>\n  <span class=\"p\">}</span>\n</pre></div>\n\n\n<p>I have this error:</p>\n<div class=\"codehilite\"><pre><span></span>Node::Publish() Type mismatch.\n    * Type advertised: ignition.msgs.StringMsg\n    * Type published: ignition.msgs.Int32\n</pre></div>\n\n\n<p>Did I understand your requirement?</p>", "type": "rendered"}, "created_on": "2016-08-22T23:21:49.550976+00:00", "user": {"display_name": "nampi", "uuid": "{89a67bdd-09e6-4c17-8014-48d97fa5c4c8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D"}, "html": {"href": "https://bitbucket.org/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8/38230840-603b-4875-93fb-c2e81928dd69/128"}}, "nickname": "nampi", "type": "user", "account_id": "557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8"}, "inline": {}, "updated_on": "2016-08-22T23:21:49.553236+00:00", "type": "pullrequest_comment", "id": 22685429}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22682557.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22682557"}}, "parent": {"id": 22671321, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22671321.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22671321"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "1) With this string: All old tests work correct, but the logic for current task is broken. I added two tests in ```test/integration/twoProcessesPubSub.cc``` file: ```WaitForSubscribersSameTypeNamesRemoteSubscribers``` and ```WaitForSubscribersDifferentTypeNamesRemoteSubscribers```. In these cases I want to have remote subscriber in ```NodeShared::remoteSubscribers```. Then I want to check this block in ```Node::WaitForSubscribers()```:\n\n\n```\n#!c++\n\n  // Remote subscribers. Check message type names.\n  if (hasRemoteSubscribers)\n  {\n    for (const auto &proc : subscribers)\n    {\n      const auto &v = proc.second;\n      for (const auto &subscriber : v)\n      {\n        if (subscriber.MsgTypeName() == _typeName)\n          return true;\n      }\n    }\n  }\n```\nIt works good.\n\n2) Without this string: I check that message types are different and I do not have a remote subscriber.\n\nCould you specify what should I describe more, please?", "markup": "markdown", "html": "<p>1) With this string: All old tests work correct, but the logic for current task is broken. I added two tests in <code>test/integration/twoProcessesPubSub.cc</code> file: <code>WaitForSubscribersSameTypeNamesRemoteSubscribers</code> and <code>WaitForSubscribersDifferentTypeNamesRemoteSubscribers</code>. In these cases I want to have remote subscriber in <code>NodeShared::remoteSubscribers</code>. Then I want to check this block in <code>Node::WaitForSubscribers()</code>:</p>\n<div class=\"codehilite language-c++\"><pre><span></span>  <span class=\"c1\">// Remote subscribers. Check message type names.</span>\n  <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"n\">hasRemoteSubscribers</span><span class=\"p\">)</span>\n  <span class=\"p\">{</span>\n    <span class=\"k\">for</span> <span class=\"p\">(</span><span class=\"k\">const</span> <span class=\"k\">auto</span> <span class=\"o\">&amp;</span><span class=\"nl\">proc</span> <span class=\"p\">:</span> <span class=\"n\">subscribers</span><span class=\"p\">)</span>\n    <span class=\"p\">{</span>\n      <span class=\"k\">const</span> <span class=\"k\">auto</span> <span class=\"o\">&amp;</span><span class=\"n\">v</span> <span class=\"o\">=</span> <span class=\"n\">proc</span><span class=\"p\">.</span><span class=\"n\">second</span><span class=\"p\">;</span>\n      <span class=\"k\">for</span> <span class=\"p\">(</span><span class=\"k\">const</span> <span class=\"k\">auto</span> <span class=\"o\">&amp;</span><span class=\"nl\">subscriber</span> <span class=\"p\">:</span> <span class=\"n\">v</span><span class=\"p\">)</span>\n      <span class=\"p\">{</span>\n        <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"n\">subscriber</span><span class=\"p\">.</span><span class=\"n\">MsgTypeName</span><span class=\"p\">()</span> <span class=\"o\">==</span> <span class=\"n\">_typeName</span><span class=\"p\">)</span>\n          <span class=\"k\">return</span> <span class=\"nb\">true</span><span class=\"p\">;</span>\n      <span class=\"p\">}</span>\n    <span class=\"p\">}</span>\n  <span class=\"p\">}</span>\n</pre></div>\n\n\n<p>It works good.</p>\n<p>2) Without this string: I check that message types are different and I do not have a remote subscriber.</p>\n<p>Could you specify what should I describe more, please?</p>", "type": "rendered"}, "created_on": "2016-08-22T21:46:47.674115+00:00", "user": {"display_name": "nampi", "uuid": "{89a67bdd-09e6-4c17-8014-48d97fa5c4c8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D"}, "html": {"href": "https://bitbucket.org/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8/38230840-603b-4875-93fb-c2e81928dd69/128"}}, "nickname": "nampi", "type": "user", "account_id": "557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8"}, "inline": {}, "updated_on": "2016-08-22T21:46:47.676184+00:00", "type": "pullrequest_comment", "id": 22682557}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22672281.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22672281"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "Could you add a test where a node advertises two different types on the same topic name and you check `WaitForSubscribers()` with a third type (expect false) and also with the two advertised ones (expect true)?", "markup": "markdown", "html": "<p>Could you add a test where a node advertises two different types on the same topic name and you check <code>WaitForSubscribers()</code> with a third type (expect false) and also with the two advertised ones (expect true)?</p>", "type": "rendered"}, "created_on": "2016-08-22T18:02:48.647449+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "inline": {}, "updated_on": "2016-08-22T18:02:48.649846+00:00", "type": "pullrequest_comment", "id": 22672281}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22671904.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22671904"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "How about if we make this method templated? Something like this:\n\n`template <typename T> bool WaitForSubscribers(const std::string &_topic, const int _timeout = INT_MAX);`\n\nI think it's more elegant to provide a protobuf message type, instead of a string. The string is just what we use internally as the message type. I feel this is more consistent with other methods (`Advertise()`, `Subscribe()`) too.\n\nThis forces to move the implementation to the header file. Internally you can declare a local variable of type `T` and call `GetTypeName()` to get the string type. What do you think?", "markup": "markdown", "html": "<p>How about if we make this method templated? Something like this:</p>\n<p><code>template &lt;typename T&gt; bool WaitForSubscribers(const std::string &amp;_topic, const int _timeout = INT_MAX);</code></p>\n<p>I think it's more elegant to provide a protobuf message type, instead of a string. The string is just what we use internally as the message type. I feel this is more consistent with other methods (<code>Advertise()</code>, <code>Subscribe()</code>) too.</p>\n<p>This forces to move the implementation to the header file. Internally you can declare a local variable of type <code>T</code> and call <code>GetTypeName()</code> to get the string type. What do you think?</p>", "type": "rendered"}, "created_on": "2016-08-22T17:54:38.788846+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "inline": {}, "updated_on": "2016-08-22T17:54:38.792707+00:00", "type": "pullrequest_comment", "id": 22671904}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22671434.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22671434"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "**NodeShared::NotifyTopicWatchers()**", "markup": "markdown", "html": "<p><strong>NodeShared::NotifyTopicWatchers()</strong></p>", "type": "rendered"}, "created_on": "2016-08-22T17:44:54.418412+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "inline": {}, "updated_on": "2016-08-22T17:44:54.423908+00:00", "type": "pullrequest_comment", "id": 22671434}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22671321.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22671321"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "Could you clarify why are we removing this line?", "markup": "markdown", "html": "<p>Could you clarify why are we removing this line?</p>", "type": "rendered"}, "created_on": "2016-08-22T17:43:12.143480+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "inline": {}, "updated_on": "2016-08-22T17:43:12.146093+00:00", "type": "pullrequest_comment", "id": 22671321}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22670917.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22670917"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "I don't think you need these two `#include`", "markup": "markdown", "html": "<p>I don't think you need these two <code>#include</code></p>", "type": "rendered"}, "created_on": "2016-08-22T17:34:50.011116+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "inline": {}, "updated_on": "2016-08-22T17:34:50.014937+00:00", "type": "pullrequest_comment", "id": 22670917}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22670893.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22670893"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "Is this line needed?", "markup": "markdown", "html": "<p>Is this line needed?</p>", "type": "rendered"}, "created_on": "2016-08-22T17:34:22.797187+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "inline": {}, "updated_on": "2016-08-22T17:34:22.800328+00:00", "type": "pullrequest_comment", "id": 22670893}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22670835.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22670835"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "Is this needed?", "markup": "markdown", "html": "<p>Is this needed?</p>", "type": "rendered"}, "created_on": "2016-08-22T17:33:17.639569+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "inline": {}, "updated_on": "2016-08-22T17:33:17.644988+00:00", "type": "pullrequest_comment", "id": 22670835}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22670726.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22670726"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "Does it make sense a `TopicWatcher` without a type? Should we add the type as a parameter to the constructor?", "markup": "markdown", "html": "<p>Does it make sense a <code>TopicWatcher</code> without a type? Should we add the type as a parameter to the constructor?</p>", "type": "rendered"}, "created_on": "2016-08-22T17:31:15.839801+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "inline": {}, "updated_on": "2016-08-22T17:31:15.845570+00:00", "type": "pullrequest_comment", "id": 22670726}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22670212.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22670212"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "Document that this is an optional parameter and mention its default value.", "markup": "markdown", "html": "<p>Document that this is an optional parameter and mention its default value.</p>", "type": "rendered"}, "created_on": "2016-08-22T17:20:58.454504+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "inline": {}, "updated_on": "2016-08-22T17:20:58.457401+00:00", "type": "pullrequest_comment", "id": 22670212}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22670037.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22670037"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "Add `#include <mutex>`", "markup": "markdown", "html": "<p>Add <code>#include &lt;mutex&gt;</code></p>", "type": "rendered"}, "created_on": "2016-08-22T17:17:55.263240+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "inline": {}, "updated_on": "2016-08-22T17:17:55.265988+00:00", "type": "pullrequest_comment", "id": 22670037}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22669261.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22669261"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "same topic **Watchers**", "markup": "markdown", "html": "<p>same topic <strong>Watchers</strong></p>", "type": "rendered"}, "created_on": "2016-08-22T17:04:34.703851+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "inline": {}, "updated_on": "2016-08-22T17:04:34.709833+00:00", "type": "pullrequest_comment", "id": 22669261}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22668723.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22668723"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "Replace with `WatchersPerNode_M m;`? Check similar cases in the other tests. ", "markup": "markdown", "html": "<p>Replace with <code>WatchersPerNode_M m;</code>? Check similar cases in the other tests. </p>", "type": "rendered"}, "created_on": "2016-08-22T16:54:55.780436+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "inline": {}, "updated_on": "2016-08-22T16:54:55.782569+00:00", "type": "pullrequest_comment", "id": 22668723}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22668227.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22668227"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "What if `wait_until()` timeouts? I think `blocked` is still `true`, right? The thread won't be blocked anymore, blocked should always be `true` when this function returns.", "markup": "markdown", "html": "<p>What if <code>wait_until()</code> timeouts? I think <code>blocked</code> is still <code>true</code>, right? The thread won't be blocked anymore, blocked should always be <code>true</code> when this function returns.</p>", "type": "rendered"}, "created_on": "2016-08-22T16:45:53.759314+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "inline": {}, "updated_on": "2016-08-22T16:51:51.285653+00:00", "type": "pullrequest_comment", "id": 22668227}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22667579.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22667579"}}, "parent": {"id": 22625524, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22625524.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22625524"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "You're right. Today, the code looks correct to me :) .", "markup": "markdown", "html": "<p>You're right. Today, the code looks correct to me :) .</p>", "type": "rendered"}, "created_on": "2016-08-22T16:34:38.583666+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "inline": {}, "updated_on": "2016-08-22T16:34:56.313671+00:00", "type": "pullrequest_comment", "id": 22667579}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22664600.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22664600"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "Rename the header guards to `IGN_TRANSPORT_TOPICWATCHER_HH_`", "markup": "markdown", "html": "<p>Rename the header guards to <code>IGN_TRANSPORT_TOPICWATCHER_HH_</code></p>", "type": "rendered"}, "created_on": "2016-08-22T15:45:59.540591+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "inline": {}, "updated_on": "2016-08-22T15:45:59.546053+00:00", "type": "pullrequest_comment", "id": 22664600}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22664481.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22664481"}}, "parent": {"id": 22547934, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22547934.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22547934"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "The error was unrelated.", "markup": "markdown", "html": "<p>The error was unrelated.</p>", "type": "rendered"}, "created_on": "2016-08-22T15:44:26.105537+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "updated_on": "2016-08-22T15:44:26.111072+00:00", "type": "pullrequest_comment", "id": 22664481}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22628705.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22628705"}}, "parent": {"id": 21089909, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/21089909.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-21089909"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "Added in [[95b2f88](https://bitbucket.org/nampi/ign-transport/commits/95b2f88117793e3adcd7486d02b44460caa7574e?at=default)].", "markup": "markdown", "html": "<p>Added in [<a data-is-external-link=\"true\" href=\"https://bitbucket.org/nampi/ign-transport/commits/95b2f88117793e3adcd7486d02b44460caa7574e?at=default\" rel=\"nofollow\">95b2f88</a>].</p>", "type": "rendered"}, "created_on": "2016-08-22T04:26:47.104844+00:00", "user": {"display_name": "nampi", "uuid": "{89a67bdd-09e6-4c17-8014-48d97fa5c4c8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D"}, "html": {"href": "https://bitbucket.org/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8/38230840-603b-4875-93fb-c2e81928dd69/128"}}, "nickname": "nampi", "type": "user", "account_id": "557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8"}, "inline": {}, "updated_on": "2016-08-22T04:26:47.111334+00:00", "type": "pullrequest_comment", "id": 22628705}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"update": {"description": "The new method ```bool Node::WaitForSubscribers(const std::string &_topic, const int _timeout = -1);``` is added. New classes ```TopicWatcher```, ```TopicWatcherPrivate```, ```TopicWatcherStorage``` were added to provide the opportunity to use this function.\r\n\r\nIn the ```NodeShared``` class there is  ```TopicWatcherStorage```. The data is a map where the keys are topics, the values are another map, where the key is nuuid, the value is shared_ptr<TopicWatcher>.\r\n\r\nWe could check ```NodeShared::localSubscriptions``` and ```NodeShared::remoteSubscribers``` first. Then if there is no subscriptions we create a topic watcher and call ```wait```. ", "title": "Issue_47: Wait for subscribers", "destination": {"commit": {"hash": "8f5488436c7c", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/commit/8f5488436c7c.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/commits/8f5488436c7c"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport"}, "avatar": {"href": "data/bytebucket.org/ravatar/{4249390a-7f55-404b-990d-817ba94cc7ac}ts=1533306"}}, "type": "repository", "name": "ign-transport", "full_name": "ignitionrobotics/ign-transport", "uuid": "{4249390a-7f55-404b-990d-817ba94cc7ac}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "95b2f8811779", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/nampi/ign-transport/commit/95b2f8811779"}, "html": {"href": "https://bitbucket.org/nampi/ign-transport/commits/95b2f8811779"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/nampi/ign-transport"}, "html": {"href": "https://bitbucket.org/nampi/ign-transport"}, "avatar": {"href": "data/bytebucket.org/ravatar/{a078025c-a14f-47ce-90a1-781a93700a2c}ts=c_plus_plus"}}, "type": "repository", "name": "ign-transport", "full_name": "nampi/ign-transport", "uuid": "{a078025c-a14f-47ce-90a1-781a93700a2c}"}, "branch": {"name": "issue_47"}}, "state": "OPEN", "author": {"display_name": "nampi", "uuid": "{89a67bdd-09e6-4c17-8014-48d97fa5c4c8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D"}, "html": {"href": "https://bitbucket.org/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8/38230840-603b-4875-93fb-c2e81928dd69/128"}}, "nickname": "nampi", "type": "user", "account_id": "557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8"}, "date": "2016-08-22T04:25:53.211205+00:00"}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"update": {"description": "The new method ```bool Node::WaitForSubscribers(const std::string &_topic, const int _timeout = -1);``` is added. New classes ```TopicWatcher```, ```TopicWatcherPrivate```, ```TopicWatcherStorage``` were added to provide the opportunity to use this function.\r\n\r\nIn the ```NodeShared``` class there is  ```TopicWatcherStorage```. The data is a map where the keys are topics, the values are another map, where the key is nuuid, the value is shared_ptr<TopicWatcher>.\r\n\r\nWe could check ```NodeShared::localSubscriptions``` and ```NodeShared::remoteSubscribers``` first. Then if there is no subscriptions we create a topic watcher and call ```wait```. ", "title": "Issue_47: Wait for subscribers", "destination": {"commit": {"hash": "8f5488436c7c", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/commit/8f5488436c7c.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/commits/8f5488436c7c"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport"}, "avatar": {"href": "data/bytebucket.org/ravatar/{4249390a-7f55-404b-990d-817ba94cc7ac}ts=1533306"}}, "type": "repository", "name": "ign-transport", "full_name": "ignitionrobotics/ign-transport", "uuid": "{4249390a-7f55-404b-990d-817ba94cc7ac}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "2cf2fc5fcf47", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/nampi/ign-transport/commit/2cf2fc5fcf47"}, "html": {"href": "https://bitbucket.org/nampi/ign-transport/commits/2cf2fc5fcf47"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/nampi/ign-transport"}, "html": {"href": "https://bitbucket.org/nampi/ign-transport"}, "avatar": {"href": "data/bytebucket.org/ravatar/{a078025c-a14f-47ce-90a1-781a93700a2c}ts=c_plus_plus"}}, "type": "repository", "name": "ign-transport", "full_name": "nampi/ign-transport", "uuid": "{a078025c-a14f-47ce-90a1-781a93700a2c}"}, "branch": {"name": "issue_47"}}, "state": "OPEN", "author": {"display_name": "nampi", "uuid": "{89a67bdd-09e6-4c17-8014-48d97fa5c4c8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D"}, "html": {"href": "https://bitbucket.org/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8/38230840-603b-4875-93fb-c2e81928dd69/128"}}, "nickname": "nampi", "type": "user", "account_id": "557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8"}, "date": "2016-08-22T04:09:20.380162+00:00"}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22627151.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22627151"}}, "parent": {"id": 22547407, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22547407.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22547407"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "We should. Added type checking [[b909b9d](https://bitbucket.org/nampi/ign-transport/commits/b909b9d2fa19135ee3c6b82dcee14713ef05aea1)].", "markup": "markdown", "html": "<p>We should. Added type checking [<a data-is-external-link=\"true\" href=\"https://bitbucket.org/nampi/ign-transport/commits/b909b9d2fa19135ee3c6b82dcee14713ef05aea1\" rel=\"nofollow\">b909b9d</a>].</p>", "type": "rendered"}, "created_on": "2016-08-22T02:40:07.999007+00:00", "user": {"display_name": "nampi", "uuid": "{89a67bdd-09e6-4c17-8014-48d97fa5c4c8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D"}, "html": {"href": "https://bitbucket.org/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8/38230840-603b-4875-93fb-c2e81928dd69/128"}}, "nickname": "nampi", "type": "user", "account_id": "557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8"}, "inline": {}, "updated_on": "2016-08-22T02:40:08.007348+00:00", "type": "pullrequest_comment", "id": 22627151}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22627135.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22627135"}}, "parent": {"id": 22547455, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22547455.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22547455"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "You are right. Added type checking here [[b909b9d](https://bitbucket.org/nampi/ign-transport/commits/b909b9d2fa19135ee3c6b82dcee14713ef05aea1)].", "markup": "markdown", "html": "<p>You are right. Added type checking here [<a data-is-external-link=\"true\" href=\"https://bitbucket.org/nampi/ign-transport/commits/b909b9d2fa19135ee3c6b82dcee14713ef05aea1\" rel=\"nofollow\">b909b9d</a>].</p>", "type": "rendered"}, "created_on": "2016-08-22T02:39:14.884591+00:00", "user": {"display_name": "nampi", "uuid": "{89a67bdd-09e6-4c17-8014-48d97fa5c4c8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D"}, "html": {"href": "https://bitbucket.org/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8/38230840-603b-4875-93fb-c2e81928dd69/128"}}, "nickname": "nampi", "type": "user", "account_id": "557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8"}, "inline": {}, "updated_on": "2016-08-22T02:39:14.887131+00:00", "type": "pullrequest_comment", "id": 22627135}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"update": {"description": "The new method ```bool Node::WaitForSubscribers(const std::string &_topic, const int _timeout = -1);``` is added. New classes ```TopicWatcher```, ```TopicWatcherPrivate```, ```TopicWatcherStorage``` were added to provide the opportunity to use this function.\r\n\r\nIn the ```NodeShared``` class there is  ```TopicWatcherStorage```. The data is a map where the keys are topics, the values are another map, where the key is nuuid, the value is shared_ptr<TopicWatcher>.\r\n\r\nWe could check ```NodeShared::localSubscriptions``` and ```NodeShared::remoteSubscribers``` first. Then if there is no subscriptions we create a topic watcher and call ```wait```. ", "title": "Issue_47: Wait for subscribers", "destination": {"commit": {"hash": "8f5488436c7c", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/commit/8f5488436c7c.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/commits/8f5488436c7c"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport"}, "avatar": {"href": "data/bytebucket.org/ravatar/{4249390a-7f55-404b-990d-817ba94cc7ac}ts=1533306"}}, "type": "repository", "name": "ign-transport", "full_name": "ignitionrobotics/ign-transport", "uuid": "{4249390a-7f55-404b-990d-817ba94cc7ac}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "b909b9d2fa19", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/nampi/ign-transport/commit/b909b9d2fa19"}, "html": {"href": "https://bitbucket.org/nampi/ign-transport/commits/b909b9d2fa19"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/nampi/ign-transport"}, "html": {"href": "https://bitbucket.org/nampi/ign-transport"}, "avatar": {"href": "data/bytebucket.org/ravatar/{a078025c-a14f-47ce-90a1-781a93700a2c}ts=c_plus_plus"}}, "type": "repository", "name": "ign-transport", "full_name": "nampi/ign-transport", "uuid": "{a078025c-a14f-47ce-90a1-781a93700a2c}"}, "branch": {"name": "issue_47"}}, "state": "OPEN", "author": {"display_name": "nampi", "uuid": "{89a67bdd-09e6-4c17-8014-48d97fa5c4c8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D"}, "html": {"href": "https://bitbucket.org/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8/38230840-603b-4875-93fb-c2e81928dd69/128"}}, "nickname": "nampi", "type": "user", "account_id": "557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8"}, "date": "2016-08-22T02:36:33.675098+00:00"}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22625727.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22625727"}}, "parent": {"id": 22547891, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22547891.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22547891"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "Updated [[99b9079](https://bitbucket.org/nampi/ign-transport/commits/99b9079be495e57e249db7c05e95fdc1539563f5)].", "markup": "markdown", "html": "<p>Updated [<a data-is-external-link=\"true\" href=\"https://bitbucket.org/nampi/ign-transport/commits/99b9079be495e57e249db7c05e95fdc1539563f5\" rel=\"nofollow\">99b9079</a>].</p>", "type": "rendered"}, "created_on": "2016-08-22T00:51:43.705738+00:00", "user": {"display_name": "nampi", "uuid": "{89a67bdd-09e6-4c17-8014-48d97fa5c4c8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D"}, "html": {"href": "https://bitbucket.org/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8/38230840-603b-4875-93fb-c2e81928dd69/128"}}, "nickname": "nampi", "type": "user", "account_id": "557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8"}, "updated_on": "2016-08-22T00:51:43.711089+00:00", "type": "pullrequest_comment", "id": 22625727}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22625710.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22625710"}}, "parent": {"id": 22546774, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22546774.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22546774"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "Updated in [[d2f0624](https://bitbucket.org/nampi/ign-transport/commits/d2f0624671a9da1468cdd18df5f23956c56cba55)].", "markup": "markdown", "html": "<p>Updated in [<a data-is-external-link=\"true\" href=\"https://bitbucket.org/nampi/ign-transport/commits/d2f0624671a9da1468cdd18df5f23956c56cba55\" rel=\"nofollow\">d2f0624</a>].</p>", "type": "rendered"}, "created_on": "2016-08-22T00:50:52.475739+00:00", "user": {"display_name": "nampi", "uuid": "{89a67bdd-09e6-4c17-8014-48d97fa5c4c8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D"}, "html": {"href": "https://bitbucket.org/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8/38230840-603b-4875-93fb-c2e81928dd69/128"}}, "nickname": "nampi", "type": "user", "account_id": "557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8"}, "inline": {}, "updated_on": "2016-08-22T00:50:52.477737+00:00", "type": "pullrequest_comment", "id": 22625710}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22625708.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22625708"}}, "parent": {"id": 22546784, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22546784.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22546784"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "Updated in [[d2f0624](https://bitbucket.org/nampi/ign-transport/commits/d2f0624671a9da1468cdd18df5f23956c56cba55)].", "markup": "markdown", "html": "<p>Updated in [<a data-is-external-link=\"true\" href=\"https://bitbucket.org/nampi/ign-transport/commits/d2f0624671a9da1468cdd18df5f23956c56cba55\" rel=\"nofollow\">d2f0624</a>].</p>", "type": "rendered"}, "created_on": "2016-08-22T00:50:47.254200+00:00", "user": {"display_name": "nampi", "uuid": "{89a67bdd-09e6-4c17-8014-48d97fa5c4c8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D"}, "html": {"href": "https://bitbucket.org/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8/38230840-603b-4875-93fb-c2e81928dd69/128"}}, "nickname": "nampi", "type": "user", "account_id": "557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8"}, "inline": {}, "updated_on": "2016-08-22T00:50:47.258381+00:00", "type": "pullrequest_comment", "id": 22625708}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22625707.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22625707"}}, "parent": {"id": 22546806, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22546806.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22546806"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "Updated in [[d2f0624](https://bitbucket.org/nampi/ign-transport/commits/d2f0624671a9da1468cdd18df5f23956c56cba55)].", "markup": "markdown", "html": "<p>Updated in [<a data-is-external-link=\"true\" href=\"https://bitbucket.org/nampi/ign-transport/commits/d2f0624671a9da1468cdd18df5f23956c56cba55\" rel=\"nofollow\">d2f0624</a>].</p>", "type": "rendered"}, "created_on": "2016-08-22T00:50:41.161255+00:00", "user": {"display_name": "nampi", "uuid": "{89a67bdd-09e6-4c17-8014-48d97fa5c4c8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D"}, "html": {"href": "https://bitbucket.org/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8/38230840-603b-4875-93fb-c2e81928dd69/128"}}, "nickname": "nampi", "type": "user", "account_id": "557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8"}, "inline": {}, "updated_on": "2016-08-22T00:50:41.167454+00:00", "type": "pullrequest_comment", "id": 22625707}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22625706.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22625706"}}, "parent": {"id": 22546810, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22546810.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22546810"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "Updated in [[d2f0624](https://bitbucket.org/nampi/ign-transport/commits/d2f0624671a9da1468cdd18df5f23956c56cba55)].", "markup": "markdown", "html": "<p>Updated in [<a data-is-external-link=\"true\" href=\"https://bitbucket.org/nampi/ign-transport/commits/d2f0624671a9da1468cdd18df5f23956c56cba55\" rel=\"nofollow\">d2f0624</a>].</p>", "type": "rendered"}, "created_on": "2016-08-22T00:50:32.712245+00:00", "user": {"display_name": "nampi", "uuid": "{89a67bdd-09e6-4c17-8014-48d97fa5c4c8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D"}, "html": {"href": "https://bitbucket.org/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8/38230840-603b-4875-93fb-c2e81928dd69/128"}}, "nickname": "nampi", "type": "user", "account_id": "557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8"}, "inline": {}, "updated_on": "2016-08-22T00:50:32.718026+00:00", "type": "pullrequest_comment", "id": 22625706}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22625705.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22625705"}}, "parent": {"id": 22546817, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22546817.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22546817"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "Updated in [[d2f0624](https://bitbucket.org/nampi/ign-transport/commits/d2f0624671a9da1468cdd18df5f23956c56cba55)].", "markup": "markdown", "html": "<p>Updated in [<a data-is-external-link=\"true\" href=\"https://bitbucket.org/nampi/ign-transport/commits/d2f0624671a9da1468cdd18df5f23956c56cba55\" rel=\"nofollow\">d2f0624</a>].</p>", "type": "rendered"}, "created_on": "2016-08-22T00:50:25.062339+00:00", "user": {"display_name": "nampi", "uuid": "{89a67bdd-09e6-4c17-8014-48d97fa5c4c8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D"}, "html": {"href": "https://bitbucket.org/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8/38230840-603b-4875-93fb-c2e81928dd69/128"}}, "nickname": "nampi", "type": "user", "account_id": "557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8"}, "inline": {}, "updated_on": "2016-08-22T00:50:25.067876+00:00", "type": "pullrequest_comment", "id": 22625705}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22625702.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22625702"}}, "parent": {"id": 22546846, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22546846.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22546846"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "Updated in [[d2f0624](https://bitbucket.org/nampi/ign-transport/commits/d2f0624671a9da1468cdd18df5f23956c56cba55)].", "markup": "markdown", "html": "<p>Updated in [<a data-is-external-link=\"true\" href=\"https://bitbucket.org/nampi/ign-transport/commits/d2f0624671a9da1468cdd18df5f23956c56cba55\" rel=\"nofollow\">d2f0624</a>].</p>", "type": "rendered"}, "created_on": "2016-08-22T00:50:08.320854+00:00", "user": {"display_name": "nampi", "uuid": "{89a67bdd-09e6-4c17-8014-48d97fa5c4c8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D"}, "html": {"href": "https://bitbucket.org/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8/38230840-603b-4875-93fb-c2e81928dd69/128"}}, "nickname": "nampi", "type": "user", "account_id": "557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8"}, "inline": {}, "updated_on": "2016-08-22T00:50:08.323807+00:00", "type": "pullrequest_comment", "id": 22625702}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22625700.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22625700"}}, "parent": {"id": 22546965, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22546965.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22546965"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "Updated in [[d2f0624](https://bitbucket.org/nampi/ign-transport/commits/d2f0624671a9da1468cdd18df5f23956c56cba55)].", "markup": "markdown", "html": "<p>Updated in [<a data-is-external-link=\"true\" href=\"https://bitbucket.org/nampi/ign-transport/commits/d2f0624671a9da1468cdd18df5f23956c56cba55\" rel=\"nofollow\">d2f0624</a>].</p>", "type": "rendered"}, "created_on": "2016-08-22T00:50:00.636745+00:00", "user": {"display_name": "nampi", "uuid": "{89a67bdd-09e6-4c17-8014-48d97fa5c4c8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D"}, "html": {"href": "https://bitbucket.org/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8/38230840-603b-4875-93fb-c2e81928dd69/128"}}, "nickname": "nampi", "type": "user", "account_id": "557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8"}, "inline": {}, "updated_on": "2016-08-22T00:50:00.639074+00:00", "type": "pullrequest_comment", "id": 22625700}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22625695.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22625695"}}, "parent": {"id": 22546999, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22546999.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22546999"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "Updated in [[d2f0624](https://bitbucket.org/nampi/ign-transport/commits/d2f0624671a9da1468cdd18df5f23956c56cba55)].", "markup": "markdown", "html": "<p>Updated in [<a data-is-external-link=\"true\" href=\"https://bitbucket.org/nampi/ign-transport/commits/d2f0624671a9da1468cdd18df5f23956c56cba55\" rel=\"nofollow\">d2f0624</a>].</p>", "type": "rendered"}, "created_on": "2016-08-22T00:49:42.504405+00:00", "user": {"display_name": "nampi", "uuid": "{89a67bdd-09e6-4c17-8014-48d97fa5c4c8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D"}, "html": {"href": "https://bitbucket.org/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8/38230840-603b-4875-93fb-c2e81928dd69/128"}}, "nickname": "nampi", "type": "user", "account_id": "557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8"}, "inline": {}, "updated_on": "2016-08-22T00:49:42.506660+00:00", "type": "pullrequest_comment", "id": 22625695}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"update": {"description": "The new method ```bool Node::WaitForSubscribers(const std::string &_topic, const int _timeout = -1);``` is added. New classes ```TopicWatcher```, ```TopicWatcherPrivate```, ```TopicWatcherStorage``` were added to provide the opportunity to use this function.\r\n\r\nIn the ```NodeShared``` class there is  ```TopicWatcherStorage```. The data is a map where the keys are topics, the values are another map, where the key is nuuid, the value is shared_ptr<TopicWatcher>.\r\n\r\nWe could check ```NodeShared::localSubscriptions``` and ```NodeShared::remoteSubscribers``` first. Then if there is no subscriptions we create a topic watcher and call ```wait```. ", "title": "Issue_47: Wait for subscribers", "destination": {"commit": {"hash": "8f5488436c7c", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/commit/8f5488436c7c.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/commits/8f5488436c7c"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport"}, "avatar": {"href": "data/bytebucket.org/ravatar/{4249390a-7f55-404b-990d-817ba94cc7ac}ts=1533306"}}, "type": "repository", "name": "ign-transport", "full_name": "ignitionrobotics/ign-transport", "uuid": "{4249390a-7f55-404b-990d-817ba94cc7ac}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "d2f0624671a9", "type": "commit", "links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/nampi/ign-transport/commit/d2f0624671a9"}, "html": {"href": "https://bitbucket.org/nampi/ign-transport/commits/d2f0624671a9"}}}, "repository": {"links": {"self": {"href": "https://api.bitbucket.org/2.0/repositories/nampi/ign-transport"}, "html": {"href": "https://bitbucket.org/nampi/ign-transport"}, "avatar": {"href": "data/bytebucket.org/ravatar/{a078025c-a14f-47ce-90a1-781a93700a2c}ts=c_plus_plus"}}, "type": "repository", "name": "ign-transport", "full_name": "nampi/ign-transport", "uuid": "{a078025c-a14f-47ce-90a1-781a93700a2c}"}, "branch": {"name": "issue_47"}}, "state": "OPEN", "author": {"display_name": "nampi", "uuid": "{89a67bdd-09e6-4c17-8014-48d97fa5c4c8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D"}, "html": {"href": "https://bitbucket.org/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8/38230840-603b-4875-93fb-c2e81928dd69/128"}}, "nickname": "nampi", "type": "user", "account_id": "557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8"}, "date": "2016-08-22T00:48:03.562655+00:00"}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22625524.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22625524"}}, "parent": {"id": 22546940, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/comments/22546940.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158/_/diff#comment-22546940"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}, "content": {"raw": "```new_watchers``` contains some watchers. The types of these watchers are differ from requested ```_typeName```.\n\n```\n#!c++\n\n              if (watcher && watcher->TopicType() == _typeName)\n                count++;\n              else\n                new_watchers[node.first].push_back(watcher);\n```\nI think the original watcher is added to ```new_watchers``` in the ```if-else``` block. Then ```new_watchers``` is not empty and this line ```this->data.at(_topic) = new_watchers;``` is executed.\n\nCan you explain me again, please?\n\n", "markup": "markdown", "html": "<p><code>new_watchers</code> contains some watchers. The types of these watchers are differ from requested <code>_typeName</code>.</p>\n<div class=\"codehilite language-c++\"><pre><span></span>              <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"n\">watcher</span> <span class=\"o\">&amp;&amp;</span> <span class=\"n\">watcher</span><span class=\"o\">-&gt;</span><span class=\"n\">TopicType</span><span class=\"p\">()</span> <span class=\"o\">==</span> <span class=\"n\">_typeName</span><span class=\"p\">)</span>\n                <span class=\"n\">count</span><span class=\"o\">++</span><span class=\"p\">;</span>\n              <span class=\"k\">else</span>\n                <span class=\"n\">new_watchers</span><span class=\"p\">[</span><span class=\"n\">node</span><span class=\"p\">.</span><span class=\"n\">first</span><span class=\"p\">].</span><span class=\"n\">push_back</span><span class=\"p\">(</span><span class=\"n\">watcher</span><span class=\"p\">);</span>\n</pre></div>\n\n\n<p>I think the original watcher is added to <code>new_watchers</code> in the <code>if-else</code> block. Then <code>new_watchers</code> is not empty and this line <code>this-&gt;data.at(_topic) = new_watchers;</code> is executed.</p>\n<p>Can you explain me again, please?</p>", "type": "rendered"}, "created_on": "2016-08-22T00:30:22.098325+00:00", "user": {"display_name": "nampi", "uuid": "{89a67bdd-09e6-4c17-8014-48d97fa5c4c8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D"}, "html": {"href": "https://bitbucket.org/%7B89a67bdd-09e6-4c17-8014-48d97fa5c4c8%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8/38230840-603b-4875-93fb-c2e81928dd69/128"}}, "nickname": "nampi", "type": "user", "account_id": "557058:6509b6f8-6263-4504-9cee-d12b08b0b4e8"}, "inline": {}, "updated_on": "2016-08-22T00:30:22.103189+00:00", "type": "pullrequest_comment", "id": 22625524}, "pull_request": {"type": "pullrequest", "id": 158, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/158"}}, "title": "Issue_47: Wait for subscribers"}}], "next": "data/repositories/ignitionrobotics/ign-transport/pullrequests/158/activity_ctx=7RfpafaCK.json"}