{"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/228/comments/52672304.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/228/_/diff#comment-52672304"}}, "parent": {"id": 52188818, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/228/comments/52188818.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/228/_/diff#comment-52188818"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 228, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/228.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/228"}}, "title": "Update the signature of the responser callbacks"}, "content": {"raw": "I made a branch ([updated_service_cb_4_tictoc](#!/ignitionrobotics/ign-transport/branch/updated_service_cb_4_tictoc?dest=updated_service_cb_4#diff)) that shows how we can deprecate the old signature. I tested and verified that it works by reverting `srvEcho` back to its old signature in `Node_TEST` and compiling + running the tests. I didn't commit that test reversion, though, because I don't think we want to have our tests dump out deprecation warnings.\n\nThe catch with doing a tic-toc is that while we're ticking we're going to have roughly 2x the number of overloads for `Advertise(~)` where half of those overloads are deprecated. That isn't really a problem beyond making the header ugly. I think some of that ugliness can be avoided if we move the implementations of the template functions into a separate header, perhaps named `ignition/transport/detail/Node.hh`.\n\nI can quickly whip up deprecated overloads to cover all of the old service signatures if we want that.\n\nI could also move the template function implementations into a detail header if anyone (besides me) thinks that would help with readability. Examples of the split-header approach can be found in [ign-common](#!/ignitionrobotics/ign-common/src/ea50a7739b7d431ad1b444487f8afe68bf88a893/include/ignition/common/Plugin.hh?at=default&fileviewer=file-view-default).", "markup": "markdown", "html": "<p>I made a branch (<a data-is-external-link=\"true\" href=\"#!/ignitionrobotics/ign-transport/branch/updated_service_cb_4_tictoc?dest=updated_service_cb_4#diff\" rel=\"nofollow\">updated_service_cb_4_tictoc</a>) that shows how we can deprecate the old signature. I tested and verified that it works by reverting <code>srvEcho</code> back to its old signature in <code>Node_TEST</code> and compiling + running the tests. I didn't commit that test reversion, though, because I don't think we want to have our tests dump out deprecation warnings.</p>\n<p>The catch with doing a tic-toc is that while we're ticking we're going to have roughly 2x the number of overloads for <code>Advertise(~)</code> where half of those overloads are deprecated. That isn't really a problem beyond making the header ugly. I think some of that ugliness can be avoided if we move the implementations of the template functions into a separate header, perhaps named <code>ignition/transport/detail/Node.hh</code>.</p>\n<p>I can quickly whip up deprecated overloads to cover all of the old service signatures if we want that.</p>\n<p>I could also move the template function implementations into a detail header if anyone (besides me) thinks that would help with readability. Examples of the split-header approach can be found in <a data-is-external-link=\"true\" href=\"#!/ignitionrobotics/ign-common/src/ea50a7739b7d431ad1b444487f8afe68bf88a893/include/ignition/common/Plugin.hh?at=default&amp;fileviewer=file-view-default\" rel=\"nofollow\">ign-common</a>.</p>", "type": "rendered"}, "created_on": "2017-12-27T21:00:41.280196+00:00", "user": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "updated_on": "2017-12-27T22:10:53.795133+00:00", "type": "pullrequest_comment", "id": 52672304}