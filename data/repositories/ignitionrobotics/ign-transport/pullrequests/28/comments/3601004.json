{"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/28/comments/3601004.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/28/_/diff#comment-3601004"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 28, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/28.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/28"}}, "title": "Windows: compile tests and examples (take II)"}, "content": {"raw": "The tests are mostly passing on osx now, though there is some weird behavior of `INTEGRATION_twoProcessesPubSub` (seems like the gtest is getting forked and running two simultaneous tests, one of which appears to fail):\n~~~\n17: Test command: /Users/jenkins/workspace/ignition_transport-any-devel-homebrew-amd64/build/test/integration/INTEGRATION_twoProcessesPubSub \"--gtest_output=xml:/Users/jenkins/workspace/ignition_transport-any-devel-homebrew-amd64/build/test_results/INTEGRATION_twoProcessesPubSub.xml\"\n17: Test timeout computed to be: 240\n17: [==========] Running 1 test from 1 test case.\n17: [----------] Global test environment set-up.\n17: [----------] 1 test from twoProcPubSub\n17: [ RUN      ] twoProcPubSub.PubSubTwoProcsTwoNodes\n17: [==========] Running 1 test from 1 test case.\n17: [----------] Global test environment set-up.\n17: [----------] 1 test from twoProcPubSub\n17: [ RUN      ] twoProcPubSub.PubSubTwoProcsTwoNodesSubscriber\n17: Waiting ... \n17: Waiting ... \n17: Waiting ... \n17: Callback2\n17: Callback1\n17: /Users/jenkins/workspace/ignition_transport-any-devel-homebrew-amd64/ignition-transport/test/integration/twoProcessesPubSubSubscriber_aux.cc:99: Failure\n17: Value of: cb2Executed\n17:   Actual: false\n17: Expected: true\n17: [  FAILED  ] twoProcPubSub.PubSubTwoProcsTwoNodesSubscriber (1615 ms)\n17: [----------] 1 test from twoProcPubSub (1615 ms total)\n17: \n17: [----------] Global test environment tear-down\n17: [==========] 1 test from 1 test case ran. (1616 ms total)\n17: [  PASSED  ] 0 tests.\n17: [  FAILED  ] 1 test, listed below:\n17: [  FAILED  ] twoProcPubSub.PubSubTwoProcsTwoNodesSubscriber\n17: \n17:  1 FAILED TEST\n17: [       OK ] twoProcPubSub.PubSubTwoProcsTwoNodes (2213 ms)\n17: [----------] 1 test from twoProcPubSub (2213 ms total)\n17: \n17: [----------] Global test environment tear-down\n17: [==========] 1 test from 1 test case ran. (2213 ms total)\n17: [  PASSED  ] 1 test.\n17/26 Test #17: INTEGRATION_twoProcessesPubSub ................   Passed    3.11 sec\n~~~\nhttp://build.osrfoundation.org/view/ignition_transport/job/ignition_transport-any-devel-homebrew-amd64/17/console", "markup": "markdown", "html": "<p>The tests are mostly passing on osx now, though there is some weird behavior of <code>INTEGRATION_twoProcessesPubSub</code> (seems like the gtest is getting forked and running two simultaneous tests, one of which appears to fail):</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"mi\">17</span><span class=\"o\">:</span> <span class=\"n\">Test</span> <span class=\"n\">command</span><span class=\"o\">:</span> <span class=\"sr\">/Users/jenkins/workspace/ignition_transport-any-devel-homebrew-amd64/build/test/integration/INTEGRATION_twoProcessesPubSub &quot;--gtest_output=xml:/Users/jenkins/workspace/ignition_transport-any-devel-homebrew-amd64/build/test_results/</span><span class=\"n\">INTEGRATION_twoProcessesPubSub</span><span class=\"o\">.</span><span class=\"na\">xml</span><span class=\"err\">&quot;</span>\n<span class=\"mi\">17</span><span class=\"o\">:</span> <span class=\"n\">Test</span> <span class=\"n\">timeout</span> <span class=\"n\">computed</span> <span class=\"n\">to</span> <span class=\"n\">be</span><span class=\"o\">:</span> <span class=\"mi\">240</span>\n<span class=\"mi\">17</span><span class=\"o\">:</span> <span class=\"o\">[==========]</span> <span class=\"n\">Running</span> <span class=\"mi\">1</span> <span class=\"n\">test</span> <span class=\"n\">from</span> <span class=\"mi\">1</span> <span class=\"n\">test</span> <span class=\"k\">case</span><span class=\"o\">.</span>\n<span class=\"mi\">17</span><span class=\"o\">:</span> <span class=\"o\">[----------]</span> <span class=\"n\">Global</span> <span class=\"n\">test</span> <span class=\"n\">environment</span> <span class=\"kd\">set</span><span class=\"o\">-</span><span class=\"n\">up</span><span class=\"o\">.</span>\n<span class=\"mi\">17</span><span class=\"o\">:</span> <span class=\"o\">[----------]</span> <span class=\"mi\">1</span> <span class=\"n\">test</span> <span class=\"n\">from</span> <span class=\"n\">twoProcPubSub</span>\n<span class=\"mi\">17</span><span class=\"o\">:</span> <span class=\"o\">[</span> <span class=\"n\">RUN</span>      <span class=\"o\">]</span> <span class=\"n\">twoProcPubSub</span><span class=\"o\">.</span><span class=\"na\">PubSubTwoProcsTwoNodes</span>\n<span class=\"mi\">17</span><span class=\"o\">:</span> <span class=\"o\">[==========]</span> <span class=\"n\">Running</span> <span class=\"mi\">1</span> <span class=\"n\">test</span> <span class=\"n\">from</span> <span class=\"mi\">1</span> <span class=\"n\">test</span> <span class=\"k\">case</span><span class=\"o\">.</span>\n<span class=\"mi\">17</span><span class=\"o\">:</span> <span class=\"o\">[----------]</span> <span class=\"n\">Global</span> <span class=\"n\">test</span> <span class=\"n\">environment</span> <span class=\"kd\">set</span><span class=\"o\">-</span><span class=\"n\">up</span><span class=\"o\">.</span>\n<span class=\"mi\">17</span><span class=\"o\">:</span> <span class=\"o\">[----------]</span> <span class=\"mi\">1</span> <span class=\"n\">test</span> <span class=\"n\">from</span> <span class=\"n\">twoProcPubSub</span>\n<span class=\"mi\">17</span><span class=\"o\">:</span> <span class=\"o\">[</span> <span class=\"n\">RUN</span>      <span class=\"o\">]</span> <span class=\"n\">twoProcPubSub</span><span class=\"o\">.</span><span class=\"na\">PubSubTwoProcsTwoNodesSubscriber</span>\n<span class=\"mi\">17</span><span class=\"o\">:</span> <span class=\"n\">Waiting</span> <span class=\"o\">...</span> \n<span class=\"mi\">17</span><span class=\"o\">:</span> <span class=\"n\">Waiting</span> <span class=\"o\">...</span> \n<span class=\"mi\">17</span><span class=\"o\">:</span> <span class=\"n\">Waiting</span> <span class=\"o\">...</span> \n<span class=\"mi\">17</span><span class=\"o\">:</span> <span class=\"n\">Callback2</span>\n<span class=\"mi\">17</span><span class=\"o\">:</span> <span class=\"n\">Callback1</span>\n<span class=\"mi\">17</span><span class=\"o\">:</span> <span class=\"sr\">/Users/jenkins/workspace/ignition_transport-any-devel-homebrew-amd64/ignition-transport/test/integration/</span><span class=\"n\">twoProcessesPubSubSubscriber_aux</span><span class=\"o\">.</span><span class=\"na\">cc</span><span class=\"o\">:</span><span class=\"mi\">99</span><span class=\"o\">:</span> <span class=\"n\">Failure</span>\n<span class=\"mi\">17</span><span class=\"o\">:</span> <span class=\"n\">Value</span> <span class=\"n\">of</span><span class=\"o\">:</span> <span class=\"n\">cb2Executed</span>\n<span class=\"mi\">17</span><span class=\"o\">:</span>   <span class=\"n\">Actual</span><span class=\"o\">:</span> <span class=\"kc\">false</span>\n<span class=\"mi\">17</span><span class=\"o\">:</span> <span class=\"n\">Expected</span><span class=\"o\">:</span> <span class=\"kc\">true</span>\n<span class=\"mi\">17</span><span class=\"o\">:</span> <span class=\"o\">[</span>  <span class=\"n\">FAILED</span>  <span class=\"o\">]</span> <span class=\"n\">twoProcPubSub</span><span class=\"o\">.</span><span class=\"na\">PubSubTwoProcsTwoNodesSubscriber</span> <span class=\"o\">(</span><span class=\"mi\">1615</span> <span class=\"n\">ms</span><span class=\"o\">)</span>\n<span class=\"mi\">17</span><span class=\"o\">:</span> <span class=\"o\">[----------]</span> <span class=\"mi\">1</span> <span class=\"n\">test</span> <span class=\"n\">from</span> <span class=\"n\">twoProcPubSub</span> <span class=\"o\">(</span><span class=\"mi\">1615</span> <span class=\"n\">ms</span> <span class=\"n\">total</span><span class=\"o\">)</span>\n<span class=\"mi\">17</span><span class=\"o\">:</span> \n<span class=\"mi\">17</span><span class=\"o\">:</span> <span class=\"o\">[----------]</span> <span class=\"n\">Global</span> <span class=\"n\">test</span> <span class=\"n\">environment</span> <span class=\"n\">tear</span><span class=\"o\">-</span><span class=\"n\">down</span>\n<span class=\"mi\">17</span><span class=\"o\">:</span> <span class=\"o\">[==========]</span> <span class=\"mi\">1</span> <span class=\"n\">test</span> <span class=\"n\">from</span> <span class=\"mi\">1</span> <span class=\"n\">test</span> <span class=\"k\">case</span> <span class=\"n\">ran</span><span class=\"o\">.</span> <span class=\"o\">(</span><span class=\"mi\">1616</span> <span class=\"n\">ms</span> <span class=\"n\">total</span><span class=\"o\">)</span>\n<span class=\"mi\">17</span><span class=\"o\">:</span> <span class=\"o\">[</span>  <span class=\"n\">PASSED</span>  <span class=\"o\">]</span> <span class=\"mi\">0</span> <span class=\"n\">tests</span><span class=\"o\">.</span>\n<span class=\"mi\">17</span><span class=\"o\">:</span> <span class=\"o\">[</span>  <span class=\"n\">FAILED</span>  <span class=\"o\">]</span> <span class=\"mi\">1</span> <span class=\"n\">test</span><span class=\"o\">,</span> <span class=\"n\">listed</span> <span class=\"n\">below</span><span class=\"o\">:</span>\n<span class=\"mi\">17</span><span class=\"o\">:</span> <span class=\"o\">[</span>  <span class=\"n\">FAILED</span>  <span class=\"o\">]</span> <span class=\"n\">twoProcPubSub</span><span class=\"o\">.</span><span class=\"na\">PubSubTwoProcsTwoNodesSubscriber</span>\n<span class=\"mi\">17</span><span class=\"o\">:</span> \n<span class=\"mi\">17</span><span class=\"o\">:</span>  <span class=\"mi\">1</span> <span class=\"n\">FAILED</span> <span class=\"n\">TEST</span>\n<span class=\"mi\">17</span><span class=\"o\">:</span> <span class=\"o\">[</span>       <span class=\"n\">OK</span> <span class=\"o\">]</span> <span class=\"n\">twoProcPubSub</span><span class=\"o\">.</span><span class=\"na\">PubSubTwoProcsTwoNodes</span> <span class=\"o\">(</span><span class=\"mi\">2213</span> <span class=\"n\">ms</span><span class=\"o\">)</span>\n<span class=\"mi\">17</span><span class=\"o\">:</span> <span class=\"o\">[----------]</span> <span class=\"mi\">1</span> <span class=\"n\">test</span> <span class=\"n\">from</span> <span class=\"n\">twoProcPubSub</span> <span class=\"o\">(</span><span class=\"mi\">2213</span> <span class=\"n\">ms</span> <span class=\"n\">total</span><span class=\"o\">)</span>\n<span class=\"mi\">17</span><span class=\"o\">:</span> \n<span class=\"mi\">17</span><span class=\"o\">:</span> <span class=\"o\">[----------]</span> <span class=\"n\">Global</span> <span class=\"n\">test</span> <span class=\"n\">environment</span> <span class=\"n\">tear</span><span class=\"o\">-</span><span class=\"n\">down</span>\n<span class=\"mi\">17</span><span class=\"o\">:</span> <span class=\"o\">[==========]</span> <span class=\"mi\">1</span> <span class=\"n\">test</span> <span class=\"n\">from</span> <span class=\"mi\">1</span> <span class=\"n\">test</span> <span class=\"k\">case</span> <span class=\"n\">ran</span><span class=\"o\">.</span> <span class=\"o\">(</span><span class=\"mi\">2213</span> <span class=\"n\">ms</span> <span class=\"n\">total</span><span class=\"o\">)</span>\n<span class=\"mi\">17</span><span class=\"o\">:</span> <span class=\"o\">[</span>  <span class=\"n\">PASSED</span>  <span class=\"o\">]</span> <span class=\"mi\">1</span> <span class=\"n\">test</span><span class=\"o\">.</span>\n<span class=\"mi\">17</span><span class=\"o\">/</span><span class=\"mi\">26</span> <span class=\"n\">Test</span> <span class=\"err\">#</span><span class=\"mi\">17</span><span class=\"o\">:</span> <span class=\"n\">INTEGRATION_twoProcessesPubSub</span> <span class=\"o\">................</span>   <span class=\"n\">Passed</span>    <span class=\"mf\">3.11</span> <span class=\"n\">sec</span>\n</pre></div>\n\n\n<p><a href=\"http://build.osrfoundation.org/view/ignition_transport/job/ignition_transport-any-devel-homebrew-amd64/17/console\" rel=\"nofollow\" class=\"ap-connect-link\">http://build.osrfoundation.org/view/ignition_transport/job/ignition_transport-any-devel-homebrew-amd64/17/console</a></p>", "type": "rendered"}, "created_on": "2014-10-24T21:14:34.032792+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2014-10-24T21:15:10.802699+00:00", "type": "pullrequest_comment", "id": 3601004}