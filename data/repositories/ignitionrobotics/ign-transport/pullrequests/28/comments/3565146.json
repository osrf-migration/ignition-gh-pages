{"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/28/comments/3565146.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/28/_/diff#comment-3565146"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 28, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/28.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/28"}}, "title": "Windows: compile tests and examples (take II)"}, "content": {"raw": "I just made a few minor comments. I think it's out of the scope of this pull request but we should think a better way of running custom tests. There are several cases to test that involve the creation of a variety of publishers/subscribers and we need a generic way to spawn publishers and subscribers that scales better. There are tests that publish several messages, unsubscribe, etc. It would be nice to have a \"scriptable\" way of designing a test scenario. Something like:\n\n* I need a publisher on topic `/foo` with scope `x` that publishes one message, after 100ms. publishes another one, after 200ms. another one, and then, unadvertise the topic and terminate. Then, you can run your test that verifies a particular feature. Maybe we could specify the 'test environment' that we want in a text/yaml file. How about something like this?\n\n\n```\n#!c++\nTEST(myTest)\n{\n  // Run auxiliary nodes that advertise, publish, subscribe.\n  prepareEnvironment(myCustomScenario1.yaml);\n\n  // Verify a particular feature given the current scenario.\n  ...\n}\n```", "markup": "markdown", "html": "<p>I just made a few minor comments. I think it's out of the scope of this pull request but we should think a better way of running custom tests. There are several cases to test that involve the creation of a variety of publishers/subscribers and we need a generic way to spawn publishers and subscribers that scales better. There are tests that publish several messages, unsubscribe, etc. It would be nice to have a \"scriptable\" way of designing a test scenario. Something like:</p>\n<ul>\n<li>I need a publisher on topic <code>/foo</code> with scope <code>x</code> that publishes one message, after 100ms. publishes another one, after 200ms. another one, and then, unadvertise the topic and terminate. Then, you can run your test that verifies a particular feature. Maybe we could specify the 'test environment' that we want in a text/yaml file. How about something like this?</li>\n</ul>\n<div class=\"codehilite language-c++\"><pre><span></span><span class=\"n\">TEST</span><span class=\"p\">(</span><span class=\"n\">myTest</span><span class=\"p\">)</span>\n<span class=\"p\">{</span>\n  <span class=\"c1\">// Run auxiliary nodes that advertise, publish, subscribe.</span>\n  <span class=\"n\">prepareEnvironment</span><span class=\"p\">(</span><span class=\"n\">myCustomScenario1</span><span class=\"p\">.</span><span class=\"n\">yaml</span><span class=\"p\">);</span>\n\n  <span class=\"c1\">// Verify a particular feature given the current scenario.</span>\n  <span class=\"p\">...</span>\n<span class=\"p\">}</span>\n</pre></div>", "type": "rendered"}, "created_on": "2014-10-22T19:21:33.211045+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "updated_on": "2014-10-22T20:28:17.213167+00:00", "type": "pullrequest_comment", "id": 3565146}