{"rendered": {"description": {"raw": "The log recorder currently writes to file from an ign-transport callback function. This means that nodes in the same process as the log recorder are blocked from receiving messages from other nodes. When there is heavy disk usage, such as recording a rosbag, the effect of this is noticeable as pointed out by issue https://bitbucket.org/osrf/subt/issues/307.This PR adds a data queue in the recorder and uses a background thread for writing to file.", "markup": "markdown", "html": "<p>The log recorder currently writes to file from an ign-transport callback function. This means that nodes in the same process as the log recorder are blocked from receiving messages from other nodes. When there is heavy disk usage, such as recording a rosbag, the effect of this is noticeable as pointed out by issue <a href=\"https://bitbucket.org/osrf/subt/issues/307.This\" rel=\"nofollow\" class=\"ap-connect-link\">https://bitbucket.org/osrf/subt/issues/307.This</a> PR adds a data queue in the recorder and uses a background thread for writing to file.</p>", "type": "rendered"}, "title": {"raw": "Write to disk from a background thread in log recorder", "markup": "markdown", "html": "<p>Write to disk from a background thread in log recorder</p>", "type": "rendered"}}, "type": "pullrequest", "description": "The log recorder currently writes to file from an ign-transport callback function. This means that nodes in the same process as the log recorder are blocked from receiving messages from other nodes. When there is heavy disk usage, such as recording a rosbag, the effect of this is noticeable as pointed out by issue https://bitbucket.org/osrf/subt/issues/307.This PR adds a data queue in the recorder and uses a background thread for writing to file.", "links": {"decline": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-transport/pullrequests/428/decline"}, "diffstat": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-transport/diffstat/ignitionrobotics/ign-transport:05c00c8fe3d4%0D2a2f6f3c0c78?from_pullrequest_id=428"}, "commits": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/428/commits.json"}, "self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/428.json"}, "comments": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/428/comments_page=1.json"}, "merge": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-transport/pullrequests/428/merge"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/428"}, "activity": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/428/activity.json"}, "diff": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-transport/diff/ignitionrobotics/ign-transport:05c00c8fe3d4%0D2a2f6f3c0c78?from_pullrequest_id=428"}, "approve": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-transport/pullrequests/428/approve"}, "statuses": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/428/statuses_page=1.json"}}, "title": "Write to disk from a background thread in log recorder", "close_source_branch": true, "reviewers": [{"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, {"display_name": "Michael Carroll", "uuid": "{17dbbc15-cbc0-42f0-a985-cde9061c78a0}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B17dbbc15-cbc0-42f0-a985-cde9061c78a0%7D"}, "html": {"href": "https://bitbucket.org/%7B17dbbc15-cbc0-42f0-a985-cde9061c78a0%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:65740f22-cc56-4418-9608-7e17d0ed47b7/2aa259f5-4de1-4f68-9156-eded72041d84/128"}}, "nickname": "Michael Carroll", "type": "user", "account_id": "557058:65740f22-cc56-4418-9608-7e17d0ed47b7"}], "id": 428, "destination": {"commit": {"hash": "2a2f6f3c0c78", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/commit/2a2f6f3c0c78.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/commits/2a2f6f3c0c78"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport"}, "avatar": {"href": "data/bytebucket.org/ravatar/{4249390a-7f55-404b-990d-817ba94cc7ac}ts=1533306"}}, "type": "repository", "name": "ign-transport", "full_name": "ignitionrobotics/ign-transport", "uuid": "{4249390a-7f55-404b-990d-817ba94cc7ac}"}, "branch": {"name": "ign-transport7"}}, "created_on": "2020-01-03T23:34:32.008534+00:00", "summary": {"raw": "The log recorder currently writes to file from an ign-transport callback function. This means that nodes in the same process as the log recorder are blocked from receiving messages from other nodes. When there is heavy disk usage, such as recording a rosbag, the effect of this is noticeable as pointed out by issue https://bitbucket.org/osrf/subt/issues/307.This PR adds a data queue in the recorder and uses a background thread for writing to file.", "markup": "markdown", "html": "<p>The log recorder currently writes to file from an ign-transport callback function. This means that nodes in the same process as the log recorder are blocked from receiving messages from other nodes. When there is heavy disk usage, such as recording a rosbag, the effect of this is noticeable as pointed out by issue <a href=\"https://bitbucket.org/osrf/subt/issues/307.This\" rel=\"nofollow\" class=\"ap-connect-link\">https://bitbucket.org/osrf/subt/issues/307.This</a> PR adds a data queue in the recorder and uses a background thread for writing to file.</p>", "type": "rendered"}, "source": {"commit": {"hash": "7f0157fc50fd", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/commit/7f0157fc50fd.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/commits/7f0157fc50fd"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport"}, "avatar": {"href": "data/bytebucket.org/ravatar/{4249390a-7f55-404b-990d-817ba94cc7ac}ts=1533306"}}, "type": "repository", "name": "ign-transport", "full_name": "ignitionrobotics/ign-transport", "uuid": "{4249390a-7f55-404b-990d-817ba94cc7ac}"}, "branch": {"name": "async_recorder"}}, "comment_count": 30, "state": "MERGED", "task_count": 0, "participants": [{"role": "REVIEWER", "participated_on": "2020-01-10T04:28:59.428831+00:00", "type": "participant", "approved": true, "user": {"display_name": "Michael Carroll", "uuid": "{17dbbc15-cbc0-42f0-a985-cde9061c78a0}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B17dbbc15-cbc0-42f0-a985-cde9061c78a0%7D"}, "html": {"href": "https://bitbucket.org/%7B17dbbc15-cbc0-42f0-a985-cde9061c78a0%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:65740f22-cc56-4418-9608-7e17d0ed47b7/2aa259f5-4de1-4f68-9156-eded72041d84/128"}}, "nickname": "Michael Carroll", "type": "user", "account_id": "557058:65740f22-cc56-4418-9608-7e17d0ed47b7"}}, {"role": "PARTICIPANT", "participated_on": "2020-01-10T18:15:09.198325+00:00", "type": "participant", "approved": false, "user": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}}, {"role": "REVIEWER", "participated_on": "2020-01-09T21:24:17.314197+00:00", "type": "participant", "approved": true, "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}}, {"role": "PARTICIPANT", "participated_on": "2020-01-09T22:09:25.440798+00:00", "type": "participant", "approved": false, "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}}, {"role": "PARTICIPANT", "participated_on": "2020-01-10T22:50:58.880470+00:00", "type": "participant", "approved": false, "user": {"display_name": "Arthur Schang", "uuid": "{1403972a-9b64-442b-a69c-d7e9557e1d87}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B1403972a-9b64-442b-a69c-d7e9557e1d87%7D"}, "html": {"href": "https://bitbucket.org/%7B1403972a-9b64-442b-a69c-d7e9557e1d87%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/initials/AS-0.png"}}, "nickname": "Arthur Schang", "type": "user", "account_id": "557058:14b7fd50-d65a-47a8-825c-fa89681d07bd"}}], "reason": "", "updated_on": "2020-01-11T00:29:54.604767+00:00", "author": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}, "merge_commit": {"hash": "05c00c8fe3d4", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/commit/05c00c8fe3d4.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/commits/05c00c8fe3d4"}}}, "closed_by": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}}