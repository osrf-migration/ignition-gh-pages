{"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/229/comments/52920531.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-transport/diff/ignitionrobotics/ign-transport:e3810d45cd91..f02881cc0ca3?path=src%2FNodeShared.cc"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/229/_/diff#comment-52920531"}}, "parent": {"id": 52920146, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/229/comments/52920146.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/229/_/diff#comment-52920146"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 229, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/229.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/229"}}, "title": "Use zero copy when publishing messages"}, "content": {"raw": "I'm seeing a memory leak.\n\nI agree that `msg2` is fine because we provide a deallocator. However, the other messages seem ill defined. ZermoMQ says it takes ownership of the buffers, but doesn't copy them (which is good). However, what does it do with the buffers when publish completes? I assume it does nothing if we don't specify a deallocator, but that is an open question. ", "markup": "markdown", "html": "<p>I'm seeing a memory leak.</p>\n<p>I agree that <code>msg2</code> is fine because we provide a deallocator. However, the other messages seem ill defined. ZermoMQ says it takes ownership of the buffers, but doesn't copy them (which is good). However, what does it do with the buffers when publish completes? I assume it does nothing if we don't specify a deallocator, but that is an open question. </p>", "type": "rendered"}, "created_on": "2018-01-03T18:40:38.174011+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "inline": {"to": null, "from": null, "outdated": false, "path": "src/NodeShared.cc"}, "updated_on": "2018-01-03T18:40:38.176762+00:00", "type": "pullrequest_comment", "id": 52920531}