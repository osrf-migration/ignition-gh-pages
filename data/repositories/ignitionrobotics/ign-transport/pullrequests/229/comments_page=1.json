{"pagelen": 100, "values": [{"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/229/comments/47596609.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/229/_/diff#comment-47596609"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 229, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/229.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/229"}}, "title": "Use zero copy when publishing messages"}, "content": {"raw": "There's a few clang compiler warnings:\n\n* https://build.osrfoundation.org/job/ignition_transport-ci-pr_any-homebrew-amd64/246/warnings9Result/", "markup": "markdown", "html": "<p>There's a few clang compiler warnings:</p>\n<ul>\n<li><a href=\"https://build.osrfoundation.org/job/ignition_transport-ci-pr_any-homebrew-amd64/246/warnings9Result/\" rel=\"nofollow\" class=\"ap-connect-link\">https://build.osrfoundation.org/job/ignition_transport-ci-pr_any-homebrew-amd64/246/warnings9Result/</a></li>\n</ul>", "type": "rendered"}, "created_on": "2017-10-19T21:11:16.880721+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2017-10-19T21:11:16.882955+00:00", "type": "pullrequest_comment", "id": 47596609}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/229/comments/47599646.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/229/_/diff#comment-47599646"}}, "parent": {"id": 47596609, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/229/comments/47596609.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/229/_/diff#comment-47596609"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 229, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/229.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/229"}}, "title": "Use zero copy when publishing messages"}, "content": {"raw": "They should be fixed in 6afd193.", "markup": "markdown", "html": "<p>They should be fixed in <a href=\"#!/ignitionrobotics/ign-transport/commits/6afd193\" rel=\"nofollow\" class=\"ap-connect-link\">6afd193</a>.</p>", "type": "rendered"}, "created_on": "2017-10-19T22:04:08.794658+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "updated_on": "2017-10-19T22:04:08.798646+00:00", "type": "pullrequest_comment", "id": 47599646}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/229/comments/47825769.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-transport/diff/ignitionrobotics/ign-transport:9a967033f0e0..74ac13046c41?path=include%2Fignition%2Ftransport%2FNodeShared.hh"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/229/_/diff#comment-47825769"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 229, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/229.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/229"}}, "title": "Use zero copy when publishing messages"}, "content": {"raw": "Can you add documentation that indicates what `_ffn` does? I assume it's the function that is used to deallocate `_data`.", "markup": "markdown", "html": "<p>Can you add documentation that indicates what <code>_ffn</code> does? I assume it's the function that is used to deallocate <code>_data</code>.</p>", "type": "rendered"}, "created_on": "2017-10-24T03:57:55.223427+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "inline": {"to": 72, "from": null, "path": "include/ignition/transport/NodeShared.hh"}, "updated_on": "2017-10-24T03:57:55.226517+00:00", "type": "pullrequest_comment", "id": 47825769}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/229/comments/47899233.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-transport/diff/ignitionrobotics/ign-transport:90973fa5f69c..f02881cc0ca3?path=include%2Fignition%2Ftransport%2FNodeShared.hh"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/229/_/diff#comment-47899233"}}, "parent": {"id": 47825769, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/229/comments/47825769.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/229/_/diff#comment-47825769"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 229, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/229.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/229"}}, "title": "Use zero copy when publishing messages"}, "content": {"raw": "More documentation added in ef34fb1.", "markup": "markdown", "html": "<p>More documentation added in <a href=\"#!/ignitionrobotics/ign-transport/commits/ef34fb1\" rel=\"nofollow\" class=\"ap-connect-link\">ef34fb1</a>.</p>", "type": "rendered"}, "created_on": "2017-10-24T16:06:30.285997+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "inline": {"to": null, "from": null, "path": "include/ignition/transport/NodeShared.hh"}, "updated_on": "2017-10-24T16:06:30.290189+00:00", "type": "pullrequest_comment", "id": 47899233}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/229/comments/47825904.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-transport/diff/ignitionrobotics/ign-transport:9a967033f0e0..74ac13046c41?path=include%2Fignition%2Ftransport%2FTransportTypes.hh"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/229/_/diff#comment-47825904"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 229, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/229.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/229"}}, "title": "Use zero copy when publishing messages"}, "content": {"raw": "Is it beneficial to define this as a `std::function`? ", "markup": "markdown", "html": "<p>Is it beneficial to define this as a <code>std::function</code>? </p>", "type": "rendered"}, "created_on": "2017-10-24T03:59:28.433109+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "inline": {"to": 133, "from": null, "path": "include/ignition/transport/TransportTypes.hh"}, "updated_on": "2017-10-24T03:59:28.435783+00:00", "type": "pullrequest_comment", "id": 47825904}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/229/comments/47899364.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-transport/diff/ignitionrobotics/ign-transport:90973fa5f69c..f02881cc0ca3?path=include%2Fignition%2Ftransport%2FTransportTypes.hh"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/229/_/diff#comment-47899364"}}, "parent": {"id": 47825904, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/229/comments/47825904.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/229/_/diff#comment-47825904"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 229, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/229.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/229"}}, "title": "Use zero copy when publishing messages"}, "content": {"raw": "I think it is but the problem is that we need to pass an \"old-school\" function pointer when creating the `zmq::message_t` and as far as I know is not possible to convert from `std::function` to a function pointer.", "markup": "markdown", "html": "<p>I think it is but the problem is that we need to pass an \"old-school\" function pointer when creating the <code>zmq::message_t</code> and as far as I know is not possible to convert from <code>std::function</code> to a function pointer.</p>", "type": "rendered"}, "created_on": "2017-10-24T16:07:51.094457+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "inline": {"to": null, "from": null, "path": "include/ignition/transport/TransportTypes.hh"}, "updated_on": "2017-10-24T16:07:51.097014+00:00", "type": "pullrequest_comment", "id": 47899364}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/229/comments/47928849.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/229/_/diff#comment-47928849"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 229, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/229.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/229"}}, "title": "Use zero copy when publishing messages"}, "content": {"raw": "Update changelog.", "markup": "markdown", "html": "<p>Update changelog.</p>", "type": "rendered"}, "created_on": "2017-10-24T22:47:29.171150+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "updated_on": "2017-10-24T22:47:29.173467+00:00", "type": "pullrequest_comment", "id": 47928849}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/229/comments/47929282.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/229/_/diff#comment-47929282"}}, "parent": {"id": 47928849, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/229/comments/47928849.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/229/_/diff#comment-47928849"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 229, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/229.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/229"}}, "title": "Use zero copy when publishing messages"}, "content": {"raw": "Updated in a41abb8", "markup": "markdown", "html": "<p>Updated in <a href=\"#!/ignitionrobotics/ign-transport/commits/a41abb8\" rel=\"nofollow\" class=\"ap-connect-link\">a41abb8</a></p>", "type": "rendered"}, "created_on": "2017-10-24T22:56:10.254994+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "updated_on": "2017-10-24T22:56:10.266486+00:00", "type": "pullrequest_comment", "id": 47929282}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/229/comments/51859674.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-transport/diff/ignitionrobotics/ign-transport:90973fa5f69c..f02881cc0ca3?path=src%2FNodeShared.cc"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/229/_/diff#comment-51859674"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 229, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/229.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/229"}}, "title": "Use zero copy when publishing messages"}, "content": {"raw": "nit: `_dataSize`", "markup": "markdown", "html": "<p>nit: <code>_dataSize</code></p>", "type": "rendered"}, "created_on": "2017-12-13T17:05:55.680595+00:00", "user": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}, "inline": {"to": 223, "from": null, "path": "src/NodeShared.cc"}, "updated_on": "2017-12-13T17:05:55.683631+00:00", "type": "pullrequest_comment", "id": 51859674}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/229/comments/51860267.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-transport/diff/ignitionrobotics/ign-transport:e3810d45cd91..f02881cc0ca3?path=src%2FNodeShared.cc"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/229/_/diff#comment-51860267"}}, "parent": {"id": 51859674, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/229/comments/51859674.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/229/_/diff#comment-51859674"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 229, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/229.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/229"}}, "title": "Use zero copy when publishing messages"}, "content": {"raw": "e3810d4", "markup": "markdown", "html": "<p><a href=\"#!/ignitionrobotics/ign-transport/commits/e3810d4\" rel=\"nofollow\" class=\"ap-connect-link\">e3810d4</a></p>", "type": "rendered"}, "created_on": "2017-12-13T17:11:49.030817+00:00", "user": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}, "inline": {"to": null, "from": null, "path": "src/NodeShared.cc"}, "updated_on": "2017-12-13T17:11:49.034343+00:00", "type": "pullrequest_comment", "id": 51860267}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/229/comments/51859884.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-transport/diff/ignitionrobotics/ign-transport:90973fa5f69c..f02881cc0ca3?path=include%2Fignition%2Ftransport%2FNodeShared.hh"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/229/_/diff#comment-51859884"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 229, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/229.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/229"}}, "title": "Use zero copy when publishing messages"}, "content": {"raw": "nit: `_dataSize`", "markup": "markdown", "html": "<p>nit: <code>_dataSize</code></p>", "type": "rendered"}, "created_on": "2017-12-13T17:07:58.975447+00:00", "user": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}, "inline": {"to": 80, "from": null, "path": "include/ignition/transport/NodeShared.hh"}, "updated_on": "2017-12-13T17:07:58.978562+00:00", "type": "pullrequest_comment", "id": 51859884}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/229/comments/51860253.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-transport/diff/ignitionrobotics/ign-transport:e3810d45cd91..f02881cc0ca3?path=include%2Fignition%2Ftransport%2FNodeShared.hh"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/229/_/diff#comment-51860253"}}, "parent": {"id": 51859884, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/229/comments/51859884.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/229/_/diff#comment-51859884"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 229, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/229.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/229"}}, "title": "Use zero copy when publishing messages"}, "content": {"raw": "9af6943", "markup": "markdown", "html": "<p><a href=\"#!/ignitionrobotics/ign-transport/commits/9af6943\" rel=\"nofollow\" class=\"ap-connect-link\">9af6943</a></p>", "type": "rendered"}, "created_on": "2017-12-13T17:11:41.369742+00:00", "user": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}, "inline": {"to": null, "from": null, "path": "include/ignition/transport/NodeShared.hh"}, "updated_on": "2017-12-13T17:11:41.372256+00:00", "type": "pullrequest_comment", "id": 51860253}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/229/comments/52917405.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-transport/diff/ignitionrobotics/ign-transport:e3810d45cd91..f02881cc0ca3?path=src%2FNodeShared.cc"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/229/_/diff#comment-52917405"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 229, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/229.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/229"}}, "title": "Use zero copy when publishing messages"}, "content": {"raw": "@caguero I'm double checking this, and I think there might be something dangerous about this type of message initialization.\n\nThe [ zeromq documentation](http://api.zeromq.org/2-1:zmq-msg-init-data) says that \" \u00d8MQ shall take ownership of the supplied buffer\". That would lead me to believe that a memcopy of `_topic`, `myAddress`, `_data`, and `_msgType` should be performed. Is that right?", "markup": "markdown", "html": "<p>@caguero I'm double checking this, and I think there might be something dangerous about this type of message initialization.</p>\n<p>The <a data-is-external-link=\"true\" href=\"http://api.zeromq.org/2-1:zmq-msg-init-data\" rel=\"nofollow\"> zeromq documentation</a> says that \" \u00d8MQ shall take ownership of the supplied buffer\". That would lead me to believe that a memcopy of <code>_topic</code>, <code>myAddress</code>, <code>_data</code>, and <code>_msgType</code> should be performed. Is that right?</p>", "type": "rendered"}, "created_on": "2018-01-03T17:56:02.978267+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "inline": {"to": 229, "from": null, "path": "src/NodeShared.cc"}, "updated_on": "2018-01-03T17:56:02.992080+00:00", "type": "pullrequest_comment", "id": 52917405}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/229/comments/52920146.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-transport/diff/ignitionrobotics/ign-transport:e3810d45cd91..f02881cc0ca3?path=src%2FNodeShared.cc"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/229/_/diff#comment-52920146"}}, "parent": {"id": 52917405, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/229/comments/52917405.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/229/_/diff#comment-52917405"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 229, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/229.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/229"}}, "title": "Use zero copy when publishing messages"}, "content": {"raw": "We only do zero copy with `_data`, we can ignore `_topic`, `myAddress` and `_msgType` for now. I think the behavior should be fine:\n\n1. In [Publisher::Publish()](#!/ignitionrobotics/ign-transport/src/7b396a00d7fb06e1eac97416f325b85fbfa9441b/src/Node.cc?at=ign-transport4&fileviewer=file-view-default#Node.cc-266), we are in the situation where we need to serialize the data.\n1. We allocate a new buffer, serialize the message on it, and pass it to `NodeShared::Publish()`.\n1. The `msg2` initialization avoids the copy and takes ownership of the buffer.\n1. When ZeroMQ is done with the message, it calls our deallocation function, which deallocates the buffer.\n\nAre you seeing something weird?", "markup": "markdown", "html": "<p>We only do zero copy with <code>_data</code>, we can ignore <code>_topic</code>, <code>myAddress</code> and <code>_msgType</code> for now. I think the behavior should be fine:</p>\n<ol>\n<li>In <a data-is-external-link=\"true\" href=\"#!/ignitionrobotics/ign-transport/src/7b396a00d7fb06e1eac97416f325b85fbfa9441b/src/Node.cc?at=ign-transport4&amp;fileviewer=file-view-default#Node.cc-266\" rel=\"nofollow\">Publisher::Publish()</a>, we are in the situation where we need to serialize the data.</li>\n<li>We allocate a new buffer, serialize the message on it, and pass it to <code>NodeShared::Publish()</code>.</li>\n<li>The <code>msg2</code> initialization avoids the copy and takes ownership of the buffer.</li>\n<li>When ZeroMQ is done with the message, it calls our deallocation function, which deallocates the buffer.</li>\n</ol>\n<p>Are you seeing something weird?</p>", "type": "rendered"}, "created_on": "2018-01-03T18:35:08.249196+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "inline": {"to": null, "from": null, "path": "src/NodeShared.cc"}, "updated_on": "2018-01-03T18:35:34.116135+00:00", "type": "pullrequest_comment", "id": 52920146}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/229/comments/52920531.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-transport/diff/ignitionrobotics/ign-transport:e3810d45cd91..f02881cc0ca3?path=src%2FNodeShared.cc"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/229/_/diff#comment-52920531"}}, "parent": {"id": 52920146, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/229/comments/52920146.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/229/_/diff#comment-52920146"}}, "depth": 2}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 229, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/229.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/229"}}, "title": "Use zero copy when publishing messages"}, "content": {"raw": "I'm seeing a memory leak.\n\nI agree that `msg2` is fine because we provide a deallocator. However, the other messages seem ill defined. ZermoMQ says it takes ownership of the buffers, but doesn't copy them (which is good). However, what does it do with the buffers when publish completes? I assume it does nothing if we don't specify a deallocator, but that is an open question. ", "markup": "markdown", "html": "<p>I'm seeing a memory leak.</p>\n<p>I agree that <code>msg2</code> is fine because we provide a deallocator. However, the other messages seem ill defined. ZermoMQ says it takes ownership of the buffers, but doesn't copy them (which is good). However, what does it do with the buffers when publish completes? I assume it does nothing if we don't specify a deallocator, but that is an open question. </p>", "type": "rendered"}, "created_on": "2018-01-03T18:40:38.174011+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "inline": {"to": null, "from": null, "path": "src/NodeShared.cc"}, "updated_on": "2018-01-03T18:40:38.176762+00:00", "type": "pullrequest_comment", "id": 52920531}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/229/comments/52920968.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-transport/diff/ignitionrobotics/ign-transport:e3810d45cd91..f02881cc0ca3?path=src%2FNodeShared.cc"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/229/_/diff#comment-52920968"}}, "parent": {"id": 52920531, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/229/comments/52920531.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/229/_/diff#comment-52920531"}}, "depth": 3}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 229, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/229.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/229"}}, "title": "Use zero copy when publishing messages"}, "content": {"raw": "There's a `memcpy` in the constructor that takes only two arguments. See [here](https://github.com/zeromq/cppzmq/blob/master/zmq.hpp#L239). My interpretation is that the `message_t` destructor notifies zmq to deallocate the internal member variable `msg` when possible.", "markup": "markdown", "html": "<p>There's a <code>memcpy</code> in the constructor that takes only two arguments. See <a data-is-external-link=\"true\" href=\"https://github.com/zeromq/cppzmq/blob/master/zmq.hpp#L239\" rel=\"nofollow\">here</a>. My interpretation is that the <code>message_t</code> destructor notifies zmq to deallocate the internal member variable <code>msg</code> when possible.</p>", "type": "rendered"}, "created_on": "2018-01-03T18:46:37.104188+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "inline": {"to": null, "from": null, "path": "src/NodeShared.cc"}, "updated_on": "2018-01-03T18:54:51.903722+00:00", "type": "pullrequest_comment", "id": 52920968}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/229/comments/52921902.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-transport/diff/ignitionrobotics/ign-transport:e3810d45cd91..f02881cc0ca3?path=src%2FNodeShared.cc"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/229/_/diff#comment-52921902"}}, "parent": {"id": 52920968, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/229/comments/52920968.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/229/_/diff#comment-52920968"}}, "depth": 4}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 229, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/229.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/229"}}, "title": "Use zero copy when publishing messages"}, "content": {"raw": "Interesting. Right now I'm not convinced that deallocation happens automatically if no deallocation function is specified.", "markup": "markdown", "html": "<p>Interesting. Right now I'm not convinced that deallocation happens automatically if no deallocation function is specified.</p>", "type": "rendered"}, "created_on": "2018-01-03T18:59:02.579590+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "inline": {"to": null, "from": null, "path": "src/NodeShared.cc"}, "updated_on": "2018-01-03T18:59:02.582340+00:00", "type": "pullrequest_comment", "id": 52921902}], "page": 1, "size": 17}