{"pagelen": 50, "values": [{"update": {"description": "If [ignition-tools](#!/ignitionrobotics/ign-tools) is installed, the test `tools/UNIT_IGN_TEST` is executed. This test verifies the transport command line utilities (e.g. `ign topic -l`).\r\n\r\n`ign` parses a set of yaml files to find the list of subcommands that are available. As an example, ignition transport makes available the subcommands `topic` and `service`. The yaml configuration file also contains the path to a ruby script that parses and executes the subcommand specified. Here's an example of the `transport1.yaml` that is installed in my machine with ignition transport:\r\n\r\n```\r\n#!c++\r\n\r\n--- # Subcommands available inside ignition-transport.\r\nformat: 1.0.0\r\nlibrary_name: ignition-transport\r\nlibrary_version: 1.1.0\r\nlibrary_path: /home/caguero/local/lib/ruby/ignition/cmdtransport1\r\ncommands:\r\n    - topic   : Print information about topics.\r\n    - service : Print information about services.\r\n```\r\n\r\nBefore this pull request, running `tools/UNIT_IGN_TEST` without doing `make install` was not working properly, as the value of `library_path` inside `transport1.rb` was pointing to the installed `cmdtransport1.rb` instead of pointing to the recently compiled version available only under the `build` directory. This pull request solves this problem.\r\n\r\nWe now create two versions of `transport1.yaml`, one for internal testing and the other for installation. The internal testing version has a `library_path` pointing to the `cmdtransport1.rb` version under `build`:\r\n\r\n\r\n```\r\n#!c++\r\n\r\n--- # Subcommands available inside ignition-transport.\r\nformat: 1.0.0\r\nlibrary_name: ignition-transport\r\nlibrary_version: 1.1.0\r\nlibrary_path: /data/ign-transport/build/src/cmd/cmdtransport1\r\ncommands:\r\n    - topic   : Print information about topics.\r\n    - service : Print information about services.\r\n---\r\n```\r\n\r\nIt also fixes a problem in Mac OS X running some test:\r\n\r\n\r\n```\r\n#!c++\r\n\r\nlibc++abi.dylib: terminating with uncaught exception of type std::__1::system_error: recursive_mutex lock failed: Invalid argument\r\n```\r\n\r\nI believe this was caused by the destruction of some NodeShared member variables before destructing the `Discovery` object. If Discovery triggers a NodeShared callback during the destruction phase, some member (mutex) might be already destroyed.\r\n\r\n* [Trusty](http://build.osrfoundation.org/view/main/view/ignition/job/ignition_transport-ci-pr_any-trusty-amd64/96/) :large_blue_circle:\r\n* [Homebrew](http://build.osrfoundation.org/view/main/view/ignition/job/ignition_transport-ci-pr_any-homebrew-amd64/90/) :large_blue_circle:\r\n* [Windows](http://build.osrfoundation.org/view/main/view/ignition/job/ignition_transport-ci-pr_any-windows7-amd64/183/) :large_blue_circle:", "title": "ign_TEST without make install", "destination": {"commit": {"hash": "226d4b7cb29a", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/commit/226d4b7cb29a.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/commits/226d4b7cb29a"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport"}, "avatar": {"href": "data/bytebucket.org/ravatar/{4249390a-7f55-404b-990d-817ba94cc7ac}ts=1533306"}}, "type": "repository", "name": "ign-transport", "full_name": "ignitionrobotics/ign-transport", "uuid": "{4249390a-7f55-404b-990d-817ba94cc7ac}"}, "branch": {"name": "ign-transport1"}}, "reason": "", "source": {"commit": {"hash": "0a6760255baa", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/commit/0a6760255baa.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/commits/0a6760255baa"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport"}, "avatar": {"href": "data/bytebucket.org/ravatar/{4249390a-7f55-404b-990d-817ba94cc7ac}ts=1533306"}}, "type": "repository", "name": "ign-transport", "full_name": "ignitionrobotics/ign-transport", "uuid": "{4249390a-7f55-404b-990d-817ba94cc7ac}"}, "branch": {"name": "fix_ign_test"}}, "state": "MERGED", "author": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "date": "2016-04-27T19:05:52.681172+00:00"}, "pull_request": {"type": "pullrequest", "id": 127, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/127.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/127"}}, "title": "ign_TEST without make install"}}, {"approval": {"date": "2016-04-27T18:59:59.927058+00:00", "pullrequest": {"type": "pullrequest", "id": 127, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/127.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/127"}}, "title": "ign_TEST without make install"}, "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}}, "pull_request": {"type": "pullrequest", "id": 127, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/127.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/127"}}, "title": "ign_TEST without make install"}}, {"approval": {"date": "2016-04-27T18:27:50.167118+00:00", "pullrequest": {"type": "pullrequest", "id": 127, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/127.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/127"}}, "title": "ign_TEST without make install"}, "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}}, "pull_request": {"type": "pullrequest", "id": 127, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/127.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/127"}}, "title": "ign_TEST without make install"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/127/comments/17851708.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/127/_/diff#comment-17851708"}}, "parent": {"id": 17743943, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/127/comments/17743943.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/127/_/diff#comment-17743943"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 127, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/127.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/127"}}, "title": "ign_TEST without make install"}, "content": {"raw": "We're [safe](http://build.osrfoundation.org/job/ignition_transport-abichecker-any_to_any-vivid-amd64/37/API_ABI_report/) now. ", "markup": "markdown", "html": "<p>We're <a data-is-external-link=\"true\" href=\"http://build.osrfoundation.org/job/ignition_transport-abichecker-any_to_any-vivid-amd64/37/API_ABI_report/\" rel=\"nofollow\">safe</a> now. </p>", "type": "rendered"}, "created_on": "2016-04-27T18:18:11.052395+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "inline": {}, "updated_on": "2016-04-27T18:18:11.055452+00:00", "type": "pullrequest_comment", "id": 17851708}, "pull_request": {"type": "pullrequest", "id": 127, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/127.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/127"}}, "title": "ign_TEST without make install"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/127/comments/17851183.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/127/_/diff#comment-17851183"}}, "parent": {"id": 17835737, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/127/comments/17835737.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/127/_/diff#comment-17835737"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 127, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/127.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/127"}}, "title": "ign_TEST without make install"}, "content": {"raw": "Thanks for the suggestions. Added in 0a67602. Other alternative is to implement a `Discovery::Stop()` and call it in the `NodeShared` destructor. ", "markup": "markdown", "html": "<p>Thanks for the suggestions. Added in <a href=\"#!/ignitionrobotics/ign-transport/commits/0a67602\" rel=\"nofollow\" class=\"ap-connect-link\">0a67602</a>. Other alternative is to implement a <code>Discovery::Stop()</code> and call it in the <code>NodeShared</code> destructor. </p>", "type": "rendered"}, "created_on": "2016-04-27T18:11:41.845903+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "inline": {}, "updated_on": "2016-04-27T18:11:41.848484+00:00", "type": "pullrequest_comment", "id": 17851183}, "pull_request": {"type": "pullrequest", "id": 127, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/127.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/127"}}, "title": "ign_TEST without make install"}}, {"update": {"description": "If [ignition-tools](#!/ignitionrobotics/ign-tools) is installed, the test `tools/UNIT_IGN_TEST` is executed. This test verifies the transport command line utilities (e.g. `ign topic -l`).\r\n\r\n`ign` parses a set of yaml files to find the list of subcommands that are available. As an example, ignition transport makes available the subcommands `topic` and `service`. The yaml configuration file also contains the path to a ruby script that parses and executes the subcommand specified. Here's an example of the `transport1.yaml` that is installed in my machine with ignition transport:\r\n\r\n```\r\n#!c++\r\n\r\n--- # Subcommands available inside ignition-transport.\r\nformat: 1.0.0\r\nlibrary_name: ignition-transport\r\nlibrary_version: 1.1.0\r\nlibrary_path: /home/caguero/local/lib/ruby/ignition/cmdtransport1\r\ncommands:\r\n    - topic   : Print information about topics.\r\n    - service : Print information about services.\r\n```\r\n\r\nBefore this pull request, running `tools/UNIT_IGN_TEST` without doing `make install` was not working properly, as the value of `library_path` inside `transport1.rb` was pointing to the installed `cmdtransport1.rb` instead of pointing to the recently compiled version available only under the `build` directory. This pull request solves this problem.\r\n\r\nWe now create two versions of `transport1.yaml`, one for internal testing and the other for installation. The internal testing version has a `library_path` pointing to the `cmdtransport1.rb` version under `build`:\r\n\r\n\r\n```\r\n#!c++\r\n\r\n--- # Subcommands available inside ignition-transport.\r\nformat: 1.0.0\r\nlibrary_name: ignition-transport\r\nlibrary_version: 1.1.0\r\nlibrary_path: /data/ign-transport/build/src/cmd/cmdtransport1\r\ncommands:\r\n    - topic   : Print information about topics.\r\n    - service : Print information about services.\r\n---\r\n```\r\n\r\nIt also fixes a problem in Mac OS X running some test:\r\n\r\n\r\n```\r\n#!c++\r\n\r\nlibc++abi.dylib: terminating with uncaught exception of type std::__1::system_error: recursive_mutex lock failed: Invalid argument\r\n```\r\n\r\nI believe this was caused by the destruction of some NodeShared member variables before destructing the `Discovery` object. If Discovery triggers a NodeShared callback during the destruction phase, some member (mutex) might be already destroyed.\r\n\r\n* [Trusty](http://build.osrfoundation.org/view/main/view/ignition/job/ignition_transport-ci-pr_any-trusty-amd64/96/) :large_blue_circle:\r\n* [Homebrew](http://build.osrfoundation.org/view/main/view/ignition/job/ignition_transport-ci-pr_any-homebrew-amd64/90/) :large_blue_circle:\r\n* [Windows](http://build.osrfoundation.org/view/main/view/ignition/job/ignition_transport-ci-pr_any-windows7-amd64/183/) :large_blue_circle:", "title": "ign_TEST without make install", "destination": {"commit": {"hash": "226d4b7cb29a", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/commit/226d4b7cb29a.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/commits/226d4b7cb29a"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport"}, "avatar": {"href": "data/bytebucket.org/ravatar/{4249390a-7f55-404b-990d-817ba94cc7ac}ts=1533306"}}, "type": "repository", "name": "ign-transport", "full_name": "ignitionrobotics/ign-transport", "uuid": "{4249390a-7f55-404b-990d-817ba94cc7ac}"}, "branch": {"name": "ign-transport1"}}, "reason": "", "source": {"commit": {"hash": "0a6760255baa", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/commit/0a6760255baa.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/commits/0a6760255baa"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport"}, "avatar": {"href": "data/bytebucket.org/ravatar/{4249390a-7f55-404b-990d-817ba94cc7ac}ts=1533306"}}, "type": "repository", "name": "ign-transport", "full_name": "ignitionrobotics/ign-transport", "uuid": "{4249390a-7f55-404b-990d-817ba94cc7ac}"}, "branch": {"name": "fix_ign_test"}}, "state": "OPEN", "author": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "date": "2016-04-27T18:07:58.783286+00:00"}, "pull_request": {"type": "pullrequest", "id": 127, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/127.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/127"}}, "title": "ign_TEST without make install"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/127/comments/17835737.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/127/_/diff#comment-17835737"}}, "parent": {"id": 17744128, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/127/comments/17744128.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/127/_/diff#comment-17744128"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 127, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/127.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/127"}}, "title": "ign_TEST without make install"}, "content": {"raw": "This solution sounds safer than relying on the order of member variable definitions. Maybe we should keep the explicit reset in NodeShared's destructor.", "markup": "markdown", "html": "<p>This solution sounds safer than relying on the order of member variable definitions. Maybe we should keep the explicit reset in NodeShared's destructor.</p>", "type": "rendered"}, "created_on": "2016-04-27T14:11:54.869892+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "inline": {}, "updated_on": "2016-04-27T14:11:54.878532+00:00", "type": "pullrequest_comment", "id": 17835737}, "pull_request": {"type": "pullrequest", "id": 127, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/127.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/127"}}, "title": "ign_TEST without make install"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/127/comments/17744128.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/127/_/diff#comment-17744128"}}, "parent": {"id": 17734511, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/127/comments/17734511.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/127/_/diff#comment-17734511"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 127, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/127.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/127"}}, "title": "ign_TEST without make install"}, "content": {"raw": "maybe save this change for default but do the following for `ign-transport1`:\n\n~~~\ndiff -r 1351fd6aff81 src/NodeShared.cc\n--- a/src/NodeShared.cc\tMon Apr 25 23:21:53 2016 -0700\n+++ b/src/NodeShared.cc\tMon Apr 25 23:45:18 2016 -0700\n@@ -209,6 +209,10 @@\n   // destructor to hang (probably waiting for ZMQ sockets to terminate).\n   // ToDo: Fix it.\n #endif\n+\n+  // Explicitly reset discovery to prevent callbacks\n+  // This will be fixed on default by moving the class member definition\n+  this->discovery.reset();\n }\n \n //////////////////////////////////////////////////\n~~~", "markup": "markdown", "html": "<p>maybe save this change for default but do the following for <code>ign-transport1</code>:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"gh\">diff -r 1351fd6aff81 src/NodeShared.cc</span>\n<span class=\"gd\">--- a/src/NodeShared.cc Mon Apr 25 23:21:53 2016 -0700</span>\n<span class=\"gi\">+++ b/src/NodeShared.cc Mon Apr 25 23:45:18 2016 -0700</span>\n<span class=\"gu\">@@ -209,6 +209,10 @@</span>\n   // destructor to hang (probably waiting for ZMQ sockets to terminate).\n   // ToDo: Fix it.\n #endif\n<span class=\"gi\">+</span>\n<span class=\"gi\">+  // Explicitly reset discovery to prevent callbacks</span>\n<span class=\"gi\">+  // This will be fixed on default by moving the class member definition</span>\n<span class=\"gi\">+  this-&gt;discovery.reset();</span>\n }\n\n //////////////////////////////////////////////////\n</pre></div>", "type": "rendered"}, "created_on": "2016-04-26T06:46:21.055656+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2016-04-26T06:46:21.061453+00:00", "type": "pullrequest_comment", "id": 17744128}, "pull_request": {"type": "pullrequest", "id": 127, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/127.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/127"}}, "title": "ign_TEST without make install"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/127/comments/17743943.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/127/_/diff#comment-17743943"}}, "parent": {"id": 17734511, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/127/comments/17734511.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/127/_/diff#comment-17734511"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 127, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/127.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/127"}}, "title": "ign_TEST without make install"}, "content": {"raw": "confirmed binary incompatibility:\n\n* http://build.osrfoundation.org/job/ignition_transport-abichecker-any_to_any-vivid-amd64/36/API_ABI_report/", "markup": "markdown", "html": "<p>confirmed binary incompatibility:</p>\n<ul>\n<li><a href=\"http://build.osrfoundation.org/job/ignition_transport-abichecker-any_to_any-vivid-amd64/36/API_ABI_report/\" rel=\"nofollow\" class=\"ap-connect-link\">http://build.osrfoundation.org/job/ignition_transport-abichecker-any_to_any-vivid-amd64/36/API_ABI_report/</a></li>\n</ul>", "type": "rendered"}, "created_on": "2016-04-26T06:42:09.177871+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2016-04-26T06:42:09.180989+00:00", "type": "pullrequest_comment", "id": 17743943}, "pull_request": {"type": "pullrequest", "id": 127, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/127.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/127"}}, "title": "ign_TEST without make install"}}, {"update": {"description": "If [ignition-tools](#!/ignitionrobotics/ign-tools) is installed, the test `tools/UNIT_IGN_TEST` is executed. This test verifies the transport command line utilities (e.g. `ign topic -l`).\r\n\r\n`ign` parses a set of yaml files to find the list of subcommands that are available. As an example, ignition transport makes available the subcommands `topic` and `service`. The yaml configuration file also contains the path to a ruby script that parses and executes the subcommand specified. Here's an example of the `transport1.yaml` that is installed in my machine with ignition transport:\r\n\r\n```\r\n#!c++\r\n\r\n--- # Subcommands available inside ignition-transport.\r\nformat: 1.0.0\r\nlibrary_name: ignition-transport\r\nlibrary_version: 1.1.0\r\nlibrary_path: /home/caguero/local/lib/ruby/ignition/cmdtransport1\r\ncommands:\r\n    - topic   : Print information about topics.\r\n    - service : Print information about services.\r\n```\r\n\r\nBefore this pull request, running `tools/UNIT_IGN_TEST` without doing `make install` was not working properly, as the value of `library_path` inside `transport1.rb` was pointing to the installed `cmdtransport1.rb` instead of pointing to the recently compiled version available only under the `build` directory. This pull request solves this problem.\r\n\r\nWe now create two versions of `transport1.yaml`, one for internal testing and the other for installation. The internal testing version has a `library_path` pointing to the `cmdtransport1.rb` version under `build`:\r\n\r\n\r\n```\r\n#!c++\r\n\r\n--- # Subcommands available inside ignition-transport.\r\nformat: 1.0.0\r\nlibrary_name: ignition-transport\r\nlibrary_version: 1.1.0\r\nlibrary_path: /data/ign-transport/build/src/cmd/cmdtransport1\r\ncommands:\r\n    - topic   : Print information about topics.\r\n    - service : Print information about services.\r\n---\r\n```\r\n\r\nIt also fixes a problem in Mac OS X running some test:\r\n\r\n\r\n```\r\n#!c++\r\n\r\nlibc++abi.dylib: terminating with uncaught exception of type std::__1::system_error: recursive_mutex lock failed: Invalid argument\r\n```\r\n\r\nI believe this was caused by the destruction of some NodeShared member variables before destructing the `Discovery` object. If Discovery triggers a NodeShared callback during the destruction phase, some member (mutex) might be already destroyed.\r\n\r\n* [Trusty](http://build.osrfoundation.org/view/main/view/ignition/job/ignition_transport-ci-pr_any-trusty-amd64/96/) :large_blue_circle:\r\n* [Homebrew](http://build.osrfoundation.org/view/main/view/ignition/job/ignition_transport-ci-pr_any-homebrew-amd64/90/) :large_blue_circle:\r\n* [Windows](http://build.osrfoundation.org/view/main/view/ignition/job/ignition_transport-ci-pr_any-windows7-amd64/183/) :large_blue_circle:", "title": "ign_TEST without make install", "destination": {"commit": {"hash": "226d4b7cb29a", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/commit/226d4b7cb29a.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/commits/226d4b7cb29a"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport"}, "avatar": {"href": "data/bytebucket.org/ravatar/{4249390a-7f55-404b-990d-817ba94cc7ac}ts=1533306"}}, "type": "repository", "name": "ign-transport", "full_name": "ignitionrobotics/ign-transport", "uuid": "{4249390a-7f55-404b-990d-817ba94cc7ac}"}, "branch": {"name": "ign-transport1"}}, "reason": "", "source": {"commit": {"hash": "1351fd6aff81", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/commit/1351fd6aff81.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/commits/1351fd6aff81"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport"}, "avatar": {"href": "data/bytebucket.org/ravatar/{4249390a-7f55-404b-990d-817ba94cc7ac}ts=1533306"}}, "type": "repository", "name": "ign-transport", "full_name": "ignitionrobotics/ign-transport", "uuid": "{4249390a-7f55-404b-990d-817ba94cc7ac}"}, "branch": {"name": "fix_ign_test"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2016-04-26T06:21:58.941025+00:00"}, "pull_request": {"type": "pullrequest", "id": 127, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/127.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/127"}}, "title": "ign_TEST without make install"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/127/comments/17734566.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/127/_/diff#comment-17734566"}}, "parent": {"id": 17734511, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/127/comments/17734511.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/127/_/diff#comment-17734511"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 127, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/127.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/127"}}, "title": "ign_TEST without make install"}, "content": {"raw": "queued a build: http://build.osrfoundation.org/job/ignition_transport-ci-pr_any-trusty-amd64/99", "markup": "markdown", "html": "<p>queued a build: <a href=\"http://build.osrfoundation.org/job/ignition_transport-ci-pr_any-trusty-amd64/99\" rel=\"nofollow\" class=\"ap-connect-link\">http://build.osrfoundation.org/job/ignition_transport-ci-pr_any-trusty-amd64/99</a></p>", "type": "rendered"}, "created_on": "2016-04-26T00:19:34.961798+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2016-04-26T00:19:34.963839+00:00", "type": "pullrequest_comment", "id": 17734566}, "pull_request": {"type": "pullrequest", "id": 127, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/127.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/127"}}, "title": "ign_TEST without make install"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/127/comments/17734511.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/127/_/diff#comment-17734511"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 127, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/127.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/127"}}, "title": "ign_TEST without make install"}, "content": {"raw": "this looks like an ABI change", "markup": "markdown", "html": "<p>this looks like an ABI change</p>", "type": "rendered"}, "created_on": "2016-04-26T00:14:34.522117+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2016-04-26T00:14:34.524810+00:00", "type": "pullrequest_comment", "id": 17734511}, "pull_request": {"type": "pullrequest", "id": 127, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/127.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/127"}}, "title": "ign_TEST without make install"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/127/comments/17734492.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/127/_/diff#comment-17734492"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 127, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/127.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/127"}}, "title": "ign_TEST without make install"}, "content": {"raw": "Do any of the CI builds run `make test` before make install?", "markup": "markdown", "html": "<p>Do any of the CI builds run <code>make test</code> before make install?</p>", "type": "rendered"}, "created_on": "2016-04-26T00:13:37.400189+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2016-04-26T00:13:37.402659+00:00", "type": "pullrequest_comment", "id": 17734492}, "pull_request": {"type": "pullrequest", "id": 127, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/127.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/127"}}, "title": "ign_TEST without make install"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/127/comments/17729455.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/127/_/diff#comment-17729455"}}, "parent": {"id": 17729424, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/127/comments/17729424.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/127/_/diff#comment-17729424"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 127, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/127.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/127"}}, "title": "ign_TEST without make install"}, "content": {"raw": "Nevermind. I see.", "markup": "markdown", "html": "<p>Nevermind. I see.</p>", "type": "rendered"}, "created_on": "2016-04-25T21:27:43.349656+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "inline": {}, "updated_on": "2016-04-25T21:27:43.355224+00:00", "type": "pullrequest_comment", "id": 17729455}, "pull_request": {"type": "pullrequest", "id": 127, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/127.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/127"}}, "title": "ign_TEST without make install"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/127/comments/17729424.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/127/_/diff#comment-17729424"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 127, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/127.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/127"}}, "title": "ign_TEST without make install"}, "content": {"raw": "Why do you set this to a different value here?", "markup": "markdown", "html": "<p>Why do you set this to a different value here?</p>", "type": "rendered"}, "created_on": "2016-04-25T21:27:04.578133+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "inline": {}, "updated_on": "2016-04-25T21:27:04.581143+00:00", "type": "pullrequest_comment", "id": 17729424}, "pull_request": {"type": "pullrequest", "id": 127, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/127.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/127"}}, "title": "ign_TEST without make install"}}, {"update": {"description": "If [ignition-tools](#!/ignitionrobotics/ign-tools) is installed, the test `tools/UNIT_IGN_TEST` is executed. This test verifies the transport command line utilities (e.g. `ign topic -l`).\r\n\r\n`ign` parses a set of yaml files to find the list of subcommands that are available. As an example, ignition transport makes available the subcommands `topic` and `service`. The yaml configuration file also contains the path to a ruby script that parses and executes the subcommand specified. Here's an example of the `transport1.yaml` that is installed in my machine with ignition transport:\r\n\r\n```\r\n#!c++\r\n\r\n--- # Subcommands available inside ignition-transport.\r\nformat: 1.0.0\r\nlibrary_name: ignition-transport\r\nlibrary_version: 1.1.0\r\nlibrary_path: /home/caguero/local/lib/ruby/ignition/cmdtransport1\r\ncommands:\r\n    - topic   : Print information about topics.\r\n    - service : Print information about services.\r\n```\r\n\r\nBefore this pull request, running `tools/UNIT_IGN_TEST` without doing `make install` was not working properly, as the value of `library_path` inside `transport1.rb` was pointing to the installed `cmdtransport1.rb` instead of pointing to the recently compiled version available only under the `build` directory. This pull request solves this problem.\r\n\r\nWe now create two versions of `transport1.yaml`, one for internal testing and the other for installation. The internal testing version has a `library_path` pointing to the `cmdtransport1.rb` version under `build`:\r\n\r\n\r\n```\r\n#!c++\r\n\r\n--- # Subcommands available inside ignition-transport.\r\nformat: 1.0.0\r\nlibrary_name: ignition-transport\r\nlibrary_version: 1.1.0\r\nlibrary_path: /data/ign-transport/build/src/cmd/cmdtransport1\r\ncommands:\r\n    - topic   : Print information about topics.\r\n    - service : Print information about services.\r\n---\r\n```\r\n\r\nIt also fixes a problem in Mac OS X running some test:\r\n\r\n\r\n```\r\n#!c++\r\n\r\nlibc++abi.dylib: terminating with uncaught exception of type std::__1::system_error: recursive_mutex lock failed: Invalid argument\r\n```\r\n\r\nI believe this was caused by the destruction of some NodeShared member variables before destructing the `Discovery` object. If Discovery triggers a NodeShared callback during the destruction phase, some member (mutex) might be already destroyed.\r\n\r\n* [Trusty](http://build.osrfoundation.org/view/main/view/ignition/job/ignition_transport-ci-pr_any-trusty-amd64/96/) :large_blue_circle:\r\n* [Homebrew](http://build.osrfoundation.org/view/main/view/ignition/job/ignition_transport-ci-pr_any-homebrew-amd64/90/) :large_blue_circle:\r\n* [Windows](http://build.osrfoundation.org/view/main/view/ignition/job/ignition_transport-ci-pr_any-windows7-amd64/183/) :large_blue_circle:", "title": "ign_TEST without make install", "destination": {"commit": {"hash": "545e53288c95", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/commit/545e53288c95.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/commits/545e53288c95"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport"}, "avatar": {"href": "data/bytebucket.org/ravatar/{4249390a-7f55-404b-990d-817ba94cc7ac}ts=1533306"}}, "type": "repository", "name": "ign-transport", "full_name": "ignitionrobotics/ign-transport", "uuid": "{4249390a-7f55-404b-990d-817ba94cc7ac}"}, "branch": {"name": "ign-transport1"}}, "reason": "", "source": {"commit": {"hash": "95f00100bea7", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/commit/95f00100bea7.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/commits/95f00100bea7"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport"}, "avatar": {"href": "data/bytebucket.org/ravatar/{4249390a-7f55-404b-990d-817ba94cc7ac}ts=1533306"}}, "type": "repository", "name": "ign-transport", "full_name": "ignitionrobotics/ign-transport", "uuid": "{4249390a-7f55-404b-990d-817ba94cc7ac}"}, "branch": {"name": "fix_ign_test"}}, "state": "OPEN", "author": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "date": "2016-04-22T16:56:33.974027+00:00"}, "pull_request": {"type": "pullrequest", "id": 127, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/127.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/127"}}, "title": "ign_TEST without make install"}}, {"update": {"description": "If [ignition-tools](#!/ignitionrobotics/ign-tools) is installed, the test `tools/UNIT_IGN_TEST` is executed. This test verifies the transport command line utilities (e.g. `ign topic -l`).\r\n\r\n`ign` parses a set of yaml files to find the list of subcommands that are available. As an example, ignition transport makes available the subcommands `topic` and `service`. The yaml configuration file also contains the path to a ruby script that parses and executes the subcommand specified. Here's an example of the `transport1.yaml` that is installed in my machine with ignition transport:\r\n\r\n```\r\n#!c++\r\n\r\n--- # Subcommands available inside ignition-transport.\r\nformat: 1.0.0\r\nlibrary_name: ignition-transport\r\nlibrary_version: 1.1.0\r\nlibrary_path: /home/caguero/local/lib/ruby/ignition/cmdtransport1\r\ncommands:\r\n    - topic   : Print information about topics.\r\n    - service : Print information about services.\r\n```\r\n\r\nBefore this pull request, running `tools/UNIT_IGN_TEST` without doing `make install` was not working properly, as the value of `library_path` inside `transport1.rb` was pointing to the installed `cmdtransport1.rb` instead of pointing to the recently compiled version available only under the `build` directory. This pull request solves this problem.\r\n\r\nWe now create two versions of `transport1.yaml`, one for internal testing and the other for installation. The internal testing version has a `library_path` pointing to the `cmdtransport1.rb` version under `build`:\r\n\r\n\r\n```\r\n#!c++\r\n\r\n--- # Subcommands available inside ignition-transport.\r\nformat: 1.0.0\r\nlibrary_name: ignition-transport\r\nlibrary_version: 1.1.0\r\nlibrary_path: /data/ign-transport/build/src/cmd/cmdtransport1\r\ncommands:\r\n    - topic   : Print information about topics.\r\n    - service : Print information about services.\r\n---\r\n```\r\n\r\nI also fixes a problem in Mac OS X running some test:\r\n\r\n\r\n```\r\n#!c++\r\n\r\nlibc++abi.dylib: terminating with uncaught exception of type std::__1::system_error: recursive_mutex lock failed: Invalid argument\r\n```\r\n\r\nI believe this was caused by the destruction of some NodeShared member variables before destructing the `Discovery` object. If Discovery triggers a NodeShared callback during the destruction phase, some member (mutex) might be already destroyed.\r\n\r\n* [Trusty](http://build.osrfoundation.org/view/main/view/ignition/job/ignition_transport-ci-pr_any-trusty-amd64/96/) :large_blue_circle:\r\n* [Homebrew](http://build.osrfoundation.org/view/main/view/ignition/job/ignition_transport-ci-pr_any-homebrew-amd64/90/) :large_blue_circle:\r\n* [Windows](http://build.osrfoundation.org/view/main/view/ignition/job/ignition_transport-ci-pr_any-windows7-amd64/183/) :large_blue_circle:", "title": "ign_TEST without make install", "destination": {"commit": {"hash": "545e53288c95", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/commit/545e53288c95.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/commits/545e53288c95"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport"}, "avatar": {"href": "data/bytebucket.org/ravatar/{4249390a-7f55-404b-990d-817ba94cc7ac}ts=1533306"}}, "type": "repository", "name": "ign-transport", "full_name": "ignitionrobotics/ign-transport", "uuid": "{4249390a-7f55-404b-990d-817ba94cc7ac}"}, "branch": {"name": "ign-transport1"}}, "reason": "", "source": {"commit": {"hash": "95f00100bea7", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/commit/95f00100bea7.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/commits/95f00100bea7"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport"}, "avatar": {"href": "data/bytebucket.org/ravatar/{4249390a-7f55-404b-990d-817ba94cc7ac}ts=1533306"}}, "type": "repository", "name": "ign-transport", "full_name": "ignitionrobotics/ign-transport", "uuid": "{4249390a-7f55-404b-990d-817ba94cc7ac}"}, "branch": {"name": "fix_ign_test"}}, "state": "OPEN", "author": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "date": "2016-04-22T16:56:15.568695+00:00"}, "pull_request": {"type": "pullrequest", "id": 127, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/127.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/127"}}, "title": "ign_TEST without make install"}}, {"update": {"description": "If [ignition-tools](#!/ignitionrobotics/ign-tools) is installed, the test `tools/UNIT_IGN_TEST` is executed. This test verifies the transport command line utilities (e.g. `ign topic -l`).\r\n\r\n`ign` parses a set of yaml files to find the list of subcommands that are available. As an example, ignition transport makes available the subcommands `topic` and `service`. The yaml configuration file also contains the path to a ruby script that parses and executes the subcommand specified. Here's an example of the `transport1.yaml` that is installed in my machine with ignition transport:\r\n\r\n```\r\n#!c++\r\n\r\n--- # Subcommands available inside ignition-transport.\r\nformat: 1.0.0\r\nlibrary_name: ignition-transport\r\nlibrary_version: 1.1.0\r\nlibrary_path: /home/caguero/local/lib/ruby/ignition/cmdtransport1\r\ncommands:\r\n    - topic   : Print information about topics.\r\n    - service : Print information about services.\r\n```\r\n\r\nBefore this pull request, running `tools/UNIT_IGN_TEST` without doing `make install` was not working properly, as the value of `library_path` inside `transport1.rb` was pointing to the installed `cmdtransport1.rb` instead of pointing to the recently compiled version available only under the `build` directory. This pull request solves this problem.\r\n\r\nWe now create two versions of `transport1.yaml`, one for internal testing and the other for installation. The internal testing version has a `library_path` pointing to the `cmdtransport1.rb` version under `build`:\r\n\r\n\r\n```\r\n#!c++\r\n\r\n--- # Subcommands available inside ignition-transport.\r\nformat: 1.0.0\r\nlibrary_name: ignition-transport\r\nlibrary_version: 1.1.0\r\nlibrary_path: /data/ign-transport/build/src/cmd/cmdtransport1\r\ncommands:\r\n    - topic   : Print information about topics.\r\n    - service : Print information about services.\r\n---\r\n```\r\n\r\n* [Trusty](http://build.osrfoundation.org/view/main/view/ignition/job/ignition_transport-ci-pr_any-trusty-amd64/96/) :large_blue_circle:\r\n* [Homebrew](http://build.osrfoundation.org/view/main/view/ignition/job/ignition_transport-ci-pr_any-homebrew-amd64/90/) :large_blue_circle:\r\n* [Windows](http://build.osrfoundation.org/view/main/view/ignition/job/ignition_transport-ci-pr_any-windows7-amd64/183/) :large_blue_circle:", "title": "ign_TEST without make install", "destination": {"commit": {"hash": "358bac05278c", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/commit/358bac05278c.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/commits/358bac05278c"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport"}, "avatar": {"href": "data/bytebucket.org/ravatar/{4249390a-7f55-404b-990d-817ba94cc7ac}ts=1533306"}}, "type": "repository", "name": "ign-transport", "full_name": "ignitionrobotics/ign-transport", "uuid": "{4249390a-7f55-404b-990d-817ba94cc7ac}"}, "branch": {"name": "ign-transport1"}}, "reason": "", "source": {"commit": {"hash": "95f00100bea7", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/commit/95f00100bea7.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/commits/95f00100bea7"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport"}, "avatar": {"href": "data/bytebucket.org/ravatar/{4249390a-7f55-404b-990d-817ba94cc7ac}ts=1533306"}}, "type": "repository", "name": "ign-transport", "full_name": "ignitionrobotics/ign-transport", "uuid": "{4249390a-7f55-404b-990d-817ba94cc7ac}"}, "branch": {"name": "fix_ign_test"}}, "state": "OPEN", "author": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "date": "2016-04-22T00:49:47.322037+00:00"}, "pull_request": {"type": "pullrequest", "id": 127, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/127.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/127"}}, "title": "ign_TEST without make install"}}, {"update": {"description": "If [ignition-tools](#!/ignitionrobotics/ign-tools) is installed, the test `tools/UNIT_IGN_TEST` is executed. This test verifies the transport command line utilities (e.g. `ign topic -l`).\r\n\r\n`ign` parses a set of yaml files to find the list of subcommands that are available. As an example, ignition transport makes available the subcommands `topic` and `service`. The yaml configuration file also contains the path to a ruby script that parses and executes the subcommand specified. Here's an example of the `transport1.yaml` that is installed in my machine with ignition transport:\r\n\r\n```\r\n#!c++\r\n\r\n--- # Subcommands available inside ignition-transport.\r\nformat: 1.0.0\r\nlibrary_name: ignition-transport\r\nlibrary_version: 1.1.0\r\nlibrary_path: /home/caguero/local/lib/ruby/ignition/cmdtransport1\r\ncommands:\r\n    - topic   : Print information about topics.\r\n    - service : Print information about services.\r\n```\r\n\r\nBefore this pull request, running `tools/UNIT_IGN_TEST` without doing `make install` was not working properly, as the value of `library_path` inside `transport1.rb` was pointing to the installed `cmdtransport1.rb` instead of pointing to the recently compiled version available only under the `build` directory. This pull request solves this problem.\r\n\r\nWe now create two versions of `transport1.yaml`, one for internal testing and the other for installation. The internal testing version has a `library_path` pointing to the `cmdtransport1.rb` version under `build`:\r\n\r\n\r\n```\r\n#!c++\r\n\r\n--- # Subcommands available inside ignition-transport.\r\nformat: 1.0.0\r\nlibrary_name: ignition-transport\r\nlibrary_version: 1.1.0\r\nlibrary_path: /data/ign-transport/build/src/cmd/cmdtransport1\r\ncommands:\r\n    - topic   : Print information about topics.\r\n    - service : Print information about services.\r\n---\r\n```\r\n\r\n* [Trusty](http://build.osrfoundation.org/view/main/view/ignition/job/ignition_transport-ci-pr_any-trusty-amd64/96/) :large_blue_circle:\r\n* [Homebrew](http://build.osrfoundation.org/view/main/view/ignition/job/ignition_transport-ci-pr_any-homebrew-amd64/90/) :large_blue_circle:\r\n* [Windows](http://build.osrfoundation.org/view/main/view/ignition/job/ignition_transport-ci-pr_any-windows7-amd64/183/) :large_blue_circle:", "title": "ign_TEST without make install", "destination": {"commit": {"hash": "358bac05278c", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/commit/358bac05278c.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/commits/358bac05278c"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport"}, "avatar": {"href": "data/bytebucket.org/ravatar/{4249390a-7f55-404b-990d-817ba94cc7ac}ts=1533306"}}, "type": "repository", "name": "ign-transport", "full_name": "ignitionrobotics/ign-transport", "uuid": "{4249390a-7f55-404b-990d-817ba94cc7ac}"}, "branch": {"name": "ign-transport1"}}, "reason": "", "source": {"commit": {"hash": "a80bbee4c28e", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/commit/a80bbee4c28e.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/commits/a80bbee4c28e"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport"}, "avatar": {"href": "data/bytebucket.org/ravatar/{4249390a-7f55-404b-990d-817ba94cc7ac}ts=1533306"}}, "type": "repository", "name": "ign-transport", "full_name": "ignitionrobotics/ign-transport", "uuid": "{4249390a-7f55-404b-990d-817ba94cc7ac}"}, "branch": {"name": "fix_ign_test"}}, "state": "OPEN", "author": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "date": "2016-04-22T00:41:44.486733+00:00"}, "pull_request": {"type": "pullrequest", "id": 127, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/127.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/127"}}, "title": "ign_TEST without make install"}}, {"update": {"description": "If [ignition-tools](#!/ignitionrobotics/ign-tools) is installed, the test `tools/UNIT_IGN_TEST` is executed. This test verifies the transport command line utilities (e.g. `ign topic -l`).\r\n\r\n`ign` parses a set of yaml files to find the list of subcommands that are available. As an example, ignition transport makes available the subcommands `topic` and `service`. The yaml configuration file also contains the path to a ruby script that parses and executes the subcommand specified. Here's an example of the `transport1.yaml` that is installed in my machine with ignition transport:\r\n\r\n```\r\n#!c++\r\n\r\n--- # Subcommands available inside ignition-transport.\r\nformat: 1.0.0\r\nlibrary_name: ignition-transport\r\nlibrary_version: 1.1.0\r\nlibrary_path: /home/caguero/local/lib/ruby/ignition/cmdtransport1\r\ncommands:\r\n    - topic   : Print information about topics.\r\n    - service : Print information about services.\r\n```\r\n\r\nBefore this pull request, running `tools/UNIT_IGN_TEST` without doing `make install` was not working properly, as the value of `library_path` inside `transport1.rb` was pointing to the installed `cmdtransport1.rb` instead of pointing to the recently compiled version available only under the `build` directory. This pull request solves this problem.\r\n\r\nWe now create two versions of `transport1.yaml`, one for internal testing and the other for installation. The internal testing version has a `library_path` pointing to the `cmdtransport1.rb` version under `build`:\r\n\r\n\r\n```\r\n#!c++\r\n\r\n--- # Subcommands available inside ignition-transport.\r\nformat: 1.0.0\r\nlibrary_name: ignition-transport\r\nlibrary_version: 1.1.0\r\nlibrary_path: /data/ign-transport/build/src/cmd/cmdtransport1\r\ncommands:\r\n    - topic   : Print information about topics.\r\n    - service : Print information about services.\r\n---\r\n```\r\n\r\n* [Trusty](http://build.osrfoundation.org/view/main/view/ignition/job/ignition_transport-ci-pr_any-trusty-amd64/96/) :large_blue_circle:\r\n* [Homebrew](http://build.osrfoundation.org/view/main/view/ignition/job/ignition_transport-ci-pr_any-homebrew-amd64/90/) :large_blue_circle:\r\n* [Windows](http://build.osrfoundation.org/view/main/view/ignition/job/ignition_transport-ci-pr_any-windows7-amd64/183/) :large_blue_circle:", "title": "ign_TEST without make install", "destination": {"commit": {"hash": "358bac05278c", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/commit/358bac05278c.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/commits/358bac05278c"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport"}, "avatar": {"href": "data/bytebucket.org/ravatar/{4249390a-7f55-404b-990d-817ba94cc7ac}ts=1533306"}}, "type": "repository", "name": "ign-transport", "full_name": "ignitionrobotics/ign-transport", "uuid": "{4249390a-7f55-404b-990d-817ba94cc7ac}"}, "branch": {"name": "ign-transport1"}}, "reason": "", "source": {"commit": {"hash": "f8948cfe3928", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/commit/f8948cfe3928.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/commits/f8948cfe3928"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport"}, "avatar": {"href": "data/bytebucket.org/ravatar/{4249390a-7f55-404b-990d-817ba94cc7ac}ts=1533306"}}, "type": "repository", "name": "ign-transport", "full_name": "ignitionrobotics/ign-transport", "uuid": "{4249390a-7f55-404b-990d-817ba94cc7ac}"}, "branch": {"name": "fix_ign_test"}}, "state": "OPEN", "author": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "date": "2016-04-21T22:59:12.514546+00:00"}, "pull_request": {"type": "pullrequest", "id": 127, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/127.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/127"}}, "title": "ign_TEST without make install"}}, {"update": {"description": "If [ignition-tools](#!/ignitionrobotics/ign-tools) is installed, the test `tools/UNIT_IGN_TEST` is executed. This test verifies the transport command line utilities (e.g. `ign topic -l`).\r\n\r\n`ign` parses a set of yaml files to find the list of subcommands that are available. As an example, ignition transport makes available the subcommands `topic` and `service`. The yaml configuration file also contains the path to a ruby script that parses and executes the subcommand specified. Here's an example of the `transport1.yaml` that is installed in my machine with ignition transport:\r\n\r\n```\r\n#!c++\r\n\r\n--- # Subcommands available inside ignition-transport.\r\nformat: 1.0.0\r\nlibrary_name: ignition-transport\r\nlibrary_version: 1.1.0\r\nlibrary_path: /home/caguero/local/lib/ruby/ignition/cmdtransport1\r\ncommands:\r\n    - topic   : Print information about topics.\r\n    - service : Print information about services.\r\n```\r\n\r\nBefore this pull request, running `tools/UNIT_IGN_TEST` without doing `make install` was not working properly, as the value of `library_path` inside `transport1.rb` was pointing to the installed `cmdtransport1.rb` instead of pointing to the recently compiled version available only under the `build` directory. This pull request solves this problem.\r\n\r\nWe now create two versions of `transport1.yaml`, one for internal testing and the other for installation. The internal testing version has a `library_path` pointing to the `cmdtransport1.rb` version under `build`:\r\n\r\n\r\n```\r\n#!c++\r\n\r\n--- # Subcommands available inside ignition-transport.\r\nformat: 1.0.0\r\nlibrary_name: ignition-transport\r\nlibrary_version: 1.1.0\r\nlibrary_path: /data/ign-transport/build/src/cmd/cmdtransport1\r\ncommands:\r\n    - topic   : Print information about topics.\r\n    - service : Print information about services.\r\n---\r\n```\r\n\r\n* [Trusty](http://build.osrfoundation.org/view/main/view/ignition/job/ignition_transport-ci-pr_any-trusty-amd64/96/) :large_blue_circle:\r\n* [Homebrew](http://build.osrfoundation.org/view/main/view/ignition/job/ignition_transport-ci-pr_any-homebrew-amd64/90/) :white_circle:\r\n* [Windows](http://build.osrfoundation.org/view/main/view/ignition/job/ignition_transport-ci-pr_any-windows7-amd64/183/) :large_blue_circle:", "title": "ign_TEST without make install", "destination": {"commit": {"hash": "358bac05278c", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/commit/358bac05278c.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/commits/358bac05278c"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport"}, "avatar": {"href": "data/bytebucket.org/ravatar/{4249390a-7f55-404b-990d-817ba94cc7ac}ts=1533306"}}, "type": "repository", "name": "ign-transport", "full_name": "ignitionrobotics/ign-transport", "uuid": "{4249390a-7f55-404b-990d-817ba94cc7ac}"}, "branch": {"name": "ign-transport1"}}, "reason": "", "source": {"commit": {"hash": "f8948cfe3928", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/commit/f8948cfe3928.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/commits/f8948cfe3928"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport"}, "avatar": {"href": "data/bytebucket.org/ravatar/{4249390a-7f55-404b-990d-817ba94cc7ac}ts=1533306"}}, "type": "repository", "name": "ign-transport", "full_name": "ignitionrobotics/ign-transport", "uuid": "{4249390a-7f55-404b-990d-817ba94cc7ac}"}, "branch": {"name": "fix_ign_test"}}, "state": "OPEN", "author": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "date": "2016-04-21T22:54:35.946573+00:00"}, "pull_request": {"type": "pullrequest", "id": 127, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/127.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/127"}}, "title": "ign_TEST without make install"}}, {"update": {"description": "If [ignition-tools](#!/ignitionrobotics/ign-tools) is installed, the test `tools/UNIT_IGN_TEST` is executed. This test verifies the transport command line utilities (e.g. `ign topic -l`).\r\n\r\n`ign` parses a set of yaml files to find the list of subcommands that are available. As an example, ignition transport makes available the subcommands `topic` and `service`. The yaml configuration file also contains the path to a ruby script that parses and executes the subcommand specified. Here's an example of the `transport1.yaml` that is installed in my machine with ignition transport:\r\n\r\n```\r\n#!c++\r\n\r\n--- # Subcommands available inside ignition-transport.\r\nformat: 1.0.0\r\nlibrary_name: ignition-transport\r\nlibrary_version: 1.1.0\r\nlibrary_path: /home/caguero/local/lib/ruby/ignition/cmdtransport1\r\ncommands:\r\n    - topic   : Print information about topics.\r\n    - service : Print information about services.\r\n```\r\n\r\nBefore this pull request, running `tools/UNIT_IGN_TEST` without doing `make install` was not working properly, as the value of `library_path` inside `transport1.rb` was pointing to the installed `cmdtransport1.rb` instead of pointing to the recently compiled version available only under the `build` directory. This pull request solves this problem.\r\n\r\nWe now create two versions of `transport1.yaml`, one for internal testing and the other for installation. The internal testing version has a `library_path` pointing to the `cmdtransport1.rb` version under `build`:\r\n\r\n\r\n```\r\n#!c++\r\n\r\n--- # Subcommands available inside ignition-transport.\r\nformat: 1.0.0\r\nlibrary_name: ignition-transport\r\nlibrary_version: 1.1.0\r\nlibrary_path: /data/ign-transport/build/src/cmd/cmdtransport1\r\ncommands:\r\n    - topic   : Print information about topics.\r\n    - service : Print information about services.\r\n---\r\n```\r\n\r\n* [Trusty](http://build.osrfoundation.org/view/main/view/ignition/job/ignition_transport-ci-pr_any-trusty-amd64/96/) :large_blue_circle:\r\n* [Homebrew](http://build.osrfoundation.org/view/main/view/ignition/job/ignition_transport-ci-pr_any-homebrew-amd64/90/) :white_circle:\r\n* [Windows](http://build.osrfoundation.org/view/main/view/ignition/job/ignition_transport-ci-pr_any-windows7-amd64/183/) :large_blue_circle:", "title": "ign_TEST without make install.", "destination": {"commit": {"hash": "358bac05278c", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/commit/358bac05278c.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/commits/358bac05278c"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport"}, "avatar": {"href": "data/bytebucket.org/ravatar/{4249390a-7f55-404b-990d-817ba94cc7ac}ts=1533306"}}, "type": "repository", "name": "ign-transport", "full_name": "ignitionrobotics/ign-transport", "uuid": "{4249390a-7f55-404b-990d-817ba94cc7ac}"}, "branch": {"name": "ign-transport1"}}, "reason": "", "source": {"commit": {"hash": "f8948cfe3928", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/commit/f8948cfe3928.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/commits/f8948cfe3928"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport"}, "avatar": {"href": "data/bytebucket.org/ravatar/{4249390a-7f55-404b-990d-817ba94cc7ac}ts=1533306"}}, "type": "repository", "name": "ign-transport", "full_name": "ignitionrobotics/ign-transport", "uuid": "{4249390a-7f55-404b-990d-817ba94cc7ac}"}, "branch": {"name": "fix_ign_test"}}, "state": "OPEN", "author": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "date": "2016-04-21T22:54:26.558503+00:00"}, "pull_request": {"type": "pullrequest", "id": 127, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/127.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/127"}}, "title": "ign_TEST without make install"}}, {"update": {"description": "If [ignition-tools](#!/ignitionrobotics/ign-tools) is installed, the test `tools/UNIT_IGN_TEST` is executed. This test verifies the transport command line utilities (e.g. `ign topic -l`).\r\n\r\n`ign` parses a set of yaml files to find the list of subcommands that are available. As an example, ignition transport makes available the subcommands `topic` and `service`. The yaml configuration file also contains the path to a ruby script that parses and executes the subcommand specified. Here's an example of the `transport1.yaml` that is installed in my machine with ignition transport:\r\n\r\n```\r\n#!c++\r\n\r\n--- # Subcommands available inside ignition-transport.\r\nformat: 1.0.0\r\nlibrary_name: ignition-transport\r\nlibrary_version: 1.1.0\r\nlibrary_path: /home/caguero/local/lib/ruby/ignition/cmdtransport1\r\ncommands:\r\n    - topic   : Print information about topics.\r\n    - service : Print information about services.\r\n```\r\n\r\nBefore this pull request, running `tools/UNIT_IGN_TEST` without doing `make install` was not working properly, as the value of `library_path` inside `transport1.rb` was pointing to the installed `cmdtransport1.rb` instead of pointing to the recently compiled version available only under the `build` directory. This pull request solves this problem.\r\n\r\nWe now create two versions of `transport1.yaml`, one for internal testing and the other for installation. The internal testing version has a `library_path` pointing to the `cmdtransport1.rb` version under `build`:\r\n\r\n\r\n```\r\n#!c++\r\n\r\n--- # Subcommands available inside ignition-transport.\r\nformat: 1.0.0\r\nlibrary_name: ignition-transport\r\nlibrary_version: 1.1.0\r\nlibrary_path: /data/ign-transport/build/src/cmd/cmdtransport1\r\ncommands:\r\n    - topic   : Print information about topics.\r\n    - service : Print information about services.\r\n---\r\n```\r\n\r\n* [Trusty](http://build.osrfoundation.org/view/main/view/ignition/job/ignition_transport-ci-pr_any-trusty-amd64/96/) :large_blue_circle:\r\n* [Homebrew](http://build.osrfoundation.org/view/main/view/ignition/job/ignition_transport-ci-pr_any-homebrew-amd64/90/) :white_circle:\r\n* [Windows](http://build.osrfoundation.org/view/main/view/ignition/job/ignition_transport-ci-pr_any-windows7-amd64/183/) :large_blue_circle:", "title": "ign_TEST without make install.", "destination": {"commit": {"hash": "358bac05278c", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/commit/358bac05278c.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/commits/358bac05278c"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport"}, "avatar": {"href": "data/bytebucket.org/ravatar/{4249390a-7f55-404b-990d-817ba94cc7ac}ts=1533306"}}, "type": "repository", "name": "ign-transport", "full_name": "ignitionrobotics/ign-transport", "uuid": "{4249390a-7f55-404b-990d-817ba94cc7ac}"}, "branch": {"name": "ign-transport1"}}, "reason": "", "source": {"commit": {"hash": "f8948cfe3928", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/commit/f8948cfe3928.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/commits/f8948cfe3928"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport"}, "avatar": {"href": "data/bytebucket.org/ravatar/{4249390a-7f55-404b-990d-817ba94cc7ac}ts=1533306"}}, "type": "repository", "name": "ign-transport", "full_name": "ignitionrobotics/ign-transport", "uuid": "{4249390a-7f55-404b-990d-817ba94cc7ac}"}, "branch": {"name": "fix_ign_test"}}, "state": "OPEN", "author": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "date": "2016-04-21T22:54:26.538749+00:00"}, "pull_request": {"type": "pullrequest", "id": 127, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/127.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/127"}}, "title": "ign_TEST without make install"}}]}