{"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/376/comments/100377957.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-transport/diff/ignitionrobotics/ign-transport:cbdbbdaaae4d..00829adc3f66?path=src%2FCIface.cc"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/376/_/diff#comment-100377957"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 376, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/376.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/376"}}, "title": "Added wait to CIface when publishing"}, "content": {"raw": "I think this is a slightly different case than `ign.cc::cmdTopicPub()`. `cmdTopicPub()` is self-contained, it advertises, publishes, and then, destroys everything, so the topic is unadvertised. In that case, we need to make sure that the message is delivered.\n\nHere \\(`ignTransportPublish()`\\), the function preserves the publisher, so a second call to `ignTransportPublish()` will still work. I think you\u2019re trying to make sure that the first call always triggers the delivery of the message but not sure if that value is flexible enough and if that\u2019s an assumption valid for all use cases.\n\nHow about we pass an extra pointer to the function that is a pointer to a new struct with publishing options. For now, the only option will be the time to wait. If the the parameter is NULL, this means no options, and then, we don\u2019t wait. Otherwise, we\u2019ll wait the value that the user specified.", "markup": "markdown", "html": "<p>I think this is a slightly different case than <code>ign.cc::cmdTopicPub()</code>. <code>cmdTopicPub()</code> is self-contained, it advertises, publishes, and then, destroys everything, so the topic is unadvertised. In that case, we need to make sure that the message is delivered.</p>\n<p>Here (<code>ignTransportPublish()</code>), the function preserves the publisher, so a second call to <code>ignTransportPublish()</code> will still work. I think you\u2019re trying to make sure that the first call always triggers the delivery of the message but not sure if that value is flexible enough and if that\u2019s an assumption valid for all use cases.</p>\n<p>How about we pass an extra pointer to the function that is a pointer to a new struct with publishing options. For now, the only option will be the time to wait. If the the parameter is NULL, this means no options, and then, we don\u2019t wait. Otherwise, we\u2019ll wait the value that the user specified.</p>", "type": "rendered"}, "created_on": "2019-04-29T21:59:38.257179+00:00", "user": {"display_name": "Carlos Ag\u00fcero", "uuid": "{da8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D"}, "html": {"href": "https://bitbucket.org/%7Bda8a8e89-4bb0-421b-bd0e-dbbed3d4ed6a%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/692bf15758111acaddae4da15a47f9e5d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsCA-0.png"}}, "nickname": "caguero", "type": "user", "account_id": "557058:4ded1ddf-947e-4154-bbd1-3dba24f1bdbd"}, "inline": {"to": 64, "from": null, "outdated": false, "path": "src/CIface.cc"}, "updated_on": "2019-04-29T21:59:38.267304+00:00", "type": "pullrequest_comment", "id": 100377957}