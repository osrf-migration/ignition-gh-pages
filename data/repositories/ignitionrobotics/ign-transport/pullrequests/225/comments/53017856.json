{"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/225/comments/53017856.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/225/_/diff#comment-53017856"}}, "parent": {"id": 48895390, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/225/comments/48895390.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/225/_/diff#comment-48895390"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 225, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/225.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/225"}}, "title": "Benchmark"}, "content": {"raw": "the graphs are out of date, but I'm mostly able to reproduce the committed data files from November for intraprocess latency and throughput\n\nthe main discrepancy I see is that my throughput drops off for large messages  (with a peak value of 9.6 GB/s in test 12 dropping to 2.9 GB/s in test 15) instead of saturating (in [throughput-intraprocess.data](#!/ignitionrobotics/ign-transport/pull-requests/225/benchmark/diff#chg-example/data/14-11-2017-benchmarks/throughput-intraprocess.data), throughput fluctuates between 5.5 and 6.2 GB/s but doesn't have big drop):\n\n~~~\n$ ./bench -t\n# 2018-01-04T12:38:36PST\n# Ignition Transport Version 4.0.0\n# Linux 4.4.0-101-generic #124-Ubuntu SMP Fri Nov 10 18:29:59 UTC 2017 x86_64\n# Test\tSize(B)\t\tMB/s\t\tKmsg/s\n1\t259\t\t17.801911\t68.733246\t\n2\t517\t\t37.872683\t73.254707\t\n3\t1006\t\t71.211156\t70.786437\t\n4\t2014\t\t148.920438\t73.942621\t\n5\t4014\t\t327.139364\t81.499593\t\n6\t8013\t\t589.104543\t73.518600\t\n7\t16012\t\t1293.689909\t80.795023\t\n8\t32013\t\t2482.590151\t77.549438\t\n9\t64014\t\t3812.626563\t59.559261\t\n10\t128014\t\t5011.509552\t39.148137\t\n11\t256004\t\t7691.965627\t30.046271\t\n12\t512004\t\t9598.875141\t18.747657\t\n13\t1000004\t\t6189.943857\t6.189919\t\n14\t2000023\t\t4343.485390\t2.171718\t\n15\t4000005\t\t2911.938715\t0.727984\t\n~~~\n\nI compiled 77fc275d7220 in release mode (also ign-msgs1 in release mode). What do other people see for their large message throughput?", "markup": "markdown", "html": "<p>the graphs are out of date, but I'm mostly able to reproduce the committed data files from November for intraprocess latency and throughput</p>\n<p>the main discrepancy I see is that my throughput drops off for large messages  (with a peak value of 9.6 GB/s in test 12 dropping to 2.9 GB/s in test 15) instead of saturating (in <a data-is-external-link=\"true\" href=\"#!/ignitionrobotics/ign-transport/pull-requests/225/benchmark/diff#chg-example/data/14-11-2017-benchmarks/throughput-intraprocess.data\" rel=\"nofollow\">throughput-intraprocess.data</a>, throughput fluctuates between 5.5 and 6.2 GB/s but doesn't have big drop):</p>\n<div class=\"codehilite\"><pre><span></span>$ ./bench -t\n<span class=\"c1\"># 2018-01-04T12:38:36PST</span>\n<span class=\"c1\"># Ignition Transport Version 4.0.0</span>\n<span class=\"c1\"># Linux 4.4.0-101-generic #124-Ubuntu SMP Fri Nov 10 18:29:59 UTC 2017 x86_64</span>\n<span class=\"c1\"># Test  Size(B)     MB/s        Kmsg/s</span>\n<span class=\"m\">1</span>   <span class=\"m\">259</span>     <span class=\"m\">17</span>.801911   <span class=\"m\">68</span>.733246   \n<span class=\"m\">2</span>   <span class=\"m\">517</span>     <span class=\"m\">37</span>.872683   <span class=\"m\">73</span>.254707   \n<span class=\"m\">3</span>   <span class=\"m\">1006</span>        <span class=\"m\">71</span>.211156   <span class=\"m\">70</span>.786437   \n<span class=\"m\">4</span>   <span class=\"m\">2014</span>        <span class=\"m\">148</span>.920438  <span class=\"m\">73</span>.942621   \n<span class=\"m\">5</span>   <span class=\"m\">4014</span>        <span class=\"m\">327</span>.139364  <span class=\"m\">81</span>.499593   \n<span class=\"m\">6</span>   <span class=\"m\">8013</span>        <span class=\"m\">589</span>.104543  <span class=\"m\">73</span>.518600   \n<span class=\"m\">7</span>   <span class=\"m\">16012</span>       <span class=\"m\">1293</span>.689909 <span class=\"m\">80</span>.795023   \n<span class=\"m\">8</span>   <span class=\"m\">32013</span>       <span class=\"m\">2482</span>.590151 <span class=\"m\">77</span>.549438   \n<span class=\"m\">9</span>   <span class=\"m\">64014</span>       <span class=\"m\">3812</span>.626563 <span class=\"m\">59</span>.559261   \n<span class=\"m\">10</span>  <span class=\"m\">128014</span>      <span class=\"m\">5011</span>.509552 <span class=\"m\">39</span>.148137   \n<span class=\"m\">11</span>  <span class=\"m\">256004</span>      <span class=\"m\">7691</span>.965627 <span class=\"m\">30</span>.046271   \n<span class=\"m\">12</span>  <span class=\"m\">512004</span>      <span class=\"m\">9598</span>.875141 <span class=\"m\">18</span>.747657   \n<span class=\"m\">13</span>  <span class=\"m\">1000004</span>     <span class=\"m\">6189</span>.943857 <span class=\"m\">6</span>.189919    \n<span class=\"m\">14</span>  <span class=\"m\">2000023</span>     <span class=\"m\">4343</span>.485390 <span class=\"m\">2</span>.171718    \n<span class=\"m\">15</span>  <span class=\"m\">4000005</span>     <span class=\"m\">2911</span>.938715 <span class=\"m\">0</span>.727984    \n</pre></div>\n\n\n<p>I compiled <a href=\"#!/ignitionrobotics/ign-transport/commits/77fc275d7220\" rel=\"nofollow\" class=\"ap-connect-link\">77fc275d7220</a> in release mode (also ign-msgs1 in release mode). What do other people see for their large message throughput?</p>", "type": "rendered"}, "created_on": "2018-01-04T20:44:29.796372+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2018-01-04T20:44:29.798960+00:00", "type": "pullrequest_comment", "id": 53017856}