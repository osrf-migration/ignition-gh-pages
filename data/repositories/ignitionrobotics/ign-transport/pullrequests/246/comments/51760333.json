{"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/246/comments/51760333.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/246/_/diff#comment-51760333"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 246, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/246.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/246"}}, "title": "Record proof of concept (do not merge)"}, "content": {"raw": "Playback proof of concept turned out to be pretty easy, and didn't reveal anything we didn't already  know.  Record logs all ignition transport topics being published. Playback plays back all topics that were recorded. I'll leave this open a day or two for any comments, then decline the PR when that settles down.\n\nAFAIK the last technical hurdle is a raw_bytes subscriber and publisher. Without those custom messages cannot be logged (@mxgrey please correct if I misunderstood) (see pull request #249).\n\nBuild\n```\ncmake -DCMAKE_BUILD_TYPE=Debug  -DCMAKE_INSTALL_PREFIX=path/to/install path/to/src/ign-transport/tools/record/\nmake && make install\n```\n\nRecord \n```\n# Launch something that publishes messages\n./install/bin/talker\n# Record prototype assumes a brand new database, so make sure the file doesn't exist\nrm -rf /tmp/test.db\n# Record topics\n./install/bin/record /tmp/test.db\n```\n\n\nPlayback\n```\n# playback recorded messages\n./tools/record/playback /tmp/test.db\n# observe the published messages\nign topic --echo --topic /some/float\n```\n", "markup": "markdown", "html": "<p>Playback proof of concept turned out to be pretty easy, and didn't reveal anything we didn't already  know.  Record logs all ignition transport topics being published. Playback plays back all topics that were recorded. I'll leave this open a day or two for any comments, then decline the PR when that settles down.</p>\n<p>AFAIK the last technical hurdle is a raw_bytes subscriber and publisher. Without those custom messages cannot be logged (@mxgrey please correct if I misunderstood) (see <a href=\"#!/ignitionrobotics/ign-transport/pull-requests/249/wip-subscribe-and-publish-raw-serialized\" rel=\"nofollow\" class=\"ap-connect-link\">pull request #249</a>).</p>\n<p>Build</p>\n<div class=\"codehilite\"><pre><span></span>cmake -DCMAKE_BUILD_TYPE=Debug  -DCMAKE_INSTALL_PREFIX=path/to/install path/to/src/ign-transport/tools/record/\nmake &amp;&amp; make install\n</pre></div>\n\n\n<p>Record </p>\n<div class=\"codehilite\"><pre><span></span># Launch something that publishes messages\n./install/bin/talker\n# Record prototype assumes a brand new database, so make sure the file doesn&#39;t exist\nrm -rf /tmp/test.db\n# Record topics\n./install/bin/record /tmp/test.db\n</pre></div>\n\n\n<p>Playback</p>\n<div class=\"codehilite\"><pre><span></span># playback recorded messages\n./tools/record/playback /tmp/test.db\n# observe the published messages\nign topic --echo --topic /some/float\n</pre></div>", "type": "rendered"}, "created_on": "2017-12-12T19:18:13.761845+00:00", "user": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}, "updated_on": "2017-12-12T19:18:13.777568+00:00", "type": "pullrequest_comment", "id": 51760333}