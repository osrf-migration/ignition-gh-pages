{"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/252/comments/52300685.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-transport/diff/ignitionrobotics/ign-transport:3a56fb3c1f6a..efad1de04a1a?path=log%2Fsql%2F0.1.0.sql"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/252/_/diff#comment-52300685"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 252, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-transport/pullrequests/252.json"}, "html": {"href": "#!/ignitionrobotics/ign-transport/pull-requests/252"}}, "title": "ignition tools record/playback"}, "content": {"raw": "If there's no objections, I plan on replacing `time_recv_sec` and `time_recv_nano` with one column `time_recv` which is in nanoseconds since UTC. SQLite3 can store 8 byte signed integers, which means the nanoseconds time column should be fine for about 240 years from now.\n\nSelecting all messages after a time goes from \n\n```SQL\nSELECT * FROM messages WHERE (time_recv_sec > 1513379720 OR (time_recv_sec == 1513379720 AND time_recv_nano > 352233612)) ORDER BY time_recv_sec, time_recv_nano;\n```\n\nto\n\n```SQL\nSELECT * FROM messages WHERE time_recv > 1513379720352233612 ORDER BY time_recv;\n```", "markup": "markdown", "html": "<p>If there's no objections, I plan on replacing <code>time_recv_sec</code> and <code>time_recv_nano</code> with one column <code>time_recv</code> which is in nanoseconds since UTC. SQLite3 can store 8 byte signed integers, which means the nanoseconds time column should be fine for about 240 years from now.</p>\n<p>Selecting all messages after a time goes from </p>\n<div class=\"codehilite language-SQL\"><pre><span></span><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">messages</span> <span class=\"k\">WHERE</span> <span class=\"p\">(</span><span class=\"n\">time_recv_sec</span> <span class=\"o\">&gt;</span> <span class=\"mi\">1513379720</span> <span class=\"k\">OR</span> <span class=\"p\">(</span><span class=\"n\">time_recv_sec</span> <span class=\"o\">==</span> <span class=\"mi\">1513379720</span> <span class=\"k\">AND</span> <span class=\"n\">time_recv_nano</span> <span class=\"o\">&gt;</span> <span class=\"mi\">352233612</span><span class=\"p\">))</span> <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">time_recv_sec</span><span class=\"p\">,</span> <span class=\"n\">time_recv_nano</span><span class=\"p\">;</span>\n</pre></div>\n\n\n<p>to</p>\n<div class=\"codehilite language-SQL\"><pre><span></span><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">messages</span> <span class=\"k\">WHERE</span> <span class=\"n\">time_recv</span> <span class=\"o\">&gt;</span> <span class=\"mi\">1513379720352233612</span> <span class=\"k\">ORDER</span> <span class=\"k\">BY</span> <span class=\"n\">time_recv</span><span class=\"p\">;</span>\n</pre></div>", "type": "rendered"}, "created_on": "2017-12-19T21:51:13.362151+00:00", "user": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}, "inline": {"to": 73, "from": null, "outdated": true, "path": "log/sql/0.1.0.sql"}, "updated_on": "2017-12-19T21:51:27.577923+00:00", "type": "pullrequest_comment", "id": 52300685}