{"priority": "major", "kind": "enhancement", "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-tools.json"}, "html": {"href": "#!/ignitionrobotics/ign-tools"}, "avatar": {"href": "data/bytebucket.org/ravatar/{1d3755e4-eb8f-4c81-9519-830fae2fbba8}ts=ruby"}}, "type": "repository", "name": "ign-tools", "full_name": "ignitionrobotics/ign-tools", "uuid": "{1d3755e4-eb8f-4c81-9519-830fae2fbba8}"}, "links": {"attachments": {"href": "data/repositories/ignitionrobotics/ign-tools/issues/6/attachments_page=1.json"}, "self": {"href": "data/repositories/ignitionrobotics/ign-tools/issues/6.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-tools/issues/6/watch"}, "comments": {"href": "data/repositories/ignitionrobotics/ign-tools/issues/6/comments_page=1.json"}, "html": {"href": "#!/ignitionrobotics/ign-tools/issues/6/ign-tools-additional-commands-should"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-tools/issues/6/vote"}}, "reporter": {"display_name": "Silvio Traversaro", "uuid": "{34f404cb-5642-4f27-a032-e04c7143d776}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D"}, "html": {"href": "https://bitbucket.org/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6/578caaa1-056c-45a2-8bf9-bee94c3bebef/128"}}, "nickname": "traversaro", "type": "user", "account_id": "557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6"}, "title": "ign-tools additional commands should support relocatable install", "component": null, "votes": 0, "watches": 1, "content": {"raw": "# Summary\r\n\r\nCurrently the `.yml` files used by downstream projects contains the `library_path` field that contain an hardcoded location of the ruby script as it is in the build machine, see for example: \r\n~~~\r\n--- # Subcommands available inside ignition-transport.\r\nformat: 1.0.0\r\nlibrary_name: ignition-msgs\r\nlibrary_version: 1.0.0\r\nlibrary_path: E:/superinstaller/vcpkg/packages/ignition-msgs1_x64-windows/lib/ruby/ignition/cmdmsgs1\r\ncommands:\r\n    - msg   : Print information about messages.\r\n---\r\n~~~\r\nIdeally, ign-tools it should be able to encode the location of the ruby script relativly to the location of the `.yml` file. \r\n\r\n# Motivation\r\n\r\nOn a Windows system, it may occur that the installation location in the target system is different from the one of the build machine. \r\n\r\n# Describe alternatives you've considered\r\n\r\nAlways forcing users to install binary version of ignition libraries in the same prefix. \r\nAlternativly, the `.yml` could provide some sort of \"installation script\" that would be run when installing them on a new machine, but in my experience such solution are more error-prone that a pure relocatable package.\r\n\r\n# Additional context\r\n\r\nA nice description of the problem of the relocatable install (but in CMake context) can  be found  at https://cmake.org/cmake/help/v3.14/manual/cmake-packages.7.html#creating-relocatable-packages .\r\n\r\ncc @seanyen-msft", "markup": "markdown", "html": "<h1 id=\"markdown-header-summary\">Summary</h1>\n<p>Currently the <code>.yml</code> files used by downstream projects contains the <code>library_path</code> field that contain an hardcoded location of the ruby script as it is in the build machine, see for example: </p>\n<div class=\"codehilite\"><pre><span></span><span class=\"gd\">--- # Subcommands available inside ignition-transport.</span>\nformat: 1.0.0\nlibrary_name: ignition-msgs\nlibrary_version: 1.0.0\nlibrary_path: E:/superinstaller/vcpkg/packages/ignition-msgs1_x64-windows/lib/ruby/ignition/cmdmsgs1\ncommands:\n    - msg   : Print information about messages.\n<span class=\"gd\">---</span>\n</pre></div>\n\n\n<p>Ideally, ign-tools it should be able to encode the location of the ruby script relativly to the location of the <code>.yml</code> file. </p>\n<h1 id=\"markdown-header-motivation\">Motivation</h1>\n<p>On a Windows system, it may occur that the installation location in the target system is different from the one of the build machine. </p>\n<h1 id=\"markdown-header-describe-alternatives-youve-considered\">Describe alternatives you've considered</h1>\n<p>Always forcing users to install binary version of ignition libraries in the same prefix. \nAlternativly, the <code>.yml</code> could provide some sort of \"installation script\" that would be run when installing them on a new machine, but in my experience such solution are more error-prone that a pure relocatable package.</p>\n<h1 id=\"markdown-header-additional-context\">Additional context</h1>\n<p>A nice description of the problem of the relocatable install (but in CMake context) can  be found  at <a href=\"https://cmake.org/cmake/help/v3.14/manual/cmake-packages.7.html#creating-relocatable-packages\" rel=\"nofollow\" class=\"ap-connect-link\">https://cmake.org/cmake/help/v3.14/manual/cmake-packages.7.html#creating-relocatable-packages</a> .</p>\n<p>cc @seanyen-msft</p>", "type": "rendered"}, "assignee": null, "state": "new", "version": null, "edited_on": null, "created_on": "2019-04-06T07:08:50.477542+00:00", "milestone": null, "updated_on": "2019-04-06T07:11:25.017410+00:00", "type": "issue", "id": 6}