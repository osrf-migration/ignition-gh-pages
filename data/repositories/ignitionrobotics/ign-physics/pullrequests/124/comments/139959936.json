{"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics/pullrequests/124/comments/139959936.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics/pull-requests/124/_/diff#comment-139959936"}}, "parent": {"id": 139946927, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics/pullrequests/124/comments/139946927.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics/pull-requests/124/_/diff#comment-139946927"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 124, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics/pullrequests/124.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics/pull-requests/124"}}, "title": "[WIP][Citadel] Trivial physics engine"}, "content": {"raw": "I think there may have been some confusion about the motivation of the `dartsim/include` directory. The only reason it was created was to illustrate how it\u2019s possible for physics engines to extend the physics plugin features beyond the feature set that\u2019s explicitly declared upstream in `ignition-physics`. There\u2019s actually no need at all for it to exist, nor do we need `tpesim/include/ignition/physics/tpesim/World.hh` to exist. All the headers and source files for the TPE plugin can just go into a single source directory.\n\nI\u2019m seeing that the TPE was implemented as its own library, and then the plugin was made to be a light wrapper around it. I wasn\u2019t expecting that \\(I figured the TPE would be trivial enough to just implement the whole thing inside the plugin itself\\), but I think it\u2019s a good approach.\n\nPersonally the structure that I\u2019d recommend would be:\n\n```\ntpe/CMakeLists.txt # just does add_subdirectory(lib) add_subdirectory(plugin)\ntpe/lib/CMakeLists.txt\ntpe/lib/src/*\ntpe/lib/include/ignition/physics/tpe/*\ntpe/plugin/CMakeLists.txt\ntpe/plugin/src/*\n```\n\nFor line \\(4\\) I\u2019m concerned that `/usr/include/tpe` would be at risk for a name collision, so I\u2019d recommend nesting it inside of `/usr/include/ignition/physics/tpe`.\n\nThere\u2019s no need for a `tpe/plugin/include` because I can\u2019t imagine that the TPE would want to offer any features beyond what\u2019s pre-defined in `ignition-physics`.", "markup": "markdown", "html": "<p>I think there may have been some confusion about the motivation of the <code>dartsim/include</code> directory. The only reason it was created was to illustrate how it\u2019s possible for physics engines to extend the physics plugin features beyond the feature set that\u2019s explicitly declared upstream in <code>ignition-physics</code>. There\u2019s actually no need at all for it to exist, nor do we need <code>tpesim/include/ignition/physics/tpesim/World.hh</code> to exist. All the headers and source files for the TPE plugin can just go into a single source directory.</p>\n<p>I\u2019m seeing that the TPE was implemented as its own library, and then the plugin was made to be a light wrapper around it. I wasn\u2019t expecting that (I figured the TPE would be trivial enough to just implement the whole thing inside the plugin itself), but I think it\u2019s a good approach.</p>\n<p>Personally the structure that I\u2019d recommend would be:</p>\n<div class=\"codehilite\"><pre><span></span>tpe/CMakeLists.txt # just does add_subdirectory(lib) add_subdirectory(plugin)\ntpe/lib/CMakeLists.txt\ntpe/lib/src/*\ntpe/lib/include/ignition/physics/tpe/*\ntpe/plugin/CMakeLists.txt\ntpe/plugin/src/*\n</pre></div>\n\n\n<p>For line (4) I\u2019m concerned that <code>/usr/include/tpe</code> would be at risk for a name collision, so I\u2019d recommend nesting it inside of <code>/usr/include/ignition/physics/tpe</code>.</p>\n<p>There\u2019s no need for a <code>tpe/plugin/include</code> because I can\u2019t imagine that the TPE would want to offer any features beyond what\u2019s pre-defined in <code>ignition-physics</code>.</p>", "type": "rendered"}, "created_on": "2020-03-13T03:38:12.119965+00:00", "user": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "updated_on": "2020-03-13T03:38:12.127823+00:00", "type": "pullrequest_comment", "id": 139959936}