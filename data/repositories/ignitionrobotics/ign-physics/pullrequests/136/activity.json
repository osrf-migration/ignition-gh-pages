{"pagelen": 50, "values": [{"update": {"description": "This PR should greatly reduce the size and quantity of symbols that get generated by templates, likely by some orders of magnitude. It should also help make the size and quantity of symbols scale much much better \\(should be nearly constant \\[size\\] and linear \\[quantity\\] respectively now instead of linear \\[size\\] and squared \\[quantity\\]\\).\r\n\r\nI believe this has been the leading cause of slow compilation times, especially for GCC.\r\n\r\nI made a simple program [here](https://github.com/mxgrey/test_ign_physics) that instantiates every entity type with every existing feature in `ign-physics`, and using all headers provided by `ign-physics`. Before this PR, using gcc-8 it spent over an hour trying to compile on my XPS15 with no success. After this PR, using gcc-8 it compiles in just under 30 seconds. Clang is significantly better, compiling in 11 seconds after this PR.\r\n\r\nThere is still some cleanup to do, but I wanted to open this PR so the compilation times of `ign-gazebo` can be tested against it.", "title": "Reduce the symbol load caused by feature templates", "destination": {"commit": {"hash": "bd4ca5e3ee80", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics/commit/bd4ca5e3ee80.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics/commits/bd4ca5e3ee80"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics"}, "avatar": {"href": "data/bytebucket.org/ravatar/{63a01c4f-5625-443b-96f0-73c4005ccada}ts=c_plus_plus"}}, "type": "repository", "name": "ign-physics", "full_name": "ignitionrobotics/ign-physics", "uuid": "{63a01c4f-5625-443b-96f0-73c4005ccada}"}, "branch": {"name": "ign-physics2"}}, "reason": "Reopn on GitHub, see issue #28", "source": {"commit": {"hash": "8c1c37136d43", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics/commit/8c1c37136d43.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics/commits/8c1c37136d43"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics"}, "avatar": {"href": "data/bytebucket.org/ravatar/{63a01c4f-5625-443b-96f0-73c4005ccada}ts=c_plus_plus"}}, "type": "repository", "name": "ign-physics", "full_name": "ignitionrobotics/ign-physics", "uuid": "{63a01c4f-5625-443b-96f0-73c4005ccada}"}, "branch": {"name": "reduce_symbols"}}, "state": "DECLINED", "author": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "date": "2020-04-13T20:07:40.656795+00:00"}, "pull_request": {"type": "pullrequest", "id": 136, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics/pullrequests/136.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics/pull-requests/136"}}, "title": "Reduce the symbol load caused by feature templates"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics/pullrequests/136/comments/144893231.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics/pull-requests/136/_/diff#comment-144893231"}}, "parent": {"id": 144801015, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics/pullrequests/136/comments/144801015.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics/pull-requests/136/_/diff#comment-144801015"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 136, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics/pullrequests/136.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics/pull-requests/136"}}, "title": "Reduce the symbol load caused by feature templates"}, "content": {"raw": "Windows is happy now :slight_smile: I won't have time to digest this PR today, and tomorrow is the freeze. I also think @{557058:5de38267-b118-494c-aa76-4fab35448816} wants to take a look at this PR. So let's decline it for now and bring it back on GitHub.", "markup": "markdown", "html": "<p>Windows is happy now <img class=\"emoji\" src=\"data/pf-emoji-service--cdn.us-east-1.prod.public.atl-paas.net/standard/551c9814-1d37-4573-819d-afab3afeaf32/48x48/1f642.png\" alt=\"\ud83d\ude42\" title=\":slight_smile:\" data-emoji-short-name=\":slight_smile:\" /> I won't have time to digest this PR today, and tomorrow is the freeze. I also think <span class=\"ap-mention\" data-atlassian-id=\"557058:5de38267-b118-494c-aa76-4fab35448816\">@Steve Peters</span> wants to take a look at this PR. So let's decline it for now and bring it back on GitHub.</p>", "type": "rendered"}, "created_on": "2020-04-13T20:06:18.166911+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {}, "updated_on": "2020-04-13T20:06:18.174197+00:00", "type": "pullrequest_comment", "id": 144893231}, "pull_request": {"type": "pullrequest", "id": 136, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics/pullrequests/136.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics/pull-requests/136"}}, "title": "Reduce the symbol load caused by feature templates"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics/pullrequests/136/comments/144801015.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics/pull-requests/136/_/diff#comment-144801015"}}, "parent": {"id": 144729576, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics/pullrequests/136/comments/144729576.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics/pull-requests/136/_/diff#comment-144729576"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 136, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics/pullrequests/136.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics/pull-requests/136"}}, "title": "Reduce the symbol load caused by feature templates"}, "content": {"raw": "This change helped it to compile on my local Windows installation: 8c1c371\n\nIt seems that MSVC just wasn\u2019t parsing the template correctly :man_shrugging: ", "markup": "markdown", "html": "<p>This change helped it to compile on my local Windows installation: <a href=\"#!/ignitionrobotics/ign-physics/commits/8c1c371\" rel=\"nofollow\" class=\"ap-connect-link\">8c1c371</a></p>\n<p>It seems that MSVC just wasn\u2019t parsing the template correctly <img class=\"emoji\" src=\"data/pf-emoji-service--cdn.us-east-1.prod.public.atl-paas.net/standard/551c9814-1d37-4573-819d-afab3afeaf32/48x48/1f937-200d-2642-fe0f.png\" alt=\"\ud83e\udd37\u200d\u2642\ufe0f\" title=\":man_shrugging:\" data-emoji-short-name=\":man_shrugging:\" /> </p>", "type": "rendered"}, "created_on": "2020-04-13T09:12:41.230248+00:00", "user": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "inline": {}, "updated_on": "2020-04-13T09:12:41.234828+00:00", "type": "pullrequest_comment", "id": 144801015}, "pull_request": {"type": "pullrequest", "id": 136, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics/pullrequests/136.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics/pull-requests/136"}}, "title": "Reduce the symbol load caused by feature templates"}}, {"update": {"description": "This PR should greatly reduce the size and quantity of symbols that get generated by templates, likely by some orders of magnitude. It should also help make the size and quantity of symbols scale much much better \\(should be nearly constant \\[size\\] and linear \\[quantity\\] respectively now instead of linear \\[size\\] and squared \\[quantity\\]\\).\r\n\r\nI believe this has been the leading cause of slow compilation times, especially for GCC.\r\n\r\nI made a simple program [here](https://github.com/mxgrey/test_ign_physics) that instantiates every entity type with every existing feature in `ign-physics`, and using all headers provided by `ign-physics`. Before this PR, using gcc-8 it spent over an hour trying to compile on my XPS15 with no success. After this PR, using gcc-8 it compiles in just under 30 seconds. Clang is significantly better, compiling in 11 seconds after this PR.\r\n\r\nThere is still some cleanup to do, but I wanted to open this PR so the compilation times of `ign-gazebo` can be tested against it.", "title": "Reduce the symbol load caused by feature templates", "destination": {"commit": {"hash": "bd4ca5e3ee80", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics/commit/bd4ca5e3ee80.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics/commits/bd4ca5e3ee80"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics"}, "avatar": {"href": "data/bytebucket.org/ravatar/{63a01c4f-5625-443b-96f0-73c4005ccada}ts=c_plus_plus"}}, "type": "repository", "name": "ign-physics", "full_name": "ignitionrobotics/ign-physics", "uuid": "{63a01c4f-5625-443b-96f0-73c4005ccada}"}, "branch": {"name": "ign-physics2"}}, "reason": "", "source": {"commit": {"hash": "8c1c37136d43", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics/commit/8c1c37136d43.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics/commits/8c1c37136d43"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics"}, "avatar": {"href": "data/bytebucket.org/ravatar/{63a01c4f-5625-443b-96f0-73c4005ccada}ts=c_plus_plus"}}, "type": "repository", "name": "ign-physics", "full_name": "ignitionrobotics/ign-physics", "uuid": "{63a01c4f-5625-443b-96f0-73c4005ccada}"}, "branch": {"name": "reduce_symbols"}}, "state": "OPEN", "author": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "date": "2020-04-13T09:10:32.278723+00:00"}, "pull_request": {"type": "pullrequest", "id": 136, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics/pullrequests/136.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics/pull-requests/136"}}, "title": "Reduce the symbol load caused by feature templates"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics/pullrequests/136/comments/144729576.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics/pull-requests/136/_/diff#comment-144729576"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 136, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics/pullrequests/136.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics/pull-requests/136"}}, "title": "Reduce the symbol load caused by feature templates"}, "content": {"raw": "Windows CI is hiccuping here: `ign-physics\\include\\ignition/physics/detail/FeatureList.hh(312,14): error C2027: use of undefined type ...`\n\nhttps://build.osrfoundation.org/job/ign_physics-pr-win/599/consoleFull#console-section-8", "markup": "markdown", "html": "<p>Windows CI is hiccuping here: <code>ign-physics\\include\\ignition/physics/detail/FeatureList.hh(312,14): error C2027: use of undefined type ...</code></p>\n<p><a href=\"https://build.osrfoundation.org/job/ign_physics-pr-win/599/consoleFull#console-section-8\" rel=\"nofollow\" class=\"ap-connect-link\">https://build.osrfoundation.org/job/ign_physics-pr-win/599/consoleFull#console-section-8</a></p>", "type": "rendered"}, "created_on": "2020-04-11T01:31:36.252517+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {}, "updated_on": "2020-04-11T01:31:48.414144+00:00", "type": "pullrequest_comment", "id": 144729576}, "pull_request": {"type": "pullrequest", "id": 136, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics/pullrequests/136.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics/pull-requests/136"}}, "title": "Reduce the symbol load caused by feature templates"}}, {"update": {"description": "This PR should greatly reduce the size and quantity of symbols that get generated by templates, likely by some orders of magnitude. It should also help make the size and quantity of symbols scale much much better \\(should be nearly constant \\[size\\] and linear \\[quantity\\] respectively now instead of linear \\[size\\] and squared \\[quantity\\]\\).\r\n\r\nI believe this has been the leading cause of slow compilation times, especially for GCC.\r\n\r\nI made a simple program [here](https://github.com/mxgrey/test_ign_physics) that instantiates every entity type with every existing feature in `ign-physics`, and using all headers provided by `ign-physics`. Before this PR, using gcc-8 it spent over an hour trying to compile on my XPS15 with no success. After this PR, using gcc-8 it compiles in just under 30 seconds. Clang is significantly better, compiling in 11 seconds after this PR.\r\n\r\nThere is still some cleanup to do, but I wanted to open this PR so the compilation times of `ign-gazebo` can be tested against it.", "title": "Reduce the symbol load caused by feature templates", "destination": {"commit": {"hash": "bd4ca5e3ee80", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics/commit/bd4ca5e3ee80.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics/commits/bd4ca5e3ee80"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics"}, "avatar": {"href": "data/bytebucket.org/ravatar/{63a01c4f-5625-443b-96f0-73c4005ccada}ts=c_plus_plus"}}, "type": "repository", "name": "ign-physics", "full_name": "ignitionrobotics/ign-physics", "uuid": "{63a01c4f-5625-443b-96f0-73c4005ccada}"}, "branch": {"name": "ign-physics2"}}, "reason": "", "source": {"commit": {"hash": "1ade8880741b", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics/commit/1ade8880741b.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics/commits/1ade8880741b"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics"}, "avatar": {"href": "data/bytebucket.org/ravatar/{63a01c4f-5625-443b-96f0-73c4005ccada}ts=c_plus_plus"}}, "type": "repository", "name": "ign-physics", "full_name": "ignitionrobotics/ign-physics", "uuid": "{63a01c4f-5625-443b-96f0-73c4005ccada}"}, "branch": {"name": "reduce_symbols"}}, "state": "OPEN", "author": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "date": "2020-04-10T00:39:11.908157+00:00"}, "pull_request": {"type": "pullrequest", "id": 136, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics/pullrequests/136.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics/pull-requests/136"}}, "title": "Reduce the symbol load caused by feature templates"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics/pullrequests/136/comments/144568285.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics/pull-requests/136/_/diff#comment-144568285"}}, "parent": {"id": 144408493, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics/pullrequests/136/comments/144408493.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics/pull-requests/136/_/diff#comment-144408493"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 136, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics/pullrequests/136.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics/pull-requests/136"}}, "title": "Reduce the symbol load caused by feature templates"}, "content": {"raw": "> I don\u2019t think anyone is doing that currently, so these changes should be okay\n\nIt's always tricky to make this kind of assumption about open source software. But I'd say we can afford the risk at this time. Thanks for the analysis.", "markup": "markdown", "html": "<blockquote>\n<p>I don\u2019t think anyone is doing that currently, so these changes should be okay</p>\n</blockquote>\n<p>It's always tricky to make this kind of assumption about open source software. But I'd say we can afford the risk at this time. Thanks for the analysis.</p>", "type": "rendered"}, "created_on": "2020-04-09T17:59:13.721757+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2020-04-09T17:59:13.727748+00:00", "type": "pullrequest_comment", "id": 144568285}, "pull_request": {"type": "pullrequest", "id": 136, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics/pullrequests/136.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics/pull-requests/136"}}, "title": "Reduce the symbol load caused by feature templates"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics/pullrequests/136/comments/144568026.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics/pull-requests/136/_/diff#comment-144568026"}}, "parent": {"id": 144533381, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics/pullrequests/136/comments/144533381.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics/pull-requests/136/_/diff#comment-144533381"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 136, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics/pullrequests/136.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics/pull-requests/136"}}, "title": "Reduce the symbol load caused by feature templates"}, "content": {"raw": "> It seems that the current state of the compile times is good enough\n\nAs far as I'm concerned, it's excellent\n\nThanks! :woman_bowing: ", "markup": "markdown", "html": "<blockquote>\n<p>It seems that the current state of the compile times is good enough</p>\n</blockquote>\n<p>As far as I'm concerned, it's excellent</p>\n<p>Thanks! <img class=\"emoji\" src=\"data/pf-emoji-service--cdn.us-east-1.prod.public.atl-paas.net/standard/551c9814-1d37-4573-819d-afab3afeaf32/48x48/1f647-200d-2640-fe0f.png\" alt=\"\ud83d\ude47\u200d\u2640\ufe0f\" title=\":woman_bowing:\" data-emoji-short-name=\":woman_bowing:\" /> </p>", "type": "rendered"}, "created_on": "2020-04-09T17:57:34.374091+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2020-04-09T17:57:34.380745+00:00", "type": "pullrequest_comment", "id": 144568026}, "pull_request": {"type": "pullrequest", "id": 136, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics/pullrequests/136.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics/pull-requests/136"}}, "title": "Reduce the symbol load caused by feature templates"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics/pullrequests/136/comments/144533381.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics/pull-requests/136/_/diff#comment-144533381"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 136, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics/pullrequests/136.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics/pull-requests/136"}}, "title": "Reduce the symbol load caused by feature templates"}, "content": {"raw": "I tried really hard today to push the compile times down even further. The attempt can be found in `reduce_inspect_features_symbols`\\` and `reduce_determine_plugin_symbols`. It seems I still have something to learn about exactly what influences compile times because both of those attempts only made the compile times worse :cold_sweat:   \n  \nIt seems that the current state of the compile times is good enough, so I think I\u2019ll stop trying to push it down further now. I can revisit the matter later if we reach something like hundreds of features and the compile times become a problem again.\n\nI think I\u2019ve addressed all the code check complaints. There were actually unit tests already in place to cover most of what was touched by this PR. I added a little more to `FeatureList_TEST` to cover the new templates that were introduced.\n\nTomorrow is a holiday in Singapore, but if there is anything that needs my attention I\u2019m happy to stab at this some more to get it in before the code freeze.", "markup": "markdown", "html": "<p>I tried really hard today to push the compile times down even further. The attempt can be found in <code>reduce_inspect_features_symbols</code>` and <code>reduce_determine_plugin_symbols</code>. It seems I still have something to learn about exactly what influences compile times because both of those attempts only made the compile times worse <img class=\"emoji\" src=\"data/pf-emoji-service--cdn.us-east-1.prod.public.atl-paas.net/standard/551c9814-1d37-4573-819d-afab3afeaf32/48x48/1f630.png\" alt=\"\ud83d\ude30\" title=\":cold_sweat:\" data-emoji-short-name=\":cold_sweat:\" />   </p>\n<p>It seems that the current state of the compile times is good enough, so I think I\u2019ll stop trying to push it down further now. I can revisit the matter later if we reach something like hundreds of features and the compile times become a problem again.</p>\n<p>I think I\u2019ve addressed all the code check complaints. There were actually unit tests already in place to cover most of what was touched by this PR. I added a little more to <code>FeatureList_TEST</code> to cover the new templates that were introduced.</p>\n<p>Tomorrow is a holiday in Singapore, but if there is anything that needs my attention I\u2019m happy to stab at this some more to get it in before the code freeze.</p>", "type": "rendered"}, "created_on": "2020-04-09T14:51:46.487939+00:00", "user": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "updated_on": "2020-04-09T14:51:46.493178+00:00", "type": "pullrequest_comment", "id": 144533381}, "pull_request": {"type": "pullrequest", "id": 136, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics/pullrequests/136.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics/pull-requests/136"}}, "title": "Reduce the symbol load caused by feature templates"}}, {"update": {"description": "This PR should greatly reduce the size and quantity of symbols that get generated by templates, likely by some orders of magnitude. It should also help make the size and quantity of symbols scale much much better \\(should be nearly constant \\[size\\] and linear \\[quantity\\] respectively now instead of linear \\[size\\] and squared \\[quantity\\]\\).\r\n\r\nI believe this has been the leading cause of slow compilation times, especially for GCC.\r\n\r\nI made a simple program [here](https://github.com/mxgrey/test_ign_physics) that instantiates every entity type with every existing feature in `ign-physics`, and using all headers provided by `ign-physics`. Before this PR, using gcc-8 it spent over an hour trying to compile on my XPS15 with no success. After this PR, using gcc-8 it compiles in just under 30 seconds. Clang is significantly better, compiling in 11 seconds after this PR.\r\n\r\nThere is still some cleanup to do, but I wanted to open this PR so the compilation times of `ign-gazebo` can be tested against it.", "title": "Reduce the symbol load caused by feature templates", "destination": {"commit": {"hash": "bd4ca5e3ee80", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics/commit/bd4ca5e3ee80.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics/commits/bd4ca5e3ee80"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics"}, "avatar": {"href": "data/bytebucket.org/ravatar/{63a01c4f-5625-443b-96f0-73c4005ccada}ts=c_plus_plus"}}, "type": "repository", "name": "ign-physics", "full_name": "ignitionrobotics/ign-physics", "uuid": "{63a01c4f-5625-443b-96f0-73c4005ccada}"}, "branch": {"name": "ign-physics2"}}, "reason": "", "source": {"commit": {"hash": "1ade8880741b", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics/commit/1ade8880741b.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics/commits/1ade8880741b"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics"}, "avatar": {"href": "data/bytebucket.org/ravatar/{63a01c4f-5625-443b-96f0-73c4005ccada}ts=c_plus_plus"}}, "type": "repository", "name": "ign-physics", "full_name": "ignitionrobotics/ign-physics", "uuid": "{63a01c4f-5625-443b-96f0-73c4005ccada}"}, "branch": {"name": "reduce_symbols"}}, "state": "OPEN", "author": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "date": "2020-04-09T14:47:33.658498+00:00"}, "pull_request": {"type": "pullrequest", "id": 136, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics/pullrequests/136.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics/pull-requests/136"}}, "title": "Reduce the symbol load caused by feature templates"}}, {"update": {"description": "This PR should greatly reduce the size and quantity of symbols that get generated by templates, likely by some orders of magnitude. It should also help make the size and quantity of symbols scale much much better \\(should be nearly constant \\[size\\] and linear \\[quantity\\] respectively now instead of linear \\[size\\] and squared \\[quantity\\]\\).\r\n\r\nI believe this has been the leading cause of slow compilation times, especially for GCC.\r\n\r\nI made a simple program [here](https://github.com/mxgrey/test_ign_physics) that instantiates every entity type with every existing feature in `ign-physics`, and using all headers provided by `ign-physics`. Before this PR, using gcc-8 it spent over an hour trying to compile on my XPS15 with no success. After this PR, using gcc-8 it compiles in just under 30 seconds. Clang is significantly better, compiling in 11 seconds after this PR.\r\n\r\nThere is still some cleanup to do, but I wanted to open this PR so the compilation times of `ign-gazebo` can be tested against it.", "title": "Reduce the symbol load caused by feature templates", "destination": {"commit": {"hash": "bd4ca5e3ee80", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics/commit/bd4ca5e3ee80.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics/commits/bd4ca5e3ee80"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics"}, "avatar": {"href": "data/bytebucket.org/ravatar/{63a01c4f-5625-443b-96f0-73c4005ccada}ts=c_plus_plus"}}, "type": "repository", "name": "ign-physics", "full_name": "ignitionrobotics/ign-physics", "uuid": "{63a01c4f-5625-443b-96f0-73c4005ccada}"}, "branch": {"name": "ign-physics2"}}, "reason": "", "source": {"commit": {"hash": "f0500f3acc3e", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics/commit/f0500f3acc3e.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics/commits/f0500f3acc3e"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics"}, "avatar": {"href": "data/bytebucket.org/ravatar/{63a01c4f-5625-443b-96f0-73c4005ccada}ts=c_plus_plus"}}, "type": "repository", "name": "ign-physics", "full_name": "ignitionrobotics/ign-physics", "uuid": "{63a01c4f-5625-443b-96f0-73c4005ccada}"}, "branch": {"name": "reduce_symbols"}}, "state": "OPEN", "author": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "date": "2020-04-09T14:25:05.737991+00:00"}, "pull_request": {"type": "pullrequest", "id": 136, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics/pullrequests/136.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics/pull-requests/136"}}, "title": "Reduce the symbol load caused by feature templates"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics/pullrequests/136/comments/144408493.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics/pull-requests/136/_/diff#comment-144408493"}}, "parent": {"id": 144395420, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics/pullrequests/136/comments/144395420.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics/pull-requests/136/_/diff#comment-144395420"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 136, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics/pullrequests/136.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics/pull-requests/136"}}, "title": "Reduce the symbol load caused by feature templates"}, "content": {"raw": "On the topic of ABI, I don\u2019t think a typical ABI checker is going to catch the full picture here. \n\nThe ABI changes should be totally fine for libraries that are simply using `ignition-physics` internally, but I believe there could easily be ABI issues for any libraries that are passing `ignition-physics` entity types \\(e.g. `Link3d<SomeFeautreList>`, `Joint3d<SomeFeatureList>`\\) between library boundaries \\(i.e. using these object types in their public API\\).\n\nI don\u2019t think anyone is doing that currently, so these changes should be okay. But if that\u2019s not the case, then there _could_ be some cause for concern. Then again it\u2019s entirely possible that it still would not be a concern at all, because it\u2019s possible that the compiler is producing an object with the exact same memory footprint despite the massive changes in inheritance hierarchy; I honestly don\u2019t know.", "markup": "markdown", "html": "<p>On the topic of ABI, I don\u2019t think a typical ABI checker is going to catch the full picture here. </p>\n<p>The ABI changes should be totally fine for libraries that are simply using <code>ignition-physics</code> internally, but I believe there could easily be ABI issues for any libraries that are passing <code>ignition-physics</code> entity types (e.g. <code>Link3d&lt;SomeFeautreList&gt;</code>, <code>Joint3d&lt;SomeFeatureList&gt;</code>) between library boundaries (i.e. using these object types in their public API).</p>\n<p>I don\u2019t think anyone is doing that currently, so these changes should be okay. But if that\u2019s not the case, then there <em>could</em> be some cause for concern. Then again it\u2019s entirely possible that it still would not be a concern at all, because it\u2019s possible that the compiler is producing an object with the exact same memory footprint despite the massive changes in inheritance hierarchy; I honestly don\u2019t know.</p>", "type": "rendered"}, "created_on": "2020-04-09T04:05:41.526064+00:00", "user": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "updated_on": "2020-04-09T04:05:41.532601+00:00", "type": "pullrequest_comment", "id": 144408493}, "pull_request": {"type": "pullrequest", "id": 136, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics/pullrequests/136.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics/pull-requests/136"}}, "title": "Reduce the symbol load caused by feature templates"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics/pullrequests/136/comments/144407998.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics/pull-requests/136/_/diff#comment-144407998"}}, "parent": {"id": 144395420, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics/pullrequests/136/comments/144395420.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics/pull-requests/136/_/diff#comment-144395420"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 136, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics/pullrequests/136.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics/pull-requests/136"}}, "title": "Reduce the symbol load caused by feature templates"}, "content": {"raw": "Unit tests on the structs are kind of tricky, since they\u2019re only used during compile-time. The fact that everything is compiling indicates that they\u2019re working as intended. But I\u2019ll try to think through some reasonable unit tests \\(which will probably all be compilation tests\\).", "markup": "markdown", "html": "<p>Unit tests on the structs are kind of tricky, since they\u2019re only used during compile-time. The fact that everything is compiling indicates that they\u2019re working as intended. But I\u2019ll try to think through some reasonable unit tests (which will probably all be compilation tests).</p>", "type": "rendered"}, "created_on": "2020-04-09T03:59:02.430495+00:00", "user": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "updated_on": "2020-04-09T03:59:02.435916+00:00", "type": "pullrequest_comment", "id": 144407998}, "pull_request": {"type": "pullrequest", "id": 136, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics/pullrequests/136.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics/pull-requests/136"}}, "title": "Reduce the symbol load caused by feature templates"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics/pullrequests/136/comments/144395420.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics/pull-requests/136/_/diff#comment-144395420"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 136, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics/pullrequests/136.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics/pull-requests/136"}}, "title": "Reduce the symbol load caused by feature templates"}, "content": {"raw": "ABI checker is happy: https://build.osrfoundation.org/job/ignition_physics-abichecker-any_to_any-ubuntu_auto-amd64/285/API_5fABI_20report/\n\n> There is still some cleanup to do\n\nI can give another review once you've tackled this. My main ask right now would be documentation and unit testing for the new structs.\n\nNote that this repository will be frozen from April 14th. If you think you can't get to this soon, I suggest you decline the PR and come back to it on GitHub. ", "markup": "markdown", "html": "<p>ABI checker is happy: <a href=\"https://build.osrfoundation.org/job/ignition_physics-abichecker-any_to_any-ubuntu_auto-amd64/285/API_5fABI_20report/\" rel=\"nofollow\" class=\"ap-connect-link\">https://build.osrfoundation.org/job/ignition_physics-abichecker-any_to_any-ubuntu_auto-amd64/285/API_5fABI_20report/</a></p>\n<blockquote>\n<p>There is still some cleanup to do</p>\n</blockquote>\n<p>I can give another review once you've tackled this. My main ask right now would be documentation and unit testing for the new structs.</p>\n<p>Note that this repository will be frozen from April 14th. If you think you can't get to this soon, I suggest you decline the PR and come back to it on GitHub. </p>", "type": "rendered"}, "created_on": "2020-04-09T00:45:31.022170+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2020-04-09T00:45:31.024624+00:00", "type": "pullrequest_comment", "id": 144395420}, "pull_request": {"type": "pullrequest", "id": 136, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics/pullrequests/136.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics/pull-requests/136"}}, "title": "Reduce the symbol load caused by feature templates"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics/pullrequests/136/comments/144395088.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics/pull-requests/136/_/diff#comment-144395088"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 136, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics/pullrequests/136.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics/pull-requests/136"}}, "title": "Reduce the symbol load caused by feature templates"}, "content": {"raw": "> in just under 30 seconds\n\n:scream: \n\nWith this branch, the `ign-gazebo` branch which was taking over 1h to compile for me, took only 3min 36s :tada: ", "markup": "markdown", "html": "<blockquote>\n<p>in just under 30 seconds</p>\n</blockquote>\n<p><img class=\"emoji\" src=\"data/pf-emoji-service--cdn.us-east-1.prod.public.atl-paas.net/standard/551c9814-1d37-4573-819d-afab3afeaf32/48x48/1f631.png\" alt=\"\ud83d\ude31\" title=\":scream:\" data-emoji-short-name=\":scream:\" /> </p>\n<p>With this branch, the <code>ign-gazebo</code> branch which was taking over 1h to compile for me, took only 3min 36s <img class=\"emoji\" src=\"data/pf-emoji-service--cdn.us-east-1.prod.public.atl-paas.net/standard/551c9814-1d37-4573-819d-afab3afeaf32/48x48/1f389.png\" alt=\"\ud83c\udf89\" title=\":tada:\" data-emoji-short-name=\":tada:\" /> </p>", "type": "rendered"}, "created_on": "2020-04-09T00:40:10.784581+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2020-04-09T00:40:10.787006+00:00", "type": "pullrequest_comment", "id": 144395088}, "pull_request": {"type": "pullrequest", "id": 136, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics/pullrequests/136.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics/pull-requests/136"}}, "title": "Reduce the symbol load caused by feature templates"}}, {"update": {"description": "This PR should greatly reduce the size and quantity of symbols that get generated by templates, likely by some orders of magnitude. It should also help make the size and quantity of symbols scale much much better \\(should be nearly constant \\[size\\] and linear \\[quantity\\] respectively now instead of linear \\[size\\] and squared \\[quantity\\]\\).\r\n\r\nI believe this has been the leading cause of slow compilation times, especially for GCC.\r\n\r\nI made a simple program [here](https://github.com/mxgrey/test_ign_physics) that instantiates every entity type with every existing feature in `ign-physics`, and using all headers provided by `ign-physics`. Before this PR, using gcc-8 it spent over an hour trying to compile on my XPS15 with no success. After this PR, using gcc-8 it compiles in just under 30 seconds. Clang is significantly better, compiling in 11 seconds after this PR.\r\n\r\nThere is still some cleanup to do, but I wanted to open this PR so the compilation times of `ign-gazebo` can be tested against it.", "title": "Reduce the symbol load caused by feature templates", "destination": {"commit": {"hash": "bd4ca5e3ee80", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics/commit/bd4ca5e3ee80.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics/commits/bd4ca5e3ee80"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics"}, "avatar": {"href": "data/bytebucket.org/ravatar/{63a01c4f-5625-443b-96f0-73c4005ccada}ts=c_plus_plus"}}, "type": "repository", "name": "ign-physics", "full_name": "ignitionrobotics/ign-physics", "uuid": "{63a01c4f-5625-443b-96f0-73c4005ccada}"}, "branch": {"name": "ign-physics2"}}, "reason": "", "source": {"commit": {"hash": "0c77d5d1f137", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics/commit/0c77d5d1f137.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics/commits/0c77d5d1f137"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics"}, "avatar": {"href": "data/bytebucket.org/ravatar/{63a01c4f-5625-443b-96f0-73c4005ccada}ts=c_plus_plus"}}, "type": "repository", "name": "ign-physics", "full_name": "ignitionrobotics/ign-physics", "uuid": "{63a01c4f-5625-443b-96f0-73c4005ccada}"}, "branch": {"name": "reduce_symbols"}}, "state": "OPEN", "author": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "date": "2020-04-08T11:41:10.107079+00:00"}, "pull_request": {"type": "pullrequest", "id": 136, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics/pullrequests/136.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics/pull-requests/136"}}, "title": "Reduce the symbol load caused by feature templates"}}, {"update": {"description": "This PR should greatly reduce the size and quantity of symbols that get generated by templates, likely by some orders of magnitude. It should also help make the size and quantity of symbols scale much much better \\(should be nearly constant \\[size\\] and linear \\[quantity\\] respectively now instead of linear \\[size\\] and squared \\[quantity\\]\\).\r\n\r\nI believe this has been the leading cause of slow compilation times, especially for GCC.\r\n\r\nI made a simple program [here](https://github.com/mxgrey/test_ign_physics) that instantiates every entity type with every existing feature in `ign-physics`, and using all headers provided by `ign-physics`. Before this PR, using gcc-8 it spent over an hour trying to compile on my XPS15 with no success. After this PR, using gcc-8 it compiles in just under 30 seconds. Clang is significantly better, compiling in 11 seconds after this PR.\r\n\r\nThere is still some cleanup to do, but I wanted to open this PR so the compilation times of `ign-gazebo` can be tested against it.", "title": "Reduce the symbol load caused by feature templates", "destination": {"commit": {"hash": "bd4ca5e3ee80", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics/commit/bd4ca5e3ee80.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics/commits/bd4ca5e3ee80"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics"}, "avatar": {"href": "data/bytebucket.org/ravatar/{63a01c4f-5625-443b-96f0-73c4005ccada}ts=c_plus_plus"}}, "type": "repository", "name": "ign-physics", "full_name": "ignitionrobotics/ign-physics", "uuid": "{63a01c4f-5625-443b-96f0-73c4005ccada}"}, "branch": {"name": "ign-physics2"}}, "reason": "", "source": {"commit": {"hash": "0c77d5d1f137", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics/commit/0c77d5d1f137.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics/commits/0c77d5d1f137"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics"}, "avatar": {"href": "data/bytebucket.org/ravatar/{63a01c4f-5625-443b-96f0-73c4005ccada}ts=c_plus_plus"}}, "type": "repository", "name": "ign-physics", "full_name": "ignitionrobotics/ign-physics", "uuid": "{63a01c4f-5625-443b-96f0-73c4005ccada}"}, "branch": {"name": "reduce_symbols"}}, "state": "OPEN", "author": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "date": "2020-04-08T11:41:10.037244+00:00"}, "pull_request": {"type": "pullrequest", "id": 136, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics/pullrequests/136.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics/pull-requests/136"}}, "title": "Reduce the symbol load caused by feature templates"}}]}