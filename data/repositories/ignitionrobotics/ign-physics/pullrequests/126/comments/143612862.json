{"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics/pullrequests/126/comments/143612862.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-physics/diff/ignitionrobotics/ign-physics:42fc3f4f2835..2435b93c821b?path=tpe%2Flib%2Fsrc%2FModel.cc"}, "html": {"href": "#!/ignitionrobotics/ign-physics/pull-requests/126/_/diff#comment-143612862"}}, "parent": {"id": 143611922, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics/pullrequests/126/comments/143611922.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics/pull-requests/126/_/diff#comment-143611922"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 126, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-physics/pullrequests/126.json"}, "html": {"href": "#!/ignitionrobotics/ign-physics/pull-requests/126"}}, "title": "[Citadel] TPE Lib"}, "content": {"raw": "I think this might do it:\n\n~~~\ndiff -r 42fc3f4f2835 tpe/lib/src/Model.cc\n--- a/tpe/lib/src/Model.cc      Fri Apr 03 00:10:14 2020 -0700\n+++ b/tpe/lib/src/Model.cc      Fri Apr 03 10:48:06 2020 -0700\n@@ -77,9 +77,8 @@\n   const math::Vector3d _angularVelocity)\n {\n   math::Pose3d currentPose = this->GetPose();\n-  math::Pose3d changeInPose;\n-  changeInPose.Set(\n-    _linearVelocity * _timeStep, _angularVelocity * _timeStep);\n-  math::Pose3d nextPose = currentPose + changeInPose;\n+  math::Pose3d nextPose(\n+      currentPose.Pos() + _linearVelocity * _timeStep,\n+      currentPose.Rot().Integrate(_angularVelocity, _timeStep));\n   this->SetPose(nextPose);\n }\n~~~", "markup": "markdown", "html": "<p>I think this might do it:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"gh\">diff -r 42fc3f4f2835 tpe/lib/src/Model.cc</span>\n<span class=\"gd\">--- a/tpe/lib/src/Model.cc      Fri Apr 03 00:10:14 2020 -0700</span>\n<span class=\"gi\">+++ b/tpe/lib/src/Model.cc      Fri Apr 03 10:48:06 2020 -0700</span>\n<span class=\"gu\">@@ -77,9 +77,8 @@</span>\n   const math::Vector3d _angularVelocity)\n {\n   math::Pose3d currentPose = this-&gt;GetPose();\n<span class=\"gd\">-  math::Pose3d changeInPose;</span>\n<span class=\"gd\">-  changeInPose.Set(</span>\n<span class=\"gd\">-    _linearVelocity * _timeStep, _angularVelocity * _timeStep);</span>\n<span class=\"gd\">-  math::Pose3d nextPose = currentPose + changeInPose;</span>\n<span class=\"gi\">+  math::Pose3d nextPose(</span>\n<span class=\"gi\">+      currentPose.Pos() + _linearVelocity * _timeStep,</span>\n<span class=\"gi\">+      currentPose.Rot().Integrate(_angularVelocity, _timeStep));</span>\n   this-&gt;SetPose(nextPose);\n }\n</pre></div>", "type": "rendered"}, "created_on": "2020-04-03T17:48:38.735315+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {"to": 82, "from": null, "outdated": true, "path": "tpe/lib/src/Model.cc"}, "updated_on": "2020-04-03T17:50:37.901391+00:00", "type": "pullrequest_comment", "id": 143612862}