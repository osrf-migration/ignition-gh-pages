{"priority": "critical", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-msgs.json"}, "html": {"href": "#!/ignitionrobotics/ign-msgs"}, "avatar": {"href": "data/bytebucket.org/ravatar/{a9e7131f-94ac-4283-ae4e-330068146520}ts=1533307"}}, "type": "repository", "name": "ign-msgs", "full_name": "ignitionrobotics/ign-msgs", "uuid": "{a9e7131f-94ac-4283-ae4e-330068146520}"}, "links": {"attachments": {"href": "data/repositories/ignitionrobotics/ign-msgs/issues/30/attachments_page=1.json"}, "self": {"href": "data/repositories/ignitionrobotics/ign-msgs/issues/30.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-msgs/issues/30/watch"}, "comments": {"href": "data/repositories/ignitionrobotics/ign-msgs/issues/30/comments_page=1.json"}, "html": {"href": "#!/ignitionrobotics/ign-msgs/issues/30/compilation-error-related-to-shared"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-msgs/issues/30/vote"}}, "reporter": {"display_name": "rishabh lal", "uuid": "{a2189904-03bc-4407-a50e-76e21d618e28}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Ba2189904-03bc-4407-a50e-76e21d618e28%7D"}, "html": {"href": "https://bitbucket.org/%7Ba2189904-03bc-4407-a50e-76e21d618e28%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/fb7377003cf48b9e05683a406caca93cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsRL-4.png"}}, "nickname": "Riss0", "type": "user", "account_id": "5cf5961323e75a0e7d27cfb7"}, "title": "Compilation Error related to shared library", "component": null, "votes": 0, "watches": 1, "content": {"raw": "```\r\n[X] Put an X between the brackets on this line if you have done all of the following:\r\n    * Checked the Q&A board for common solutions: http://answers.gazebosim.org\r\n    * Checked that your issue isn't already filed.\r\n    * Checked that there is not already an Ignition package that provides the described functionality: https://ignitionrobotics.org/libs\r\n# Description \r\n\r\n[Compilation Error, when linking of shared library libignition-msgs5.so starts]\r\n# Steps to Reproduce\r\nJust followed the installation instructions\r\n**Expected behavior:**  \r\n\r\n[100% compilation, without any error]\r\n**Actual behavior:**\r\n\r\n[\r\n[ 97%] Linking CXX shared library ../lib/libignition-msgs5.so\r\n/usr/bin/ld: /usr/local/lib/libprotobufd.a(arena.cc.o): relocation R_X86_64_32 against `_ZN6google8protobuf8internal9ArenaImpl23lifecycle_id_generator_E' can not be used when making a shared object; recompile with -fPIC\r\n/usr/local/lib/libprotobufd.a: error adding symbols: Bad value\r\ncollect2: error: ld returned 1 exit status\r\nsrc/CMakeFiles/ignition-msgs5.dir/build.make:4109: recipe for target 'lib/libignition-msgs5.so.5.0.0' failed\r\nmake[2]: *** [lib/libignition-msgs5.so.5.0.0] Error 1\r\nCMakeFiles/Makefile2:1134: recipe for target 'src/CMakeFiles/ignition-msgs5.dir/all' failed\r\nmake[1]: *** [src/CMakeFiles/ignition-msgs5.dir/all] Error 2\r\nMakefile:162: recipe for target 'all' failed\r\nmake: *** [all] Error 2\r\n]\r\n**Reproduces how often:** \r\n\r\n[Occurs at last, always]\r\n# Versions\r\n\r\n[My protobuf is 3.7.1 on ubuntu 16.04 with ignition-msgs5]\r\n```", "markup": "markdown", "html": "<div class=\"codehilite\"><pre><span></span><span class=\"cp\">[</span><span class=\"nx\">X</span><span class=\"cp\">]</span> <span class=\"nt\">Put</span> <span class=\"nt\">an</span> <span class=\"nt\">X</span> <span class=\"nt\">between</span> <span class=\"nt\">the</span> <span class=\"nt\">brackets</span> <span class=\"nt\">on</span> <span class=\"nt\">this</span> <span class=\"nt\">line</span> <span class=\"nt\">if</span> <span class=\"nt\">you</span> <span class=\"nt\">have</span> <span class=\"nt\">done</span> <span class=\"nt\">all</span> <span class=\"nt\">of</span> <span class=\"nt\">the</span> <span class=\"nt\">following</span><span class=\"o\">:</span>\n    <span class=\"o\">*</span> <span class=\"nt\">Checked</span> <span class=\"nt\">the</span> <span class=\"nt\">Q</span><span class=\"o\">&amp;</span><span class=\"nt\">A</span> <span class=\"nt\">board</span> <span class=\"nt\">for</span> <span class=\"nt\">common</span> <span class=\"nt\">solutions</span><span class=\"o\">:</span> <span class=\"nt\">http</span><span class=\"o\">://</span><span class=\"nt\">answers</span><span class=\"p\">.</span><span class=\"nc\">gazebosim</span><span class=\"p\">.</span><span class=\"nc\">org</span>\n    <span class=\"o\">*</span> <span class=\"nt\">Checked</span> <span class=\"nt\">that</span> <span class=\"nt\">your</span> <span class=\"nt\">issue</span> <span class=\"nt\">isn</span><span class=\"s1\">&#39;t already filed.</span>\n<span class=\"s1\">    * Checked that there is not already an Ignition package that provides the described functionality: https://ignitionrobotics.org/libs</span>\n<span class=\"s1\"># Description </span>\n\n<span class=\"cp\">[</span><span class=\"nx\">Compilation</span> <span class=\"nx\">Error</span><span class=\"p\">,</span> <span class=\"nx\">when</span> <span class=\"nx\">linking</span> <span class=\"nx\">of</span> <span class=\"nx\">shared</span> <span class=\"nb\">library</span> <span class=\"nx\">libignition</span><span class=\"na\">-msgs5.so</span> <span class=\"nx\">starts</span><span class=\"cp\">]</span><span class=\"s1\"></span>\n<span class=\"s1\"># Steps to Reproduce</span>\n<span class=\"s1\">Just followed the installation instructions</span>\n<span class=\"s1\">**Expected behavior:**  </span>\n\n<span class=\"cp\">[</span><span class=\"mi\">100</span><span class=\"o\">%</span> <span class=\"nx\">compilation</span><span class=\"p\">,</span> <span class=\"nx\">without</span> <span class=\"nb\">any</span> <span class=\"nx\">error</span><span class=\"cp\">]</span><span class=\"s1\"></span>\n<span class=\"s1\">**Actual behavior:**</span>\n\n<span class=\"cp\">[</span>\n<span class=\"err\">[</span> <span class=\"mi\">97</span><span class=\"o\">%</span><span class=\"cp\">]</span><span class=\"s1\"> Linking CXX shared library ../lib/libignition-msgs5.so</span>\n<span class=\"s1\">/usr/bin/ld: /usr/local/lib/libprotobufd.a(arena.cc.o): relocation R_X86_64_32 against `_ZN6google8protobuf8internal9ArenaImpl23lifecycle_id_generator_E&#39;</span> <span class=\"nt\">can</span> <span class=\"nt\">not</span> <span class=\"nt\">be</span> <span class=\"nt\">used</span> <span class=\"nt\">when</span> <span class=\"nt\">making</span> <span class=\"nt\">a</span> <span class=\"nt\">shared</span> <span class=\"nt\">object</span><span class=\"o\">;</span> <span class=\"nt\">recompile</span> <span class=\"nt\">with</span> <span class=\"nt\">-fPIC</span>\n<span class=\"o\">/</span><span class=\"nt\">usr</span><span class=\"o\">/</span><span class=\"nt\">local</span><span class=\"o\">/</span><span class=\"nt\">lib</span><span class=\"o\">/</span><span class=\"nt\">libprotobufd</span><span class=\"p\">.</span><span class=\"nc\">a</span><span class=\"o\">:</span> <span class=\"nt\">error</span> <span class=\"nt\">adding</span> <span class=\"nt\">symbols</span><span class=\"o\">:</span> <span class=\"nt\">Bad</span> <span class=\"nt\">value</span>\n<span class=\"nt\">collect2</span><span class=\"o\">:</span> <span class=\"nt\">error</span><span class=\"o\">:</span> <span class=\"nt\">ld</span> <span class=\"nt\">returned</span> <span class=\"nt\">1</span> <span class=\"nt\">exit</span> <span class=\"nt\">status</span>\n<span class=\"nt\">src</span><span class=\"o\">/</span><span class=\"nt\">CMakeFiles</span><span class=\"o\">/</span><span class=\"nt\">ignition-msgs5</span><span class=\"p\">.</span><span class=\"nc\">dir</span><span class=\"o\">/</span><span class=\"nt\">build</span><span class=\"p\">.</span><span class=\"nc\">make</span><span class=\"p\">:</span><span class=\"nd\">4109</span><span class=\"o\">:</span> <span class=\"nt\">recipe</span> <span class=\"nt\">for</span> <span class=\"nt\">target</span> <span class=\"s1\">&#39;lib/libignition-msgs5.so.5.0.0&#39;</span> <span class=\"nt\">failed</span>\n<span class=\"nt\">make</span><span class=\"cp\">[</span><span class=\"mi\">2</span><span class=\"cp\">]</span><span class=\"o\">:</span> <span class=\"o\">***</span> <span class=\"cp\">[</span><span class=\"nx\">lib</span><span class=\"p\">/</span><span class=\"nx\">libignition</span><span class=\"na\">-msgs5.so.5.0.0</span><span class=\"cp\">]</span> <span class=\"nt\">Error</span> <span class=\"nt\">1</span>\n<span class=\"nt\">CMakeFiles</span><span class=\"o\">/</span><span class=\"nt\">Makefile2</span><span class=\"p\">:</span><span class=\"nd\">1134</span><span class=\"o\">:</span> <span class=\"nt\">recipe</span> <span class=\"nt\">for</span> <span class=\"nt\">target</span> <span class=\"s1\">&#39;src/CMakeFiles/ignition-msgs5.dir/all&#39;</span> <span class=\"nt\">failed</span>\n<span class=\"nt\">make</span><span class=\"cp\">[</span><span class=\"mi\">1</span><span class=\"cp\">]</span><span class=\"o\">:</span> <span class=\"o\">***</span> <span class=\"cp\">[</span><span class=\"nx\">src</span><span class=\"p\">/</span><span class=\"nx\">CMakeFiles</span><span class=\"p\">/</span><span class=\"nx\">ignition</span><span class=\"na\">-msgs5.dir</span><span class=\"p\">/</span><span class=\"nb\">all</span><span class=\"cp\">]</span> <span class=\"nt\">Error</span> <span class=\"nt\">2</span>\n<span class=\"nt\">Makefile</span><span class=\"p\">:</span><span class=\"nd\">162</span><span class=\"o\">:</span> <span class=\"nt\">recipe</span> <span class=\"nt\">for</span> <span class=\"nt\">target</span> <span class=\"s1\">&#39;all&#39;</span> <span class=\"nt\">failed</span>\n<span class=\"nt\">make</span><span class=\"o\">:</span> <span class=\"o\">***</span> <span class=\"cp\">[</span><span class=\"kc\">all</span><span class=\"cp\">]</span> <span class=\"nt\">Error</span> <span class=\"nt\">2</span>\n<span class=\"o\">]</span>\n<span class=\"o\">**</span><span class=\"nt\">Reproduces</span> <span class=\"nt\">how</span> <span class=\"nt\">often</span><span class=\"o\">:**</span> \n\n<span class=\"cp\">[</span><span class=\"nx\">Occurs</span> <span class=\"nx\">at</span> <span class=\"nx\">last</span><span class=\"p\">,</span> <span class=\"nx\">always</span><span class=\"cp\">]</span>\n<span class=\"err\">#</span> <span class=\"nt\">Versions</span>\n\n<span class=\"cp\">[</span><span class=\"nx\">My</span> <span class=\"nx\">protobuf</span> <span class=\"nx\">is</span> <span class=\"mf\">3.7.1</span> <span class=\"k\">on</span> <span class=\"nx\">ubuntu</span> <span class=\"mf\">16.04</span> <span class=\"k\">with</span> <span class=\"nx\">ignition</span><span class=\"na\">-msgs5</span><span class=\"cp\">]</span>\n</pre></div>", "type": "rendered"}, "assignee": null, "state": "resolved", "version": null, "edited_on": null, "created_on": "2019-06-03T22:04:45.450818+00:00", "milestone": null, "updated_on": "2019-06-08T15:02:09.233601+00:00", "type": "issue", "id": 30}