{"priority": "minor", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-msgs.json"}, "html": {"href": "#!/ignitionrobotics/ign-msgs"}, "avatar": {"href": "data/bytebucket.org/ravatar/{a9e7131f-94ac-4283-ae4e-330068146520}ts=1533307"}}, "type": "repository", "name": "ign-msgs", "full_name": "ignitionrobotics/ign-msgs", "uuid": "{a9e7131f-94ac-4283-ae4e-330068146520}"}, "links": {"attachments": {"href": "data/repositories/ignitionrobotics/ign-msgs/issues/19/attachments_page=1.json"}, "self": {"href": "data/repositories/ignitionrobotics/ign-msgs/issues/19.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-msgs/issues/19/watch"}, "comments": {"href": "data/repositories/ignitionrobotics/ign-msgs/issues/19/comments_page=1.json"}, "html": {"href": "#!/ignitionrobotics/ign-msgs/issues/19/incorrect-namespace-for-constxxxsharedptr"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-msgs/issues/19/vote"}}, "reporter": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "title": "Incorrect namespace for ConstXXXSharedPtr", "component": null, "votes": 0, "watches": 1, "content": {"raw": "The protoc plugin for `ign-msgs` is currently defining `Const<Msg>SharedPtr` in the wrong namespace: #!/ignitionrobotics/ign-msgs/src/1bad2f95d5389492da789866bc1f9aa61576ee53/src/Generator.cc?at=default&fileviewer=file-view-default#Generator.cc-164\r\n\r\nTaking the `Altimeter` message as an example, this means that we'll generate `::ignition::msgs::AltimeterUniquePtr`, `::ignition::msgs::AltimeterSharedPtr`, and `::ConstAltimeterSharedPtr`. Notice that the last one is in the global namespace.\r\n\r\nI'm making a fix to this which will go into pull request #40, but I'm not sure if we should deprecate the globally namespace typedef or just remove it entirely. What do we think the risk would be that someone is already using that typedef in the global namespace? It seems that it was added nearly 3 years ago, so the risk seems non-trivial.\r\n\r\nFor now, I'll just deprecate it (conveniently, our export macros are available to the auto-generated messages). If anyone thinks we should move forward with deleting it entirely, feel free to voice your opinion.", "markup": "markdown", "html": "<p>The protoc plugin for <code>ign-msgs</code> is currently defining <code>Const&lt;Msg&gt;SharedPtr</code> in the wrong namespace: <a href=\"#!/ignitionrobotics/ign-msgs/src/1bad2f95d5389492da789866bc1f9aa61576ee53/src/Generator.cc?at=default&amp;fileviewer=file-view-default#Generator.cc-164\" rel=\"nofollow\" class=\"ap-connect-link\">#!/ignitionrobotics/ign-msgs/src/1bad2f95d5389492da789866bc1f9aa61576ee53/src/Generator.cc?at=default&amp;fileviewer=file-view-default#Generator.cc-164</a></p>\n<p>Taking the <code>Altimeter</code> message as an example, this means that we'll generate <code>::ignition::msgs::AltimeterUniquePtr</code>, <code>::ignition::msgs::AltimeterSharedPtr</code>, and <code>::ConstAltimeterSharedPtr</code>. Notice that the last one is in the global namespace.</p>\n<p>I'm making a fix to this which will go into <a href=\"#!/ignitionrobotics/ign-msgs/pull-requests/40/use-ignition-cmake\" rel=\"nofollow\" class=\"ap-connect-link\">pull request #40</a>, but I'm not sure if we should deprecate the globally namespace typedef or just remove it entirely. What do we think the risk would be that someone is already using that typedef in the global namespace? It seems that it was added nearly 3 years ago, so the risk seems non-trivial.</p>\n<p>For now, I'll just deprecate it (conveniently, our export macros are available to the auto-generated messages). If anyone thinks we should move forward with deleting it entirely, feel free to voice your opinion.</p>", "type": "rendered"}, "assignee": null, "state": "resolved", "version": null, "edited_on": null, "created_on": "2017-11-22T20:38:55.168782+00:00", "milestone": null, "updated_on": "2018-01-12T01:54:31.244407+00:00", "type": "issue", "id": 19}