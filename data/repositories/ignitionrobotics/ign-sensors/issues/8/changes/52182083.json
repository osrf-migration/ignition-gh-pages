{"changes": {"content": {"new": "# Prerequisites\r\n\r\n* [X] Put an X between the brackets on this line if you have done all of the following:\r\n    * Checked the Q&A board for common solutions: http://answers.gazebosim.org\r\n    * Checked that your issue isn't already filed.\r\n    * Checked that there is not already an Ignition package that provides the described functionality: https://ignitionrobotics.org/libs\r\n\r\n# Description \r\n\r\nGPU laser crashes with more than 16k horizontal samples.\r\n\r\n# Steps to Reproduce\r\n\r\nTry this SDF:\r\n\r\n~~~\r\n            <sensor name='front_laser' type='gpu_ray'>\r\n              <pose>0.08 0 0.3 0 0 0</pose>\r\n              <update_rate>15</update_rate>\r\n              <topic>/x1/points</topic>\r\n              <lidar>\r\n                <scan>\r\n                  <horizontal>\r\n                    <samples>18000</samples>\r\n                    <resolution>0.1</resolution>\r\n                    <min_angle>-3.1459</min_angle>\r\n                    <max_angle>3.1459</max_angle>\r\n                  </horizontal>\r\n                  <vertical>\r\n                    <samples>16</samples>\r\n                    <resolution>1</resolution>\r\n                    <min_angle>-0.261799</min_angle>\r\n                    <max_angle>0.261799</max_angle>\r\n                  </vertical>\r\n                </scan>\r\n                <range>\r\n                  <min>0.05</min>\r\n                  <max>75</max>\r\n                  <resolution>0.01</resolution>\r\n                </range>\r\n                <noise>\r\n                  <type>gaussian</type>\r\n                  <mean>0</mean>\r\n                  <stddev>0.01</stddev>\r\n                </noise>\r\n              </lidar>\r\n            </sensor>\r\n~~~\r\n\r\n**Expected behavior:**  \r\n\r\nSensor is properly created with no crash. If you change the `18000` above to `16000` there's no crash.\r\n\r\n**Actual behavior:**\r\n\r\nCrash with:\r\n\r\n~~~\r\nterminate called after throwing an instance of 'Ogre::RenderingAPIException'\r\n  what():  OGRE EXCEPTION(3:RenderingAPIException): Zero sized texture surface on texture x1::base::front_laser_samplerTex face 0 mipmap 0. The GL driver probably refused to create the texture. in GL3PlusTexture::_createSurfaceList at /var/lib/jenkins/workspace/ogre-2.1-debbuilder/repo/RenderSystems/GL3Plus/src/OgreGL3PlusTexture.cpp (line 516)\r\n~~~\r\n\r\n**Reproduces how often:** \r\n\r\n100%\r\n\r\n# Versions\r\n\r\n`ign-sensors2`\r\n\r\n# Additional Information\r\n\r\nI talked to @iche033 and apparently large sample counts are redundant anyway, since the underlying computations use a cube with 1024x1024 sized walls.\r\n\r\nWe should at least prevent the crash, but a better solution may involve interpolating the samples.", "old": "# Prerequisites\r\n\r\n* [X] Put an X between the brackets on this line if you have done all of the following:\r\n    * Checked the Q&A board for common solutions: http://answers.gazebosim.org\r\n    * Checked that your issue isn't already filed.\r\n    * Checked that there is not already an Ignition package that provides the described functionality: https://ignitionrobotics.org/libs\r\n\r\n# Description \r\n\r\nGPU laser crashes with more than 16k horizontal samples.\r\n\r\n# Steps to Reproduce\r\n\r\nTry this SDF:\r\n\r\n~~~\r\n            <sensor name='front_laser' type='gpu_ray'>\r\n              <pose>0.08 0 0.3 0 0 0</pose>\r\n              <update_rate>15</update_rate>\r\n              <topic>/x1/points</topic>\r\n              <lidar>\r\n                <scan>\r\n                  <horizontal>\r\n                    <samples>18000</samples>\r\n                    <resolution>0.1</resolution>\r\n                    <min_angle>-3.1459</min_angle>\r\n                    <max_angle>3.1459</max_angle>\r\n                  </horizontal>\r\n                  <vertical>\r\n                    <samples>16</samples>\r\n                    <resolution>1</resolution>\r\n                    <min_angle>-0.261799</min_angle>\r\n                    <max_angle>0.261799</max_angle>\r\n                  </vertical>\r\n                </scan>\r\n                <range>\r\n                  <min>0.05</min>\r\n                  <max>75</max>\r\n                  <resolution>0.01</resolution>\r\n                </range>\r\n                <noise>\r\n                  <type>gaussian</type>\r\n                  <mean>0</mean>\r\n                  <stddev>0.01</stddev>\r\n                </noise>\r\n              </lidar>\r\n            </sensor>\r\n~~~\r\n\r\n**Expected behavior:**  \r\n\r\nSensor is properly created with no crash. If you change the `18000` above to `16000` there's no crash.\r\n\r\n**Actual behavior:**\r\n\r\nCrash with:\r\n\r\n~~~\r\nterminate called after throwing an instance of 'Ogre::RenderingAPIException'\r\n  what():  OGRE EXCEPTION(3:RenderingAPIException): Zero sized texture surface on texture x1::base::front_laser_samplerTex face 0 mipmap 0. The GL driver probably refused to create the texture. in GL3PlusTexture::_createSurfaceList at /var/lib/jenkins/workspace/ogre-2.1-debbuilder/repo/RenderSystems/GL3Plus/src/OgreGL3PlusTexture.cpp (line 516)\r\n~~~\r\n\r\n**Reproduces how often:** \r\n\r\n100%\r\n\r\n# Versions\r\n\r\n`ign-sensors2`\r\n\r\n# Additional Information\r\n\r\nI talked to @iche033 and apparently samples above 8k-ish are redundant anyway, since the underlying computations use a cube with 2k-sized walls.\r\n\r\nWe should at least prevent the crash, but a better solution may involve interpolating the samples."}}, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-sensors/issues/8/changes/52182083.json"}, "html": {"href": "#!/ignitionrobotics/ign-sensors/issues/8#comment-52182083"}}, "issue": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-sensors/issues/8.json"}}, "type": "issue", "id": 8, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-sensors.json"}, "html": {"href": "#!/ignitionrobotics/ign-sensors"}, "avatar": {"href": "data/bytebucket.org/ravatar/{71484f03-645d-4ba1-be9e-2f64dce50289}ts=default"}}, "type": "repository", "name": "ign-sensors", "full_name": "ignitionrobotics/ign-sensors", "uuid": "{71484f03-645d-4ba1-be9e-2f64dce50289}"}, "title": "GPU laser crashes with more than 16k samples"}, "created_on": "2019-05-18T01:27:24.333352+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "message": {"raw": null, "markup": "markdown", "html": "", "type": "rendered"}, "type": "issue_change", "id": 52182083}