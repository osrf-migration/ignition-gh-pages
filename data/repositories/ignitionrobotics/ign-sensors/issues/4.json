{"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-sensors.json"}, "html": {"href": "#!/ignitionrobotics/ign-sensors"}, "avatar": {"href": "data/bytebucket.org/ravatar/{71484f03-645d-4ba1-be9e-2f64dce50289}ts=default"}}, "type": "repository", "name": "ign-sensors", "full_name": "ignitionrobotics/ign-sensors", "uuid": "{71484f03-645d-4ba1-be9e-2f64dce50289}"}, "links": {"attachments": {"href": "data/repositories/ignitionrobotics/ign-sensors/issues/4/attachments_page=1.json"}, "self": {"href": "data/repositories/ignitionrobotics/ign-sensors/issues/4.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-sensors/issues/4/watch"}, "comments": {"href": "data/repositories/ignitionrobotics/ign-sensors/issues/4/comments_page=1.json"}, "html": {"href": "#!/ignitionrobotics/ign-sensors/issues/4/lidar-unit-test-segfaults-on-homebrew"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-sensors/issues/4/vote"}}, "reporter": {"display_name": "Javier Iv\u00e1n Choclin", "uuid": "{745acb37-6a3b-4169-8ba9-2c142a7408fb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B745acb37-6a3b-4169-8ba9-2c142a7408fb%7D"}, "html": {"href": "https://bitbucket.org/%7B745acb37-6a3b-4169-8ba9-2c142a7408fb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:2279399d-3c75-4e1e-b818-4fb8339b2939/26f5815d-5477-4106-ba9b-ac56ee23e175/128"}}, "nickname": "Javier Choclin", "type": "user", "account_id": "557058:2279399d-3c75-4e1e-b818-4fb8339b2939"}, "title": "Lidar unit test segfaults on Homebrew", "component": null, "votes": 0, "watches": 1, "content": {"raw": "# Description \r\n\r\nLidar unit test segfaults on Homebrew.\r\n\r\n**Expected behavior:**  \r\n\r\nIt shouldn't be an issue since Lidar is a class that should be used with GPU and CPU lidar.\r\n\r\n**Actual behavior:**\r\n\r\nThere is a segfault when the unit test is run.\r\n\r\n```\r\n5: Test command: /Users/jenkins/workspace/ignition_sensors-ci-pr_any-homebrew-amd64/build/bin/UNIT_Lidar_TEST \"--gtest_output=xml:/Users/jenkins/workspace/ignition_sensors-ci-pr_any-homebrew-amd64/build/test_results/UNIT_Lidar_TEST.xml\"\r\n5: Test timeout computed to be: 240\r\n5: [==========] Running 1 test from 1 test case.\r\n5: [----------] Global test environment set-up.\r\n5: [----------] 1 test from Lidar_TEST\r\n5: [ RUN      ] Lidar_TEST.CreateLaser\r\n5: [Err] [Manager.hh:111] SDF sensor type does not match template type\r\n5: /Users/jenkins/workspace/ignition_sensors-ci-pr_any-homebrew-amd64/ign-sensors/src/Lidar_TEST.cc:127: Failure\r\n5: Value of: sensor != nullptr\r\n5:   Actual: false\r\n5: Expected: true\r\n 5/14 Test  #5: UNIT_Lidar_TEST .............................***Exception: SegFault  0.10 sec\r\n```\r\n\r\n**Reproduces how often:** \r\n\r\nOn every Jenkins run.\r\n\r\n# Versions\r\n\r\nIgnition sensors 1", "markup": "markdown", "html": "<h1 id=\"markdown-header-description\">Description</h1>\n<p>Lidar unit test segfaults on Homebrew.</p>\n<p><strong>Expected behavior:</strong>  </p>\n<p>It shouldn't be an issue since Lidar is a class that should be used with GPU and CPU lidar.</p>\n<p><strong>Actual behavior:</strong></p>\n<p>There is a segfault when the unit test is run.</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"mi\">5</span><span class=\"o\">:</span> <span class=\"n\">Test</span> <span class=\"n\">command</span><span class=\"o\">:</span> <span class=\"sr\">/Users/jenkins/workspace/ignition_sensors-ci-pr_any-homebrew-amd64/build/bin/UNIT_Lidar_TEST &quot;--gtest_output=xml:/Users/jenkins/workspace/ignition_sensors-ci-pr_any-homebrew-amd64/build/test_results/</span><span class=\"n\">UNIT_Lidar_TEST</span><span class=\"o\">.</span><span class=\"na\">xml</span><span class=\"err\">&quot;</span>\n<span class=\"mi\">5</span><span class=\"o\">:</span> <span class=\"n\">Test</span> <span class=\"n\">timeout</span> <span class=\"n\">computed</span> <span class=\"n\">to</span> <span class=\"n\">be</span><span class=\"o\">:</span> <span class=\"mi\">240</span>\n<span class=\"mi\">5</span><span class=\"o\">:</span> <span class=\"o\">[==========]</span> <span class=\"n\">Running</span> <span class=\"mi\">1</span> <span class=\"n\">test</span> <span class=\"n\">from</span> <span class=\"mi\">1</span> <span class=\"n\">test</span> <span class=\"k\">case</span><span class=\"o\">.</span>\n<span class=\"mi\">5</span><span class=\"o\">:</span> <span class=\"o\">[----------]</span> <span class=\"n\">Global</span> <span class=\"n\">test</span> <span class=\"n\">environment</span> <span class=\"kd\">set</span><span class=\"o\">-</span><span class=\"n\">up</span><span class=\"o\">.</span>\n<span class=\"mi\">5</span><span class=\"o\">:</span> <span class=\"o\">[----------]</span> <span class=\"mi\">1</span> <span class=\"n\">test</span> <span class=\"n\">from</span> <span class=\"n\">Lidar_TEST</span>\n<span class=\"mi\">5</span><span class=\"o\">:</span> <span class=\"o\">[</span> <span class=\"n\">RUN</span>      <span class=\"o\">]</span> <span class=\"n\">Lidar_TEST</span><span class=\"o\">.</span><span class=\"na\">CreateLaser</span>\n<span class=\"mi\">5</span><span class=\"o\">:</span> <span class=\"o\">[</span><span class=\"n\">Err</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">Manager</span><span class=\"o\">.</span><span class=\"na\">hh</span><span class=\"o\">:</span><span class=\"mi\">111</span><span class=\"o\">]</span> <span class=\"n\">SDF</span> <span class=\"n\">sensor</span> <span class=\"n\">type</span> <span class=\"n\">does</span> <span class=\"n\">not</span> <span class=\"n\">match</span> <span class=\"n\">template</span> <span class=\"n\">type</span>\n<span class=\"mi\">5</span><span class=\"o\">:</span> <span class=\"sr\">/Users/jenkins/workspace/ignition_sensors-ci-pr_any-homebrew-amd64/ign-sensors/src/</span><span class=\"n\">Lidar_TEST</span><span class=\"o\">.</span><span class=\"na\">cc</span><span class=\"o\">:</span><span class=\"mi\">127</span><span class=\"o\">:</span> <span class=\"n\">Failure</span>\n<span class=\"mi\">5</span><span class=\"o\">:</span> <span class=\"n\">Value</span> <span class=\"n\">of</span><span class=\"o\">:</span> <span class=\"n\">sensor</span> <span class=\"o\">!=</span> <span class=\"n\">nullptr</span>\n<span class=\"mi\">5</span><span class=\"o\">:</span>   <span class=\"n\">Actual</span><span class=\"o\">:</span> <span class=\"kc\">false</span>\n<span class=\"mi\">5</span><span class=\"o\">:</span> <span class=\"n\">Expected</span><span class=\"o\">:</span> <span class=\"kc\">true</span>\n <span class=\"mi\">5</span><span class=\"o\">/</span><span class=\"mi\">14</span> <span class=\"n\">Test</span>  <span class=\"err\">#</span><span class=\"mi\">5</span><span class=\"o\">:</span> <span class=\"n\">UNIT_Lidar_TEST</span> <span class=\"o\">.............................***</span><span class=\"n\">Exception</span><span class=\"o\">:</span> <span class=\"n\">SegFault</span>  <span class=\"mf\">0.10</span> <span class=\"n\">sec</span>\n</pre></div>\n\n\n<p><strong>Reproduces how often:</strong> </p>\n<p>On every Jenkins run.</p>\n<h1 id=\"markdown-header-versions\">Versions</h1>\n<p>Ignition sensors 1</p>", "type": "rendered"}, "assignee": null, "state": "new", "version": null, "edited_on": null, "created_on": "2019-03-12T17:50:13.047048+00:00", "milestone": null, "updated_on": "2019-03-12T17:50:13.047048+00:00", "type": "issue", "id": 4}