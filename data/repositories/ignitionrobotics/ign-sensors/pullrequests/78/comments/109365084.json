{"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-sensors/pullrequests/78/comments/109365084.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-sensors/diff/ignitionrobotics/ign-sensors:9d01d2482225..ce2ac2bf89f7?path=src%2FLidar.cc"}, "html": {"href": "#!/ignitionrobotics/ign-sensors/pull-requests/78/_/diff#comment-109365084"}}, "parent": {"id": 109363722, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-sensors/pullrequests/78/comments/109363722.json"}, "html": {"href": "#!/ignitionrobotics/ign-sensors/pull-requests/78/_/diff#comment-109363722"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 78, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-sensors/pullrequests/78.json"}, "html": {"href": "#!/ignitionrobotics/ign-sensors/pull-requests/78"}}, "title": "Output a pointcloudpacked message"}, "content": {"raw": "`ros1_ign_point_cloud` seems to be publishing unordered point clouds for GPU lidar. See the [demo](https://github.com/osrf/ros1_ign/blob/master/ros1_ign_point_cloud/examples/gpu_lidar.sdf#L259):\n\n`roslaunch ros1_ign_gazebo_demos gpu_lidar.launch`\n\n```\n$ rostopic echo /custom_params/pc2 --noarr\nheader: \n  seq: 82\n  stamp: \n    secs: 8\n    nsecs: 999000000\n  frame_id: \"custom_params/link\"\nheight: 1\nwidth: 10240\nfields: \"<array type: sensor_msgs/PointField, length: 4>\"\nis_bigendian: False\npoint_step: 32\nrow_step: 327680\ndata: \"<array type: uint8, length: 327680>\"\nis_dense: True\n```\n\nIt has height 1 and width 640 * 16. This seems to be what's coming through [gpu_rays_->ConnectNewGpuRaysFrame](https://github.com/osrf/ros1_ign/blob/master/ros1_ign_point_cloud/src/point_cloud.cc#L316), which I think is different from the `laserBuffer` used here.\n", "markup": "markdown", "html": "<p><code>ros1_ign_point_cloud</code> seems to be publishing unordered point clouds for GPU lidar. See the <a data-is-external-link=\"true\" href=\"https://github.com/osrf/ros1_ign/blob/master/ros1_ign_point_cloud/examples/gpu_lidar.sdf#L259\" rel=\"nofollow\">demo</a>:</p>\n<p><code>roslaunch ros1_ign_gazebo_demos gpu_lidar.launch</code></p>\n<div class=\"codehilite\"><pre><span></span>$ rostopic <span class=\"nb\">echo</span> /custom_params/pc2 --noarr\nheader: \n  seq: <span class=\"m\">82</span>\n  stamp: \n    secs: <span class=\"m\">8</span>\n    nsecs: <span class=\"m\">999000000</span>\n  frame_id: <span class=\"s2\">&quot;custom_params/link&quot;</span>\nheight: <span class=\"m\">1</span>\nwidth: <span class=\"m\">10240</span>\nfields: <span class=\"s2\">&quot;&lt;array type: sensor_msgs/PointField, length: 4&gt;&quot;</span>\nis_bigendian: False\npoint_step: <span class=\"m\">32</span>\nrow_step: <span class=\"m\">327680</span>\ndata: <span class=\"s2\">&quot;&lt;array type: uint8, length: 327680&gt;&quot;</span>\nis_dense: True\n</pre></div>\n\n\n<p>It has height 1 and width 640 * 16. This seems to be what's coming through <a data-is-external-link=\"true\" href=\"https://github.com/osrf/ros1_ign/blob/master/ros1_ign_point_cloud/src/point_cloud.cc#L316\" rel=\"nofollow\">gpu_rays_-&gt;ConnectNewGpuRaysFrame</a>, which I think is different from the <code>laserBuffer</code> used here.</p>", "type": "rendered"}, "created_on": "2019-07-16T00:52:02.725077+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {"to": 93, "from": null, "outdated": true, "path": "src/Lidar.cc"}, "updated_on": "2019-07-16T00:52:02.733904+00:00", "type": "pullrequest_comment", "id": 109365084}