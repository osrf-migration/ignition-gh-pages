{"pagelen": 50, "values": [{"update": {"description": "There were two potential bugs in the way that the SIGCHLD handler was written previously. In one case, the mutex would be locked when the signal was handled, and the handler could not get a lock. In other cases, some of the operations we were doing in the handler were not strictly safe.\r\n\r\nAs a fix, I have introduced a queue that is populated by the handler and consumed via a worker thread. These use a semaphore to signal \\(which is safe\\).\r\n\r\nThis addresses #6 and likely resolves remaining issues in osrf/subt#95\r\n\r\n\u200c\r\n\r\nTest with the launch file from #6.  Without this fix, the launch process will lock and not respond correctly to ctrl-c.  With the fix, startup and shutdown should proceed normally.", "title": "Eliminate potential deadlock from SIGCHLD signal handler", "destination": {"commit": {"hash": "c1d633e4733f", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch/commit/c1d633e4733f.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch/commits/c1d633e4733f"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6981a69-ba64-447a-9739-662a89b25082}ts=2278389"}}, "type": "repository", "name": "ign-launch", "full_name": "ignitionrobotics/ign-launch", "uuid": "{b6981a69-ba64-447a-9739-662a89b25082}"}, "branch": {"name": "ign-launch1"}}, "reason": "", "source": {"commit": {"hash": "6a04274ac1b0", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch/commit/6a04274ac1b0.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch/commits/6a04274ac1b0"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6981a69-ba64-447a-9739-662a89b25082}ts=2278389"}}, "type": "repository", "name": "ign-launch", "full_name": "ignitionrobotics/ign-launch", "uuid": "{b6981a69-ba64-447a-9739-662a89b25082}"}, "branch": {"name": "sigchld_deadlock_fix"}}, "state": "MERGED", "author": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "date": "2019-07-20T17:02:21.160862+00:00"}, "pull_request": {"type": "pullrequest", "id": 36, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch/pullrequests/36.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch/pull-requests/36"}}, "title": "Eliminate potential deadlock from SIGCHLD signal handler"}}, {"approval": {"date": "2019-07-20T17:02:16.497159+00:00", "pullrequest": {"type": "pullrequest", "id": 36, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch/pullrequests/36.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch/pull-requests/36"}}, "title": "Eliminate potential deadlock from SIGCHLD signal handler"}, "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}}, "pull_request": {"type": "pullrequest", "id": 36, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch/pullrequests/36.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch/pull-requests/36"}}, "title": "Eliminate potential deadlock from SIGCHLD signal handler"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch/pullrequests/36/comments/110010248.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch/pull-requests/36/_/diff#comment-110010248"}}, "parent": {"id": 109993423, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch/pullrequests/36/comments/109993423.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch/pull-requests/36/_/diff#comment-109993423"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 36, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch/pullrequests/36.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch/pull-requests/36"}}, "title": "Eliminate potential deadlock from SIGCHLD signal handler"}, "content": {"raw": "I see the same message\n\nOther than that, I\u2019ve been running subt off of this branch and have not run into a deadlock since then", "markup": "markdown", "html": "<p>I see the same message</p>\n<p>Other than that, I\u2019ve been running subt off of this branch and have not run into a deadlock since then</p>", "type": "rendered"}, "created_on": "2019-07-19T17:33:01.567212+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "updated_on": "2019-07-19T17:33:01.579282+00:00", "type": "pullrequest_comment", "id": 110010248}, "pull_request": {"type": "pullrequest", "id": 36, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch/pullrequests/36.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch/pull-requests/36"}}, "title": "Eliminate potential deadlock from SIGCHLD signal handler"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch/pullrequests/36/comments/110005774.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch/pull-requests/36/_/diff#comment-110005774"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 36, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch/pullrequests/36.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch/pull-requests/36"}}, "title": "Eliminate potential deadlock from SIGCHLD signal handler"}, "content": {"raw": "Can we use uuid or something else unique for the name? Right now, if I launch `competition.ign` and `team.ign`, they'll use the same semaphore.", "markup": "markdown", "html": "<p>Can we use uuid or something else unique for the name? Right now, if I launch <code>competition.ign</code> and <code>team.ign</code>, they'll use the same semaphore.</p>", "type": "rendered"}, "created_on": "2019-07-19T16:52:38.483537+00:00", "user": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}, "inline": {}, "updated_on": "2019-07-19T16:52:58.799846+00:00", "type": "pullrequest_comment", "id": 110005774}, "pull_request": {"type": "pullrequest", "id": 36, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch/pullrequests/36.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch/pull-requests/36"}}, "title": "Eliminate potential deadlock from SIGCHLD signal handler"}}, {"update": {"description": "There were two potential bugs in the way that the SIGCHLD handler was written previously. In one case, the mutex would be locked when the signal was handled, and the handler could not get a lock. In other cases, some of the operations we were doing in the handler were not strictly safe.\r\n\r\nAs a fix, I have introduced a queue that is populated by the handler and consumed via a worker thread. These use a semaphore to signal \\(which is safe\\).\r\n\r\nThis addresses #6 and likely resolves remaining issues in osrf/subt#95\r\n\r\n\u200c\r\n\r\nTest with the launch file from #6.  Without this fix, the launch process will lock and not respond correctly to ctrl-c.  With the fix, startup and shutdown should proceed normally.", "title": "Eliminate potential deadlock from SIGCHLD signal handler", "destination": {"commit": {"hash": "c1d633e4733f", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch/commit/c1d633e4733f.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch/commits/c1d633e4733f"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6981a69-ba64-447a-9739-662a89b25082}ts=2278389"}}, "type": "repository", "name": "ign-launch", "full_name": "ignitionrobotics/ign-launch", "uuid": "{b6981a69-ba64-447a-9739-662a89b25082}"}, "branch": {"name": "ign-launch1"}}, "reason": "", "source": {"commit": {"hash": "6a04274ac1b0", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch/commit/6a04274ac1b0.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch/commits/6a04274ac1b0"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6981a69-ba64-447a-9739-662a89b25082}ts=2278389"}}, "type": "repository", "name": "ign-launch", "full_name": "ignitionrobotics/ign-launch", "uuid": "{b6981a69-ba64-447a-9739-662a89b25082}"}, "branch": {"name": "sigchld_deadlock_fix"}}, "state": "OPEN", "author": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}, "date": "2019-07-19T16:05:36.814753+00:00"}, "pull_request": {"type": "pullrequest", "id": 36, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch/pullrequests/36.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch/pull-requests/36"}}, "title": "Eliminate potential deadlock from SIGCHLD signal handler"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch/pullrequests/36/comments/109993423.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch/pull-requests/36/_/diff#comment-109993423"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 36, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch/pullrequests/36.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch/pull-requests/36"}}, "title": "Eliminate potential deadlock from SIGCHLD signal handler"}, "content": {"raw": "I keep getting `[Err] [Manager.cc:313] Failed to unlink semaphore: No such file or directory` when I `ctrl-c` ign-launch. Is that expected?", "markup": "markdown", "html": "<p>I keep getting <code>[Err] [Manager.cc:313] Failed to unlink semaphore: No such file or directory</code> when I <code>ctrl-c</code> ign-launch. Is that expected?</p>", "type": "rendered"}, "created_on": "2019-07-19T15:14:35.140457+00:00", "user": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}, "updated_on": "2019-07-19T15:14:43.461928+00:00", "type": "pullrequest_comment", "id": 109993423}, "pull_request": {"type": "pullrequest", "id": 36, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch/pullrequests/36.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch/pull-requests/36"}}, "title": "Eliminate potential deadlock from SIGCHLD signal handler"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch/pullrequests/36/comments/109718302.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch/pull-requests/36/_/diff#comment-109718302"}}, "parent": {"id": 109714625, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch/pullrequests/36/comments/109714625.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch/pull-requests/36/_/diff#comment-109714625"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 36, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch/pullrequests/36.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch/pull-requests/36"}}, "title": "Eliminate potential deadlock from SIGCHLD signal handler"}, "content": {"raw": "Okay, I don't see how we can use semaphores either because `sem_wait` is not safe in a signal handler. Is there a reason why the master process needs to load plugins instead of doing it in a new process? If we do it in a new process, the master process will just monitor the other processes and we won't need the worker thread. It'll be single-threaded, which'll make it possible to block `SIGCHILD`.", "markup": "markdown", "html": "<p>Okay, I don't see how we can use semaphores either because <code>sem_wait</code> is not safe in a signal handler. Is there a reason why the master process needs to load plugins instead of doing it in a new process? If we do it in a new process, the master process will just monitor the other processes and we won't need the worker thread. It'll be single-threaded, which'll make it possible to block <code>SIGCHILD</code>.</p>", "type": "rendered"}, "created_on": "2019-07-18T00:17:19.337351+00:00", "user": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}, "inline": {}, "updated_on": "2019-07-18T00:17:19.345460+00:00", "type": "pullrequest_comment", "id": 109718302}, "pull_request": {"type": "pullrequest", "id": 36, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch/pullrequests/36.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch/pull-requests/36"}}, "title": "Eliminate potential deadlock from SIGCHLD signal handler"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch/pullrequests/36/comments/109714625.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch/pull-requests/36/_/diff#comment-109714625"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 36, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch/pullrequests/36.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch/pull-requests/36"}}, "title": "Eliminate potential deadlock from SIGCHLD signal handler"}, "content": {"raw": "I looked at `sigprocmask` and it says that it's \"used to fetch and/or change the signal mask of the calling thread\". So this blocks `SIGCHILD` for this thread, but `OnSigChild` still get's called. We might just have to use the semaphores to protect `stoppedChildren`.", "markup": "markdown", "html": "<p>I looked at <code>sigprocmask</code> and it says that it's \"used to fetch and/or change the signal mask of the calling thread\". So this blocks <code>SIGCHILD</code> for this thread, but <code>OnSigChild</code> still get's called. We might just have to use the semaphores to protect <code>stoppedChildren</code>.</p>", "type": "rendered"}, "created_on": "2019-07-17T23:11:54.103474+00:00", "user": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}, "inline": {}, "updated_on": "2019-07-17T23:11:54.110789+00:00", "type": "pullrequest_comment", "id": 109714625}, "pull_request": {"type": "pullrequest", "id": 36, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch/pullrequests/36.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch/pull-requests/36"}}, "title": "Eliminate potential deadlock from SIGCHLD signal handler"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch/pullrequests/36/comments/109705517.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch/pull-requests/36/_/diff#comment-109705517"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 36, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch/pullrequests/36.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch/pull-requests/36"}}, "title": "Eliminate potential deadlock from SIGCHLD signal handler"}, "content": {"raw": "If we ever have to revisit this: [https://github.com/ros2/rclcpp/blob/8c48dbede7de2bc7e5199f340b6bfd33ffd6a784/rclcpp/src/rclcpp/signal\\_handler.cpp#L361-L379](https://github.com/ros2/rclcpp/blob/8c48dbede7de2bc7e5199f340b6bfd33ffd6a784/rclcpp/src/rclcpp/signal_handler.cpp#L361-L379)", "markup": "markdown", "html": "<p>If we ever have to revisit this: <a data-is-external-link=\"true\" href=\"https://github.com/ros2/rclcpp/blob/8c48dbede7de2bc7e5199f340b6bfd33ffd6a784/rclcpp/src/rclcpp/signal_handler.cpp#L361-L379\" rel=\"nofollow\">https://github.com/ros2/rclcpp/blob/8c48dbede7de2bc7e5199f340b6bfd33ffd6a784/rclcpp/src/rclcpp/signal_handler.cpp#L361-L379</a></p>", "type": "rendered"}, "created_on": "2019-07-17T21:08:05.016750+00:00", "user": {"display_name": "Michael Carroll", "uuid": "{17dbbc15-cbc0-42f0-a985-cde9061c78a0}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B17dbbc15-cbc0-42f0-a985-cde9061c78a0%7D"}, "html": {"href": "https://bitbucket.org/%7B17dbbc15-cbc0-42f0-a985-cde9061c78a0%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:65740f22-cc56-4418-9608-7e17d0ed47b7/2aa259f5-4de1-4f68-9156-eded72041d84/128"}}, "nickname": "Michael Carroll", "type": "user", "account_id": "557058:65740f22-cc56-4418-9608-7e17d0ed47b7"}, "updated_on": "2019-07-17T21:08:05.023195+00:00", "type": "pullrequest_comment", "id": 109705517}, "pull_request": {"type": "pullrequest", "id": 36, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch/pullrequests/36.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch/pull-requests/36"}}, "title": "Eliminate potential deadlock from SIGCHLD signal handler"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch/pullrequests/36/comments/109704628.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch/pull-requests/36/_/diff#comment-109704628"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 36, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch/pullrequests/36.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch/pull-requests/36"}}, "title": "Eliminate potential deadlock from SIGCHLD signal handler"}, "content": {"raw": "Updated because macOS doesn\u2019t support unnamed semaphores: [https://stackoverflow.com/questions/1413785/sem-init-on-os-x](https://stackoverflow.com/questions/1413785/sem-init-on-os-x)", "markup": "markdown", "html": "<p>Updated because macOS doesn\u2019t support unnamed semaphores: <a data-is-external-link=\"true\" href=\"https://stackoverflow.com/questions/1413785/sem-init-on-os-x\" rel=\"nofollow\">https://stackoverflow.com/questions/1413785/sem-init-on-os-x</a></p>", "type": "rendered"}, "created_on": "2019-07-17T20:59:35.490076+00:00", "user": {"display_name": "Michael Carroll", "uuid": "{17dbbc15-cbc0-42f0-a985-cde9061c78a0}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B17dbbc15-cbc0-42f0-a985-cde9061c78a0%7D"}, "html": {"href": "https://bitbucket.org/%7B17dbbc15-cbc0-42f0-a985-cde9061c78a0%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:65740f22-cc56-4418-9608-7e17d0ed47b7/2aa259f5-4de1-4f68-9156-eded72041d84/128"}}, "nickname": "Michael Carroll", "type": "user", "account_id": "557058:65740f22-cc56-4418-9608-7e17d0ed47b7"}, "updated_on": "2019-07-17T20:59:35.498512+00:00", "type": "pullrequest_comment", "id": 109704628}, "pull_request": {"type": "pullrequest", "id": 36, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch/pullrequests/36.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch/pull-requests/36"}}, "title": "Eliminate potential deadlock from SIGCHLD signal handler"}}, {"update": {"description": "There were two potential bugs in the way that the SIGCHLD handler was written previously. In one case, the mutex would be locked when the signal was handled, and the handler could not get a lock. In other cases, some of the operations we were doing in the handler were not strictly safe.\r\n\r\nAs a fix, I have introduced a queue that is populated by the handler and consumed via a worker thread. These use a semaphore to signal \\(which is safe\\).\r\n\r\nThis addresses #6 and likely resolves remaining issues in osrf/subt#95\r\n\r\n\u200c\r\n\r\nTest with the launch file from #6.  Without this fix, the launch process will lock and not respond correctly to ctrl-c.  With the fix, startup and shutdown should proceed normally.", "title": "Eliminate potential deadlock from SIGCHLD signal handler", "destination": {"commit": {"hash": "c1d633e4733f", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch/commit/c1d633e4733f.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch/commits/c1d633e4733f"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6981a69-ba64-447a-9739-662a89b25082}ts=2278389"}}, "type": "repository", "name": "ign-launch", "full_name": "ignitionrobotics/ign-launch", "uuid": "{b6981a69-ba64-447a-9739-662a89b25082}"}, "branch": {"name": "ign-launch1"}}, "reason": "", "source": {"commit": {"hash": "1603dd31921d", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch/commit/1603dd31921d.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch/commits/1603dd31921d"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6981a69-ba64-447a-9739-662a89b25082}ts=2278389"}}, "type": "repository", "name": "ign-launch", "full_name": "ignitionrobotics/ign-launch", "uuid": "{b6981a69-ba64-447a-9739-662a89b25082}"}, "branch": {"name": "sigchld_deadlock_fix"}}, "state": "OPEN", "author": {"display_name": "Michael Carroll", "uuid": "{17dbbc15-cbc0-42f0-a985-cde9061c78a0}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B17dbbc15-cbc0-42f0-a985-cde9061c78a0%7D"}, "html": {"href": "https://bitbucket.org/%7B17dbbc15-cbc0-42f0-a985-cde9061c78a0%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:65740f22-cc56-4418-9608-7e17d0ed47b7/2aa259f5-4de1-4f68-9156-eded72041d84/128"}}, "nickname": "Michael Carroll", "type": "user", "account_id": "557058:65740f22-cc56-4418-9608-7e17d0ed47b7"}, "date": "2019-07-17T20:58:01.381256+00:00"}, "pull_request": {"type": "pullrequest", "id": 36, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch/pullrequests/36.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch/pull-requests/36"}}, "title": "Eliminate potential deadlock from SIGCHLD signal handler"}}, {"update": {"description": "There were two potential bugs in the way that the SIGCHLD handler was written previously. In one case, the mutex would be locked when the signal was handled, and the handler could not get a lock. In other cases, some of the operations we were doing in the handler were not strictly safe.\r\n\r\nAs a fix, I have introduced a queue that is populated by the handler and consumed via a worker thread. These use a semaphore to signal \\(which is safe\\).\r\n\r\nThis addresses #6 and likely resolves remaining issues in osrf/subt#95\r\n\r\n\u200c\r\n\r\nTest with the launch file from #6.  Without this fix, the launch process will lock and not respond correctly to ctrl-c.  With the fix, startup and shutdown should proceed normally.", "title": "Eliminate potential deadlock from SIGCHLD signal handler", "destination": {"commit": {"hash": "c1d633e4733f", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch/commit/c1d633e4733f.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch/commits/c1d633e4733f"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6981a69-ba64-447a-9739-662a89b25082}ts=2278389"}}, "type": "repository", "name": "ign-launch", "full_name": "ignitionrobotics/ign-launch", "uuid": "{b6981a69-ba64-447a-9739-662a89b25082}"}, "branch": {"name": "ign-launch1"}}, "reason": "", "source": {"commit": {"hash": "e65a2b372536", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch/commit/e65a2b372536.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch/commits/e65a2b372536"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6981a69-ba64-447a-9739-662a89b25082}ts=2278389"}}, "type": "repository", "name": "ign-launch", "full_name": "ignitionrobotics/ign-launch", "uuid": "{b6981a69-ba64-447a-9739-662a89b25082}"}, "branch": {"name": "sigchld_deadlock_fix"}}, "state": "OPEN", "author": {"display_name": "Michael Carroll", "uuid": "{17dbbc15-cbc0-42f0-a985-cde9061c78a0}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B17dbbc15-cbc0-42f0-a985-cde9061c78a0%7D"}, "html": {"href": "https://bitbucket.org/%7B17dbbc15-cbc0-42f0-a985-cde9061c78a0%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:65740f22-cc56-4418-9608-7e17d0ed47b7/2aa259f5-4de1-4f68-9156-eded72041d84/128"}}, "nickname": "Michael Carroll", "type": "user", "account_id": "557058:65740f22-cc56-4418-9608-7e17d0ed47b7"}, "date": "2019-07-17T20:02:34.023387+00:00"}, "pull_request": {"type": "pullrequest", "id": 36, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch/pullrequests/36.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch/pull-requests/36"}}, "title": "Eliminate potential deadlock from SIGCHLD signal handler"}}, {"update": {"description": "There were two potential bugs in the way that the SIGCHLD handler was written previously. In one case, the mutex would be locked when the signal was handled, and the handler could not get a lock. In other cases, some of the operations we were doing in the handler were not strictly safe.\r\n\r\nAs a fix, I have introduced a queue that is populated by the handler and consumed via a worker thread. These use a semaphore to signal \\(which is safe\\).\r\n\r\nThis addresses #6 and likely resolves remaining issues in osrf/subt#95\r\n\r\n\u200c\r\n\r\nTest with the launch file from #6.  Without this fix, the launch process will lock and not respond correctly to ctrl-c.  With the fix, startup and shutdown should proceed normally.", "title": "Eliminate potential deadlock from SIGCHLD signal handler", "destination": {"commit": {"hash": "c1d633e4733f", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch/commit/c1d633e4733f.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch/commits/c1d633e4733f"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6981a69-ba64-447a-9739-662a89b25082}ts=2278389"}}, "type": "repository", "name": "ign-launch", "full_name": "ignitionrobotics/ign-launch", "uuid": "{b6981a69-ba64-447a-9739-662a89b25082}"}, "branch": {"name": "ign-launch1"}}, "reason": "", "source": {"commit": {"hash": "0bcdb0147081", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch/commit/0bcdb0147081.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch/commits/0bcdb0147081"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6981a69-ba64-447a-9739-662a89b25082}ts=2278389"}}, "type": "repository", "name": "ign-launch", "full_name": "ignitionrobotics/ign-launch", "uuid": "{b6981a69-ba64-447a-9739-662a89b25082}"}, "branch": {"name": "sigchld_deadlock_fix"}}, "state": "OPEN", "author": {"display_name": "Michael Carroll", "uuid": "{17dbbc15-cbc0-42f0-a985-cde9061c78a0}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B17dbbc15-cbc0-42f0-a985-cde9061c78a0%7D"}, "html": {"href": "https://bitbucket.org/%7B17dbbc15-cbc0-42f0-a985-cde9061c78a0%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:65740f22-cc56-4418-9608-7e17d0ed47b7/2aa259f5-4de1-4f68-9156-eded72041d84/128"}}, "nickname": "Michael Carroll", "type": "user", "account_id": "557058:65740f22-cc56-4418-9608-7e17d0ed47b7"}, "date": "2019-07-17T19:53:25.478180+00:00"}, "pull_request": {"type": "pullrequest", "id": 36, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch/pullrequests/36.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch/pull-requests/36"}}, "title": "Eliminate potential deadlock from SIGCHLD signal handler"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch/pullrequests/36/comments/109696844.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch/pull-requests/36/_/diff#comment-109696844"}}, "parent": {"id": 109696516, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch/pullrequests/36/comments/109696516.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch/pull-requests/36/_/diff#comment-109696516"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 36, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch/pullrequests/36.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch/pull-requests/36"}}, "title": "Eliminate potential deadlock from SIGCHLD signal handler"}, "content": {"raw": "Thanks to @{557058:90bc87b0-2886-4377-a17c-3a6629a697ff} for refreshing me on signal handlers :slight_smile: ", "markup": "markdown", "html": "<p>Thanks to <span class=\"ap-mention\" data-atlassian-id=\"557058:90bc87b0-2886-4377-a17c-3a6629a697ff\">@Addisu Z. Taddese</span> for refreshing me on signal handlers <img class=\"emoji\" src=\"data/pf-emoji-service--cdn.us-east-1.prod.public.atl-paas.net/standard/551c9814-1d37-4573-819d-afab3afeaf32/48x48/1f642.png\" alt=\"\ud83d\ude42\" title=\":slight_smile:\" data-emoji-short-name=\":slight_smile:\" /> </p>", "type": "rendered"}, "created_on": "2019-07-17T19:49:26.392540+00:00", "user": {"display_name": "Michael Carroll", "uuid": "{17dbbc15-cbc0-42f0-a985-cde9061c78a0}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B17dbbc15-cbc0-42f0-a985-cde9061c78a0%7D"}, "html": {"href": "https://bitbucket.org/%7B17dbbc15-cbc0-42f0-a985-cde9061c78a0%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:65740f22-cc56-4418-9608-7e17d0ed47b7/2aa259f5-4de1-4f68-9156-eded72041d84/128"}}, "nickname": "Michael Carroll", "type": "user", "account_id": "557058:65740f22-cc56-4418-9608-7e17d0ed47b7"}, "updated_on": "2019-07-17T19:49:26.406708+00:00", "type": "pullrequest_comment", "id": 109696844}, "pull_request": {"type": "pullrequest", "id": 36, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch/pullrequests/36.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch/pull-requests/36"}}, "title": "Eliminate potential deadlock from SIGCHLD signal handler"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch/pullrequests/36/comments/109696516.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch/pull-requests/36/_/diff#comment-109696516"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 36, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch/pullrequests/36.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch/pull-requests/36"}}, "title": "Eliminate potential deadlock from SIGCHLD signal handler"}, "content": {"raw": "This was implemented with semaphores rather than a mutex \\+ condition\\_variable because they are safe in signal handlers: [http://man7.org/linux/man-pages/man7/signal-safety.7.html](http://man7.org/linux/man-pages/man7/signal-safety.7.html)\n\nThe alternative was a spinloop with a sleep, which seemed undesirable.", "markup": "markdown", "html": "<p>This was implemented with semaphores rather than a mutex + condition_variable because they are safe in signal handlers: <a data-is-external-link=\"true\" href=\"http://man7.org/linux/man-pages/man7/signal-safety.7.html\" rel=\"nofollow\">http://man7.org/linux/man-pages/man7/signal-safety.7.html</a></p>\n<p>The alternative was a spinloop with a sleep, which seemed undesirable.</p>", "type": "rendered"}, "created_on": "2019-07-17T19:46:32.457221+00:00", "user": {"display_name": "Michael Carroll", "uuid": "{17dbbc15-cbc0-42f0-a985-cde9061c78a0}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B17dbbc15-cbc0-42f0-a985-cde9061c78a0%7D"}, "html": {"href": "https://bitbucket.org/%7B17dbbc15-cbc0-42f0-a985-cde9061c78a0%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:65740f22-cc56-4418-9608-7e17d0ed47b7/2aa259f5-4de1-4f68-9156-eded72041d84/128"}}, "nickname": "Michael Carroll", "type": "user", "account_id": "557058:65740f22-cc56-4418-9608-7e17d0ed47b7"}, "updated_on": "2019-07-17T19:46:50.240855+00:00", "type": "pullrequest_comment", "id": 109696516}, "pull_request": {"type": "pullrequest", "id": 36, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch/pullrequests/36.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch/pull-requests/36"}}, "title": "Eliminate potential deadlock from SIGCHLD signal handler"}}, {"update": {"description": "There were two potential bugs in the way that the SIGCHLD handler was written previously. In one case, the mutex would be locked when the signal was handled, and the handler could not get a lock. In other cases, some of the operations we were doing in the handler were not strictly safe.\r\n\r\nAs a fix, I have introduced a queue that is populated by the handler and consumed via a worker thread. These use a semaphore to signal \\(which is safe\\).\r\n\r\nThis addresses #6 and likely resolves remaining issues in osrf/subt#95", "title": "Eliminate potential deadlock from SIGCHLD signal handler", "destination": {"commit": {"hash": "c1d633e4733f", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch/commit/c1d633e4733f.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch/commits/c1d633e4733f"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6981a69-ba64-447a-9739-662a89b25082}ts=2278389"}}, "type": "repository", "name": "ign-launch", "full_name": "ignitionrobotics/ign-launch", "uuid": "{b6981a69-ba64-447a-9739-662a89b25082}"}, "branch": {"name": "ign-launch1"}}, "reason": "", "source": {"commit": {"hash": "0bcdb0147081", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch/commit/0bcdb0147081.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch/commits/0bcdb0147081"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6981a69-ba64-447a-9739-662a89b25082}ts=2278389"}}, "type": "repository", "name": "ign-launch", "full_name": "ignitionrobotics/ign-launch", "uuid": "{b6981a69-ba64-447a-9739-662a89b25082}"}, "branch": {"name": "sigchld_deadlock_fix"}}, "state": "OPEN", "author": {"display_name": "Michael Carroll", "uuid": "{17dbbc15-cbc0-42f0-a985-cde9061c78a0}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B17dbbc15-cbc0-42f0-a985-cde9061c78a0%7D"}, "html": {"href": "https://bitbucket.org/%7B17dbbc15-cbc0-42f0-a985-cde9061c78a0%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:65740f22-cc56-4418-9608-7e17d0ed47b7/2aa259f5-4de1-4f68-9156-eded72041d84/128"}}, "nickname": "Michael Carroll", "type": "user", "account_id": "557058:65740f22-cc56-4418-9608-7e17d0ed47b7"}, "date": "2019-07-17T19:44:58.468546+00:00"}, "pull_request": {"type": "pullrequest", "id": 36, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch/pullrequests/36.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch/pull-requests/36"}}, "title": "Eliminate potential deadlock from SIGCHLD signal handler"}}, {"update": {"description": "There were two potential bugs in the way that the SIGCHLD handler was written previously. In one case, the mutex would be locked when the signal was handled, and the handler could not get a lock. In other cases, some of the operations we were doing in the handler were not strictly safe.\r\n\r\nAs a fix, I have introduced a queue that is populated by the handler and consumed via a worker thread. These use a semaphore to signal \\(which is safe\\).\r\n\r\nThis addresses #6.", "title": "Eliminate potential deadlock from SIGCHLD signal handler", "destination": {"commit": {"hash": "c1d633e4733f", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch/commit/c1d633e4733f.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch/commits/c1d633e4733f"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6981a69-ba64-447a-9739-662a89b25082}ts=2278389"}}, "type": "repository", "name": "ign-launch", "full_name": "ignitionrobotics/ign-launch", "uuid": "{b6981a69-ba64-447a-9739-662a89b25082}"}, "branch": {"name": "ign-launch1"}}, "reason": "", "source": {"commit": {"hash": "0bcdb0147081", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch/commit/0bcdb0147081.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch/commits/0bcdb0147081"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6981a69-ba64-447a-9739-662a89b25082}ts=2278389"}}, "type": "repository", "name": "ign-launch", "full_name": "ignitionrobotics/ign-launch", "uuid": "{b6981a69-ba64-447a-9739-662a89b25082}"}, "branch": {"name": "sigchld_deadlock_fix"}}, "state": "OPEN", "author": {"display_name": "Michael Carroll", "uuid": "{17dbbc15-cbc0-42f0-a985-cde9061c78a0}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B17dbbc15-cbc0-42f0-a985-cde9061c78a0%7D"}, "html": {"href": "https://bitbucket.org/%7B17dbbc15-cbc0-42f0-a985-cde9061c78a0%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:65740f22-cc56-4418-9608-7e17d0ed47b7/2aa259f5-4de1-4f68-9156-eded72041d84/128"}}, "nickname": "Michael Carroll", "type": "user", "account_id": "557058:65740f22-cc56-4418-9608-7e17d0ed47b7"}, "date": "2019-07-17T19:44:32.767919+00:00"}, "pull_request": {"type": "pullrequest", "id": 36, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch/pullrequests/36.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch/pull-requests/36"}}, "title": "Eliminate potential deadlock from SIGCHLD signal handler"}}, {"update": {"description": "There were two potential bugs in the way that the SIGCHLD handler was written previously. In one case, the mutex would be locked when the signal was handled, and the handler could not get a lock. In other cases, some of the operations we were doing in the handler were not strictly safe.\r\n\r\nAs a fix, I have introduced a queue that is populated by the handler and consumed via a worker thread. These use a semaphore to signal \\(which is safe\\).", "title": "Eliminate potential deadlock from SIGCHLD signal handler", "destination": {"commit": {"hash": "c1d633e4733f", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch/commit/c1d633e4733f.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch/commits/c1d633e4733f"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6981a69-ba64-447a-9739-662a89b25082}ts=2278389"}}, "type": "repository", "name": "ign-launch", "full_name": "ignitionrobotics/ign-launch", "uuid": "{b6981a69-ba64-447a-9739-662a89b25082}"}, "branch": {"name": "ign-launch1"}}, "reason": "", "source": {"commit": {"hash": "0bcdb0147081", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch/commit/0bcdb0147081.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch/commits/0bcdb0147081"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6981a69-ba64-447a-9739-662a89b25082}ts=2278389"}}, "type": "repository", "name": "ign-launch", "full_name": "ignitionrobotics/ign-launch", "uuid": "{b6981a69-ba64-447a-9739-662a89b25082}"}, "branch": {"name": "sigchld_deadlock_fix"}}, "state": "OPEN", "author": {"display_name": "Michael Carroll", "uuid": "{17dbbc15-cbc0-42f0-a985-cde9061c78a0}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B17dbbc15-cbc0-42f0-a985-cde9061c78a0%7D"}, "html": {"href": "https://bitbucket.org/%7B17dbbc15-cbc0-42f0-a985-cde9061c78a0%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:65740f22-cc56-4418-9608-7e17d0ed47b7/2aa259f5-4de1-4f68-9156-eded72041d84/128"}}, "nickname": "Michael Carroll", "type": "user", "account_id": "557058:65740f22-cc56-4418-9608-7e17d0ed47b7"}, "date": "2019-07-17T19:43:45.447275+00:00"}, "pull_request": {"type": "pullrequest", "id": 36, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch/pullrequests/36.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch/pull-requests/36"}}, "title": "Eliminate potential deadlock from SIGCHLD signal handler"}}, {"update": {"description": "There were two potential bugs in the way that the SIGCHLD handler was written previously. In one case, the mutex would be locked when the signal was handled, and the handler could not get a lock. In other cases, some of the operations we were doing in the handler were not strictly safe.\r\n\r\nAs a fix, I have introduced a queue that is populated by the handler and consumed via a worker thread. These use a semaphore to signal \\(which is safe\\).", "title": "Eliminate potential deadlock from SIGCHLD signal handler", "destination": {"commit": {"hash": "c1d633e4733f", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch/commit/c1d633e4733f.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch/commits/c1d633e4733f"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6981a69-ba64-447a-9739-662a89b25082}ts=2278389"}}, "type": "repository", "name": "ign-launch", "full_name": "ignitionrobotics/ign-launch", "uuid": "{b6981a69-ba64-447a-9739-662a89b25082}"}, "branch": {"name": "ign-launch1"}}, "reason": "", "source": {"commit": {"hash": "0bcdb0147081", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch/commit/0bcdb0147081.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch/commits/0bcdb0147081"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch"}, "avatar": {"href": "data/bytebucket.org/ravatar/{b6981a69-ba64-447a-9739-662a89b25082}ts=2278389"}}, "type": "repository", "name": "ign-launch", "full_name": "ignitionrobotics/ign-launch", "uuid": "{b6981a69-ba64-447a-9739-662a89b25082}"}, "branch": {"name": "sigchld_deadlock_fix"}}, "state": "OPEN", "author": {"display_name": "Michael Carroll", "uuid": "{17dbbc15-cbc0-42f0-a985-cde9061c78a0}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B17dbbc15-cbc0-42f0-a985-cde9061c78a0%7D"}, "html": {"href": "https://bitbucket.org/%7B17dbbc15-cbc0-42f0-a985-cde9061c78a0%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:65740f22-cc56-4418-9608-7e17d0ed47b7/2aa259f5-4de1-4f68-9156-eded72041d84/128"}}, "nickname": "Michael Carroll", "type": "user", "account_id": "557058:65740f22-cc56-4418-9608-7e17d0ed47b7"}, "date": "2019-07-17T19:43:45.393954+00:00"}, "pull_request": {"type": "pullrequest", "id": 36, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-launch/pullrequests/36.json"}, "html": {"href": "#!/ignitionrobotics/ign-launch/pull-requests/36"}}, "title": "Eliminate potential deadlock from SIGCHLD signal handler"}}]}