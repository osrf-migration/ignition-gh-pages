{"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/582/comments/143912199.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/582/_/diff#comment-143912199"}}, "parent": {"id": 143908136, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/582/comments/143908136.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/582/_/diff#comment-143908136"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 582, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/582.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/582"}}, "title": "Remove select entity from selection helper"}, "content": {"raw": "Oh I see. I think the entity tree should be sending the [selection event](#!/ignitionrobotics/ign-gazebo/src/8064b9eb40bec9b02d1417a7b252a6402ce32980/src/gui/plugins/entity_tree/EntityTree.cc#lines-364) as well though. I guess the problem that could happen is that the event sent by `Scene3D` may be missing entities. For example:\n\n* User selects a link from `EntityTree`: `EntitiesSelected` is emitted with the link ID\n* User selects a model from `Scene3D` holding `Ctrl`: `EntitiesSelected` is emitted with the model ID, but not the link ID\n\nFrom the align tool's side, it needs to keep track of all selection events and merge with the selections it already knows about. The `EntitiesSelected` event should be treated as a diff of selections, not the absolute state of all selections. On the other hand, the `DeselectAllEntities` event should be treated as the absolute state and clear all selections. Makes sense?\n\nI know this is clunky, but this is what we get with a decentralized ledger (blockchain? :smirk: ). If this starts to become a problem we could investigate having a single source of truth. Maybe keeping track of selected entities on the main window :thinking: ", "markup": "markdown", "html": "<p>Oh I see. I think the entity tree should be sending the <a data-is-external-link=\"true\" href=\"#!/ignitionrobotics/ign-gazebo/src/8064b9eb40bec9b02d1417a7b252a6402ce32980/src/gui/plugins/entity_tree/EntityTree.cc#lines-364\" rel=\"nofollow\">selection event</a> as well though. I guess the problem that could happen is that the event sent by <code>Scene3D</code> may be missing entities. For example:</p>\n<ul>\n<li>User selects a link from <code>EntityTree</code>: <code>EntitiesSelected</code> is emitted with the link ID</li>\n<li>User selects a model from <code>Scene3D</code> holding <code>Ctrl</code>: <code>EntitiesSelected</code> is emitted with the model ID, but not the link ID</li>\n</ul>\n<p>From the align tool's side, it needs to keep track of all selection events and merge with the selections it already knows about. The <code>EntitiesSelected</code> event should be treated as a diff of selections, not the absolute state of all selections. On the other hand, the <code>DeselectAllEntities</code> event should be treated as the absolute state and clear all selections. Makes sense?</p>\n<p>I know this is clunky, but this is what we get with a decentralized ledger (blockchain? <img class=\"emoji\" src=\"data/pf-emoji-service--cdn.us-east-1.prod.public.atl-paas.net/standard/551c9814-1d37-4573-819d-afab3afeaf32/48x48/1f60f.png\" alt=\"\ud83d\ude0f\" title=\":smirk:\" data-emoji-short-name=\":smirk:\" /> ). If this starts to become a problem we could investigate having a single source of truth. Maybe keeping track of selected entities on the main window <img class=\"emoji\" src=\"data/pf-emoji-service--cdn.us-east-1.prod.public.atl-paas.net/standard/551c9814-1d37-4573-819d-afab3afeaf32/48x48/1f914.png\" alt=\"\ud83e\udd14\" title=\":thinking:\" data-emoji-short-name=\":thinking:\" /> </p>", "type": "rendered"}, "created_on": "2020-04-06T21:35:22.940211+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2020-04-06T21:35:22.944538+00:00", "type": "pullrequest_comment", "id": 143912199}