{"pagelen": 50, "values": [{"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/87581319.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-87581319"}}, "parent": {"id": 87580900, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/87580900.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-87580900"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}, "content": {"raw": "I'll keep burying myself in this hole a bit longer", "markup": "markdown", "html": "<p>I'll keep burying myself in this hole a bit longer</p>", "type": "rendered"}, "created_on": "2019-01-10T01:24:39.371821+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {}, "updated_on": "2019-01-10T01:24:39.380584+00:00", "type": "pullrequest_comment", "id": 87581319}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/87580900.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-87580900"}}, "parent": {"id": 87433928, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/87433928.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-87433928"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}, "content": {"raw": "Argh, if we remove `components::ParentEntity` in favor of a graph, we can't do things like this anymore:\n\n~~~\nEntity Model::LinkByName(const EntityComponentManager &_ecm,\n    const std::string &_name)\n{\n  return _ecm.EntityByComponents(\n      components::ParentEntity(this->dataPtr->id),\n      components::Name(_name),\n      components::Link());\n}\n~~~\n\nUnless we keep both the graph and the component... and have 2 sources of truth that need to be kept in sync :confused: \n\nOr.... we can have new fancy functions that take advantage of the graph, like `ChildByComponents`, but that would touch the views, which is way more refactoring than I was hoping to do here...", "markup": "markdown", "html": "<p>Argh, if we remove <code>components::ParentEntity</code> in favor of a graph, we can't do things like this anymore:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"nt\">Entity</span> <span class=\"nt\">Model</span><span class=\"p\">::</span><span class=\"nd\">LinkByName</span><span class=\"o\">(</span><span class=\"nt\">const</span> <span class=\"nt\">EntityComponentManager</span> <span class=\"o\">&amp;</span><span class=\"nt\">_ecm</span><span class=\"o\">,</span>\n    <span class=\"nt\">const</span> <span class=\"nt\">std</span><span class=\"p\">::</span><span class=\"nd\">string</span> <span class=\"o\">&amp;</span><span class=\"nt\">_name</span><span class=\"o\">)</span>\n<span class=\"p\">{</span>\n  <span class=\"err\">return</span> <span class=\"err\">_ecm.EntityByComponents(</span>\n      <span class=\"n\">components</span><span class=\"p\">:</span><span class=\"o\">:</span><span class=\"nf\">ParentEntity</span><span class=\"p\">(</span><span class=\"n\">this</span><span class=\"o\">-</span><span class=\"err\">&gt;</span><span class=\"n\">dataPtr</span><span class=\"o\">-</span><span class=\"err\">&gt;</span><span class=\"n\">id</span><span class=\"p\">),</span>\n      <span class=\"n\">components</span><span class=\"o\">::</span><span class=\"nf\">Name</span><span class=\"p\">(</span><span class=\"n\">_name</span><span class=\"p\">),</span>\n      <span class=\"n\">components</span><span class=\"o\">::</span><span class=\"nf\">Link</span><span class=\"p\">());</span>\n<span class=\"p\">}</span>\n</pre></div>\n\n\n<p>Unless we keep both the graph and the component... and have 2 sources of truth that need to be kept in sync <img class=\"emoji\" src=\"data/pf-emoji-service--cdn.us-east-1.prod.public.atl-paas.net/standard/551c9814-1d37-4573-819d-afab3afeaf32/48x48/1f615.png\" alt=\"\ud83d\ude15\" title=\":confused:\" data-emoji-short-name=\":confused:\" /> </p>\n<p>Or.... we can have new fancy functions that take advantage of the graph, like <code>ChildByComponents</code>, but that would touch the views, which is way more refactoring than I was hoping to do here...</p>", "type": "rendered"}, "created_on": "2019-01-10T01:13:29.165095+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {}, "updated_on": "2019-01-10T01:13:29.176015+00:00", "type": "pullrequest_comment", "id": 87580900}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/87547708.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-87547708"}}, "parent": {"id": 87547040, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/87547040.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-87547040"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}, "content": {"raw": "Good point about the extra data being stored in the graph, I hadn't noticed that.", "markup": "markdown", "html": "<p>Good point about the extra data being stored in the graph, I hadn't noticed that.</p>", "type": "rendered"}, "created_on": "2019-01-09T18:13:41.694855+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {}, "updated_on": "2019-01-09T18:13:41.709692+00:00", "type": "pullrequest_comment", "id": 87547708}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/87547040.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-87547040"}}, "parent": {"id": 87517585, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/87517585.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-87517585"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}, "content": {"raw": "I also like the idea. Since the `Each*` calls use views, I don't think we'd have a performance issue. I don't think systems should be allowed to mutate the graph directly. Instead, they can add/remove entities as normal and the graph is mutated as necessary by the `EntityComponentManager`. This probably means we'll need a staging scheme for adding/removing entities to the graph.\n\nSystems like `SceneBroadcaster` currently attach their own data to the vertices of the graph. They will have to store the data somewhere else and use a map from vertex to data.", "markup": "markdown", "html": "<p>I also like the idea. Since the <code>Each*</code> calls use views, I don't think we'd have a performance issue. I don't think systems should be allowed to mutate the graph directly. Instead, they can add/remove entities as normal and the graph is mutated as necessary by the <code>EntityComponentManager</code>. This probably means we'll need a staging scheme for adding/removing entities to the graph.</p>\n<p>Systems like <code>SceneBroadcaster</code> currently attach their own data to the vertices of the graph. They will have to store the data somewhere else and use a map from vertex to data.</p>", "type": "rendered"}, "created_on": "2019-01-09T18:06:37.144885+00:00", "user": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}, "inline": {}, "updated_on": "2019-01-09T18:06:37.155940+00:00", "type": "pullrequest_comment", "id": 87547040}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/87546961.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-87546961"}}, "parent": {"id": 87517585, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/87517585.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-87517585"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}, "content": {"raw": "I would imagine the graph being read-only by external classes, and it will be updated by the ECM every time an entity is added or removed. This means we'll need to add the option of passing a parent entity when an entity is created, and this may touch a lot of the API. In the future, we can also add functions to reparent entities, which would also touch the graph.\n\nI can take a stab at a quick POC for this so we all can have a better feel of what it would look like. It will also be good to use the profiler to see how performance will be affected, I'm not sure we've done a lot of profiling of the graph class in ign-math.", "markup": "markdown", "html": "<p>I would imagine the graph being read-only by external classes, and it will be updated by the ECM every time an entity is added or removed. This means we'll need to add the option of passing a parent entity when an entity is created, and this may touch a lot of the API. In the future, we can also add functions to reparent entities, which would also touch the graph.</p>\n<p>I can take a stab at a quick POC for this so we all can have a better feel of what it would look like. It will also be good to use the profiler to see how performance will be affected, I'm not sure we've done a lot of profiling of the graph class in ign-math.</p>", "type": "rendered"}, "created_on": "2019-01-09T18:05:43.550124+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {}, "updated_on": "2019-01-09T18:05:43.559515+00:00", "type": "pullrequest_comment", "id": 87546961}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/87517585.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-87517585"}}, "parent": {"id": 87433928, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/87433928.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-87433928"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}, "content": {"raw": "I like this idea.  It seems like something that people would want to be able to query from various locations \\(as you noted\\).  It does seem like we could reduce this duplication.\n\nI can\u2019t think of any immediate performance concerns.  Where/when would be the best time to mutate this graph though?  Would each individual system be able to mutate or just query?", "markup": "markdown", "html": "<p>I like this idea.  It seems like something that people would want to be able to query from various locations (as you noted).  It does seem like we could reduce this duplication.</p>\n<p>I can\u2019t think of any immediate performance concerns.  Where/when would be the best time to mutate this graph though?  Would each individual system be able to mutate or just query?</p>", "type": "rendered"}, "created_on": "2019-01-09T14:52:29.974100+00:00", "user": {"display_name": "Michael Carroll", "uuid": "{17dbbc15-cbc0-42f0-a985-cde9061c78a0}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B17dbbc15-cbc0-42f0-a985-cde9061c78a0%7D"}, "html": {"href": "https://bitbucket.org/%7B17dbbc15-cbc0-42f0-a985-cde9061c78a0%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:65740f22-cc56-4418-9608-7e17d0ed47b7/2aa259f5-4de1-4f68-9156-eded72041d84/128"}}, "nickname": "Michael Carroll", "type": "user", "account_id": "557058:65740f22-cc56-4418-9608-7e17d0ed47b7"}, "inline": {}, "updated_on": "2019-01-09T14:52:29.996027+00:00", "type": "pullrequest_comment", "id": 87517585}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/87433928.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-87433928"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}, "content": {"raw": "I like the idea of the entity graph, but I think right now it is duplicating the responsibility of 2 other features:\n\n* `components::ParentEntity`: if systems had a graph easily available, they could query the graph and we wouldn't need a component to hold that information.\n * The `entities` vector inside `EntityComponentManager`: That vector holds all entities, and now this graph also holds them all (split by levels).\n\nI haven't thought this through, but maybe we could avoid this duplication by converting the `EntityComponentManager::entities` into a graph, making it available for querying to all systems and to the `LevelManager`. This would be helpful to other systems too, for example the `SceneBroadcaster` wouldn't need to maintain its own graph anymore.\n\nThoughts? Performance concerns?", "markup": "markdown", "html": "<p>I like the idea of the entity graph, but I think right now it is duplicating the responsibility of 2 other features:</p>\n<ul>\n<li><code>components::ParentEntity</code>: if systems had a graph easily available, they could query the graph and we wouldn't need a component to hold that information.</li>\n<li>The <code>entities</code> vector inside <code>EntityComponentManager</code>: That vector holds all entities, and now this graph also holds them all (split by levels).</li>\n</ul>\n<p>I haven't thought this through, but maybe we could avoid this duplication by converting the <code>EntityComponentManager::entities</code> into a graph, making it available for querying to all systems and to the <code>LevelManager</code>. This would be helpful to other systems too, for example the <code>SceneBroadcaster</code> wouldn't need to maintain its own graph anymore.</p>\n<p>Thoughts? Performance concerns?</p>", "type": "rendered"}, "created_on": "2019-01-09T01:21:13.908312+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {}, "updated_on": "2019-01-09T01:21:13.915829+00:00", "type": "pullrequest_comment", "id": 87433928}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/87425275.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-87425275"}}, "parent": {"id": 87418353, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/87418353.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-87418353"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}, "content": {"raw": "This could also be improved if we were processing only the visuals (or other entities) whose pose components have changed since the last simulation cycle. Thanks for the profiler @carromj.", "markup": "markdown", "html": "<p>This could also be improved if we were processing only the visuals (or other entities) whose pose components have changed since the last simulation cycle. Thanks for the profiler @carromj.</p>", "type": "rendered"}, "created_on": "2019-01-08T22:40:18.131753+00:00", "user": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}, "updated_on": "2019-01-08T22:40:18.147130+00:00", "type": "pullrequest_comment", "id": 87425275}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/87418353.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-87418353"}}, "parent": {"id": 87417086, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/87417086.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-87417086"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}, "content": {"raw": "Interesting that visuals take so much longer than links and models. It may be a good idea to bump the priority of the \"system update rates\" task.", "markup": "markdown", "html": "<p>Interesting that visuals take so much longer than links and models. It may be a good idea to bump the priority of the \"system update rates\" task.</p>", "type": "rendered"}, "created_on": "2019-01-08T21:16:15.247471+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2019-01-08T21:16:52.473752+00:00", "type": "pullrequest_comment", "id": 87418353}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/87417086.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-87417086"}}, "parent": {"id": 86478580, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/86478580.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-86478580"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}, "content": {"raw": "I took a quick stab at profiling this \\(without levels\\)\n\n![](data/bitbucket.org/repo/8zodKzn/images/4001822856-image.png)\n\u200c\n\nIt looks like we have a hot spot here: [#!/ignitionrobotics/ign-gazebo/src/07b10f8e6a1e3f6e03a21ea8b6d59c2843d03352/src/systems/SceneBroadcaster.cc#lines-220](#!/ignitionrobotics/ign-gazebo/src/07b10f8e6a1e3f6e03a21ea8b6d59c2843d03352/src/systems/SceneBroadcaster.cc#lines-220)", "markup": "markdown", "html": "<p>I took a quick stab at profiling this (without levels)</p>\n<p><img alt=\"\" src=\"data/bitbucket.org/repo/8zodKzn/images/4001822856-image.png\" />\n\u200c</p>\n<p>It looks like we have a hot spot here: <a data-is-external-link=\"true\" href=\"#!/ignitionrobotics/ign-gazebo/src/07b10f8e6a1e3f6e03a21ea8b6d59c2843d03352/src/systems/SceneBroadcaster.cc#lines-220\" rel=\"nofollow\">#!/ignitionrobotics/ign-gazebo/src/07b10f8e6a1e3f6e03a21ea8b6d59c2843d03352/src/systems/SceneBroadcaster.cc#lines-220</a></p>", "type": "rendered"}, "created_on": "2019-01-08T21:01:54.538758+00:00", "user": {"display_name": "Michael Carroll", "uuid": "{17dbbc15-cbc0-42f0-a985-cde9061c78a0}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B17dbbc15-cbc0-42f0-a985-cde9061c78a0%7D"}, "html": {"href": "https://bitbucket.org/%7B17dbbc15-cbc0-42f0-a985-cde9061c78a0%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:65740f22-cc56-4418-9608-7e17d0ed47b7/2aa259f5-4de1-4f68-9156-eded72041d84/128"}}, "nickname": "Michael Carroll", "type": "user", "account_id": "557058:65740f22-cc56-4418-9608-7e17d0ed47b7"}, "updated_on": "2019-01-08T21:02:07.446779+00:00", "type": "pullrequest_comment", "id": 87417086}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"update": {"description": "The pull request implements a level system based on the idea that a simulation runner is responsible for loading and unloading all levels in the world.\r\n\r\n## Dependencies:\r\n\r\n* ign-physics branch [remove_entity_features](#!/ignitionrobotics/ign-physics/branch/remove_entity_features)\r\n      * Which in turn depends on ign-physics [pull request #46](#!/ignitionrobotics/ign-physics/pull-requests/46/)\r\n* ign-gui [pull request #182](#!/ignitionrobotics/ign-gui/pull-requests/182)\r\n\r\n\r\n## TODOs:\r\n\r\n* Send only new entities to ign-gui instead of the whole scene when new entities are added\r\n* Add tests for the level manager.\r\n\r\n## To test\r\nCreate a benchmark world using `benchmark.world.erb`\r\n\r\n```\r\n$ erb n_x=8 n_y=8 test/worlds/benchmark.world.erb > test/worlds/benchmark.world\r\n```\r\nRun ign-gazebo with `--levels` flag\r\n```\r\n$ ign-gazebo -v 4 -f test/worlds/benchmark.world --levels\r\n```\r\nBefore starting the simulation, publish command velocities to the red and green balls.\r\n\r\n```\r\nign topic -t /red_ball/move3d/linear_vel -m ignition.msgs.Vector3d -p 'x:4.0 y: -1'\r\nign topic -t /green_ball/move3d/linear_vel -m ignition.msgs.Vector3d -p 'x:3.0 y: 0'\r\n```\r\nThen start the simulation.\r\n\r\n## Levels on\r\n![ign_gazebo_levels_on.gif](https://bitbucket.org/repo/8zodKzn/images/617343584-ign_gazebo_levels_on.gif)\r\n\r\n## Levels off\r\n![ign_gazebo_levels_off.gif](https://bitbucket.org/repo/8zodKzn/images/1356584003-ign_gazebo_levels_off.gif)", "title": "[WIP] Levels", "destination": {"commit": {"hash": "07b10f8e6a1e", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/07b10f8e6a1e.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/07b10f8e6a1e"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "ed4c4e9264b5", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/ed4c4e9264b5.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/ed4c4e9264b5"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "levels"}}, "state": "OPEN", "author": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}, "date": "2019-01-08T19:56:38.613889+00:00"}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/87296509.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-87296509"}}, "parent": {"id": 87293100, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/87293100.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-87293100"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}, "content": {"raw": "For reference, game engines usually \u201cmove\u201d entities into a temporary staging area when they might get reused later, rather than \u201cerasing\u201d them. It would probably be a good idea to explicitly take that approach, and have completely distinct methods for hiding vs erasing?", "markup": "markdown", "html": "<p>For reference, game engines usually \u201cmove\u201d entities into a temporary staging area when they might get reused later, rather than \u201cerasing\u201d them. It would probably be a good idea to explicitly take that approach, and have completely distinct methods for hiding vs erasing?</p>", "type": "rendered"}, "created_on": "2019-01-08T02:51:26.177121+00:00", "user": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "inline": {}, "updated_on": "2019-01-08T02:51:26.195929+00:00", "type": "pullrequest_comment", "id": 87296509}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/87293100.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-87293100"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}, "content": {"raw": "Is there a way to differentiate entities which are being erased because they're outside the level but they should show up later, and entities which are erased forever?", "markup": "markdown", "html": "<p>Is there a way to differentiate entities which are being erased because they're outside the level but they should show up later, and entities which are erased forever?</p>", "type": "rendered"}, "created_on": "2019-01-08T01:25:17.164864+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {}, "updated_on": "2019-01-08T01:25:17.171216+00:00", "type": "pullrequest_comment", "id": 87293100}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/86902084.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-86902084"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}, "content": {"raw": "I'm working on splitting this PR into smaller ones. Please don't review yet.", "markup": "markdown", "html": "<p>I'm working on splitting this PR into smaller ones. Please don't review yet.</p>", "type": "rendered"}, "created_on": "2019-01-02T17:59:19.111416+00:00", "user": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}, "updated_on": "2019-01-02T17:59:19.118683+00:00", "type": "pullrequest_comment", "id": 86902084}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"update": {"description": "The pull request implements a level system based on the idea that a simulation runner is responsible for loading and unloading all levels in the world.\r\n\r\n## Dependencies:\r\n\r\n* ign-physics branch [remove_entity_features](#!/ignitionrobotics/ign-physics/branch/remove_entity_features)\r\n      * Which in turn depends on ign-physics [pull request #46](#!/ignitionrobotics/ign-physics/pull-requests/46/)\r\n* ign-gui [pull request #182](#!/ignitionrobotics/ign-gui/pull-requests/182)\r\n\r\n\r\n## TODOs:\r\n\r\n* Send only new entities to ign-gui instead of the whole scene when new entities are added\r\n* Add tests for the level manager.\r\n\r\n## To test\r\nCreate a benchmark world using `benchmark.world.erb`\r\n\r\n```\r\n$ erb n_x=8 n_y=8 test/worlds/benchmark.world.erb > test/worlds/benchmark.world\r\n```\r\nRun ign-gazebo with `--levels` flag\r\n```\r\n$ ign-gazebo -v 4 -f test/worlds/benchmark.world --levels\r\n```\r\nBefore starting the simulation, publish command velocities to the red and green balls.\r\n\r\n```\r\nign topic -t /red_ball/move3d/linear_vel -m ignition.msgs.Vector3d -p 'x:4.0 y: -1'\r\nign topic -t /green_ball/move3d/linear_vel -m ignition.msgs.Vector3d -p 'x:3.0 y: 0'\r\n```\r\nThen start the simulation.\r\n\r\n## Levels on\r\n![ign_gazebo_levels_on.gif](https://bitbucket.org/repo/8zodKzn/images/617343584-ign_gazebo_levels_on.gif)\r\n\r\n## Levels off\r\n![ign_gazebo_levels_off.gif](https://bitbucket.org/repo/8zodKzn/images/1356584003-ign_gazebo_levels_off.gif)", "title": "[WIP] Levels", "destination": {"commit": {"hash": "9c94f60787a2", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/9c94f60787a2.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/9c94f60787a2"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "e96de522e53d", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/e96de522e53d.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/e96de522e53d"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "levels"}}, "state": "OPEN", "author": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}, "date": "2018-12-28T23:35:14.144596+00:00"}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"update": {"description": "The pull request implements a level system based on the idea that a simulation runner is responsible for loading and unloading all levels in the world.\r\n\r\n## Dependencies:\r\n\r\n* ign-physics branch [remove_entity_features](#!/ignitionrobotics/ign-physics/branch/remove_entity_features)\r\n      * Which in turn depends on ign-physics [pull request #46](#!/ignitionrobotics/ign-physics/pull-requests/46/)\r\n* ign-gui [pull request #182](#!/ignitionrobotics/ign-gui/pull-requests/182)\r\n\r\n\r\n## TODOs:\r\n\r\n* Send only new entities to ign-gui instead of the whole scene when new entities are added\r\n* Add tests for the level manager.\r\n\r\n## To test\r\nCreate a benchmark world using `benchmark.world.erb`\r\n\r\n```\r\n$ erb n_x=8 n_y=8 test/worlds/benchmark.world.erb > test/worlds/benchmark.world\r\n```\r\nRun ign-gazebo with `--levels` flag\r\n```\r\n$ ign-gazebo -v 4 -f test/worlds/benchmark.world --levels\r\n```\r\nBefore starting the simulation, publish command velocities to the red and green balls.\r\n\r\n```\r\nign topic -t /red_ball/move3d/linear_vel -m ignition.msgs.Vector3d -p 'x:4.0 y: -1'\r\nign topic -t /green_ball/move3d/linear_vel -m ignition.msgs.Vector3d -p 'x:3.0 y: 0'\r\n```\r\nThen start the simulation.\r\n\r\n## Levels on\r\n![ign_gazebo_levels_on.gif](https://bitbucket.org/repo/8zodKzn/images/617343584-ign_gazebo_levels_on.gif)\r\n\r\n## Levels off\r\n![ign_gazebo_levels_off.gif](https://bitbucket.org/repo/8zodKzn/images/1356584003-ign_gazebo_levels_off.gif)", "title": "[WIP] Levels", "destination": {"commit": {"hash": "9c94f60787a2", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/9c94f60787a2.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/9c94f60787a2"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "3374aa4b0399", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/3374aa4b0399.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/3374aa4b0399"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "levels"}}, "state": "OPEN", "author": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}, "date": "2018-12-28T23:34:07.771307+00:00"}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/86766434.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-86766434"}}, "parent": {"id": 86766360, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/86766360.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-86766360"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}, "content": {"raw": "Oh sorry, I hadn't noticed that! Not different, that's exactly what I was proposing!\n\nThis reminds me that we should be updating [this documentation](#!/ignitionrobotics/ign-gazebo/src/9c94f60787a277ec94afe7af274cbb4949357398/include/ignition/gazebo/Server.hh?at=default&fileviewer=file-view-default#Server.hh-74) as we add services and topics.", "markup": "markdown", "html": "<p>Oh sorry, I hadn't noticed that! Not different, that's exactly what I was proposing!</p>\n<p>This reminds me that we should be updating <a data-is-external-link=\"true\" href=\"#!/ignitionrobotics/ign-gazebo/src/9c94f60787a277ec94afe7af274cbb4949357398/include/ignition/gazebo/Server.hh?at=default&amp;fileviewer=file-view-default#Server.hh-74\" rel=\"nofollow\">this documentation</a> as we add services and topics.</p>", "type": "rendered"}, "created_on": "2018-12-28T23:04:53.257998+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {}, "updated_on": "2018-12-28T23:04:53.269711+00:00", "type": "pullrequest_comment", "id": 86766434}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/86766360.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-86766360"}}, "parent": {"id": 86764573, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/86764573.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-86764573"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}, "content": {"raw": "Since b9584f8, the scene message only contains the newly created entities. Is that different from what you're proposing?", "markup": "markdown", "html": "<p>Since <a href=\"#!/ignitionrobotics/ign-gazebo/commits/b9584f8\" rel=\"nofollow\" class=\"ap-connect-link\">b9584f8</a>, the scene message only contains the newly created entities. Is that different from what you're proposing?</p>", "type": "rendered"}, "created_on": "2018-12-28T23:00:17.971831+00:00", "user": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}, "inline": {}, "updated_on": "2018-12-28T23:00:17.980484+00:00", "type": "pullrequest_comment", "id": 86766360}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/86764573.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-86764573"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}, "content": {"raw": "In the future, we should consider having a dedicated topic for notifying the creation of new entities which publishes just the created ones. Those messages would be smaller, and clients wouldn't need to parse the whole message to find new entities.\n\nIf you agree, mind adding a `TODO` note somewhere?", "markup": "markdown", "html": "<p>In the future, we should consider having a dedicated topic for notifying the creation of new entities which publishes just the created ones. Those messages would be smaller, and clients wouldn't need to parse the whole message to find new entities.</p>\n<p>If you agree, mind adding a <code>TODO</code> note somewhere?</p>", "type": "rendered"}, "created_on": "2018-12-28T21:55:26.526846+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {}, "updated_on": "2018-12-28T21:55:26.533561+00:00", "type": "pullrequest_comment", "id": 86764573}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/86763064.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-86763064"}}, "parent": {"id": 86756574, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/86756574.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-86756574"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}, "content": {"raw": "Yup, will do.", "markup": "markdown", "html": "<p>Yup, will do.</p>", "type": "rendered"}, "created_on": "2018-12-28T21:08:02.101587+00:00", "user": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}, "inline": {}, "updated_on": "2018-12-28T21:08:02.113496+00:00", "type": "pullrequest_comment", "id": 86763064}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"update": {"description": "The pull request implements a level system based on the idea that a simulation runner is responsible for loading and unloading all levels in the world.\r\n\r\n## Dependencies:\r\n\r\n* ign-physics branch [remove_entity_features](#!/ignitionrobotics/ign-physics/branch/remove_entity_features)\r\n      * Which in turn depends on ign-physics [pull request #46](#!/ignitionrobotics/ign-physics/pull-requests/46/)\r\n* ign-gui [pull request #182](#!/ignitionrobotics/ign-gui/pull-requests/182)\r\n\r\n\r\n## TODOs:\r\n\r\n* Send only new entities to ign-gui instead of the whole scene when new entities are added\r\n* Add tests for the level manager.\r\n\r\n## To test\r\nCreate a benchmark world using `benchmark.world.erb`\r\n\r\n```\r\n$ erb n_x=8 n_y=8 test/worlds/benchmark.world.erb > test/worlds/benchmark.world\r\n```\r\nRun ign-gazebo with `--levels` flag\r\n```\r\n$ ign-gazebo -v 4 -f test/worlds/benchmark.world --levels\r\n```\r\nBefore starting the simulation, publish command velocities to the red and green balls.\r\n\r\n```\r\nign topic -t /red_ball/move3d/linear_vel -m ignition.msgs.Vector3d -p 'x:4.0 y: -1'\r\nign topic -t /green_ball/move3d/linear_vel -m ignition.msgs.Vector3d -p 'x:3.0 y: 0'\r\n```\r\nThen start the simulation.\r\n\r\n## Levels on\r\n![ign_gazebo_levels_on.gif](https://bitbucket.org/repo/8zodKzn/images/617343584-ign_gazebo_levels_on.gif)\r\n\r\n## Levels off\r\n![ign_gazebo_levels_off.gif](https://bitbucket.org/repo/8zodKzn/images/1356584003-ign_gazebo_levels_off.gif)", "title": "[WIP] Levels", "destination": {"commit": {"hash": "399fe05267b5", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/399fe05267b5.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/399fe05267b5"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "b9584f877aee", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/b9584f877aee.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/b9584f877aee"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "levels"}}, "state": "OPEN", "author": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}, "date": "2018-12-28T21:04:08.409230+00:00"}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/86756574.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-86756574"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}, "content": {"raw": "Consider breaking this plugin into a separate PR for faster review", "markup": "markdown", "html": "<p>Consider breaking this plugin into a separate PR for faster review</p>", "type": "rendered"}, "created_on": "2018-12-28T18:19:31.043036+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {}, "updated_on": "2018-12-28T18:19:31.050412+00:00", "type": "pullrequest_comment", "id": 86756574}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/86754556.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-86754556"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}, "content": {"raw": "From this component's name and description, it's not clear what property of the entity it holds. How about being more specific, like `LevelEntities` or something like that? This way, we can ask for \"an entity which contains a list of names of entities to be loaded for a level\". Makes sense?", "markup": "markdown", "html": "<p>From this component's name and description, it's not clear what property of the entity it holds. How about being more specific, like <code>LevelEntities</code> or something like that? This way, we can ask for \"an entity which contains a list of names of entities to be loaded for a level\". Makes sense?</p>", "type": "rendered"}, "created_on": "2018-12-28T17:33:35.518959+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {}, "updated_on": "2018-12-28T17:33:35.524321+00:00", "type": "pullrequest_comment", "id": 86754556}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/86485787.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-86485787"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}, "content": {"raw": "I've been making the same mistake, but we should remember to use the `.sdf` extension instead of `.world`", "markup": "markdown", "html": "<p>I've been making the same mistake, but we should remember to use the <code>.sdf</code> extension instead of <code>.world</code></p>", "type": "rendered"}, "created_on": "2018-12-21T21:18:27.261269+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {}, "updated_on": "2018-12-21T21:18:27.268114+00:00", "type": "pullrequest_comment", "id": 86485787}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/86485619.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-86485619"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}, "content": {"raw": "I don't think this needs to change now, but I've been thinking about `bool` components and whether we should just use the component's existence as a flag instead of the data it holds.\n\nSo we could query for all entities that have a component like `ToRender` instead of all that have `RenderState` and then check the state.", "markup": "markdown", "html": "<p>I don't think this needs to change now, but I've been thinking about <code>bool</code> components and whether we should just use the component's existence as a flag instead of the data it holds.</p>\n<p>So we could query for all entities that have a component like <code>ToRender</code> instead of all that have <code>RenderState</code> and then check the state.</p>", "type": "rendered"}, "created_on": "2018-12-21T21:15:13.562310+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {}, "updated_on": "2018-12-21T21:15:13.570820+00:00", "type": "pullrequest_comment", "id": 86485619}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/86485476.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-86485476"}}, "parent": {"id": 86485390, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/86485390.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-86485390"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}, "content": {"raw": "Also for `Performer`", "markup": "markdown", "html": "<p>Also for <code>Performer</code></p>", "type": "rendered"}, "created_on": "2018-12-21T21:11:59.876395+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {}, "updated_on": "2018-12-21T21:11:59.885108+00:00", "type": "pullrequest_comment", "id": 86485476}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/86485390.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-86485390"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}, "content": {"raw": "Let's use `TagWrapper` so it has equality operators?", "markup": "markdown", "html": "<p>Let's use <code>TagWrapper</code> so it has equality operators?</p>", "type": "rendered"}, "created_on": "2018-12-21T21:10:22.187162+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {}, "updated_on": "2018-12-21T21:10:22.201052+00:00", "type": "pullrequest_comment", "id": 86485390}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/86478580.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-86478580"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}, "content": {"raw": "Nice! Good to see that RTF improved quite a bit. It\u2019s still is a bit low in the one without levels given that it\u2019s a simple world. Good thing that we have a profiler in the works.", "markup": "markdown", "html": "<p>Nice! Good to see that RTF improved quite a bit. It\u2019s still is a bit low in the one without levels given that it\u2019s a simple world. Good thing that we have a profiler in the works.</p>", "type": "rendered"}, "created_on": "2018-12-21T19:23:24.219096+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "updated_on": "2018-12-21T19:23:24.227401+00:00", "type": "pullrequest_comment", "id": 86478580}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"update": {"description": "The pull request implements a level system based on the idea that a simulation runner is responsible for loading and unloading all levels in the world.\r\n\r\n## Dependencies:\r\n\r\n* ign-physics branch [remove_entity_features](#!/ignitionrobotics/ign-physics/branch/remove_entity_features)\r\n      * Which in turn depends on ign-physics [pull request #46](#!/ignitionrobotics/ign-physics/pull-requests/46/)\r\n* ign-gui [pull request #182](#!/ignitionrobotics/ign-gui/pull-requests/182)\r\n\r\n\r\n## TODOs:\r\n\r\n* Send only new entities to ign-gui instead of the whole scene when new entities are added\r\n* Add tests for the level manager.\r\n\r\n## To test\r\nCreate a benchmark world using `benchmark.world.erb`\r\n\r\n```\r\n$ erb n_x=8 n_y=8 test/worlds/benchmark.world.erb > test/worlds/benchmark.world\r\n```\r\nRun ign-gazebo with `--levels` flag\r\n```\r\n$ ign-gazebo -v 4 -f test/worlds/benchmark.world --levels\r\n```\r\nBefore starting the simulation, publish command velocities to the red and green balls.\r\n\r\n```\r\nign topic -t /red_ball/move3d/linear_vel -m ignition.msgs.Vector3d -p 'x:4.0 y: -1'\r\nign topic -t /green_ball/move3d/linear_vel -m ignition.msgs.Vector3d -p 'x:3.0 y: 0'\r\n```\r\nThen start the simulation.\r\n\r\n## Levels on\r\n![ign_gazebo_levels_on.gif](https://bitbucket.org/repo/8zodKzn/images/617343584-ign_gazebo_levels_on.gif)\r\n\r\n## Levels off\r\n![ign_gazebo_levels_off.gif](https://bitbucket.org/repo/8zodKzn/images/1356584003-ign_gazebo_levels_off.gif)", "title": "[WIP] Levels", "destination": {"commit": {"hash": "48c0d33c94cb", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/48c0d33c94cb.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/48c0d33c94cb"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "37c8b868fba3", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/37c8b868fba3.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/37c8b868fba3"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "levels"}}, "state": "OPEN", "author": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}, "date": "2018-12-21T19:02:42.051199+00:00"}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"update": {"description": "The pull request implements a level system based on the idea that a simulation runner is responsible for loading and unloading all levels in the world.\r\n\r\n## Dependencies:\r\n\r\n* ign-physics branch [remove_entity_features](#!/ignitionrobotics/ign-physics/branch/remove_entity_features)\r\n      * Which in turn depends on ign-physics [pull request #46](#!/ignitionrobotics/ign-physics/pull-requests/46/)\r\n* ign-gui [pull request #182](#!/ignitionrobotics/ign-gui/pull-requests/182)\r\n\r\n\r\n## TODOs:\r\n\r\n* Send only new entities to ign-gui instead of the whole scene when new entities are added\r\n* Add tests for the level manager.\r\n\r\n## To test\r\nCreate a benchmark world using `benchmark.world.erb`\r\n\r\n```\r\n$ erb n_x=8 n_y=8 test/worlds/benchmark.world.erb > test/worlds/benchmark.world\r\n```\r\nRun ign-gazebo with `--levels` flag\r\n```\r\n$ ign-gazebo -v 4 -f test/worlds/benchmark.world --levels\r\n```\r\nBefore starting the simulation, publish command velocities to the red and green balls.\r\n\r\n```\r\nign topic -t /red_ball/move3d/linear_vel -m ignition.msgs.Vector3d -p 'x:4.0 y: -1'\r\nign topic -t /green_ball/move3d/linear_vel -m ignition.msgs.Vector3d -p 'x:3.0 y: 0'\r\n```\r\nThen start the simulation.\r\n\r\n## Levels on\r\n![ign_gazebo_levels_on.gif](https://bitbucket.org/repo/8zodKzn/images/617343584-ign_gazebo_levels_on.gif)\r\n\r\n## Levels off\r\n![ign_gazebo_levels_off.gif](https://bitbucket.org/repo/8zodKzn/images/1356584003-ign_gazebo_levels_off.gif)", "title": "[WIP] Levels", "destination": {"commit": {"hash": "48c0d33c94cb", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/48c0d33c94cb.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/48c0d33c94cb"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "37c8b868fba3", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/37c8b868fba3.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/37c8b868fba3"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "levels"}}, "state": "OPEN", "author": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}, "date": "2018-12-21T19:02:42.008960+00:00"}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}]}