{"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/87580900.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-gazebo/diff/ignitionrobotics/ign-gazebo:ed4c4e9264b5..ebf36aa50919?path=src%2FLevelManager.hh"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-87580900"}}, "parent": {"id": 87433928, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/87433928.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-87433928"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}, "content": {"raw": "Argh, if we remove `components::ParentEntity` in favor of a graph, we can't do things like this anymore:\n\n~~~\nEntity Model::LinkByName(const EntityComponentManager &_ecm,\n    const std::string &_name)\n{\n  return _ecm.EntityByComponents(\n      components::ParentEntity(this->dataPtr->id),\n      components::Name(_name),\n      components::Link());\n}\n~~~\n\nUnless we keep both the graph and the component... and have 2 sources of truth that need to be kept in sync :confused: \n\nOr.... we can have new fancy functions that take advantage of the graph, like `ChildByComponents`, but that would touch the views, which is way more refactoring than I was hoping to do here...", "markup": "markdown", "html": "<p>Argh, if we remove <code>components::ParentEntity</code> in favor of a graph, we can't do things like this anymore:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"nt\">Entity</span> <span class=\"nt\">Model</span><span class=\"p\">::</span><span class=\"nd\">LinkByName</span><span class=\"o\">(</span><span class=\"nt\">const</span> <span class=\"nt\">EntityComponentManager</span> <span class=\"o\">&amp;</span><span class=\"nt\">_ecm</span><span class=\"o\">,</span>\n    <span class=\"nt\">const</span> <span class=\"nt\">std</span><span class=\"p\">::</span><span class=\"nd\">string</span> <span class=\"o\">&amp;</span><span class=\"nt\">_name</span><span class=\"o\">)</span>\n<span class=\"p\">{</span>\n  <span class=\"err\">return</span> <span class=\"err\">_ecm.EntityByComponents(</span>\n      <span class=\"n\">components</span><span class=\"p\">:</span><span class=\"o\">:</span><span class=\"nf\">ParentEntity</span><span class=\"p\">(</span><span class=\"n\">this</span><span class=\"o\">-</span><span class=\"err\">&gt;</span><span class=\"n\">dataPtr</span><span class=\"o\">-</span><span class=\"err\">&gt;</span><span class=\"n\">id</span><span class=\"p\">),</span>\n      <span class=\"n\">components</span><span class=\"o\">::</span><span class=\"nf\">Name</span><span class=\"p\">(</span><span class=\"n\">_name</span><span class=\"p\">),</span>\n      <span class=\"n\">components</span><span class=\"o\">::</span><span class=\"nf\">Link</span><span class=\"p\">());</span>\n<span class=\"p\">}</span>\n</pre></div>\n\n\n<p>Unless we keep both the graph and the component... and have 2 sources of truth that need to be kept in sync <img class=\"emoji\" src=\"data/pf-emoji-service--cdn.us-east-1.prod.public.atl-paas.net/standard/551c9814-1d37-4573-819d-afab3afeaf32/48x48/1f615.png\" alt=\"\ud83d\ude15\" title=\":confused:\" data-emoji-short-name=\":confused:\" /> </p>\n<p>Or.... we can have new fancy functions that take advantage of the graph, like <code>ChildByComponents</code>, but that would touch the views, which is way more refactoring than I was hoping to do here...</p>", "type": "rendered"}, "created_on": "2019-01-10T01:13:29.165095+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {"to": 176, "from": null, "outdated": true, "path": "src/LevelManager.hh"}, "updated_on": "2019-01-10T01:13:29.176015+00:00", "type": "pullrequest_comment", "id": 87580900}