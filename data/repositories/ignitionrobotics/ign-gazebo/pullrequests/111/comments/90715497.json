{"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/90715497.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-gazebo/diff/ignitionrobotics/ign-gazebo:eaec0df805da..04ec86f90102?path=src%2FLevelManager.cc"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-90715497"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}, "content": {"raw": "Thanks for adding the warning. While testing this, I realized that the code will only get here if the world has the dummy plugin though.\n\nIn fact, `ign-gazebo --levels -v 4 -f ../examples/worlds/shapes.sdf` doesn't load at all, unless I do this change:\n\n~~~\ndiff -r eaec0df805da src/LevelManager.cc\n--- a/src/LevelManager.cc       Wed Feb 06 15:22:15 2019 -0800\n+++ b/src/LevelManager.cc       Wed Feb 06 15:40:34 2019 -0800\n@@ -88,11 +88,14 @@\n   {\n     if (pluginElem == nullptr)\n     {\n-      ignerr << \"Could not find a plugin tag with name \" << kPluginName << \"\\n\";\n-      return;\n+      ignerr << \"Could not find a plugin tag with name \" << kPluginName\n+             << \". Levels will not work.\\n\";\n     }\n-    this->ReadPerformers(pluginElem);\n-    this->ReadLevels(pluginElem);\n+    else\n+    {\n+      this->ReadPerformers(pluginElem);\n+      this->ReadLevels(pluginElem);\n+    }\n   }\n \n   this->ConfigureDefaultLevel();\n~~~", "markup": "markdown", "html": "<p>Thanks for adding the warning. While testing this, I realized that the code will only get here if the world has the dummy plugin though.</p>\n<p>In fact, <code>ign-gazebo --levels -v 4 -f ../examples/worlds/shapes.sdf</code> doesn't load at all, unless I do this change:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"gh\">diff -r eaec0df805da src/LevelManager.cc</span>\n<span class=\"gd\">--- a/src/LevelManager.cc       Wed Feb 06 15:22:15 2019 -0800</span>\n<span class=\"gi\">+++ b/src/LevelManager.cc       Wed Feb 06 15:40:34 2019 -0800</span>\n<span class=\"gu\">@@ -88,11 +88,14 @@</span>\n   {\n     if (pluginElem == nullptr)\n     {\n<span class=\"gd\">-      ignerr &lt;&lt; &quot;Could not find a plugin tag with name &quot; &lt;&lt; kPluginName &lt;&lt; &quot;\\n&quot;;</span>\n<span class=\"gd\">-      return;</span>\n<span class=\"gi\">+      ignerr &lt;&lt; &quot;Could not find a plugin tag with name &quot; &lt;&lt; kPluginName</span>\n<span class=\"gi\">+             &lt;&lt; &quot;. Levels will not work.\\n&quot;;</span>\n     }\n<span class=\"gd\">-    this-&gt;ReadPerformers(pluginElem);</span>\n<span class=\"gd\">-    this-&gt;ReadLevels(pluginElem);</span>\n<span class=\"gi\">+    else</span>\n<span class=\"gi\">+    {</span>\n<span class=\"gi\">+      this-&gt;ReadPerformers(pluginElem);</span>\n<span class=\"gi\">+      this-&gt;ReadLevels(pluginElem);</span>\n<span class=\"gi\">+    }</span>\n   }\n\n   this-&gt;ConfigureDefaultLevel();\n</pre></div>", "type": "rendered"}, "created_on": "2019-02-06T23:41:50.037004+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {"to": 148, "from": null, "outdated": true, "path": "src/LevelManager.cc"}, "updated_on": "2019-02-06T23:41:50.047185+00:00", "type": "pullrequest_comment", "id": 90715497}