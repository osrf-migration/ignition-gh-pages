{"pagelen": 50, "values": [{"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/90334437.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-90334437"}}, "parent": {"id": 90249036, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/90249036.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-90249036"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}, "content": {"raw": "Yup, makes sense. Now that we have the factory class, we can definitely do this.", "markup": "markdown", "html": "<p>Yup, makes sense. Now that we have the factory class, we can definitely do this.</p>", "type": "rendered"}, "created_on": "2019-02-04T15:36:28.589008+00:00", "user": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}, "inline": {}, "updated_on": "2019-02-04T15:36:28.638818+00:00", "type": "pullrequest_comment", "id": 90334437}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/90249036.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-90249036"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}, "content": {"raw": "One thought that crosses my mind is that when `useLevels == false`, the `LevelManager` shouldn't even be loaded. I'm not asking anything to be changed in the PR, but I was wondering if that reasoning made sense to you?", "markup": "markdown", "html": "<p>One thought that crosses my mind is that when <code>useLevels == false</code>, the <code>LevelManager</code> shouldn't even be loaded. I'm not asking anything to be changed in the PR, but I was wondering if that reasoning made sense to you?</p>", "type": "rendered"}, "created_on": "2019-02-04T04:08:53.650486+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {}, "updated_on": "2019-02-04T04:08:53.664150+00:00", "type": "pullrequest_comment", "id": 90249036}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"update": {"description": "The pull request implements a level system based on the idea that a simulation runner is responsible for loading and unloading all levels in the world.\r\n\r\n## Dependencies:\r\n\r\n* ~~ign-physics branch [remove_model_features](#!/ignitionrobotics/ign-physics/branch/remove_entity_features)~~\r\n      * ~~Which in turn depends on ign-physics [pull request #46](#!/ignitionrobotics/ign-physics/pull-requests/46/)~~\r\n* ~~ign-gui [pull request #182](#!/ignitionrobotics/ign-gui/pull-requests/182)~~\r\n\r\n\r\n## TODOs:\r\n\r\n* ~~Send only new entities to ign-gui instead of the whole scene when new entities are added~~\r\n* ~~Add tests for the level manager.~~\r\n\r\n## To test\r\nCreate a benchmark world using `benchmark.world.erb`\r\n\r\n```\r\n$ erb n_x=8 n_y=8 test/worlds/benchmark.sdf.erb > test/worlds/benchmark.sdf\r\n```\r\nRun ign-gazebo with `--levels` flag\r\n```\r\n$ ign-gazebo -v 4 -f test/worlds/benchmark.sdf --levels\r\n```\r\nBefore starting the simulation, publish command velocities to the red and green vehicles.\r\n\r\n```\r\nign topic -t \"/model/vehicle_red/cmd_vel\" -m ignition.msgs.Twist -p \"linear: {x: 2.5}\"\r\nign topic -t \"/model/vehicle_blue/cmd_vel\" -m ignition.msgs.Twist -p \"linear: {x: 2.5}\"\r\n\r\n```\r\nThen start the simulation.\r\n\r\n## Levels on\r\n![ign_gazebo_levels_on2.gif](https://bitbucket.org/repo/8zodKzn/images/1414413745-ign_gazebo_levels_on2.gif)\r\n## Levels off\r\n![ign_gazebo_levels_off2.gif](https://bitbucket.org/repo/8zodKzn/images/2684170126-ign_gazebo_levels_off2.gif)", "title": "[A-1] Levels", "destination": {"commit": {"hash": "06efe3b5ad0f", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/06efe3b5ad0f.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/06efe3b5ad0f"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "4606bd1e2123", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/4606bd1e2123.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/4606bd1e2123"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "levels"}}, "state": "OPEN", "author": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}, "date": "2019-02-02T05:14:50.765060+00:00"}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/90218527.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-90218527"}}, "parent": {"id": 90217993, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/90217993.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-90217993"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}, "content": {"raw": "I had originally implemented the functionality of the `LevelManager` inside `SimulationRunner`. I decided to move it into its own class so that we can create other types of level managers down the road.  It's also fairly isolated from the rest of the `SimulationRunner`'s functionality so it made sense to do it. But it's definitely meant to be owned by an instance of a `SimulationRunner` and should not outlive that instance. I like the idea of making it a private internal class, but I'd vote for punting if we're going to change the roles of the classes as @chapulina [mentioned](#!/ignitionrobotics/ign-gazebo/pull-requests/111/a-1-levels/activity#comment-90218041).  ", "markup": "markdown", "html": "<p>I had originally implemented the functionality of the <code>LevelManager</code> inside <code>SimulationRunner</code>. I decided to move it into its own class so that we can create other types of level managers down the road.  It's also fairly isolated from the rest of the <code>SimulationRunner</code>'s functionality so it made sense to do it. But it's definitely meant to be owned by an instance of a <code>SimulationRunner</code> and should not outlive that instance. I like the idea of making it a private internal class, but I'd vote for punting if we're going to change the roles of the classes as @chapulina <a data-is-external-link=\"true\" href=\"#!/ignitionrobotics/ign-gazebo/pull-requests/111/a-1-levels/activity#comment-90218041\" rel=\"nofollow\">mentioned</a>.  </p>", "type": "rendered"}, "created_on": "2019-02-02T04:57:11.003856+00:00", "user": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}, "inline": {}, "updated_on": "2019-02-02T04:57:11.018943+00:00", "type": "pullrequest_comment", "id": 90218527}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/90218041.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-90218041"}}, "parent": {"id": 90217993, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/90217993.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-90217993"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}, "content": {"raw": "+1 to revisiting this with more time later. I think we eventually need to make the architecture clearer by defining precise roles for `Server`, `SimulationRunner`, `LevelManager` and `EntityComponentManager` and defining the relationships between them.", "markup": "markdown", "html": "<p>+1 to revisiting this with more time later. I think we eventually need to make the architecture clearer by defining precise roles for <code>Server</code>, <code>SimulationRunner</code>, <code>LevelManager</code> and <code>EntityComponentManager</code> and defining the relationships between them.</p>", "type": "rendered"}, "created_on": "2019-02-02T03:25:57.129532+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {}, "updated_on": "2019-02-02T03:25:57.137941+00:00", "type": "pullrequest_comment", "id": 90218041}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/90217993.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-90217993"}}, "parent": {"id": 90206788, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/90206788.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-90206788"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}, "content": {"raw": "My issue is that this class depends on the pointer being valid throughout the life of this class. The pointer is assumed to be valid, whereas a shared_ptr guarantees that the pointer will be valid.\n\nHow do you feel about ensuring that only the simulation runner can create a level manager, and leave this as a raw pointer? You could make the constructor a private friend to the simulation runner. Or make the level manager a private internal class of the simulation runner.\n\nI'm also okay if you want to punt on this, especially since we haven't come up with a good method for dependency injection. If you want to punt, then I can create an issue for this.", "markup": "markdown", "html": "<p>My issue is that this class depends on the pointer being valid throughout the life of this class. The pointer is assumed to be valid, whereas a shared_ptr guarantees that the pointer will be valid.</p>\n<p>How do you feel about ensuring that only the simulation runner can create a level manager, and leave this as a raw pointer? You could make the constructor a private friend to the simulation runner. Or make the level manager a private internal class of the simulation runner.</p>\n<p>I'm also okay if you want to punt on this, especially since we haven't come up with a good method for dependency injection. If you want to punt, then I can create an issue for this.</p>", "type": "rendered"}, "created_on": "2019-02-02T03:17:47.834339+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "inline": {}, "updated_on": "2019-02-02T03:17:47.843375+00:00", "type": "pullrequest_comment", "id": 90217993}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"update": {"description": "The pull request implements a level system based on the idea that a simulation runner is responsible for loading and unloading all levels in the world.\r\n\r\n## Dependencies:\r\n\r\n* ~~ign-physics branch [remove_model_features](#!/ignitionrobotics/ign-physics/branch/remove_entity_features)~~\r\n      * ~~Which in turn depends on ign-physics [pull request #46](#!/ignitionrobotics/ign-physics/pull-requests/46/)~~\r\n* ~~ign-gui [pull request #182](#!/ignitionrobotics/ign-gui/pull-requests/182)~~\r\n\r\n\r\n## TODOs:\r\n\r\n* ~~Send only new entities to ign-gui instead of the whole scene when new entities are added~~\r\n* ~~Add tests for the level manager.~~\r\n\r\n## To test\r\nCreate a benchmark world using `benchmark.world.erb`\r\n\r\n```\r\n$ erb n_x=8 n_y=8 test/worlds/benchmark.sdf.erb > test/worlds/benchmark.sdf\r\n```\r\nRun ign-gazebo with `--levels` flag\r\n```\r\n$ ign-gazebo -v 4 -f test/worlds/benchmark.sdf --levels\r\n```\r\nBefore starting the simulation, publish command velocities to the red and green vehicles.\r\n\r\n```\r\nign topic -t \"/model/vehicle_red/cmd_vel\" -m ignition.msgs.Twist -p \"linear: {x: 2.5}\"\r\nign topic -t \"/model/vehicle_blue/cmd_vel\" -m ignition.msgs.Twist -p \"linear: {x: 2.5}\"\r\n\r\n```\r\nThen start the simulation.\r\n\r\n## Levels on\r\n![ign_gazebo_levels_on2.gif](https://bitbucket.org/repo/8zodKzn/images/1414413745-ign_gazebo_levels_on2.gif)\r\n## Levels off\r\n![ign_gazebo_levels_off2.gif](https://bitbucket.org/repo/8zodKzn/images/2684170126-ign_gazebo_levels_off2.gif)", "title": "[A-1] Levels", "destination": {"commit": {"hash": "06efe3b5ad0f", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/06efe3b5ad0f.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/06efe3b5ad0f"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "8e06e3847568", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/8e06e3847568.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/8e06e3847568"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "levels"}}, "state": "OPEN", "author": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}, "date": "2019-02-01T21:37:33.211540+00:00"}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/90206788.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-90206788"}}, "parent": {"id": 90173714, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/90173714.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-90173714"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}, "content": {"raw": "So `SimulationRunner` also contains a pointer to `LevelManager`. In fact, `SimulationRunner` has ownership of `LevelManager` and this pointer here is a non-owning pointer.", "markup": "markdown", "html": "<p>So <code>SimulationRunner</code> also contains a pointer to <code>LevelManager</code>. In fact, <code>SimulationRunner</code> has ownership of <code>LevelManager</code> and this pointer here is a non-owning pointer.</p>", "type": "rendered"}, "created_on": "2019-02-01T21:28:49.969602+00:00", "user": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}, "inline": {}, "updated_on": "2019-02-01T21:28:49.979086+00:00", "type": "pullrequest_comment", "id": 90206788}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/90205691.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-90205691"}}, "parent": {"id": 90184736, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/90184736.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-90184736"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}, "content": {"raw": "I get an error like that if I don't have DART installed. Can you verify you have the following packages  and their version is 6.7.2? `libdart6-dev, libdart6-utils-urdf-dev, libdart6-collision-bullet-dev`", "markup": "markdown", "html": "<p>I get an error like that if I don't have DART installed. Can you verify you have the following packages  and their version is 6.7.2? <code>libdart6-dev, libdart6-utils-urdf-dev, libdart6-collision-bullet-dev</code></p>", "type": "rendered"}, "created_on": "2019-02-01T21:13:24.767960+00:00", "user": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}, "updated_on": "2019-02-01T21:13:24.777329+00:00", "type": "pullrequest_comment", "id": 90205691}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/90198629.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-90198629"}}, "parent": {"id": 90179499, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/90179499.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-90179499"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}, "content": {"raw": "I was hoping by keeping an `sdf::Root` object in `ServerPrivate`, I could ensure that this pointer will be valid, but it looks like it's a pointer to an element in `std::vector`, so not very reliable. But we do need to have a valid pointer/copy of the world for the level manager. `sdf::World` is not copyable right now. Should I pass in a pointer to the `sdf::Root` and the world index instead?\n", "markup": "markdown", "html": "<p>I was hoping by keeping an <code>sdf::Root</code> object in <code>ServerPrivate</code>, I could ensure that this pointer will be valid, but it looks like it's a pointer to an element in <code>std::vector</code>, so not very reliable. But we do need to have a valid pointer/copy of the world for the level manager. <code>sdf::World</code> is not copyable right now. Should I pass in a pointer to the <code>sdf::Root</code> and the world index instead?</p>", "type": "rendered"}, "created_on": "2019-02-01T19:44:56.987990+00:00", "user": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}, "inline": {}, "updated_on": "2019-02-01T19:44:56.998333+00:00", "type": "pullrequest_comment", "id": 90198629}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/90197221.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-90197221"}}, "parent": {"id": 90177755, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/90177755.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-90177755"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}, "content": {"raw": "The INTEGRATION_physics test was a left over when I had the Move3D system in this branch. Removed in dc3a235 .", "markup": "markdown", "html": "<p>The INTEGRATION_physics test was a left over when I had the Move3D system in this branch. Removed in <a href=\"#!/ignitionrobotics/ign-gazebo/commits/dc3a235\" rel=\"nofollow\" class=\"ap-connect-link\">dc3a235</a> .</p>", "type": "rendered"}, "created_on": "2019-02-01T19:27:42.904015+00:00", "user": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}, "updated_on": "2019-02-01T19:27:42.915636+00:00", "type": "pullrequest_comment", "id": 90197221}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"update": {"description": "The pull request implements a level system based on the idea that a simulation runner is responsible for loading and unloading all levels in the world.\r\n\r\n## Dependencies:\r\n\r\n* ~~ign-physics branch [remove_model_features](#!/ignitionrobotics/ign-physics/branch/remove_entity_features)~~\r\n      * ~~Which in turn depends on ign-physics [pull request #46](#!/ignitionrobotics/ign-physics/pull-requests/46/)~~\r\n* ~~ign-gui [pull request #182](#!/ignitionrobotics/ign-gui/pull-requests/182)~~\r\n\r\n\r\n## TODOs:\r\n\r\n* ~~Send only new entities to ign-gui instead of the whole scene when new entities are added~~\r\n* ~~Add tests for the level manager.~~\r\n\r\n## To test\r\nCreate a benchmark world using `benchmark.world.erb`\r\n\r\n```\r\n$ erb n_x=8 n_y=8 test/worlds/benchmark.sdf.erb > test/worlds/benchmark.sdf\r\n```\r\nRun ign-gazebo with `--levels` flag\r\n```\r\n$ ign-gazebo -v 4 -f test/worlds/benchmark.sdf --levels\r\n```\r\nBefore starting the simulation, publish command velocities to the red and green vehicles.\r\n\r\n```\r\nign topic -t \"/model/vehicle_red/cmd_vel\" -m ignition.msgs.Twist -p \"linear: {x: 2.5}\"\r\nign topic -t \"/model/vehicle_blue/cmd_vel\" -m ignition.msgs.Twist -p \"linear: {x: 2.5}\"\r\n\r\n```\r\nThen start the simulation.\r\n\r\n## Levels on\r\n![ign_gazebo_levels_on2.gif](https://bitbucket.org/repo/8zodKzn/images/1414413745-ign_gazebo_levels_on2.gif)\r\n## Levels off\r\n![ign_gazebo_levels_off2.gif](https://bitbucket.org/repo/8zodKzn/images/2684170126-ign_gazebo_levels_off2.gif)", "title": "[A-1] Levels", "destination": {"commit": {"hash": "06efe3b5ad0f", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/06efe3b5ad0f.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/06efe3b5ad0f"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "1c375ed010f9", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/1c375ed010f9.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/1c375ed010f9"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "levels"}}, "state": "OPEN", "author": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}, "date": "2019-02-01T19:25:03.941077+00:00"}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"update": {"description": "The pull request implements a level system based on the idea that a simulation runner is responsible for loading and unloading all levels in the world.\r\n\r\n## Dependencies:\r\n\r\n* ~~ign-physics branch [remove_model_features](#!/ignitionrobotics/ign-physics/branch/remove_entity_features)~~\r\n      * ~~Which in turn depends on ign-physics [pull request #46](#!/ignitionrobotics/ign-physics/pull-requests/46/)~~\r\n* ~~ign-gui [pull request #182](#!/ignitionrobotics/ign-gui/pull-requests/182)~~\r\n\r\n\r\n## TODOs:\r\n\r\n* ~~Send only new entities to ign-gui instead of the whole scene when new entities are added~~\r\n* ~~Add tests for the level manager.~~\r\n\r\n## To test\r\nCreate a benchmark world using `benchmark.world.erb`\r\n\r\n```\r\n$ erb n_x=8 n_y=8 test/worlds/benchmark.sdf.erb > test/worlds/benchmark.sdf\r\n```\r\nRun ign-gazebo with `--levels` flag\r\n```\r\n$ ign-gazebo -v 4 -f test/worlds/benchmark.sdf --levels\r\n```\r\nBefore starting the simulation, publish command velocities to the red and green vehicles.\r\n\r\n```\r\nign topic -t \"/model/vehicle_red/cmd_vel\" -m ignition.msgs.Twist -p \"linear: {x: 2.5}\"\r\nign topic -t \"/model/vehicle_blue/cmd_vel\" -m ignition.msgs.Twist -p \"linear: {x: 2.5}\"\r\n\r\n```\r\nThen start the simulation.\r\n\r\n## Levels on\r\n![ign_gazebo_levels_on2.gif](https://bitbucket.org/repo/8zodKzn/images/1414413745-ign_gazebo_levels_on2.gif)\r\n## Levels off\r\n![ign_gazebo_levels_off2.gif](https://bitbucket.org/repo/8zodKzn/images/2684170126-ign_gazebo_levels_off2.gif)", "title": "[A-1] Levels", "destination": {"commit": {"hash": "06efe3b5ad0f", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/06efe3b5ad0f.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/06efe3b5ad0f"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "dc3a23519607", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/dc3a23519607.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/dc3a23519607"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "levels"}}, "state": "OPEN", "author": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}, "date": "2019-02-01T19:22:36.984700+00:00"}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"update": {"description": "The pull request implements a level system based on the idea that a simulation runner is responsible for loading and unloading all levels in the world.\r\n\r\n## Dependencies:\r\n\r\n* ~~ign-physics branch [remove_model_features](#!/ignitionrobotics/ign-physics/branch/remove_entity_features)~~\r\n      * ~~Which in turn depends on ign-physics [pull request #46](#!/ignitionrobotics/ign-physics/pull-requests/46/)~~\r\n* ~~ign-gui [pull request #182](#!/ignitionrobotics/ign-gui/pull-requests/182)~~\r\n\r\n\r\n## TODOs:\r\n\r\n* ~~Send only new entities to ign-gui instead of the whole scene when new entities are added~~\r\n* ~~Add tests for the level manager.~~\r\n\r\n## To test\r\nCreate a benchmark world using `benchmark.world.erb`\r\n\r\n```\r\n$ erb n_x=8 n_y=8 test/worlds/benchmark.sdf.erb > test/worlds/benchmark.sdf\r\n```\r\nRun ign-gazebo with `--levels` flag\r\n```\r\n$ ign-gazebo -v 4 -f test/worlds/benchmark.sdf --levels\r\n```\r\nBefore starting the simulation, publish command velocities to the red and green vehicles.\r\n\r\n```\r\nign topic -t \"/model/vehicle_red/cmd_vel\" -m ignition.msgs.Twist -p \"linear: {x: 2.5}\"\r\nign topic -t \"/model/vehicle_blue/cmd_vel\" -m ignition.msgs.Twist -p \"linear: {x: 2.5}\"\r\n\r\n```\r\nThen start the simulation.\r\n\r\n## Levels on\r\n![ign_gazebo_levels_on2.gif](https://bitbucket.org/repo/8zodKzn/images/1414413745-ign_gazebo_levels_on2.gif)\r\n## Levels off\r\n![ign_gazebo_levels_off2.gif](https://bitbucket.org/repo/8zodKzn/images/2684170126-ign_gazebo_levels_off2.gif)", "title": "[A-1] Levels", "destination": {"commit": {"hash": "06efe3b5ad0f", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/06efe3b5ad0f.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/06efe3b5ad0f"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "384bd259e9cf", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/384bd259e9cf.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/384bd259e9cf"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "levels"}}, "state": "OPEN", "author": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}, "date": "2019-02-01T19:13:51.466009+00:00"}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/90184736.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-90184736"}}, "parent": {"id": 90177755, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/90177755.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-90177755"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}, "content": {"raw": "Here is the output I'm seeing:\n\n```\n[ RUN      ] AltimeterTest.ModelFalling\n/data/ignition/ign-gazebo/test/integration/altimeter_system.cc:157: Failure\nExpected: (poses.front().Pos().Z()) > (poses.back().Pos().Z()), actual: 0 vs 0\n/data/ignition/ign-gazebo/test/integration/altimeter_system.cc:158: Failure\nExpected: (poses.back().Pos().Z()) > (0.0), actual: 0 vs 0\n/data/ignition/ign-gazebo/test/integration/altimeter_system.cc:160: Failure\nExpected: (velocities.front().Z()) > (velocities.back().Z()), actual: 0 vs 0\n/data/ignition/ign-gazebo/test/integration/altimeter_system.cc:161: Failure\nExpected: (velocities.back().Z()) < (0.0), actual: 0 vs 0\n/data/ignition/ign-gazebo/test/integration/altimeter_system.cc:167: Failure\nExpected: (altMsgs.front().vertical_position()) > (altMsgs.back().vertical_position()), actual: -3.05 vs -3.05\n/data/ignition/ign-gazebo/test/integration/altimeter_system.cc:171: Failure\nExpected: (altMsgs.front().vertical_velocity()) > (altMsgs.back().vertical_velocity()), actual: 0 vs 0\n/data/ignition/ign-gazebo/test/integration/altimeter_system.cc:172: Failure\nExpected: (altMsgs.back().vertical_velocity()) < (0.0), actual: 0 vs 0\n/data/ignition/ign-gazebo/test/integration/altimeter_system.cc:184: Failure\nThe difference between poses.back().Pos().Z() and 0.05 is 0.050000000000000003, which exceeds 1e-2, where\nposes.back().Pos().Z() evaluates to 0,\n0.05 evaluates to 0.050000000000000003, and\n1e-2 evaluates to 0.01.\n```\n```\n[ RUN      ] ServerRepeat/DiffDriveTest.PublishCmd/0/data/ignition/ign-gazebo/test/integration/diff_drive_system.cc:144: Failure\nExpected: (poses[0].Pos().X()) < (poses[3999].Pos().X()), actual: 0 vs 0\n/data/ignition/ign-gazebo/test/integration/diff_drive_system.cc:145: Failure\nExpected: (poses[0].Pos().Y()) < (poses[3999].Pos().Y()), actual: 0 vs 0\n/data/ignition/ign-gazebo/test/integration/diff_drive_system.cc:149: Failure\nExpected: (poses[0].Rot().Z()) < (poses[3999].Rot().Z()), actual: 0 vs 0\n[  FAILED  ] ServerRepeat/DiffDriveTest.PublishCmd/0, where GetParam() = 1 (4145 ms)\n```\n\n\n\n", "markup": "markdown", "html": "<p>Here is the output I'm seeing:</p>\n<div class=\"codehilite\"><pre><span></span>[ RUN      ] AltimeterTest.ModelFalling\n/data/ignition/ign-gazebo/test/integration/altimeter_system.cc:157: Failure\nExpected: (poses.front().Pos().Z()) &gt; (poses.back().Pos().Z()), actual: 0 vs 0\n/data/ignition/ign-gazebo/test/integration/altimeter_system.cc:158: Failure\nExpected: (poses.back().Pos().Z()) &gt; (0.0), actual: 0 vs 0\n/data/ignition/ign-gazebo/test/integration/altimeter_system.cc:160: Failure\nExpected: (velocities.front().Z()) &gt; (velocities.back().Z()), actual: 0 vs 0\n/data/ignition/ign-gazebo/test/integration/altimeter_system.cc:161: Failure\nExpected: (velocities.back().Z()) &lt; (0.0), actual: 0 vs 0\n/data/ignition/ign-gazebo/test/integration/altimeter_system.cc:167: Failure\nExpected: (altMsgs.front().vertical_position()) &gt; (altMsgs.back().vertical_position()), actual: -3.05 vs -3.05\n/data/ignition/ign-gazebo/test/integration/altimeter_system.cc:171: Failure\nExpected: (altMsgs.front().vertical_velocity()) &gt; (altMsgs.back().vertical_velocity()), actual: 0 vs 0\n/data/ignition/ign-gazebo/test/integration/altimeter_system.cc:172: Failure\nExpected: (altMsgs.back().vertical_velocity()) &lt; (0.0), actual: 0 vs 0\n/data/ignition/ign-gazebo/test/integration/altimeter_system.cc:184: Failure\nThe difference between poses.back().Pos().Z() and 0.05 is 0.050000000000000003, which exceeds 1e-2, where\nposes.back().Pos().Z() evaluates to 0,\n0.05 evaluates to 0.050000000000000003, and\n1e-2 evaluates to 0.01.\n</pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span>[ RUN      ] ServerRepeat/DiffDriveTest.PublishCmd/0/data/ignition/ign-gazebo/test/integration/diff_drive_system.cc:144: Failure\nExpected: (poses[0].Pos().X()) &lt; (poses[3999].Pos().X()), actual: 0 vs 0\n/data/ignition/ign-gazebo/test/integration/diff_drive_system.cc:145: Failure\nExpected: (poses[0].Pos().Y()) &lt; (poses[3999].Pos().Y()), actual: 0 vs 0\n/data/ignition/ign-gazebo/test/integration/diff_drive_system.cc:149: Failure\nExpected: (poses[0].Rot().Z()) &lt; (poses[3999].Rot().Z()), actual: 0 vs 0\n[  FAILED  ] ServerRepeat/DiffDriveTest.PublishCmd/0, where GetParam() = 1 (4145 ms)\n</pre></div>", "type": "rendered"}, "created_on": "2019-02-01T17:14:03.885896+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "updated_on": "2019-02-01T17:14:03.897013+00:00", "type": "pullrequest_comment", "id": 90184736}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/90181213.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-90181213"}}, "parent": {"id": 90174122, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/90174122.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-90174122"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}, "content": {"raw": "I got a diff\\_drive\\_system failure as well in an earlier \\(and unrelated\\) CI run.", "markup": "markdown", "html": "<p>I got a diff_drive_system failure as well in an earlier (and unrelated) CI run.</p>", "type": "rendered"}, "created_on": "2019-02-01T16:44:44.809718+00:00", "user": {"display_name": "Michael Carroll", "uuid": "{17dbbc15-cbc0-42f0-a985-cde9061c78a0}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B17dbbc15-cbc0-42f0-a985-cde9061c78a0%7D"}, "html": {"href": "https://bitbucket.org/%7B17dbbc15-cbc0-42f0-a985-cde9061c78a0%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:65740f22-cc56-4418-9608-7e17d0ed47b7/2aa259f5-4de1-4f68-9156-eded72041d84/128"}}, "nickname": "Michael Carroll", "type": "user", "account_id": "557058:65740f22-cc56-4418-9608-7e17d0ed47b7"}, "updated_on": "2019-02-01T16:44:44.821053+00:00", "type": "pullrequest_comment", "id": 90181213}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/90179499.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-90179499"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}, "content": {"raw": "This is a bit dangerous. There is no guarantee that `_world` remains a valid pointer.", "markup": "markdown", "html": "<p>This is a bit dangerous. There is no guarantee that <code>_world</code> remains a valid pointer.</p>", "type": "rendered"}, "created_on": "2019-02-01T16:32:09.401293+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "inline": {}, "updated_on": "2019-02-01T16:32:09.413897+00:00", "type": "pullrequest_comment", "id": 90179499}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/90178009.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-90178009"}}, "parent": {"id": 90176018, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/90176018.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-90176018"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}, "content": {"raw": "Default branch.", "markup": "markdown", "html": "<p>Default branch.</p>", "type": "rendered"}, "created_on": "2019-02-01T16:21:40.829703+00:00", "user": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}, "updated_on": "2019-02-01T16:21:40.842706+00:00", "type": "pullrequest_comment", "id": 90178009}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/90177755.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-90177755"}}, "parent": {"id": 90174122, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/90174122.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-90174122"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}, "content": {"raw": "Only INTEGRATION_physics_system is failing for me. I'll look into it. Not sure why the other's are failing for you though.  ", "markup": "markdown", "html": "<p>Only INTEGRATION_physics_system is failing for me. I'll look into it. Not sure why the other's are failing for you though.  </p>", "type": "rendered"}, "created_on": "2019-02-01T16:20:13.302937+00:00", "user": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}, "updated_on": "2019-02-01T16:20:13.316931+00:00", "type": "pullrequest_comment", "id": 90177755}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/90176018.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-90176018"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}, "content": {"raw": "which ign-physics branch is needed for this?", "markup": "markdown", "html": "<p>which ign-physics branch is needed for this?</p>", "type": "rendered"}, "created_on": "2019-02-01T16:08:38.572846+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "updated_on": "2019-02-01T16:08:38.587564+00:00", "type": "pullrequest_comment", "id": 90176018}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/90174122.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-90174122"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}, "content": {"raw": "I'm seeing test failures in INTEGRATION_altimeter_system, INTEGRATION_diff_drive_system, and INTEGRATION_physics_system. Do you see those as well?", "markup": "markdown", "html": "<p>I'm seeing test failures in INTEGRATION_altimeter_system, INTEGRATION_diff_drive_system, and INTEGRATION_physics_system. Do you see those as well?</p>", "type": "rendered"}, "created_on": "2019-02-01T15:56:40.451822+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "updated_on": "2019-02-01T15:56:40.461413+00:00", "type": "pullrequest_comment", "id": 90174122}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/90173714.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-90173714"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}, "content": {"raw": "This should be a shared pointer since LevelManager is maintaining ownership of SimulationRunner.", "markup": "markdown", "html": "<p>This should be a shared pointer since LevelManager is maintaining ownership of SimulationRunner.</p>", "type": "rendered"}, "created_on": "2019-02-01T15:54:15.089847+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "inline": {}, "updated_on": "2019-02-01T15:54:15.100014+00:00", "type": "pullrequest_comment", "id": 90173714}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/90080437.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-90080437"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}, "content": {"raw": "This is now ready for review!", "markup": "markdown", "html": "<p>This is now ready for review!</p>", "type": "rendered"}, "created_on": "2019-02-01T00:21:21.361220+00:00", "user": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}, "updated_on": "2019-02-01T00:21:21.370432+00:00", "type": "pullrequest_comment", "id": 90080437}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"update": {"description": "The pull request implements a level system based on the idea that a simulation runner is responsible for loading and unloading all levels in the world.\r\n\r\n## Dependencies:\r\n\r\n* ~~ign-physics branch [remove_model_features](#!/ignitionrobotics/ign-physics/branch/remove_entity_features)~~\r\n      * ~~Which in turn depends on ign-physics [pull request #46](#!/ignitionrobotics/ign-physics/pull-requests/46/)~~\r\n* ~~ign-gui [pull request #182](#!/ignitionrobotics/ign-gui/pull-requests/182)~~\r\n\r\n\r\n## TODOs:\r\n\r\n* ~~Send only new entities to ign-gui instead of the whole scene when new entities are added~~\r\n* ~~Add tests for the level manager.~~\r\n\r\n## To test\r\nCreate a benchmark world using `benchmark.world.erb`\r\n\r\n```\r\n$ erb n_x=8 n_y=8 test/worlds/benchmark.sdf.erb > test/worlds/benchmark.sdf\r\n```\r\nRun ign-gazebo with `--levels` flag\r\n```\r\n$ ign-gazebo -v 4 -f test/worlds/benchmark.sdf --levels\r\n```\r\nBefore starting the simulation, publish command velocities to the red and green vehicles.\r\n\r\n```\r\nign topic -t \"/model/vehicle_red/cmd_vel\" -m ignition.msgs.Twist -p \"linear: {x: 2.5}\"\r\nign topic -t \"/model/vehicle_blue/cmd_vel\" -m ignition.msgs.Twist -p \"linear: {x: 2.5}\"\r\n\r\n```\r\nThen start the simulation.\r\n\r\n## Levels on\r\n![ign_gazebo_levels_on2.gif](https://bitbucket.org/repo/8zodKzn/images/1414413745-ign_gazebo_levels_on2.gif)\r\n## Levels off\r\n![ign_gazebo_levels_off2.gif](https://bitbucket.org/repo/8zodKzn/images/2684170126-ign_gazebo_levels_off2.gif)", "title": "[A-1] Levels", "destination": {"commit": {"hash": "f7597140869c", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/f7597140869c.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/f7597140869c"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "9c2ee4eb7b27", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/9c2ee4eb7b27.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/9c2ee4eb7b27"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "levels"}}, "state": "OPEN", "author": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}, "date": "2019-02-01T00:20:51.160429+00:00"}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"update": {"description": "The pull request implements a level system based on the idea that a simulation runner is responsible for loading and unloading all levels in the world.\r\n\r\n## Dependencies:\r\n\r\n* ign-physics branch [remove_entity_features](#!/ignitionrobotics/ign-physics/branch/remove_entity_features)\r\n      * Which in turn depends on ign-physics [pull request #46](#!/ignitionrobotics/ign-physics/pull-requests/46/)\r\n* ign-gui [pull request #182](#!/ignitionrobotics/ign-gui/pull-requests/182)\r\n\r\n\r\n## TODOs:\r\n\r\n* Send only new entities to ign-gui instead of the whole scene when new entities are added\r\n* Add tests for the level manager.\r\n\r\n## To test\r\nCreate a benchmark world using `benchmark.world.erb`\r\n\r\n```\r\n$ erb n_x=8 n_y=8 test/worlds/benchmark.sdf.erb > test/worlds/benchmark.sdf\r\n```\r\nRun ign-gazebo with `--levels` flag\r\n```\r\n$ ign-gazebo -v 4 -f test/worlds/benchmark.sdf --levels\r\n```\r\nBefore starting the simulation, publish command velocities to the red and green balls.\r\n\r\n```\r\nign topic -t /red_ball/move3d/linear_vel -m ignition.msgs.Vector3d -p 'x:4.0 y: -1'\r\nign topic -t /green_ball/move3d/linear_vel -m ignition.msgs.Vector3d -p 'x:3.0 y: 0'\r\n```\r\nThen start the simulation.\r\n\r\n## Levels on\r\n![ign_gazebo_levels_on.gif](https://bitbucket.org/repo/8zodKzn/images/617343584-ign_gazebo_levels_on.gif)\r\n\r\n## Levels off\r\n![ign_gazebo_levels_off.gif](https://bitbucket.org/repo/8zodKzn/images/1356584003-ign_gazebo_levels_off.gif)", "title": "[WIP][A-1] Levels", "destination": {"commit": {"hash": "f7597140869c", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/f7597140869c.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/f7597140869c"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "9c2ee4eb7b27", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/9c2ee4eb7b27.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/9c2ee4eb7b27"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "levels"}}, "state": "OPEN", "author": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}, "date": "2019-02-01T00:00:27.317197+00:00"}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"update": {"description": "The pull request implements a level system based on the idea that a simulation runner is responsible for loading and unloading all levels in the world.\r\n\r\n## Dependencies:\r\n\r\n* ign-physics branch [remove_entity_features](#!/ignitionrobotics/ign-physics/branch/remove_entity_features)\r\n      * Which in turn depends on ign-physics [pull request #46](#!/ignitionrobotics/ign-physics/pull-requests/46/)\r\n* ign-gui [pull request #182](#!/ignitionrobotics/ign-gui/pull-requests/182)\r\n\r\n\r\n## TODOs:\r\n\r\n* Send only new entities to ign-gui instead of the whole scene when new entities are added\r\n* Add tests for the level manager.\r\n\r\n## To test\r\nCreate a benchmark world using `benchmark.world.erb`\r\n\r\n```\r\n$ erb n_x=8 n_y=8 test/worlds/benchmark.sdf.erb > test/worlds/benchmark.sdf\r\n```\r\nRun ign-gazebo with `--levels` flag\r\n```\r\n$ ign-gazebo -v 4 -f test/worlds/benchmark.sdf --levels\r\n```\r\nBefore starting the simulation, publish command velocities to the red and green balls.\r\n\r\n```\r\nign topic -t /red_ball/move3d/linear_vel -m ignition.msgs.Vector3d -p 'x:4.0 y: -1'\r\nign topic -t /green_ball/move3d/linear_vel -m ignition.msgs.Vector3d -p 'x:3.0 y: 0'\r\n```\r\nThen start the simulation.\r\n\r\n## Levels on\r\n![ign_gazebo_levels_on.gif](https://bitbucket.org/repo/8zodKzn/images/617343584-ign_gazebo_levels_on.gif)\r\n\r\n## Levels off\r\n![ign_gazebo_levels_off.gif](https://bitbucket.org/repo/8zodKzn/images/1356584003-ign_gazebo_levels_off.gif)", "title": "[WIP][A-1] Levels", "destination": {"commit": {"hash": "f7597140869c", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/f7597140869c.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/f7597140869c"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "77968673cd14", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/77968673cd14.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/77968673cd14"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "levels"}}, "state": "OPEN", "author": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}, "date": "2019-01-30T22:47:31.113702+00:00"}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"update": {"description": "The pull request implements a level system based on the idea that a simulation runner is responsible for loading and unloading all levels in the world.\r\n\r\n## Dependencies:\r\n\r\n* ign-physics branch [remove_entity_features](#!/ignitionrobotics/ign-physics/branch/remove_entity_features)\r\n      * Which in turn depends on ign-physics [pull request #46](#!/ignitionrobotics/ign-physics/pull-requests/46/)\r\n* ign-gui [pull request #182](#!/ignitionrobotics/ign-gui/pull-requests/182)\r\n\r\n\r\n## TODOs:\r\n\r\n* Send only new entities to ign-gui instead of the whole scene when new entities are added\r\n* Add tests for the level manager.\r\n\r\n## To test\r\nCreate a benchmark world using `benchmark.world.erb`\r\n\r\n```\r\n$ erb n_x=8 n_y=8 test/worlds/benchmark.sdf.erb > test/worlds/benchmark.sdf\r\n```\r\nRun ign-gazebo with `--levels` flag\r\n```\r\n$ ign-gazebo -v 4 -f test/worlds/benchmark.sdf --levels\r\n```\r\nBefore starting the simulation, publish command velocities to the red and green balls.\r\n\r\n```\r\nign topic -t /red_ball/move3d/linear_vel -m ignition.msgs.Vector3d -p 'x:4.0 y: -1'\r\nign topic -t /green_ball/move3d/linear_vel -m ignition.msgs.Vector3d -p 'x:3.0 y: 0'\r\n```\r\nThen start the simulation.\r\n\r\n## Levels on\r\n![ign_gazebo_levels_on.gif](https://bitbucket.org/repo/8zodKzn/images/617343584-ign_gazebo_levels_on.gif)\r\n\r\n## Levels off\r\n![ign_gazebo_levels_off.gif](https://bitbucket.org/repo/8zodKzn/images/1356584003-ign_gazebo_levels_off.gif)", "title": "[WIP][A-1] Levels", "destination": {"commit": {"hash": "90cf23937f6a", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/90cf23937f6a.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/90cf23937f6a"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "6e8a1619b132", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/6e8a1619b132.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/6e8a1619b132"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "levels"}}, "state": "OPEN", "author": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "date": "2019-01-28T21:52:44.661900+00:00"}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"update": {"description": "The pull request implements a level system based on the idea that a simulation runner is responsible for loading and unloading all levels in the world.\r\n\r\n## Dependencies:\r\n\r\n* ign-physics branch [remove_entity_features](#!/ignitionrobotics/ign-physics/branch/remove_entity_features)\r\n      * Which in turn depends on ign-physics [pull request #46](#!/ignitionrobotics/ign-physics/pull-requests/46/)\r\n* ign-gui [pull request #182](#!/ignitionrobotics/ign-gui/pull-requests/182)\r\n\r\n\r\n## TODOs:\r\n\r\n* Send only new entities to ign-gui instead of the whole scene when new entities are added\r\n* Add tests for the level manager.\r\n\r\n## To test\r\nCreate a benchmark world using `benchmark.world.erb`\r\n\r\n```\r\n$ erb n_x=8 n_y=8 test/worlds/benchmark.sdf.erb > test/worlds/benchmark.sdf\r\n```\r\nRun ign-gazebo with `--levels` flag\r\n```\r\n$ ign-gazebo -v 4 -f test/worlds/benchmark.sdf --levels\r\n```\r\nBefore starting the simulation, publish command velocities to the red and green balls.\r\n\r\n```\r\nign topic -t /red_ball/move3d/linear_vel -m ignition.msgs.Vector3d -p 'x:4.0 y: -1'\r\nign topic -t /green_ball/move3d/linear_vel -m ignition.msgs.Vector3d -p 'x:3.0 y: 0'\r\n```\r\nThen start the simulation.\r\n\r\n## Levels on\r\n![ign_gazebo_levels_on.gif](https://bitbucket.org/repo/8zodKzn/images/617343584-ign_gazebo_levels_on.gif)\r\n\r\n## Levels off\r\n![ign_gazebo_levels_off.gif](https://bitbucket.org/repo/8zodKzn/images/1356584003-ign_gazebo_levels_off.gif)", "title": "[WIP][A-1] Levels", "destination": {"commit": {"hash": "90cf23937f6a", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/90cf23937f6a.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/90cf23937f6a"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "6e8a1619b132", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/6e8a1619b132.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/6e8a1619b132"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "levels"}}, "state": "OPEN", "author": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "date": "2019-01-28T20:05:26.523393+00:00"}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/88948483.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-88948483"}}, "parent": {"id": 88625466, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/88625466.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-88625466"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}, "content": {"raw": "Yes, I remember this being a concern. Are you having problems in `ign-gazebo` or somewhere else? ", "markup": "markdown", "html": "<p>Yes, I remember this being a concern. Are you having problems in <code>ign-gazebo</code> or somewhere else? </p>", "type": "rendered"}, "created_on": "2019-01-22T23:35:56.184110+00:00", "user": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}, "updated_on": "2019-01-22T23:35:56.193994+00:00", "type": "pullrequest_comment", "id": 88948483}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/88625466.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-88625466"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}, "content": {"raw": "@azeey, FYI, I started integrating pull request #130 with this one on branch `levels_factory`. Entity creation and destruction seem to work fine, but there's a problem when entities are deleted, and then new ones created reusing the old entity ids. I'll keep looking into it next week, I think we can stop reusing entities now that they're not stored in a vector anymore.", "markup": "markdown", "html": "<p>@azeey, FYI, I started integrating <a href=\"#!/ignitionrobotics/ign-gazebo/pull-requests/130/a-6-entity-graph-factory\" rel=\"nofollow\" class=\"ap-connect-link\">pull request #130</a> with this one on branch <code>levels_factory</code>. Entity creation and destruction seem to work fine, but there's a problem when entities are deleted, and then new ones created reusing the old entity ids. I'll keep looking into it next week, I think we can stop reusing entities now that they're not stored in a vector anymore.</p>", "type": "rendered"}, "created_on": "2019-01-19T02:16:06.403770+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2019-01-19T02:16:06.418103+00:00", "type": "pullrequest_comment", "id": 88625466}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"update": {"description": "The pull request implements a level system based on the idea that a simulation runner is responsible for loading and unloading all levels in the world.\r\n\r\n## Dependencies:\r\n\r\n* ign-physics branch [remove_entity_features](#!/ignitionrobotics/ign-physics/branch/remove_entity_features)\r\n      * Which in turn depends on ign-physics [pull request #46](#!/ignitionrobotics/ign-physics/pull-requests/46/)\r\n* ign-gui [pull request #182](#!/ignitionrobotics/ign-gui/pull-requests/182)\r\n\r\n\r\n## TODOs:\r\n\r\n* Send only new entities to ign-gui instead of the whole scene when new entities are added\r\n* Add tests for the level manager.\r\n\r\n## To test\r\nCreate a benchmark world using `benchmark.world.erb`\r\n\r\n```\r\n$ erb n_x=8 n_y=8 test/worlds/benchmark.sdf.erb > test/worlds/benchmark.sdf\r\n```\r\nRun ign-gazebo with `--levels` flag\r\n```\r\n$ ign-gazebo -v 4 -f test/worlds/benchmark.sdf --levels\r\n```\r\nBefore starting the simulation, publish command velocities to the red and green balls.\r\n\r\n```\r\nign topic -t /red_ball/move3d/linear_vel -m ignition.msgs.Vector3d -p 'x:4.0 y: -1'\r\nign topic -t /green_ball/move3d/linear_vel -m ignition.msgs.Vector3d -p 'x:3.0 y: 0'\r\n```\r\nThen start the simulation.\r\n\r\n## Levels on\r\n![ign_gazebo_levels_on.gif](https://bitbucket.org/repo/8zodKzn/images/617343584-ign_gazebo_levels_on.gif)\r\n\r\n## Levels off\r\n![ign_gazebo_levels_off.gif](https://bitbucket.org/repo/8zodKzn/images/1356584003-ign_gazebo_levels_off.gif)", "title": "[WIP] Levels", "destination": {"commit": {"hash": "6264cbd5eccc", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/6264cbd5eccc.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/6264cbd5eccc"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "6e8a1619b132", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/6e8a1619b132.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/6e8a1619b132"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "levels"}}, "state": "OPEN", "author": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "date": "2019-01-19T00:53:50.508066+00:00"}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"update": {"description": "The pull request implements a level system based on the idea that a simulation runner is responsible for loading and unloading all levels in the world.\r\n\r\n## Dependencies:\r\n\r\n* ign-physics branch [remove_entity_features](#!/ignitionrobotics/ign-physics/branch/remove_entity_features)\r\n      * Which in turn depends on ign-physics [pull request #46](#!/ignitionrobotics/ign-physics/pull-requests/46/)\r\n* ign-gui [pull request #182](#!/ignitionrobotics/ign-gui/pull-requests/182)\r\n\r\n\r\n## TODOs:\r\n\r\n* Send only new entities to ign-gui instead of the whole scene when new entities are added\r\n* Add tests for the level manager.\r\n\r\n## To test\r\nCreate a benchmark world using `benchmark.world.erb`\r\n\r\n```\r\n$ erb n_x=8 n_y=8 test/worlds/benchmark.sdf.erb > test/worlds/benchmark.sdf\r\n```\r\nRun ign-gazebo with `--levels` flag\r\n```\r\n$ ign-gazebo -v 4 -f test/worlds/benchmark.sdf --levels\r\n```\r\nBefore starting the simulation, publish command velocities to the red and green balls.\r\n\r\n```\r\nign topic -t /red_ball/move3d/linear_vel -m ignition.msgs.Vector3d -p 'x:4.0 y: -1'\r\nign topic -t /green_ball/move3d/linear_vel -m ignition.msgs.Vector3d -p 'x:3.0 y: 0'\r\n```\r\nThen start the simulation.\r\n\r\n## Levels on\r\n![ign_gazebo_levels_on.gif](https://bitbucket.org/repo/8zodKzn/images/617343584-ign_gazebo_levels_on.gif)\r\n\r\n## Levels off\r\n![ign_gazebo_levels_off.gif](https://bitbucket.org/repo/8zodKzn/images/1356584003-ign_gazebo_levels_off.gif)", "title": "[WIP] Levels", "destination": {"commit": {"hash": "6264cbd5eccc", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/6264cbd5eccc.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/6264cbd5eccc"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "31ed21addf1f", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/31ed21addf1f.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/31ed21addf1f"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "levels"}}, "state": "OPEN", "author": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "date": "2019-01-19T00:26:46.013761+00:00"}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/88338595.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-88338595"}}, "parent": {"id": 88312434, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/88312434.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-88312434"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}, "content": {"raw": "Oh got it! have you thought about how to do level management once we offer ways to mutate the world at runtime? I guess that anything added afterwards would be in the default level in that case?", "markup": "markdown", "html": "<p>Oh got it! have you thought about how to do level management once we offer ways to mutate the world at runtime? I guess that anything added afterwards would be in the default level in that case?</p>", "type": "rendered"}, "created_on": "2019-01-17T01:07:54.561974+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {}, "updated_on": "2019-01-17T01:07:54.573235+00:00", "type": "pullrequest_comment", "id": 88338595}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/88312434.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-88312434"}}, "parent": {"id": 88309439, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/88309439.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-88309439"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}, "content": {"raw": "The reasoning behind this is that with the level manager, the whole world is not loaded into the ECM at initialization. Instead only the models in the active levels are loaded at a time. To do that, we need to keep the `sdf::World` node in memory and accessible to the `LevelManager`. I chose to keep the `sdf::World` node in `SimulationRunner`, but to keep the world node, we need to keep the `sdf::Root` object as well.", "markup": "markdown", "html": "<p>The reasoning behind this is that with the level manager, the whole world is not loaded into the ECM at initialization. Instead only the models in the active levels are loaded at a time. To do that, we need to keep the <code>sdf::World</code> node in memory and accessible to the <code>LevelManager</code>. I chose to keep the <code>sdf::World</code> node in <code>SimulationRunner</code>, but to keep the world node, we need to keep the <code>sdf::Root</code> object as well.</p>", "type": "rendered"}, "created_on": "2019-01-16T19:41:22.229708+00:00", "user": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}, "inline": {}, "updated_on": "2019-01-16T19:41:22.254878+00:00", "type": "pullrequest_comment", "id": 88312434}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/88311840.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-88311840"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}, "content": {"raw": "I understand the `CreateEntities` functions have been moved here to create the graph, but `LoadPlugins` could just stay in the runner?", "markup": "markdown", "html": "<p>I understand the <code>CreateEntities</code> functions have been moved here to create the graph, but <code>LoadPlugins</code> could just stay in the runner?</p>", "type": "rendered"}, "created_on": "2019-01-16T19:36:03.400825+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {}, "updated_on": "2019-01-16T19:36:03.408348+00:00", "type": "pullrequest_comment", "id": 88311840}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/88311460.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-88311460"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}, "content": {"raw": "`LoadModel` and `LoadLight` are not implemented, and probably not needed since it sounds like the functionality is already covered by `CreateEntities`", "markup": "markdown", "html": "<p><code>LoadModel</code> and <code>LoadLight</code> are not implemented, and probably not needed since it sounds like the functionality is already covered by <code>CreateEntities</code></p>", "type": "rendered"}, "created_on": "2019-01-16T19:32:02.866906+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {}, "updated_on": "2019-01-16T19:32:02.875697+00:00", "type": "pullrequest_comment", "id": 88311460}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/88309439.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-88309439"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}, "content": {"raw": "I always thought of the SDF as an initialization object that is thrown away after used. Keeping it around means that it will end up outdated with respect to the current simulation state. Do we really want other classes to keep pointers to child nodes that will end up out of sync?", "markup": "markdown", "html": "<p>I always thought of the SDF as an initialization object that is thrown away after used. Keeping it around means that it will end up outdated with respect to the current simulation state. Do we really want other classes to keep pointers to child nodes that will end up out of sync?</p>", "type": "rendered"}, "created_on": "2019-01-16T19:13:17.527392+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {}, "updated_on": "2019-01-16T19:13:17.536920+00:00", "type": "pullrequest_comment", "id": 88309439}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/87831224.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-87831224"}}, "parent": {"id": 87735324, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/87735324.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-87735324"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}, "content": {"raw": "> I don\u2019t have enough experience with Ogre, but I know that for OpenSceneGraph something that\u2019s worked for me is to remove objects from the scene graph without deleting them.\u00a0\n\nyep ign-rendering offers a [Node::RemoveChild](#!/ignitionrobotics/ign-rendering/src/0cf449a6f94868b9c52bebc63cb0d9f7439bb354/include/ignition/rendering/Node.hh#lines-218) to detach a child node. The other option is to use [Scene::DestroyNode](#!/ignitionrobotics/ign-rendering/src/0cf449a6f94868b9c52bebc63cb0d9f7439bb354/include/ignition/rendering/Scene.hh#lines-210) to delete it forever.", "markup": "markdown", "html": "<blockquote>\n<p>I don\u2019t have enough experience with Ogre, but I know that for OpenSceneGraph something that\u2019s worked for me is to remove objects from the scene graph without deleting them.\u00a0</p>\n</blockquote>\n<p>yep ign-rendering offers a <a data-is-external-link=\"true\" href=\"#!/ignitionrobotics/ign-rendering/src/0cf449a6f94868b9c52bebc63cb0d9f7439bb354/include/ignition/rendering/Node.hh#lines-218\" rel=\"nofollow\">Node::RemoveChild</a> to detach a child node. The other option is to use <a data-is-external-link=\"true\" href=\"#!/ignitionrobotics/ign-rendering/src/0cf449a6f94868b9c52bebc63cb0d9f7439bb354/include/ignition/rendering/Scene.hh#lines-210\" rel=\"nofollow\">Scene::DestroyNode</a> to delete it forever.</p>", "type": "rendered"}, "created_on": "2019-01-11T17:45:19.363925+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "inline": {}, "updated_on": "2019-01-11T17:45:19.372728+00:00", "type": "pullrequest_comment", "id": 87831224}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/87735324.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-87735324"}}, "parent": {"id": 87692972, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/87692972.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-87692972"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}, "content": {"raw": "> **ign-gui/ign-rendering**: When entities are \"inactive\", should they be destroyed or hidden\u00a0\n\nI don\u2019t have enough experience with Ogre, but I know that for OpenSceneGraph something that\u2019s worked for me is to remove objects from the scene graph without deleting them. That improves rendering performance without completely deleting those graphics resources, so they could easily be added back into the scene graph when they\u2019re needed. The catch is, if you have really really super large/detailed environments, you could run out of RAM if the whole environment is too big to store all at once. This is basically what video games have loading screens for: changing what graphics asset information is currently being held in RAM.\n\nI think the choice between the two will depend a lot on the specific application. Ideally we could have a way to offer both behaviors, but I don\u2019t know exactly what that would look like. For now we should probably choose one to start with and see how it works for our use case.\n\n> **ign-physics**: I guess if the physics engine supports disabling entities, \"inactive\" would mean disable. Otherwise, we would remove the entity from the physics engine for both \"inactive\" and \"erased\".\n\nI completely agree with this. The hard part will be identifying which physics engines offer that behavior \\(because that information can\u2019t be inferred from the feature system alone\\). This shouldn\u2019t be any trouble once we have the \u201cBehavior System\u201d implemented, but that hasn\u2019t really made it to my TODO list at the moment \\(unfortunately\\).", "markup": "markdown", "html": "<blockquote>\n<p><strong>ign-gui/ign-rendering</strong>: When entities are \"inactive\", should they be destroyed or hidden\u00a0</p>\n</blockquote>\n<p>I don\u2019t have enough experience with Ogre, but I know that for OpenSceneGraph something that\u2019s worked for me is to remove objects from the scene graph without deleting them. That improves rendering performance without completely deleting those graphics resources, so they could easily be added back into the scene graph when they\u2019re needed. The catch is, if you have really really super large/detailed environments, you could run out of RAM if the whole environment is too big to store all at once. This is basically what video games have loading screens for: changing what graphics asset information is currently being held in RAM.</p>\n<p>I think the choice between the two will depend a lot on the specific application. Ideally we could have a way to offer both behaviors, but I don\u2019t know exactly what that would look like. For now we should probably choose one to start with and see how it works for our use case.</p>\n<blockquote>\n<p><strong>ign-physics</strong>: I guess if the physics engine supports disabling entities, \"inactive\" would mean disable. Otherwise, we would remove the entity from the physics engine for both \"inactive\" and \"erased\".</p>\n</blockquote>\n<p>I completely agree with this. The hard part will be identifying which physics engines offer that behavior (because that information can\u2019t be inferred from the feature system alone). This shouldn\u2019t be any trouble once we have the \u201cBehavior System\u201d implemented, but that hasn\u2019t really made it to my TODO list at the moment (unfortunately).</p>", "type": "rendered"}, "created_on": "2019-01-11T02:57:45.137304+00:00", "user": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "inline": {}, "updated_on": "2019-01-11T02:57:45.145560+00:00", "type": "pullrequest_comment", "id": 87735324}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/87716896.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-87716896"}}, "parent": {"id": 87702493, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/87702493.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-87702493"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}, "content": {"raw": "Point taken. 31ed21a", "markup": "markdown", "html": "<p>Point taken. <a href=\"#!/ignitionrobotics/ign-gazebo/commits/31ed21a\" rel=\"nofollow\" class=\"ap-connect-link\">31ed21a</a></p>", "type": "rendered"}, "created_on": "2019-01-10T21:32:06.207919+00:00", "user": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}, "inline": {}, "updated_on": "2019-01-10T21:32:06.221673+00:00", "type": "pullrequest_comment", "id": 87716896}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"update": {"description": "The pull request implements a level system based on the idea that a simulation runner is responsible for loading and unloading all levels in the world.\r\n\r\n## Dependencies:\r\n\r\n* ign-physics branch [remove_entity_features](#!/ignitionrobotics/ign-physics/branch/remove_entity_features)\r\n      * Which in turn depends on ign-physics [pull request #46](#!/ignitionrobotics/ign-physics/pull-requests/46/)\r\n* ign-gui [pull request #182](#!/ignitionrobotics/ign-gui/pull-requests/182)\r\n\r\n\r\n## TODOs:\r\n\r\n* Send only new entities to ign-gui instead of the whole scene when new entities are added\r\n* Add tests for the level manager.\r\n\r\n## To test\r\nCreate a benchmark world using `benchmark.world.erb`\r\n\r\n```\r\n$ erb n_x=8 n_y=8 test/worlds/benchmark.world.erb > test/worlds/benchmark.world\r\n```\r\nRun ign-gazebo with `--levels` flag\r\n```\r\n$ ign-gazebo -v 4 -f test/worlds/benchmark.world --levels\r\n```\r\nBefore starting the simulation, publish command velocities to the red and green balls.\r\n\r\n```\r\nign topic -t /red_ball/move3d/linear_vel -m ignition.msgs.Vector3d -p 'x:4.0 y: -1'\r\nign topic -t /green_ball/move3d/linear_vel -m ignition.msgs.Vector3d -p 'x:3.0 y: 0'\r\n```\r\nThen start the simulation.\r\n\r\n## Levels on\r\n![ign_gazebo_levels_on.gif](https://bitbucket.org/repo/8zodKzn/images/617343584-ign_gazebo_levels_on.gif)\r\n\r\n## Levels off\r\n![ign_gazebo_levels_off.gif](https://bitbucket.org/repo/8zodKzn/images/1356584003-ign_gazebo_levels_off.gif)", "title": "[WIP] Levels", "destination": {"commit": {"hash": "ebf36aa50919", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/ebf36aa50919.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/ebf36aa50919"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "31ed21addf1f", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/31ed21addf1f.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/31ed21addf1f"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "levels"}}, "state": "OPEN", "author": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}, "date": "2019-01-10T21:31:08.522931+00:00"}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/87715953.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-87715953"}}, "parent": {"id": 87581319, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/87581319.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-87581319"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}, "content": {"raw": "Just a quick update on this, I converted the `entities` vector into a graph, got rid of `ParentEntity` and implemented `ChildByComponents`. This is all on branch `entity_graph`. My next steps are to remove the graph from `LevelManager` and see if I can reuse the graph on `SceneBroadcaster`. Then I'll make a PR against this branch so ppl can take a look.", "markup": "markdown", "html": "<p>Just a quick update on this, I converted the <code>entities</code> vector into a graph, got rid of <code>ParentEntity</code> and implemented <code>ChildByComponents</code>. This is all on branch <code>entity_graph</code>. My next steps are to remove the graph from <code>LevelManager</code> and see if I can reuse the graph on <code>SceneBroadcaster</code>. Then I'll make a PR against this branch so ppl can take a look.</p>", "type": "rendered"}, "created_on": "2019-01-10T21:21:08.876705+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {}, "updated_on": "2019-01-10T21:21:08.887669+00:00", "type": "pullrequest_comment", "id": 87715953}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/87702493.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-87702493"}}, "parent": {"id": 87688437, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/87688437.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-87688437"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}, "content": {"raw": "I think that components usually need to have more explicit semantics, that's why we shouldn't have a `Vector3` component, and instead have `LinearVelocity`, `AngularVelocity`, `Scale`, etc. What would it mean to ask for all entities that have a `NameSet`? And what if a level needs to carry another property which is also a set of strings? Another way to think of it is, when an entity's `NameSet` is displayed on a GUI, what label does it have?", "markup": "markdown", "html": "<p>I think that components usually need to have more explicit semantics, that's why we shouldn't have a <code>Vector3</code> component, and instead have <code>LinearVelocity</code>, <code>AngularVelocity</code>, <code>Scale</code>, etc. What would it mean to ask for all entities that have a <code>NameSet</code>? And what if a level needs to carry another property which is also a set of strings? Another way to think of it is, when an entity's <code>NameSet</code> is displayed on a GUI, what label does it have?</p>", "type": "rendered"}, "created_on": "2019-01-10T18:55:29.336795+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {}, "updated_on": "2019-01-10T18:55:29.347949+00:00", "type": "pullrequest_comment", "id": 87702493}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/87692972.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-87692972"}}, "parent": {"id": 87296509, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/87296509.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-87296509"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}, "content": {"raw": "My initial approach was to never erase entities. Instead I had a bool `RenderState` component that was set by the level manager. However, I noticed that just having a large number of entities in the `EntityComponentManager` caused the RTF to go down significantly. I can look into moving the entities somewhere else so they don't participate in calls to `Each*`. \nSo then we would have three states of an entity: \"active\", \"inactive\" and \"erased\". If we go ahead with this idea:\n\n* ** ign-gui/ign-rendering**: When entities are \"inactive\", should they be destroyed or hidden (detached from the parent visual) in ign-gui/Scene3D? If they are only hidden, wouldn't we have a memory problem as the simulation progresses and loads more resources into the rendering engine? \n* **ign-physics**: I guess if the physics engine supports disabling entities, \"inactive\" would mean disable. Otherwise, we would remove the entity from the physics engine for both \"inactive\" and \"erased\". There might still be two scenarios here: \n1. The physics engine supports ref counting, so if an entity is \"inactive\", we would remove it from the engine but keep a reference  so that the memory isn't cleaned up. \n2. The physics engine does not support ref counting, so for both \"inactive\" and \"erased\", we would remove the entity and leave it to the physics engine to clean up memory as it chooses. If the entity becomes \"active\" again, a new corresponding entity may have to created inside the physics engine. \nDoes that sound right?", "markup": "markdown", "html": "<p>My initial approach was to never erase entities. Instead I had a bool <code>RenderState</code> component that was set by the level manager. However, I noticed that just having a large number of entities in the <code>EntityComponentManager</code> caused the RTF to go down significantly. I can look into moving the entities somewhere else so they don't participate in calls to <code>Each*</code>. \nSo then we would have three states of an entity: \"active\", \"inactive\" and \"erased\". If we go ahead with this idea:</p>\n<ul>\n<li><strong> ign-gui/ign-rendering</strong>: When entities are \"inactive\", should they be destroyed or hidden (detached from the parent visual) in ign-gui/Scene3D? If they are only hidden, wouldn't we have a memory problem as the simulation progresses and loads more resources into the rendering engine? </li>\n<li><strong>ign-physics</strong>: I guess if the physics engine supports disabling entities, \"inactive\" would mean disable. Otherwise, we would remove the entity from the physics engine for both \"inactive\" and \"erased\". There might still be two scenarios here: \n1. The physics engine supports ref counting, so if an entity is \"inactive\", we would remove it from the engine but keep a reference  so that the memory isn't cleaned up. \n2. The physics engine does not support ref counting, so for both \"inactive\" and \"erased\", we would remove the entity and leave it to the physics engine to clean up memory as it chooses. If the entity becomes \"active\" again, a new corresponding entity may have to created inside the physics engine. \nDoes that sound right?</li>\n</ul>", "type": "rendered"}, "created_on": "2019-01-10T17:23:48.387967+00:00", "user": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}, "inline": {}, "updated_on": "2019-01-10T17:23:48.399023+00:00", "type": "pullrequest_comment", "id": 87692972}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/87688437.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-87688437"}}, "parent": {"id": 86754556, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/86754556.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-86754556"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}, "content": {"raw": "My thought was to make it as generic as possible so that other systems can use it if they need to store a set of names. For the level manager, this component would be attached to `Level` entities and in that context it means \"the list of names of entities to be loaded for a level\". For other systems, it can mean something else. Thoughts?", "markup": "markdown", "html": "<p>My thought was to make it as generic as possible so that other systems can use it if they need to store a set of names. For the level manager, this component would be attached to <code>Level</code> entities and in that context it means \"the list of names of entities to be loaded for a level\". For other systems, it can mean something else. Thoughts?</p>", "type": "rendered"}, "created_on": "2019-01-10T16:51:46.045768+00:00", "user": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}, "inline": {}, "updated_on": "2019-01-10T16:51:46.060296+00:00", "type": "pullrequest_comment", "id": 87688437}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/87687271.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-87687271"}}, "parent": {"id": 86485619, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/86485619.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-86485619"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}, "content": {"raw": "I've removed this component since it's not being used anymore, but I definitely agree with your suggestion. This reminds me that we need to add a convenience function to remove components in `EntityComponentManager`. Right now, you have to know the `ComponentKey` of the component, but we should be able to do it by passing in just the component type and the entity.", "markup": "markdown", "html": "<p>I've removed this component since it's not being used anymore, but I definitely agree with your suggestion. This reminds me that we need to add a convenience function to remove components in <code>EntityComponentManager</code>. Right now, you have to know the <code>ComponentKey</code> of the component, but we should be able to do it by passing in just the component type and the entity.</p>", "type": "rendered"}, "created_on": "2019-01-10T16:43:57.766129+00:00", "user": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}, "inline": {}, "updated_on": "2019-01-10T16:43:57.779035+00:00", "type": "pullrequest_comment", "id": 87687271}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/87686194.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-87686194"}}, "parent": {"id": 86485787, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/86485787.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-86485787"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}, "content": {"raw": "Done! 723073a. Had no idea we should be using `.sdf`. Will try to remember that going forward.", "markup": "markdown", "html": "<p>Done! <a href=\"#!/ignitionrobotics/ign-gazebo/commits/723073a\" rel=\"nofollow\" class=\"ap-connect-link\">723073a</a>. Had no idea we should be using <code>.sdf</code>. Will try to remember that going forward.</p>", "type": "rendered"}, "created_on": "2019-01-10T16:36:56.127989+00:00", "user": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}, "inline": {}, "updated_on": "2019-01-10T16:36:56.145930+00:00", "type": "pullrequest_comment", "id": 87686194}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/87685925.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-87685925"}}, "parent": {"id": 86485476, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/86485476.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-86485476"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}, "content": {"raw": "Done! 5134a2d", "markup": "markdown", "html": "<p>Done! <a href=\"#!/ignitionrobotics/ign-gazebo/commits/5134a2d\" rel=\"nofollow\" class=\"ap-connect-link\">5134a2d</a></p>", "type": "rendered"}, "created_on": "2019-01-10T16:35:21.369773+00:00", "user": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}, "inline": {}, "updated_on": "2019-01-10T16:35:21.387413+00:00", "type": "pullrequest_comment", "id": 87685925}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"update": {"description": "The pull request implements a level system based on the idea that a simulation runner is responsible for loading and unloading all levels in the world.\r\n\r\n## Dependencies:\r\n\r\n* ign-physics branch [remove_entity_features](#!/ignitionrobotics/ign-physics/branch/remove_entity_features)\r\n      * Which in turn depends on ign-physics [pull request #46](#!/ignitionrobotics/ign-physics/pull-requests/46/)\r\n* ign-gui [pull request #182](#!/ignitionrobotics/ign-gui/pull-requests/182)\r\n\r\n\r\n## TODOs:\r\n\r\n* Send only new entities to ign-gui instead of the whole scene when new entities are added\r\n* Add tests for the level manager.\r\n\r\n## To test\r\nCreate a benchmark world using `benchmark.world.erb`\r\n\r\n```\r\n$ erb n_x=8 n_y=8 test/worlds/benchmark.world.erb > test/worlds/benchmark.world\r\n```\r\nRun ign-gazebo with `--levels` flag\r\n```\r\n$ ign-gazebo -v 4 -f test/worlds/benchmark.world --levels\r\n```\r\nBefore starting the simulation, publish command velocities to the red and green balls.\r\n\r\n```\r\nign topic -t /red_ball/move3d/linear_vel -m ignition.msgs.Vector3d -p 'x:4.0 y: -1'\r\nign topic -t /green_ball/move3d/linear_vel -m ignition.msgs.Vector3d -p 'x:3.0 y: 0'\r\n```\r\nThen start the simulation.\r\n\r\n## Levels on\r\n![ign_gazebo_levels_on.gif](https://bitbucket.org/repo/8zodKzn/images/617343584-ign_gazebo_levels_on.gif)\r\n\r\n## Levels off\r\n![ign_gazebo_levels_off.gif](https://bitbucket.org/repo/8zodKzn/images/1356584003-ign_gazebo_levels_off.gif)", "title": "[WIP] Levels", "destination": {"commit": {"hash": "ebf36aa50919", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/ebf36aa50919.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/ebf36aa50919"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "9acde13b89cb", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/9acde13b89cb.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/9acde13b89cb"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "levels"}}, "state": "OPEN", "author": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}, "date": "2019-01-10T16:33:59.599653+00:00"}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/comments/87585055.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111/_/diff#comment-87585055"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}, "content": {"raw": "I think this can be removed in favor of pull request #117", "markup": "markdown", "html": "<p>I think this can be removed in favor of <a href=\"#!/ignitionrobotics/ign-gazebo/pull-requests/117/move3d-system\" rel=\"nofollow\" class=\"ap-connect-link\">pull request #117</a></p>", "type": "rendered"}, "created_on": "2019-01-10T02:58:35.732640+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {}, "updated_on": "2019-01-10T02:58:35.739932+00:00", "type": "pullrequest_comment", "id": 87585055}, "pull_request": {"type": "pullrequest", "id": 111, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/111"}}, "title": "[A-1] Levels"}}], "next": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/111/activity_ctx=bpCEGF9Iz.json"}