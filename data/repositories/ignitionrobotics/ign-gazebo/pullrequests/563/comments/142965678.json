{"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/563/comments/142965678.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/563/_/diff#comment-142965678"}}, "parent": {"id": 142949758, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/563/comments/142949758.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/563/_/diff#comment-142949758"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 563, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/563.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/563"}}, "title": "Example GUI system plugin"}, "content": {"raw": "The plugin was still failing to compile, with:\n\n```\n61: Undefined symbols for architecture x86_64:\n61:   \"ignition::gazebo::v2::GuiSystem::qt_metacall(QMetaObject::Call, int, void**)\", referenced from:\n61:       GuiSystemPlugin::qt_metacall(QMetaObject::Call, int, void**) in mocs_compilation.cpp.o\n61:   \"ignition::gazebo::v2::GuiSystem::qt_metacast(char const*)\", referenced from:\n61:       GuiSystemPlugin::qt_metacast(char const*) in mocs_compilation.cpp.o\n61:   \"ignition::gazebo::v2::GuiSystem::staticMetaObject\", referenced from:\n61:       GuiSystemPlugin::staticMetaObject in mocs_compilation.cpp.o\n61:   \"typeinfo for ignition::gazebo::v2::GuiSystem\", referenced from:\n61:       typeinfo for GuiSystemPlugin in mocs_compilation.cpp.o\n61:   \"vtable for ignition::gazebo::v2::GuiSystem\", referenced from:\n61:       ignition::gazebo::v2::GuiSystem::GuiSystem() in GuiSystemPlugin.cc.o\n61:   NOTE: a missing vtable usually means the first non-inline virtual member function has no definition.\n61: ld: symbol(s) not found for architecture x86_64\n61: clang: error: linker command failed with exit code 1 (use -v to see invocation)\n61: make[3]: *** [libGuiSystemPlugin.dylib] Error 1\n```\n\nWhich is similar to how `ign-gui`'s plugin was failing before [this PR](#!/ignitionrobotics/ign-gui/pull-requests/251/bump-to-310/commits):\n\n```\n21: Undefined symbols for architecture x86_64:\n21:   \"typeinfo for ignition::gui::HelloPlugin\", referenced from:\n21:       ignition::plugin::detail::Registrar<ignition::gui::HelloPlugin, ignition::gui::Plugin>::MakeInfo() in HelloPlugin.cc.o\n21:   \"vtable for ignition::gui::HelloPlugin\", referenced from:\n21:       ignition::gui::HelloPlugin::HelloPlugin() in HelloPlugin.cc.o\n21:       ignition::gui::HelloPlugin::~HelloPlugin() in HelloPlugin.cc.o\n21:   NOTE: a missing vtable usually means the first non-inline virtual member function has no definition.\n21: ld: symbol(s) not found for architecture x86_64\n21: clang: error: linker command failed with exit code 1 (use -v to see invocation)\n21: make[3]: *** [libHelloPlugin.dylib] Error 1\n```\n\nI changed this example to be more similar to that one in 9bb1dc6, but I'm not sure that's the problem here.", "markup": "markdown", "html": "<p>The plugin was still failing to compile, with:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"mi\">61</span><span class=\"o\">:</span> <span class=\"n\">Undefined</span> <span class=\"n\">symbols</span> <span class=\"k\">for</span> <span class=\"n\">architecture</span> <span class=\"n\">x86_64</span><span class=\"o\">:</span>\n<span class=\"mi\">61</span><span class=\"o\">:</span>   <span class=\"s2\">&quot;ignition::gazebo::v2::GuiSystem::qt_metacall(QMetaObject::Call, int, void**)&quot;</span><span class=\"o\">,</span> <span class=\"n\">referenced</span> <span class=\"n\">from</span><span class=\"o\">:</span>\n<span class=\"mi\">61</span><span class=\"o\">:</span>       <span class=\"n\">GuiSystemPlugin</span><span class=\"o\">::</span><span class=\"n\">qt_metacall</span><span class=\"o\">(</span><span class=\"n\">QMetaObject</span><span class=\"o\">::</span><span class=\"n\">Call</span><span class=\"o\">,</span> <span class=\"n\">int</span><span class=\"o\">,</span> <span class=\"kc\">void</span><span class=\"o\">**)</span> <span class=\"k\">in</span> <span class=\"n\">mocs_compilation</span><span class=\"o\">.</span><span class=\"na\">cpp</span><span class=\"o\">.</span><span class=\"na\">o</span>\n<span class=\"mi\">61</span><span class=\"o\">:</span>   <span class=\"s2\">&quot;ignition::gazebo::v2::GuiSystem::qt_metacast(char const*)&quot;</span><span class=\"o\">,</span> <span class=\"n\">referenced</span> <span class=\"n\">from</span><span class=\"o\">:</span>\n<span class=\"mi\">61</span><span class=\"o\">:</span>       <span class=\"n\">GuiSystemPlugin</span><span class=\"o\">::</span><span class=\"n\">qt_metacast</span><span class=\"o\">(</span><span class=\"n\">char</span> <span class=\"kd\">const</span><span class=\"o\">*)</span> <span class=\"k\">in</span> <span class=\"n\">mocs_compilation</span><span class=\"o\">.</span><span class=\"na\">cpp</span><span class=\"o\">.</span><span class=\"na\">o</span>\n<span class=\"mi\">61</span><span class=\"o\">:</span>   <span class=\"s2\">&quot;ignition::gazebo::v2::GuiSystem::staticMetaObject&quot;</span><span class=\"o\">,</span> <span class=\"n\">referenced</span> <span class=\"n\">from</span><span class=\"o\">:</span>\n<span class=\"mi\">61</span><span class=\"o\">:</span>       <span class=\"n\">GuiSystemPlugin</span><span class=\"o\">::</span><span class=\"n\">staticMetaObject</span> <span class=\"k\">in</span> <span class=\"n\">mocs_compilation</span><span class=\"o\">.</span><span class=\"na\">cpp</span><span class=\"o\">.</span><span class=\"na\">o</span>\n<span class=\"mi\">61</span><span class=\"o\">:</span>   <span class=\"s2\">&quot;typeinfo for ignition::gazebo::v2::GuiSystem&quot;</span><span class=\"o\">,</span> <span class=\"n\">referenced</span> <span class=\"n\">from</span><span class=\"o\">:</span>\n<span class=\"mi\">61</span><span class=\"o\">:</span>       <span class=\"n\">typeinfo</span> <span class=\"k\">for</span> <span class=\"n\">GuiSystemPlugin</span> <span class=\"k\">in</span> <span class=\"n\">mocs_compilation</span><span class=\"o\">.</span><span class=\"na\">cpp</span><span class=\"o\">.</span><span class=\"na\">o</span>\n<span class=\"mi\">61</span><span class=\"o\">:</span>   <span class=\"s2\">&quot;vtable for ignition::gazebo::v2::GuiSystem&quot;</span><span class=\"o\">,</span> <span class=\"n\">referenced</span> <span class=\"n\">from</span><span class=\"o\">:</span>\n<span class=\"mi\">61</span><span class=\"o\">:</span>       <span class=\"n\">ignition</span><span class=\"o\">::</span><span class=\"n\">gazebo</span><span class=\"o\">::</span><span class=\"n\">v2</span><span class=\"o\">::</span><span class=\"n\">GuiSystem</span><span class=\"o\">::</span><span class=\"n\">GuiSystem</span><span class=\"o\">()</span> <span class=\"k\">in</span> <span class=\"n\">GuiSystemPlugin</span><span class=\"o\">.</span><span class=\"na\">cc</span><span class=\"o\">.</span><span class=\"na\">o</span>\n<span class=\"mi\">61</span><span class=\"o\">:</span>   <span class=\"n\">NOTE</span><span class=\"o\">:</span> <span class=\"n\">a</span> <span class=\"n\">missing</span> <span class=\"n\">vtable</span> <span class=\"n\">usually</span> <span class=\"n\">means</span> <span class=\"n\">the</span> <span class=\"n\">first</span> <span class=\"n\">non</span><span class=\"o\">-</span><span class=\"n\">inline</span> <span class=\"n\">virtual</span> <span class=\"n\">member</span> <span class=\"kd\">function</span> <span class=\"n\">has</span> <span class=\"n\">no</span> <span class=\"n\">definition</span><span class=\"o\">.</span>\n<span class=\"mi\">61</span><span class=\"o\">:</span> <span class=\"n\">ld</span><span class=\"o\">:</span> <span class=\"n\">symbol</span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"o\">)</span> <span class=\"n\">not</span> <span class=\"n\">found</span> <span class=\"k\">for</span> <span class=\"n\">architecture</span> <span class=\"n\">x86_64</span>\n<span class=\"mi\">61</span><span class=\"o\">:</span> <span class=\"n\">clang</span><span class=\"o\">:</span> <span class=\"n\">error</span><span class=\"o\">:</span> <span class=\"n\">linker</span> <span class=\"n\">command</span> <span class=\"n\">failed</span> <span class=\"k\">with</span> <span class=\"n\">exit</span> <span class=\"n\">code</span> <span class=\"mi\">1</span> <span class=\"o\">(</span><span class=\"n\">use</span> <span class=\"o\">-</span><span class=\"n\">v</span> <span class=\"n\">to</span> <span class=\"n\">see</span> <span class=\"n\">invocation</span><span class=\"o\">)</span>\n<span class=\"mi\">61</span><span class=\"o\">:</span> <span class=\"n\">make</span><span class=\"o\">[</span><span class=\"mi\">3</span><span class=\"o\">]:</span> <span class=\"o\">***</span> <span class=\"o\">[</span><span class=\"n\">libGuiSystemPlugin</span><span class=\"o\">.</span><span class=\"na\">dylib</span><span class=\"o\">]</span> <span class=\"n\">Error</span> <span class=\"mi\">1</span>\n</pre></div>\n\n\n<p>Which is similar to how <code>ign-gui</code>'s plugin was failing before <a data-is-external-link=\"true\" href=\"#!/ignitionrobotics/ign-gui/pull-requests/251/bump-to-310/commits\" rel=\"nofollow\">this PR</a>:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"mi\">21</span><span class=\"o\">:</span> <span class=\"n\">Undefined</span> <span class=\"n\">symbols</span> <span class=\"k\">for</span> <span class=\"n\">architecture</span> <span class=\"n\">x86_64</span><span class=\"o\">:</span>\n<span class=\"mi\">21</span><span class=\"o\">:</span>   <span class=\"s2\">&quot;typeinfo for ignition::gui::HelloPlugin&quot;</span><span class=\"o\">,</span> <span class=\"n\">referenced</span> <span class=\"n\">from</span><span class=\"o\">:</span>\n<span class=\"mi\">21</span><span class=\"o\">:</span>       <span class=\"n\">ignition</span><span class=\"o\">::</span><span class=\"n\">plugin</span><span class=\"o\">::</span><span class=\"n\">detail</span><span class=\"o\">::</span><span class=\"n\">Registrar</span><span class=\"o\">&lt;</span><span class=\"n\">ignition</span><span class=\"o\">::</span><span class=\"n\">gui</span><span class=\"o\">::</span><span class=\"n\">HelloPlugin</span><span class=\"o\">,</span> <span class=\"n\">ignition</span><span class=\"o\">::</span><span class=\"n\">gui</span><span class=\"o\">::</span><span class=\"n\">Plugin</span><span class=\"o\">&gt;::</span><span class=\"n\">MakeInfo</span><span class=\"o\">()</span> <span class=\"k\">in</span> <span class=\"n\">HelloPlugin</span><span class=\"o\">.</span><span class=\"na\">cc</span><span class=\"o\">.</span><span class=\"na\">o</span>\n<span class=\"mi\">21</span><span class=\"o\">:</span>   <span class=\"s2\">&quot;vtable for ignition::gui::HelloPlugin&quot;</span><span class=\"o\">,</span> <span class=\"n\">referenced</span> <span class=\"n\">from</span><span class=\"o\">:</span>\n<span class=\"mi\">21</span><span class=\"o\">:</span>       <span class=\"n\">ignition</span><span class=\"o\">::</span><span class=\"n\">gui</span><span class=\"o\">::</span><span class=\"n\">HelloPlugin</span><span class=\"o\">::</span><span class=\"n\">HelloPlugin</span><span class=\"o\">()</span> <span class=\"k\">in</span> <span class=\"n\">HelloPlugin</span><span class=\"o\">.</span><span class=\"na\">cc</span><span class=\"o\">.</span><span class=\"na\">o</span>\n<span class=\"mi\">21</span><span class=\"o\">:</span>       <span class=\"n\">ignition</span><span class=\"o\">::</span><span class=\"n\">gui</span><span class=\"o\">::</span><span class=\"n\">HelloPlugin</span><span class=\"o\">::~</span><span class=\"n\">HelloPlugin</span><span class=\"o\">()</span> <span class=\"k\">in</span> <span class=\"n\">HelloPlugin</span><span class=\"o\">.</span><span class=\"na\">cc</span><span class=\"o\">.</span><span class=\"na\">o</span>\n<span class=\"mi\">21</span><span class=\"o\">:</span>   <span class=\"n\">NOTE</span><span class=\"o\">:</span> <span class=\"n\">a</span> <span class=\"n\">missing</span> <span class=\"n\">vtable</span> <span class=\"n\">usually</span> <span class=\"n\">means</span> <span class=\"n\">the</span> <span class=\"n\">first</span> <span class=\"n\">non</span><span class=\"o\">-</span><span class=\"n\">inline</span> <span class=\"n\">virtual</span> <span class=\"n\">member</span> <span class=\"kd\">function</span> <span class=\"n\">has</span> <span class=\"n\">no</span> <span class=\"n\">definition</span><span class=\"o\">.</span>\n<span class=\"mi\">21</span><span class=\"o\">:</span> <span class=\"n\">ld</span><span class=\"o\">:</span> <span class=\"n\">symbol</span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"o\">)</span> <span class=\"n\">not</span> <span class=\"n\">found</span> <span class=\"k\">for</span> <span class=\"n\">architecture</span> <span class=\"n\">x86_64</span>\n<span class=\"mi\">21</span><span class=\"o\">:</span> <span class=\"n\">clang</span><span class=\"o\">:</span> <span class=\"n\">error</span><span class=\"o\">:</span> <span class=\"n\">linker</span> <span class=\"n\">command</span> <span class=\"n\">failed</span> <span class=\"k\">with</span> <span class=\"n\">exit</span> <span class=\"n\">code</span> <span class=\"mi\">1</span> <span class=\"o\">(</span><span class=\"n\">use</span> <span class=\"o\">-</span><span class=\"n\">v</span> <span class=\"n\">to</span> <span class=\"n\">see</span> <span class=\"n\">invocation</span><span class=\"o\">)</span>\n<span class=\"mi\">21</span><span class=\"o\">:</span> <span class=\"n\">make</span><span class=\"o\">[</span><span class=\"mi\">3</span><span class=\"o\">]:</span> <span class=\"o\">***</span> <span class=\"o\">[</span><span class=\"n\">libHelloPlugin</span><span class=\"o\">.</span><span class=\"na\">dylib</span><span class=\"o\">]</span> <span class=\"n\">Error</span> <span class=\"mi\">1</span>\n</pre></div>\n\n\n<p>I changed this example to be more similar to that one in <a href=\"#!/ignitionrobotics/ign-gazebo/commits/9bb1dc6\" rel=\"nofollow\" class=\"ap-connect-link\">9bb1dc6</a>, but I'm not sure that's the problem here.</p>", "type": "rendered"}, "created_on": "2020-03-31T21:28:13.101363+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2020-03-31T21:28:30.556044+00:00", "type": "pullrequest_comment", "id": 142965678}