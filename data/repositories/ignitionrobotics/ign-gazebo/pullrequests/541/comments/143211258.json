{"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/541/comments/143211258.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/541/_/diff#comment-143211258"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 541, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/541.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/541"}}, "title": "Find custom physics engines"}, "content": {"raw": "Upon testing I noticed a couple of things:\n\n* After sourcing the workspace, I only figured out how to use the command line version to choose physics engine, which seems to work without setting the environment variable.\n* `helloworld` plugin has to be invoked by setting environment variable, even with command line option\n* ~~Not sure if this inconsistent behaviour was intended or caused by my mistakes during testing.~~\n\n\\[Edit\\] Actually that makes sense with `colcon build` and sourcing workspace. Confirming this branch works with all three engines as intended.\n\nTerminal results see below\n\n`dartsim`:\n\n```\n$  ign gazebo -v 2 -r shapes.sdf --physics-engine ignition-physics-dartsim-plugin\n[GUI] [Wrn] [Application.cc:649] [QT] file::/ComponentInspector/ComponentInspector.qml:161: ReferenceError: ComponentsModel is not defined\n```\n\n`tpe`:\n\n```\n$ ign gazebo -v 2 -r shapes.sdf --physics-engine ignition-physics-tpe-plugin    \n[Wrn] [Physics.cc:368] Plugin [ignition::physics::tpeplugin::Plugin] misses required features:\n- N8ignition7physics17GetJointFromModelE\n- N8ignition7physics18GetBasicJointStateE\n- N8ignition7physics18SetBasicJointStateE\n- N8ignition7physics23GetBasicJointPropertiesE\n- N8ignition7physics26AddLinkExternalForceTorqueE\n- N8ignition7physics30GetContactsFromLastStepFeatureE\n- N8ignition7physics30SetJointVelocityCommandFeatureE\n- N8ignition7physics3sdf17ConstructSdfJointE\n[Err] [Physics.cc:373] Failed to load a valid physics engine from [/home/claire/citadel_ws/install/lib/ign-physics-2/engine-plugins/libignition-physics-tpe-plugin.so].\n[GUI] [Wrn] [Application.cc:649] [QT] file::/ComponentInspector/ComponentInspector.qml:161: ReferenceError: ComponentsModel is not defined\n```\n\n`helloworld`:\n\n```\nIGN_GAZEBO_PHYSICS_ENGINE_PATH=`pwd`/build ign gazebo -v 2 build/rolling_box.sdf\n[Wrn] [Physics.cc:368] Plugin [mock::HelloWorldPlugin] misses required features:\n- N8ignition7physics11ForwardStepE\n- N8ignition7physics16GetLinkFromModelE\n- N8ignition7physics16GetShapeFromLinkE\n- N8ignition7physics17GetJointFromModelE\n- N8ignition7physics17GetModelFromWorldE\n- N8ignition7physics18GetBasicJointStateE\n- N8ignition7physics18GetWorldFromEngineE\n- N8ignition7physics18LinkFrameSemanticsE\n- N8ignition7physics18SetBasicJointStateE\n- N8ignition7physics20FindFreeGroupFeatureE\n- N8ignition7physics20RemoveModelFromWorldE\n- N8ignition7physics21SetFreeGroupWorldPoseE\n- N8ignition7physics23GetBasicJointPropertiesE\n- N8ignition7physics26AddLinkExternalForceTorqueE\n- N8ignition7physics30GetContactsFromLastStepFeatureE\n- N8ignition7physics30SetJointVelocityCommandFeatureE\n- N8ignition7physics3sdf16ConstructSdfLinkE\n- N8ignition7physics3sdf17ConstructSdfJointE\n- N8ignition7physics3sdf17ConstructSdfModelE\n- N8ignition7physics3sdf17ConstructSdfWorldE\n- N8ignition7physics3sdf18ConstructSdfVisualE\n- N8ignition7physics3sdf21ConstructSdfCollisionE\n- N8ignition7physics4mesh22AttachMeshShapeFeatureE\n[Err] [Physics.cc:373] Failed to load a valid physics engine from [/home/claire/citadel_ws/src/ign-physics/examples/hello_world_plugin/build/libHelloWorldPlugin.so].\n```\n\n\u200c", "markup": "markdown", "html": "<p>Upon testing I noticed a couple of things:</p>\n<ul>\n<li>After sourcing the workspace, I only figured out how to use the command line version to choose physics engine, which seems to work without setting the environment variable.</li>\n<li><code>helloworld</code> plugin has to be invoked by setting environment variable, even with command line option</li>\n<li><del>Not sure if this inconsistent behaviour was intended or caused by my mistakes during testing.</del></li>\n</ul>\n<p>[Edit] Actually that makes sense with <code>colcon build</code> and sourcing workspace. Confirming this branch works with all three engines as intended.</p>\n<p>Terminal results see below</p>\n<p><code>dartsim</code>:</p>\n<div class=\"codehilite\"><pre><span></span>$  ign gazebo -v <span class=\"m\">2</span> -r shapes.sdf --physics-engine ignition-physics-dartsim-plugin\n<span class=\"o\">[</span>GUI<span class=\"o\">]</span> <span class=\"o\">[</span>Wrn<span class=\"o\">]</span> <span class=\"o\">[</span>Application.cc:649<span class=\"o\">]</span> <span class=\"o\">[</span>QT<span class=\"o\">]</span> file::/ComponentInspector/ComponentInspector.qml:161: ReferenceError: ComponentsModel is not defined\n</pre></div>\n\n\n<p><code>tpe</code>:</p>\n<div class=\"codehilite\"><pre><span></span>$ ign gazebo -v <span class=\"m\">2</span> -r shapes.sdf --physics-engine ignition-physics-tpe-plugin    \n<span class=\"o\">[</span>Wrn<span class=\"o\">]</span> <span class=\"o\">[</span>Physics.cc:368<span class=\"o\">]</span> Plugin <span class=\"o\">[</span>ignition::physics::tpeplugin::Plugin<span class=\"o\">]</span> misses required features:\n- N8ignition7physics17GetJointFromModelE\n- N8ignition7physics18GetBasicJointStateE\n- N8ignition7physics18SetBasicJointStateE\n- N8ignition7physics23GetBasicJointPropertiesE\n- N8ignition7physics26AddLinkExternalForceTorqueE\n- N8ignition7physics30GetContactsFromLastStepFeatureE\n- N8ignition7physics30SetJointVelocityCommandFeatureE\n- N8ignition7physics3sdf17ConstructSdfJointE\n<span class=\"o\">[</span>Err<span class=\"o\">]</span> <span class=\"o\">[</span>Physics.cc:373<span class=\"o\">]</span> Failed to load a valid physics engine from <span class=\"o\">[</span>/home/claire/citadel_ws/install/lib/ign-physics-2/engine-plugins/libignition-physics-tpe-plugin.so<span class=\"o\">]</span>.\n<span class=\"o\">[</span>GUI<span class=\"o\">]</span> <span class=\"o\">[</span>Wrn<span class=\"o\">]</span> <span class=\"o\">[</span>Application.cc:649<span class=\"o\">]</span> <span class=\"o\">[</span>QT<span class=\"o\">]</span> file::/ComponentInspector/ComponentInspector.qml:161: ReferenceError: ComponentsModel is not defined\n</pre></div>\n\n\n<p><code>helloworld</code>:</p>\n<div class=\"codehilite\"><pre><span></span>IGN_GAZEBO_PHYSICS_ENGINE_PATH=`pwd`/build ign gazebo -v 2 build/rolling_box.sdf\n[Wrn] [Physics.cc:368] Plugin [mock::HelloWorldPlugin] misses required features:\n- N8ignition7physics11ForwardStepE\n- N8ignition7physics16GetLinkFromModelE\n- N8ignition7physics16GetShapeFromLinkE\n- N8ignition7physics17GetJointFromModelE\n- N8ignition7physics17GetModelFromWorldE\n- N8ignition7physics18GetBasicJointStateE\n- N8ignition7physics18GetWorldFromEngineE\n- N8ignition7physics18LinkFrameSemanticsE\n- N8ignition7physics18SetBasicJointStateE\n- N8ignition7physics20FindFreeGroupFeatureE\n- N8ignition7physics20RemoveModelFromWorldE\n- N8ignition7physics21SetFreeGroupWorldPoseE\n- N8ignition7physics23GetBasicJointPropertiesE\n- N8ignition7physics26AddLinkExternalForceTorqueE\n- N8ignition7physics30GetContactsFromLastStepFeatureE\n- N8ignition7physics30SetJointVelocityCommandFeatureE\n- N8ignition7physics3sdf16ConstructSdfLinkE\n- N8ignition7physics3sdf17ConstructSdfJointE\n- N8ignition7physics3sdf17ConstructSdfModelE\n- N8ignition7physics3sdf17ConstructSdfWorldE\n- N8ignition7physics3sdf18ConstructSdfVisualE\n- N8ignition7physics3sdf21ConstructSdfCollisionE\n- N8ignition7physics4mesh22AttachMeshShapeFeatureE\n[Err] [Physics.cc:373] Failed to load a valid physics engine from [/home/claire/citadel_ws/src/ign-physics/examples/hello_world_plugin/build/libHelloWorldPlugin.so].\n</pre></div>\n\n\n<p>\u200c</p>", "type": "rendered"}, "created_on": "2020-04-01T23:24:54.333130+00:00", "user": {"display_name": "Claire Wang", "uuid": "{4b4ab2f2-8148-463e-a671-2eed1e6ccd42}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B4b4ab2f2-8148-463e-a671-2eed1e6ccd42%7D"}, "html": {"href": "https://bitbucket.org/%7B4b4ab2f2-8148-463e-a671-2eed1e6ccd42%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5d3f35705e485d0dab01c896/a44642e6-28d8-4727-b9cc-b4c18e91d167/128"}}, "nickname": "Claire Wang", "type": "user", "account_id": "5d3f35705e485d0dab01c896"}, "updated_on": "2020-04-04T01:24:05.918280+00:00", "type": "pullrequest_comment", "id": 143211258}