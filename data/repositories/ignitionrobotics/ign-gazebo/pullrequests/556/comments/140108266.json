{"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/556/comments/140108266.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/556/_/diff#comment-140108266"}}, "parent": {"id": 139788224, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/556/comments/139788224.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/556/_/diff#comment-139788224"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 556, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/556.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/556"}}, "title": "Update physics state even when paused (not stepping)"}, "content": {"raw": "Thanks for testing this @{557058:054df869-5cda-48f2-8b4e-81a61c133346}. I think the problem is [here](#!/ignitionrobotics/ign-gazebo/src/3af70086d17627231155922e8f751ab442f85eca/src/rendering/RenderUtil.cc?at=physics_update_while_paused#lines-198). \n```\nthis->dataPtr->CreateRenderingEntities(_ecm, _info);\nif (_info.dt != std::chrono::steady_clock::duration::zero())\n  this->dataPtr->UpdateRenderingEntities(_ecm);\nthis->dataPtr->RemoveRenderingEntities(_ecm, _info);\n```\n\nThe render skips pose updates if simulation is paused right now. If I remove that `if` statement, the GUI responds to `WorldPoseCmd` updates as you expect. @{chapulina}, are there performance implications of doing this? I did a quick profile of the GUI application and it shows that the `UpdateFromECM` function now takes 3.5% of the total time of the application while simulation is paused. It's close to 0% if I keep the `if` statement.", "markup": "markdown", "html": "<p>Thanks for testing this <span class=\"ap-mention\" data-atlassian-id=\"557058:054df869-5cda-48f2-8b4e-81a61c133346\">@Diego Ferigo</span>. I think the problem is <a data-is-external-link=\"true\" href=\"#!/ignitionrobotics/ign-gazebo/src/3af70086d17627231155922e8f751ab442f85eca/src/rendering/RenderUtil.cc?at=physics_update_while_paused#lines-198\" rel=\"nofollow\">here</a>. </p>\n<div class=\"codehilite\"><pre><span></span>this-&gt;dataPtr-&gt;CreateRenderingEntities(_ecm, _info);\nif (_info.dt != std::chrono::steady_clock::duration::zero())\n  this-&gt;dataPtr-&gt;UpdateRenderingEntities(_ecm);\nthis-&gt;dataPtr-&gt;RemoveRenderingEntities(_ecm, _info);\n</pre></div>\n\n\n<p>The render skips pose updates if simulation is paused right now. If I remove that <code>if</code> statement, the GUI responds to <code>WorldPoseCmd</code> updates as you expect. <span class=\"ap-mention\" data-atlassian-id=\"557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8\">@Louise Poubel</span>, are there performance implications of doing this? I did a quick profile of the GUI application and it shows that the <code>UpdateFromECM</code> function now takes 3.5% of the total time of the application while simulation is paused. It's close to 0% if I keep the <code>if</code> statement.</p>", "type": "rendered"}, "created_on": "2020-03-13T19:29:27.328523+00:00", "user": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}, "updated_on": "2020-03-13T19:29:27.347791+00:00", "type": "pullrequest_comment", "id": 140108266}