{"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/503/comments/130740454.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-gazebo/diff/ignitionrobotics/ign-gazebo:dae118d1a785..965500ca6513?path=test%2Fintegration%2Flog_system.cc"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/503/_/diff#comment-130740454"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 503, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/503.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/503"}}, "title": "Updates to log overwrite tests -> pull request #497"}, "content": {"raw": "Let me check my understanding. The behavior that this tests is a little different from the original. Is this intended? The original test that sets the SDF path to \u201c \u201c tests the case when LogRecord receives an empty path \\(`<path>` is either specified in SDF, or set by `ServerPrivate.cc` if `ServerConfig.LogRecordPath()` is not empty\\). Currently we still take `<path>` from SDF, so if only `--record` is specified and no `--record-path`, then `LogIgnoreSdfPath() == false`, and `ServerPrivate.cc` will take the SDF `<path>`. So that\u2019s what the original test was testing.\n\nOther than the SDF `<path>` case, the other clear-cut case that passes in `--record-path` is through `ign.cc`, which would always set both `LogRecordPath()` and `LogIgnoreSdfPath()`. I think that is covered in another test later.\n\nThe new version here tests a case I haven\u2019t considered before, which is now documented as the C\\+\\+ API way. It sets `LogRecordPath()` but not `LogIgnoreSdfPath()`. This tests a different if-clause in `ServerPrivate.cc` than the original.\n\nOnce we remove support for `<path>`, maybe the empty path case in LogRecord will not happen again and we can remove the original. But I think for now it is safer to put these in two different tests?", "markup": "markdown", "html": "<p>Let me check my understanding. The behavior that this tests is a little different from the original. Is this intended? The original test that sets the SDF path to \u201c \u201c tests the case when LogRecord receives an empty path (<code>&lt;path&gt;</code> is either specified in SDF, or set by <code>ServerPrivate.cc</code> if <code>ServerConfig.LogRecordPath()</code> is not empty). Currently we still take <code>&lt;path&gt;</code> from SDF, so if only <code>--record</code> is specified and no <code>--record-path</code>, then <code>LogIgnoreSdfPath() == false</code>, and <code>ServerPrivate.cc</code> will take the SDF <code>&lt;path&gt;</code>. So that\u2019s what the original test was testing.</p>\n<p>Other than the SDF <code>&lt;path&gt;</code> case, the other clear-cut case that passes in <code>--record-path</code> is through <code>ign.cc</code>, which would always set both <code>LogRecordPath()</code> and <code>LogIgnoreSdfPath()</code>. I think that is covered in another test later.</p>\n<p>The new version here tests a case I haven\u2019t considered before, which is now documented as the C++ API way. It sets <code>LogRecordPath()</code> but not <code>LogIgnoreSdfPath()</code>. This tests a different if-clause in <code>ServerPrivate.cc</code> than the original.</p>\n<p>Once we remove support for <code>&lt;path&gt;</code>, maybe the empty path case in LogRecord will not happen again and we can remove the original. But I think for now it is safer to put these in two different tests?</p>", "type": "rendered"}, "created_on": "2020-01-07T18:10:20.364012+00:00", "user": {"display_name": "Mabel Zhang", "uuid": "{4b0e38fb-bf50-45c0-a496-61147518b2bf}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D"}, "html": {"href": "https://bitbucket.org/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:ceb5942c-6843-408c-8550-3ce4899d299b/4d48e5ea-cf28-4fa7-9715-8fc9e315d831/128"}}, "nickname": "mabelmzhang", "type": "user", "account_id": "557058:ceb5942c-6843-408c-8550-3ce4899d299b"}, "inline": {"to": 252, "from": null, "outdated": true, "path": "test/integration/log_system.cc"}, "updated_on": "2020-01-07T18:10:20.373692+00:00", "type": "pullrequest_comment", "id": 130740454}