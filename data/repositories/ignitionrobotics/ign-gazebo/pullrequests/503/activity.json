{"pagelen": 50, "values": [{"update": {"description": "Some suggestions:\r\n\r\n* Remove `ServerConfig::LogRecordOverwrite` because it was not being used. It would be misleading to keep it there, because it implies that the server can be setup to handle no overwrite, when in fact, this needs to be handled before the server is instantiated and the final path be passed to the server config. I realized this while writing some tests to check that a new folder is created for no overwrite.\r\n\r\n* Removed the checks for `ignLogDirectory` on the `LogOverwrite` test, because that path is set in the beginning of the test and is not expected to change.\r\n\r\n* Added an `entryCount` function and check when new log directories with `(1)` are created, or not.\r\n\r\n* Remove `removeFile`s from the beginning of each overwrite test case, so we can check that the file is overwritten, as opposed to a new file written.\r\n\r\n* Check that `server_console.log` ends up together with `state.log`\r\n\r\n* Add test that doesn't overwrite\r\n\r\n* Removed unused test world", "title": "Updates to log overwrite tests -> pull request #497", "destination": {"commit": {"hash": "965500ca6513", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/965500ca6513.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/965500ca6513"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "log_overwrite"}}, "reason": "", "source": {"commit": {"hash": "0ec9070a107f", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/0ec9070a107f.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/0ec9070a107f"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "log_overwrite_chapulina"}}, "state": "MERGED", "author": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "date": "2020-02-14T01:00:10.968268+00:00"}, "pull_request": {"type": "pullrequest", "id": 503, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/503.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/503"}}, "title": "Updates to log overwrite tests -> pull request #497"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/503/comments/135904573.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/503/_/diff#comment-135904573"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 503, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/503.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/503"}}, "title": "Updates to log overwrite tests -> pull request #497"}, "content": {"raw": "@{mabelmzhang} , merging this into your PR as discussed in person :wink: ", "markup": "markdown", "html": "<p><span class=\"ap-mention\" data-atlassian-id=\"557058:ceb5942c-6843-408c-8550-3ce4899d299b\">@Mabel Zhang</span> , merging this into your PR as discussed in person <img class=\"emoji\" src=\"data/pf-emoji-service--cdn.us-east-1.prod.public.atl-paas.net/standard/551c9814-1d37-4573-819d-afab3afeaf32/48x48/1f609.png\" alt=\"\ud83d\ude09\" title=\":wink:\" data-emoji-short-name=\":wink:\" /> </p>", "type": "rendered"}, "created_on": "2020-02-14T00:59:56.870175+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2020-02-14T00:59:56.916392+00:00", "type": "pullrequest_comment", "id": 135904573}, "pull_request": {"type": "pullrequest", "id": 503, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/503.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/503"}}, "title": "Updates to log overwrite tests -> pull request #497"}}, {"update": {"description": "Some suggestions:\r\n\r\n* Remove `ServerConfig::LogRecordOverwrite` because it was not being used. It would be misleading to keep it there, because it implies that the server can be setup to handle no overwrite, when in fact, this needs to be handled before the server is instantiated and the final path be passed to the server config. I realized this while writing some tests to check that a new folder is created for no overwrite.\r\n\r\n* Removed the checks for `ignLogDirectory` on the `LogOverwrite` test, because that path is set in the beginning of the test and is not expected to change.\r\n\r\n* Added an `entryCount` function and check when new log directories with `(1)` are created, or not.\r\n\r\n* Remove `removeFile`s from the beginning of each overwrite test case, so we can check that the file is overwritten, as opposed to a new file written.\r\n\r\n* Check that `server_console.log` ends up together with `state.log`\r\n\r\n* Add test that doesn't overwrite\r\n\r\n* Removed unused test world", "title": "Updates to log overwrite tests -> pull request #497", "destination": {"commit": {"hash": "965500ca6513", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/965500ca6513.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/965500ca6513"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "log_overwrite"}}, "reason": "", "source": {"commit": {"hash": "0ec9070a107f", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/0ec9070a107f.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/0ec9070a107f"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "log_overwrite_chapulina"}}, "state": "OPEN", "author": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "date": "2020-02-14T00:59:31.372487+00:00"}, "pull_request": {"type": "pullrequest", "id": 503, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/503.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/503"}}, "title": "Updates to log overwrite tests -> pull request #497"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/503/comments/135893629.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/503/_/diff#comment-135893629"}}, "parent": {"id": 135684836, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/503/comments/135684836.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/503/_/diff#comment-135684836"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 503, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/503.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/503"}}, "title": "Updates to log overwrite tests -> pull request #497"}, "content": {"raw": "With 15d296b, now rows 2, 3, 4, 6 in the [table](#!/ignitionrobotics/ign-gazebo/pull-requests/497/log-record-overwrite/diff#comment-130437610) in PR #497 unrelated to overwrite are covered.", "markup": "markdown", "html": "<p>With <a href=\"#!/ignitionrobotics/ign-gazebo/commits/15d296b\" rel=\"nofollow\" class=\"ap-connect-link\">15d296b</a>, now rows 2, 3, 4, 6 in the <a data-is-external-link=\"true\" href=\"#!/ignitionrobotics/ign-gazebo/pull-requests/497/log-record-overwrite/diff#comment-130437610\" rel=\"nofollow\">table</a> in <a href=\"#!/ignitionrobotics/ign-gazebo/pull-requests/497/log-record-overwrite\" rel=\"nofollow\" class=\"ap-connect-link\">PR #497</a> unrelated to overwrite are covered.</p>", "type": "rendered"}, "created_on": "2020-02-13T22:41:00.654326+00:00", "user": {"display_name": "Mabel Zhang", "uuid": "{4b0e38fb-bf50-45c0-a496-61147518b2bf}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D"}, "html": {"href": "https://bitbucket.org/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:ceb5942c-6843-408c-8550-3ce4899d299b/4d48e5ea-cf28-4fa7-9715-8fc9e315d831/128"}}, "nickname": "mabelmzhang", "type": "user", "account_id": "557058:ceb5942c-6843-408c-8550-3ce4899d299b"}, "updated_on": "2020-02-13T22:41:41.530959+00:00", "type": "pullrequest_comment", "id": 135893629}, "pull_request": {"type": "pullrequest", "id": 503, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/503.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/503"}}, "title": "Updates to log overwrite tests -> pull request #497"}}, {"update": {"description": "Some suggestions:\r\n\r\n* Remove `ServerConfig::LogRecordOverwrite` because it was not being used. It would be misleading to keep it there, because it implies that the server can be setup to handle no overwrite, when in fact, this needs to be handled before the server is instantiated and the final path be passed to the server config. I realized this while writing some tests to check that a new folder is created for no overwrite.\r\n\r\n* Removed the checks for `ignLogDirectory` on the `LogOverwrite` test, because that path is set in the beginning of the test and is not expected to change.\r\n\r\n* Added an `entryCount` function and check when new log directories with `(1)` are created, or not.\r\n\r\n* Remove `removeFile`s from the beginning of each overwrite test case, so we can check that the file is overwritten, as opposed to a new file written.\r\n\r\n* Check that `server_console.log` ends up together with `state.log`\r\n\r\n* Add test that doesn't overwrite\r\n\r\n* Removed unused test world", "title": "Updates to log overwrite tests -> pull request #497", "destination": {"commit": {"hash": "965500ca6513", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/965500ca6513.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/965500ca6513"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "log_overwrite"}}, "reason": "", "source": {"commit": {"hash": "15d296b25aa7", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/15d296b25aa7.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/15d296b25aa7"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "log_overwrite_chapulina"}}, "state": "OPEN", "author": {"display_name": "Mabel Zhang", "uuid": "{4b0e38fb-bf50-45c0-a496-61147518b2bf}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D"}, "html": {"href": "https://bitbucket.org/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:ceb5942c-6843-408c-8550-3ce4899d299b/4d48e5ea-cf28-4fa7-9715-8fc9e315d831/128"}}, "nickname": "mabelmzhang", "type": "user", "account_id": "557058:ceb5942c-6843-408c-8550-3ce4899d299b"}, "date": "2020-02-13T22:38:55.779093+00:00"}, "pull_request": {"type": "pullrequest", "id": 503, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/503.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/503"}}, "title": "Updates to log overwrite tests -> pull request #497"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/503/comments/135891000.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/503/_/diff#comment-135891000"}}, "parent": {"id": 131096301, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/503/comments/131096301.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/503/_/diff#comment-131096301"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 503, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/503.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/503"}}, "title": "Updates to log overwrite tests -> pull request #497"}, "content": {"raw": "I just added some comments in 4685dc9 to make the test cases more clear.", "markup": "markdown", "html": "<p>I just added some comments in <a href=\"#!/ignitionrobotics/ign-gazebo/commits/4685dc9\" rel=\"nofollow\" class=\"ap-connect-link\">4685dc9</a> to make the test cases more clear.</p>", "type": "rendered"}, "created_on": "2020-02-13T22:16:06.959409+00:00", "user": {"display_name": "Mabel Zhang", "uuid": "{4b0e38fb-bf50-45c0-a496-61147518b2bf}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D"}, "html": {"href": "https://bitbucket.org/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:ceb5942c-6843-408c-8550-3ce4899d299b/4d48e5ea-cf28-4fa7-9715-8fc9e315d831/128"}}, "nickname": "mabelmzhang", "type": "user", "account_id": "557058:ceb5942c-6843-408c-8550-3ce4899d299b"}, "inline": {}, "updated_on": "2020-02-13T22:16:06.972358+00:00", "type": "pullrequest_comment", "id": 135891000}, "pull_request": {"type": "pullrequest", "id": 503, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/503.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/503"}}, "title": "Updates to log overwrite tests -> pull request #497"}}, {"update": {"description": "Some suggestions:\r\n\r\n* Remove `ServerConfig::LogRecordOverwrite` because it was not being used. It would be misleading to keep it there, because it implies that the server can be setup to handle no overwrite, when in fact, this needs to be handled before the server is instantiated and the final path be passed to the server config. I realized this while writing some tests to check that a new folder is created for no overwrite.\r\n\r\n* Removed the checks for `ignLogDirectory` on the `LogOverwrite` test, because that path is set in the beginning of the test and is not expected to change.\r\n\r\n* Added an `entryCount` function and check when new log directories with `(1)` are created, or not.\r\n\r\n* Remove `removeFile`s from the beginning of each overwrite test case, so we can check that the file is overwritten, as opposed to a new file written.\r\n\r\n* Check that `server_console.log` ends up together with `state.log`\r\n\r\n* Add test that doesn't overwrite\r\n\r\n* Removed unused test world", "title": "Updates to log overwrite tests -> pull request #497", "destination": {"commit": {"hash": "965500ca6513", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/965500ca6513.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/965500ca6513"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "log_overwrite"}}, "reason": "", "source": {"commit": {"hash": "4685dc9599d0", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/4685dc9599d0.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/4685dc9599d0"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "log_overwrite_chapulina"}}, "state": "OPEN", "author": {"display_name": "Mabel Zhang", "uuid": "{4b0e38fb-bf50-45c0-a496-61147518b2bf}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D"}, "html": {"href": "https://bitbucket.org/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:ceb5942c-6843-408c-8550-3ce4899d299b/4d48e5ea-cf28-4fa7-9715-8fc9e315d831/128"}}, "nickname": "mabelmzhang", "type": "user", "account_id": "557058:ceb5942c-6843-408c-8550-3ce4899d299b"}, "date": "2020-02-13T22:15:23.285561+00:00"}, "pull_request": {"type": "pullrequest", "id": 503, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/503.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/503"}}, "title": "Updates to log overwrite tests -> pull request #497"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/503/comments/135684836.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/503/_/diff#comment-135684836"}}, "parent": {"id": 131094919, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/503/comments/131094919.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/503/_/diff#comment-131094919"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 503, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/503.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/503"}}, "title": "Updates to log overwrite tests -> pull request #497"}, "content": {"raw": "Removed `ignLogInit()` from LogRecord.cc in 81fc2f9.\n\nFor some reason `ignLogDirectory()` in the tests are printed from LogRecord.cc correctly - the default timestamped path,  but after `customExecStr()`is executed, `ignLogDirectory()` returns empty string. So I added `entryList()` and `entryDiff()` to find a difference of the entries in the directories and assume there is only 1 diff, that being the new timestamped directory. The caveat is that they rely on `directory_iterator` and won\u2019t work for Mac.", "markup": "markdown", "html": "<p>Removed <code>ignLogInit()</code> from LogRecord.cc in <a href=\"#!/ignitionrobotics/ign-gazebo/commits/81fc2f9\" rel=\"nofollow\" class=\"ap-connect-link\">81fc2f9</a>.</p>\n<p>For some reason <code>ignLogDirectory()</code> in the tests are printed from LogRecord.cc correctly - the default timestamped path,  but after <code>customExecStr()</code>is executed, <code>ignLogDirectory()</code> returns empty string. So I added <code>entryList()</code> and <code>entryDiff()</code> to find a difference of the entries in the directories and assume there is only 1 diff, that being the new timestamped directory. The caveat is that they rely on <code>directory_iterator</code> and won\u2019t work for Mac.</p>", "type": "rendered"}, "created_on": "2020-02-12T21:42:56.953403+00:00", "user": {"display_name": "Mabel Zhang", "uuid": "{4b0e38fb-bf50-45c0-a496-61147518b2bf}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D"}, "html": {"href": "https://bitbucket.org/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:ceb5942c-6843-408c-8550-3ce4899d299b/4d48e5ea-cf28-4fa7-9715-8fc9e315d831/128"}}, "nickname": "mabelmzhang", "type": "user", "account_id": "557058:ceb5942c-6843-408c-8550-3ce4899d299b"}, "updated_on": "2020-02-12T21:42:56.962445+00:00", "type": "pullrequest_comment", "id": 135684836}, "pull_request": {"type": "pullrequest", "id": 503, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/503.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/503"}}, "title": "Updates to log overwrite tests -> pull request #497"}}, {"update": {"description": "Some suggestions:\r\n\r\n* Remove `ServerConfig::LogRecordOverwrite` because it was not being used. It would be misleading to keep it there, because it implies that the server can be setup to handle no overwrite, when in fact, this needs to be handled before the server is instantiated and the final path be passed to the server config. I realized this while writing some tests to check that a new folder is created for no overwrite.\r\n\r\n* Removed the checks for `ignLogDirectory` on the `LogOverwrite` test, because that path is set in the beginning of the test and is not expected to change.\r\n\r\n* Added an `entryCount` function and check when new log directories with `(1)` are created, or not.\r\n\r\n* Remove `removeFile`s from the beginning of each overwrite test case, so we can check that the file is overwritten, as opposed to a new file written.\r\n\r\n* Check that `server_console.log` ends up together with `state.log`\r\n\r\n* Add test that doesn't overwrite\r\n\r\n* Removed unused test world", "title": "Updates to log overwrite tests -> pull request #497", "destination": {"commit": {"hash": "965500ca6513", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/965500ca6513.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/965500ca6513"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "log_overwrite"}}, "reason": "", "source": {"commit": {"hash": "b5169c49545b", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/b5169c49545b.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/b5169c49545b"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "log_overwrite_chapulina"}}, "state": "OPEN", "author": {"display_name": "Mabel Zhang", "uuid": "{4b0e38fb-bf50-45c0-a496-61147518b2bf}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D"}, "html": {"href": "https://bitbucket.org/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:ceb5942c-6843-408c-8550-3ce4899d299b/4d48e5ea-cf28-4fa7-9715-8fc9e315d831/128"}}, "nickname": "mabelmzhang", "type": "user", "account_id": "557058:ceb5942c-6843-408c-8550-3ce4899d299b"}, "date": "2020-02-12T21:40:09.700084+00:00"}, "pull_request": {"type": "pullrequest", "id": 503, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/503.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/503"}}, "title": "Updates to log overwrite tests -> pull request #497"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/503/comments/135684193.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/503/_/diff#comment-135684193"}}, "parent": {"id": 131097008, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/503/comments/131097008.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/503/_/diff#comment-131097008"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 503, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/503.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/503"}}, "title": "Updates to log overwrite tests -> pull request #497"}, "content": {"raw": "I tried to address these in 81fc2f9", "markup": "markdown", "html": "<p>I tried to address these in <a href=\"#!/ignitionrobotics/ign-gazebo/commits/81fc2f9\" rel=\"nofollow\" class=\"ap-connect-link\">81fc2f9</a></p>", "type": "rendered"}, "created_on": "2020-02-12T21:37:15.756930+00:00", "user": {"display_name": "Mabel Zhang", "uuid": "{4b0e38fb-bf50-45c0-a496-61147518b2bf}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D"}, "html": {"href": "https://bitbucket.org/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:ceb5942c-6843-408c-8550-3ce4899d299b/4d48e5ea-cf28-4fa7-9715-8fc9e315d831/128"}}, "nickname": "mabelmzhang", "type": "user", "account_id": "557058:ceb5942c-6843-408c-8550-3ce4899d299b"}, "inline": {}, "updated_on": "2020-02-12T21:37:15.770454+00:00", "type": "pullrequest_comment", "id": 135684193}, "pull_request": {"type": "pullrequest", "id": 503, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/503.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/503"}}, "title": "Updates to log overwrite tests -> pull request #497"}}, {"update": {"description": "Some suggestions:\r\n\r\n* Remove `ServerConfig::LogRecordOverwrite` because it was not being used. It would be misleading to keep it there, because it implies that the server can be setup to handle no overwrite, when in fact, this needs to be handled before the server is instantiated and the final path be passed to the server config. I realized this while writing some tests to check that a new folder is created for no overwrite.\r\n\r\n* Removed the checks for `ignLogDirectory` on the `LogOverwrite` test, because that path is set in the beginning of the test and is not expected to change.\r\n\r\n* Added an `entryCount` function and check when new log directories with `(1)` are created, or not.\r\n\r\n* Remove `removeFile`s from the beginning of each overwrite test case, so we can check that the file is overwritten, as opposed to a new file written.\r\n\r\n* Check that `server_console.log` ends up together with `state.log`\r\n\r\n* Add test that doesn't overwrite\r\n\r\n* Removed unused test world", "title": "Updates to log overwrite tests -> pull request #497", "destination": {"commit": {"hash": "965500ca6513", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/965500ca6513.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/965500ca6513"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "log_overwrite"}}, "reason": "", "source": {"commit": {"hash": "81fc2f9e0ac9", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/81fc2f9e0ac9.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/81fc2f9e0ac9"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "log_overwrite_chapulina"}}, "state": "OPEN", "author": {"display_name": "Mabel Zhang", "uuid": "{4b0e38fb-bf50-45c0-a496-61147518b2bf}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D"}, "html": {"href": "https://bitbucket.org/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:ceb5942c-6843-408c-8550-3ce4899d299b/4d48e5ea-cf28-4fa7-9715-8fc9e315d831/128"}}, "nickname": "mabelmzhang", "type": "user", "account_id": "557058:ceb5942c-6843-408c-8550-3ce4899d299b"}, "date": "2020-02-12T21:36:44.561863+00:00"}, "pull_request": {"type": "pullrequest", "id": 503, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/503.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/503"}}, "title": "Updates to log overwrite tests -> pull request #497"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/503/comments/131097008.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/503/_/diff#comment-131097008"}}, "parent": {"id": 130740454, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/503/comments/130740454.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/503/_/diff#comment-130740454"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 503, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/503.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/503"}}, "title": "Updates to log overwrite tests -> pull request #497"}, "content": {"raw": "> tests the case when LogRecord receives an empty path\n\nI see this now, but check my other comment about how I think we shouldn't be calling `ignLogInit` from a plugin.\n\n> This tests a different if-clause in ServerPrivate.cc than the original.\n\nYeah I think you're right. We should add tests to also exercise the other code path.\n\n> put these in two different tests?\n\n+1", "markup": "markdown", "html": "<blockquote>\n<p>tests the case when LogRecord receives an empty path</p>\n</blockquote>\n<p>I see this now, but check my other comment about how I think we shouldn't be calling <code>ignLogInit</code> from a plugin.</p>\n<blockquote>\n<p>This tests a different if-clause in ServerPrivate.cc than the original.</p>\n</blockquote>\n<p>Yeah I think you're right. We should add tests to also exercise the other code path.</p>\n<blockquote>\n<p>put these in two different tests?</p>\n</blockquote>\n<p>+1</p>", "type": "rendered"}, "created_on": "2020-01-09T20:04:35.557538+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {}, "updated_on": "2020-01-09T20:04:35.565787+00:00", "type": "pullrequest_comment", "id": 131097008}, "pull_request": {"type": "pullrequest", "id": 503, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/503.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/503"}}, "title": "Updates to log overwrite tests -> pull request #497"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/503/comments/131096301.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/503/_/diff#comment-131096301"}}, "parent": {"id": 130742760, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/503/comments/130742760.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/503/_/diff#comment-130742760"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 503, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/503.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/503"}}, "title": "Updates to log overwrite tests -> pull request #497"}, "content": {"raw": "> the default behavior of LogRecord plugin will still overwrite in any case.\n\nI'm ok with the old message too. I think they both mean the same, right? The path set on `LogRecord` is the one from the SDF.\n\n> with the removal of LogRecordOverwrite()\n\nI thought there would be no change in behaviour with the removal of `ServerConfig::LogRecordOverwrite`, that's why I removed it. Was it being used somewhere?\n\n> So as far as overwrite goes, I believe these tests are not testing different things\n\nThis is what I think the tests are checking:\n\n1. line 647: 1st recording just checks a file is saved to disk when `<path>` is set by user\n1. line 681: 2nd recording has the exact same `<path>` on SDF (as if it was coming from the **user**) and no `--log-overwrite`: verify that file recorded above is **overwritten**\n1. line 714: 3rd recording has the same path, but set through the C++ API (which the `Server` copies to SDF `<path>` under the hood): verify that file recorded above is **overwritten**\n1. line 744: 4th recording to same path, but this time using `--log-overwrite` from the command line: verify that file recorded above is **overwritten**\n1. line 772: 5th recording, passing same path to the command line but no `--log-overwrite`: verify that **new** files are created.", "markup": "markdown", "html": "<blockquote>\n<p>the default behavior of LogRecord plugin will still overwrite in any case.</p>\n</blockquote>\n<p>I'm ok with the old message too. I think they both mean the same, right? The path set on <code>LogRecord</code> is the one from the SDF.</p>\n<blockquote>\n<p>with the removal of LogRecordOverwrite()</p>\n</blockquote>\n<p>I thought there would be no change in behaviour with the removal of <code>ServerConfig::LogRecordOverwrite</code>, that's why I removed it. Was it being used somewhere?</p>\n<blockquote>\n<p>So as far as overwrite goes, I believe these tests are not testing different things</p>\n</blockquote>\n<p>This is what I think the tests are checking:</p>\n<ol>\n<li>line 647: 1st recording just checks a file is saved to disk when <code>&lt;path&gt;</code> is set by user</li>\n<li>line 681: 2nd recording has the exact same <code>&lt;path&gt;</code> on SDF (as if it was coming from the <strong>user</strong>) and no <code>--log-overwrite</code>: verify that file recorded above is <strong>overwritten</strong></li>\n<li>line 714: 3rd recording has the same path, but set through the C++ API (which the <code>Server</code> copies to SDF <code>&lt;path&gt;</code> under the hood): verify that file recorded above is <strong>overwritten</strong></li>\n<li>line 744: 4th recording to same path, but this time using <code>--log-overwrite</code> from the command line: verify that file recorded above is <strong>overwritten</strong></li>\n<li>line 772: 5th recording, passing same path to the command line but no <code>--log-overwrite</code>: verify that <strong>new</strong> files are created.</li>\n</ol>", "type": "rendered"}, "created_on": "2020-01-09T19:58:53.119640+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {}, "updated_on": "2020-01-09T19:58:53.127858+00:00", "type": "pullrequest_comment", "id": 131096301}, "pull_request": {"type": "pullrequest", "id": 503, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/503.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/503"}}, "title": "Updates to log overwrite tests -> pull request #497"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/503/comments/131094919.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/503/_/diff#comment-131094919"}}, "parent": {"id": 130740503, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/503/comments/130740503.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/503/_/diff#comment-130740503"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 503, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/503.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/503"}}, "title": "Updates to log overwrite tests -> pull request #497"}, "content": {"raw": "Oh I had totally missed the `ignLogInit` inside `LogRecord::Configure`. I'm having trouble reaching that code path though. There's no way to exercise it from the command line, right? Because the `Server` itself is always populating the SDF `<path>`.\n\nRegardless of whether there's a way to reach that, I think we shouldn't be calling `ignLogInit` from a plugin. By the time we reach that, several console messages have already been printed, and a `server_console.log` file already exists on disk. I'm not sure whether that function would just fail, or create a new file with a new timestamp.\n\nI think the correct thing to do inside `LogRecord::Configure` would be to remove the `ignLogInit` call and keep the `logPath = ignLogDirectory();`. This way, if there's no `<path>`, we use the default console log path coming from `ign-common`.", "markup": "markdown", "html": "<p>Oh I had totally missed the <code>ignLogInit</code> inside <code>LogRecord::Configure</code>. I'm having trouble reaching that code path though. There's no way to exercise it from the command line, right? Because the <code>Server</code> itself is always populating the SDF <code>&lt;path&gt;</code>.</p>\n<p>Regardless of whether there's a way to reach that, I think we shouldn't be calling <code>ignLogInit</code> from a plugin. By the time we reach that, several console messages have already been printed, and a <code>server_console.log</code> file already exists on disk. I'm not sure whether that function would just fail, or create a new file with a new timestamp.</p>\n<p>I think the correct thing to do inside <code>LogRecord::Configure</code> would be to remove the <code>ignLogInit</code> call and keep the <code>logPath = ignLogDirectory();</code>. This way, if there's no <code>&lt;path&gt;</code>, we use the default console log path coming from <code>ign-common</code>.</p>", "type": "rendered"}, "created_on": "2020-01-09T19:47:27.496157+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2020-01-09T19:47:27.505828+00:00", "type": "pullrequest_comment", "id": 131094919}, "pull_request": {"type": "pullrequest", "id": 503, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/503.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/503"}}, "title": "Updates to log overwrite tests -> pull request #497"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/503/comments/130742760.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/503/_/diff#comment-130742760"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 503, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/503.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/503"}}, "title": "Updates to log overwrite tests -> pull request #497"}, "content": {"raw": "Hmm I think the original comment is more accurate and disambiguates this test from the two tests below. It is meant to say that even without a `--log-overwrite` flag or `SetLogRecordOverwrite()`, the default behavior of `LogRecord` plugin will still overwrite in any case.\n\nUpdate: I looked again. I see that with the removal of `LogRecordOverwrite()`, the second case also overwrites using this default behavior. It is still good to clarify that is the default behavior though, regardless of whether the path is set on SDF or by C\\+\\+ API. Where the path is set isn\u2019t what determines whether there is an overwrite; it\u2019s just default behavior. So as far as overwrite goes, I believe these tests are not testing different things. They are more testing functionality of the SDF and C\\+\\+ API themselves and should go into a test like LogAPI or something.", "markup": "markdown", "html": "<p>Hmm I think the original comment is more accurate and disambiguates this test from the two tests below. It is meant to say that even without a <code>--log-overwrite</code> flag or <code>SetLogRecordOverwrite()</code>, the default behavior of <code>LogRecord</code> plugin will still overwrite in any case.</p>\n<p>Update: I looked again. I see that with the removal of <code>LogRecordOverwrite()</code>, the second case also overwrites using this default behavior. It is still good to clarify that is the default behavior though, regardless of whether the path is set on SDF or by C++ API. Where the path is set isn\u2019t what determines whether there is an overwrite; it\u2019s just default behavior. So as far as overwrite goes, I believe these tests are not testing different things. They are more testing functionality of the SDF and C++ API themselves and should go into a test like LogAPI or something.</p>", "type": "rendered"}, "created_on": "2020-01-07T18:31:03.753611+00:00", "user": {"display_name": "Mabel Zhang", "uuid": "{4b0e38fb-bf50-45c0-a496-61147518b2bf}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D"}, "html": {"href": "https://bitbucket.org/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:ceb5942c-6843-408c-8550-3ce4899d299b/4d48e5ea-cf28-4fa7-9715-8fc9e315d831/128"}}, "nickname": "mabelmzhang", "type": "user", "account_id": "557058:ceb5942c-6843-408c-8550-3ce4899d299b"}, "inline": {}, "updated_on": "2020-01-07T18:37:03.785875+00:00", "type": "pullrequest_comment", "id": 130742760}, "pull_request": {"type": "pullrequest", "id": 503, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/503.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/503"}}, "title": "Updates to log overwrite tests -> pull request #497"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/503/comments/130740503.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/503/_/diff#comment-130740503"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 503, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/503.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/503"}}, "title": "Updates to log overwrite tests -> pull request #497"}, "content": {"raw": "> Removed the checks for ignLogDirectory on the LogOverwrite test, because that path is set in the beginning of the test and is not expected to change.\n\nCurrently, `ignLogDirectory` is initialized in `LogRecord.cc` for the case when no path is specified from command line, nor from C\\+\\+ API. In that case, `ServerPrivate.cc` would not have received a `LogRecordPath()` to pass a `<path>` to `LogRecord`. Then `LogRecord` would read an empty path.\n\nThis is related to the first test - noted in code below.", "markup": "markdown", "html": "<blockquote>\n<p>Removed the checks for ignLogDirectory on the LogOverwrite test, because that path is set in the beginning of the test and is not expected to change.</p>\n</blockquote>\n<p>Currently, <code>ignLogDirectory</code> is initialized in <code>LogRecord.cc</code> for the case when no path is specified from command line, nor from C++ API. In that case, <code>ServerPrivate.cc</code> would not have received a <code>LogRecordPath()</code> to pass a <code>&lt;path&gt;</code> to <code>LogRecord</code>. Then <code>LogRecord</code> would read an empty path.</p>\n<p>This is related to the first test - noted in code below.</p>", "type": "rendered"}, "created_on": "2020-01-07T18:10:45.453381+00:00", "user": {"display_name": "Mabel Zhang", "uuid": "{4b0e38fb-bf50-45c0-a496-61147518b2bf}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D"}, "html": {"href": "https://bitbucket.org/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:ceb5942c-6843-408c-8550-3ce4899d299b/4d48e5ea-cf28-4fa7-9715-8fc9e315d831/128"}}, "nickname": "mabelmzhang", "type": "user", "account_id": "557058:ceb5942c-6843-408c-8550-3ce4899d299b"}, "updated_on": "2020-01-07T18:10:45.459560+00:00", "type": "pullrequest_comment", "id": 130740503}, "pull_request": {"type": "pullrequest", "id": 503, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/503.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/503"}}, "title": "Updates to log overwrite tests -> pull request #497"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/503/comments/130740454.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/503/_/diff#comment-130740454"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 503, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/503.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/503"}}, "title": "Updates to log overwrite tests -> pull request #497"}, "content": {"raw": "Let me check my understanding. The behavior that this tests is a little different from the original. Is this intended? The original test that sets the SDF path to \u201c \u201c tests the case when LogRecord receives an empty path \\(`<path>` is either specified in SDF, or set by `ServerPrivate.cc` if `ServerConfig.LogRecordPath()` is not empty\\). Currently we still take `<path>` from SDF, so if only `--record` is specified and no `--record-path`, then `LogIgnoreSdfPath() == false`, and `ServerPrivate.cc` will take the SDF `<path>`. So that\u2019s what the original test was testing.\n\nOther than the SDF `<path>` case, the other clear-cut case that passes in `--record-path` is through `ign.cc`, which would always set both `LogRecordPath()` and `LogIgnoreSdfPath()`. I think that is covered in another test later.\n\nThe new version here tests a case I haven\u2019t considered before, which is now documented as the C\\+\\+ API way. It sets `LogRecordPath()` but not `LogIgnoreSdfPath()`. This tests a different if-clause in `ServerPrivate.cc` than the original.\n\nOnce we remove support for `<path>`, maybe the empty path case in LogRecord will not happen again and we can remove the original. But I think for now it is safer to put these in two different tests?", "markup": "markdown", "html": "<p>Let me check my understanding. The behavior that this tests is a little different from the original. Is this intended? The original test that sets the SDF path to \u201c \u201c tests the case when LogRecord receives an empty path (<code>&lt;path&gt;</code> is either specified in SDF, or set by <code>ServerPrivate.cc</code> if <code>ServerConfig.LogRecordPath()</code> is not empty). Currently we still take <code>&lt;path&gt;</code> from SDF, so if only <code>--record</code> is specified and no <code>--record-path</code>, then <code>LogIgnoreSdfPath() == false</code>, and <code>ServerPrivate.cc</code> will take the SDF <code>&lt;path&gt;</code>. So that\u2019s what the original test was testing.</p>\n<p>Other than the SDF <code>&lt;path&gt;</code> case, the other clear-cut case that passes in <code>--record-path</code> is through <code>ign.cc</code>, which would always set both <code>LogRecordPath()</code> and <code>LogIgnoreSdfPath()</code>. I think that is covered in another test later.</p>\n<p>The new version here tests a case I haven\u2019t considered before, which is now documented as the C++ API way. It sets <code>LogRecordPath()</code> but not <code>LogIgnoreSdfPath()</code>. This tests a different if-clause in <code>ServerPrivate.cc</code> than the original.</p>\n<p>Once we remove support for <code>&lt;path&gt;</code>, maybe the empty path case in LogRecord will not happen again and we can remove the original. But I think for now it is safer to put these in two different tests?</p>", "type": "rendered"}, "created_on": "2020-01-07T18:10:20.364012+00:00", "user": {"display_name": "Mabel Zhang", "uuid": "{4b0e38fb-bf50-45c0-a496-61147518b2bf}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D"}, "html": {"href": "https://bitbucket.org/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:ceb5942c-6843-408c-8550-3ce4899d299b/4d48e5ea-cf28-4fa7-9715-8fc9e315d831/128"}}, "nickname": "mabelmzhang", "type": "user", "account_id": "557058:ceb5942c-6843-408c-8550-3ce4899d299b"}, "inline": {}, "updated_on": "2020-01-07T18:10:20.373692+00:00", "type": "pullrequest_comment", "id": 130740454}, "pull_request": {"type": "pullrequest", "id": 503, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/503.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/503"}}, "title": "Updates to log overwrite tests -> pull request #497"}}, {"update": {"description": "Some suggestions:\r\n\r\n* Remove `ServerConfig::LogRecordOverwrite` because it was not being used. It would be misleading to keep it there, because it implies that the server can be setup to handle no overwrite, when in fact, this needs to be handled before the server is instantiated and the final path be passed to the server config. I realized this while writing some tests to check that a new folder is created for no overwrite.\r\n\r\n* Removed the checks for `ignLogDirectory` on the `LogOverwrite` test, because that path is set in the beginning of the test and is not expected to change.\r\n\r\n* Added an `entryCount` function and check when new log directories with `(1)` are created, or not.\r\n\r\n* Remove `removeFile`s from the beginning of each overwrite test case, so we can check that the file is overwritten, as opposed to a new file written.\r\n\r\n* Check that `server_console.log` ends up together with `state.log`\r\n\r\n* Add test that doesn't overwrite\r\n\r\n* Removed unused test world", "title": "Updates to log overwrite tests -> pull request #497", "destination": {"commit": {"hash": "965500ca6513", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/965500ca6513.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/965500ca6513"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "log_overwrite"}}, "reason": "", "source": {"commit": {"hash": "dae118d1a785", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/dae118d1a785.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/dae118d1a785"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "log_overwrite_chapulina"}}, "state": "OPEN", "author": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "date": "2020-01-06T23:35:10.549143+00:00"}, "pull_request": {"type": "pullrequest", "id": 503, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/503.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/503"}}, "title": "Updates to log overwrite tests -> pull request #497"}}, {"update": {"description": "Some suggestions:\r\n\r\n* Remove `ServerConfig::LogRecordOverwrite` because it was not being used. It would be misleading to keep it there, because it implies that the server can be setup to handle no overwrite, when in fact, this needs to be handled before the server is instantiated and the final path be passed to the server config. I realized this while writing some tests to check that a new folder is created for no overwrite.\r\n\r\n* Removed the checks for `ignLogDirectory` on the `LogOverwrite` test, because that path is set in the beginning of the test and is not expected to change.\r\n\r\n* Added an `entryCount` function and check when new log directories with `(1)` are created, or not.\r\n\r\n* Remove `removeFile`s from the beginning of each overwrite test case, so we can check that the file is overwritten, as opposed to a new file written.\r\n\r\n* Check that `server_console.log` ends up together with `state.log`\r\n\r\n* Add test that doesn't overwrite\r\n\r\n* Removed unused test world", "title": "Updates to log overwrite tests -> pull request #497", "destination": {"commit": {"hash": "965500ca6513", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/965500ca6513.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/965500ca6513"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "log_overwrite"}}, "reason": "", "source": {"commit": {"hash": "dae118d1a785", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/dae118d1a785.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/dae118d1a785"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "log_overwrite_chapulina"}}, "state": "OPEN", "author": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "date": "2020-01-06T23:35:10.495439+00:00"}, "pull_request": {"type": "pullrequest", "id": 503, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/503.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/503"}}, "title": "Updates to log overwrite tests -> pull request #497"}}]}