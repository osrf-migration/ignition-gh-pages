{"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/236/comments/96663709.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/236/_/diff#comment-96663709"}}, "parent": {"id": 96650120, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/236/comments/96650120.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/236/_/diff#comment-96650120"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 236, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/236.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/236"}}, "title": "[Acropolis] Enforce component type uniqueness"}, "content": {"raw": "I compared the two and here's what I found. When a new system is added to `systemsPreupdate`, if the vector has reached it's capacity, it deallocates it's current memory and allocates a larger memory at a different address. Well, the deallocation doesn't actually clear the memory so it still contains \"good\" data until someone else allocates memory at that address. This is why this has been intermittent. The segfault does not occur if the for loop finishes before someone allocates memory at the address where `systemsPreupdate` used to be.", "markup": "markdown", "html": "<p>I compared the two and here's what I found. When a new system is added to <code>systemsPreupdate</code>, if the vector has reached it's capacity, it deallocates it's current memory and allocates a larger memory at a different address. Well, the deallocation doesn't actually clear the memory so it still contains \"good\" data until someone else allocates memory at that address. This is why this has been intermittent. The segfault does not occur if the for loop finishes before someone allocates memory at the address where <code>systemsPreupdate</code> used to be.</p>", "type": "rendered"}, "created_on": "2019-03-27T22:32:22.786459+00:00", "user": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}, "updated_on": "2019-03-27T22:32:22.795779+00:00", "type": "pullrequest_comment", "id": 96663709}