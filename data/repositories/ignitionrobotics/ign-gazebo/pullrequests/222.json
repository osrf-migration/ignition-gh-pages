{"rendered": {"description": {"raw": "Addresses issue #16.\r\n\r\nThis creates a symlink from an unversioned library to a versioned library, and they're still installed in a versioned directory.\r\n\r\nFor example:\r\n\r\n~~~\r\ninstall/ignition-gazebo1/lib/ign-gazebo-1/plugins/libignition-gazebo-altimeter-system.so -> libignition-gazebo1-altimeter-system.so\r\ninstall/ignition-gazebo1/lib/ign-gazebo-1/plugins/libignition-gazebo1-altimeter-system.so -> libignition-gazebo1-altimeter-system.so.1\r\ninstall/ignition-gazebo1/lib/ign-gazebo-1/plugins/libignition-gazebo1-altimeter-system.so.1 -> libignition-gazebo1-altimeter-system.so.1.0.1\r\ninstall/ignition-gazebo1/lib/ign-gazebo-1/plugins/libignition-gazebo1-altimeter-system.so.1.0.1\r\n~~~\r\n\r\nThe PR also changes all example SDFs to use the unversioned library instead. This will be the recommendation from now on, and we don't expect users to ever want to load a plugin from a version different from Gazebo's but they should be able to...\r\n\r\nI also created a cmake function `gz_add_system` to reduce boilerplate across systems.\r\n\r\nThe most important change in this PR are the following lines. They're doing the right thing, but their complexity makes me suspect there must be a better way of doing this, and there could be something wrong with them:\r\n\r\n~~~\r\n  INSTALL(CODE \"execute_process( \\\r\n    COMMAND ${CMAKE_COMMAND} -E create_symlink \\\r\n    ${CMAKE_SHARED_LIBRARY_PREFIX}${system_target}${CMAKE_SHARED_LIBRARY_SUFFIX} \\\r\n    ${IGNITION_GAZEBO_PLUGIN_INSTALL_DIR}/${CMAKE_SHARED_LIBRARY_PREFIX}${PROJECT_NAME_NO_VERSION_LOWER}-${system_name}${CMAKE_SHARED_LIBRARY_SUFFIX} \\\r\n    )\"\r\n  )\r\n~~~", "markup": "markdown", "html": "<p>Addresses issue <a href=\"#!/ignitionrobotics/ign-gazebo/issues/16/ignition-gazebo-major-version-is-hard\" rel=\"nofollow\" title=\"ignition-gazebo major version is hard-coded in plugin filenames in sdf files\" class=\"ap-connect-link\"><s>#16</s></a>.</p>\n<p>This creates a symlink from an unversioned library to a versioned library, and they're still installed in a versioned directory.</p>\n<p>For example:</p>\n<div class=\"codehilite\"><pre><span></span>install/ignition-gazebo1/lib/ign-gazebo-1/plugins/libignition-gazebo-altimeter-system.so -&gt; libignition-gazebo1-altimeter-system.so\ninstall/ignition-gazebo1/lib/ign-gazebo-1/plugins/libignition-gazebo1-altimeter-system.so -&gt; libignition-gazebo1-altimeter-system.so.1\ninstall/ignition-gazebo1/lib/ign-gazebo-1/plugins/libignition-gazebo1-altimeter-system.so.1 -&gt; libignition-gazebo1-altimeter-system.so.1.0.1\ninstall/ignition-gazebo1/lib/ign-gazebo-1/plugins/libignition-gazebo1-altimeter-system.so.1.0.1\n</pre></div>\n\n\n<p>The PR also changes all example SDFs to use the unversioned library instead. This will be the recommendation from now on, and we don't expect users to ever want to load a plugin from a version different from Gazebo's but they should be able to...</p>\n<p>I also created a cmake function <code>gz_add_system</code> to reduce boilerplate across systems.</p>\n<p>The most important change in this PR are the following lines. They're doing the right thing, but their complexity makes me suspect there must be a better way of doing this, and there could be something wrong with them:</p>\n<div class=\"codehilite\"><pre><span></span>  INSTALL(CODE &quot;execute_process( \\\n    COMMAND <span class=\"cp\">${</span><span class=\"n\">CMAKE_COMMAND</span><span class=\"cp\">}</span> -E create_symlink \\\n    <span class=\"cp\">${</span><span class=\"n\">CMAKE_SHARED_LIBRARY_PREFIX</span><span class=\"cp\">}${</span><span class=\"n\">system_target</span><span class=\"cp\">}${</span><span class=\"n\">CMAKE_SHARED_LIBRARY_SUFFIX</span><span class=\"cp\">}</span> \\\n    <span class=\"cp\">${</span><span class=\"n\">IGNITION_GAZEBO_PLUGIN_INSTALL_DIR</span><span class=\"cp\">}</span>/<span class=\"cp\">${</span><span class=\"n\">CMAKE_SHARED_LIBRARY_PREFIX</span><span class=\"cp\">}${</span><span class=\"n\">PROJECT_NAME_NO_VERSION_LOWER</span><span class=\"cp\">}</span>-<span class=\"cp\">${</span><span class=\"n\">system_name</span><span class=\"cp\">}${</span><span class=\"n\">CMAKE_SHARED_LIBRARY_SUFFIX</span><span class=\"cp\">}</span> \\\n    )&quot;\n  )\n</pre></div>", "type": "rendered"}, "title": {"raw": "Unversioned system libraries", "markup": "markdown", "html": "<p>Unversioned system libraries</p>", "type": "rendered"}}, "type": "pullrequest", "description": "Addresses issue #16.\r\n\r\nThis creates a symlink from an unversioned library to a versioned library, and they're still installed in a versioned directory.\r\n\r\nFor example:\r\n\r\n~~~\r\ninstall/ignition-gazebo1/lib/ign-gazebo-1/plugins/libignition-gazebo-altimeter-system.so -> libignition-gazebo1-altimeter-system.so\r\ninstall/ignition-gazebo1/lib/ign-gazebo-1/plugins/libignition-gazebo1-altimeter-system.so -> libignition-gazebo1-altimeter-system.so.1\r\ninstall/ignition-gazebo1/lib/ign-gazebo-1/plugins/libignition-gazebo1-altimeter-system.so.1 -> libignition-gazebo1-altimeter-system.so.1.0.1\r\ninstall/ignition-gazebo1/lib/ign-gazebo-1/plugins/libignition-gazebo1-altimeter-system.so.1.0.1\r\n~~~\r\n\r\nThe PR also changes all example SDFs to use the unversioned library instead. This will be the recommendation from now on, and we don't expect users to ever want to load a plugin from a version different from Gazebo's but they should be able to...\r\n\r\nI also created a cmake function `gz_add_system` to reduce boilerplate across systems.\r\n\r\nThe most important change in this PR are the following lines. They're doing the right thing, but their complexity makes me suspect there must be a better way of doing this, and there could be something wrong with them:\r\n\r\n~~~\r\n  INSTALL(CODE \"execute_process( \\\r\n    COMMAND ${CMAKE_COMMAND} -E create_symlink \\\r\n    ${CMAKE_SHARED_LIBRARY_PREFIX}${system_target}${CMAKE_SHARED_LIBRARY_SUFFIX} \\\r\n    ${IGNITION_GAZEBO_PLUGIN_INSTALL_DIR}/${CMAKE_SHARED_LIBRARY_PREFIX}${PROJECT_NAME_NO_VERSION_LOWER}-${system_name}${CMAKE_SHARED_LIBRARY_SUFFIX} \\\r\n    )\"\r\n  )\r\n~~~", "links": {"decline": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-gazebo/pullrequests/222/decline"}, "diffstat": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-gazebo/diffstat/ignitionrobotics/ign-gazebo:cf493c1f586b%0Da1b242412d2b?from_pullrequest_id=222"}, "commits": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/222/commits.json"}, "self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/222.json"}, "comments": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/222/comments_page=1.json"}, "merge": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-gazebo/pullrequests/222/merge"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/222"}, "activity": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/222/activity.json"}, "diff": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-gazebo/diff/ignitionrobotics/ign-gazebo:cf493c1f586b%0Da1b242412d2b?from_pullrequest_id=222"}, "approve": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-gazebo/pullrequests/222/approve"}, "statuses": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/222/statuses_page=1.json"}}, "title": "Unversioned system libraries", "close_source_branch": true, "reviewers": [{"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}], "id": 222, "destination": {"commit": {"hash": "a1b242412d2b", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/a1b242412d2b.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/a1b242412d2b"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "ign-gazebo1"}}, "created_on": "2019-03-13T21:47:41.730167+00:00", "summary": {"raw": "Addresses issue #16.\r\n\r\nThis creates a symlink from an unversioned library to a versioned library, and they're still installed in a versioned directory.\r\n\r\nFor example:\r\n\r\n~~~\r\ninstall/ignition-gazebo1/lib/ign-gazebo-1/plugins/libignition-gazebo-altimeter-system.so -> libignition-gazebo1-altimeter-system.so\r\ninstall/ignition-gazebo1/lib/ign-gazebo-1/plugins/libignition-gazebo1-altimeter-system.so -> libignition-gazebo1-altimeter-system.so.1\r\ninstall/ignition-gazebo1/lib/ign-gazebo-1/plugins/libignition-gazebo1-altimeter-system.so.1 -> libignition-gazebo1-altimeter-system.so.1.0.1\r\ninstall/ignition-gazebo1/lib/ign-gazebo-1/plugins/libignition-gazebo1-altimeter-system.so.1.0.1\r\n~~~\r\n\r\nThe PR also changes all example SDFs to use the unversioned library instead. This will be the recommendation from now on, and we don't expect users to ever want to load a plugin from a version different from Gazebo's but they should be able to...\r\n\r\nI also created a cmake function `gz_add_system` to reduce boilerplate across systems.\r\n\r\nThe most important change in this PR are the following lines. They're doing the right thing, but their complexity makes me suspect there must be a better way of doing this, and there could be something wrong with them:\r\n\r\n~~~\r\n  INSTALL(CODE \"execute_process( \\\r\n    COMMAND ${CMAKE_COMMAND} -E create_symlink \\\r\n    ${CMAKE_SHARED_LIBRARY_PREFIX}${system_target}${CMAKE_SHARED_LIBRARY_SUFFIX} \\\r\n    ${IGNITION_GAZEBO_PLUGIN_INSTALL_DIR}/${CMAKE_SHARED_LIBRARY_PREFIX}${PROJECT_NAME_NO_VERSION_LOWER}-${system_name}${CMAKE_SHARED_LIBRARY_SUFFIX} \\\r\n    )\"\r\n  )\r\n~~~", "markup": "markdown", "html": "<p>Addresses issue <a href=\"#!/ignitionrobotics/ign-gazebo/issues/16/ignition-gazebo-major-version-is-hard\" rel=\"nofollow\" title=\"ignition-gazebo major version is hard-coded in plugin filenames in sdf files\" class=\"ap-connect-link\"><s>#16</s></a>.</p>\n<p>This creates a symlink from an unversioned library to a versioned library, and they're still installed in a versioned directory.</p>\n<p>For example:</p>\n<div class=\"codehilite\"><pre><span></span>install/ignition-gazebo1/lib/ign-gazebo-1/plugins/libignition-gazebo-altimeter-system.so -&gt; libignition-gazebo1-altimeter-system.so\ninstall/ignition-gazebo1/lib/ign-gazebo-1/plugins/libignition-gazebo1-altimeter-system.so -&gt; libignition-gazebo1-altimeter-system.so.1\ninstall/ignition-gazebo1/lib/ign-gazebo-1/plugins/libignition-gazebo1-altimeter-system.so.1 -&gt; libignition-gazebo1-altimeter-system.so.1.0.1\ninstall/ignition-gazebo1/lib/ign-gazebo-1/plugins/libignition-gazebo1-altimeter-system.so.1.0.1\n</pre></div>\n\n\n<p>The PR also changes all example SDFs to use the unversioned library instead. This will be the recommendation from now on, and we don't expect users to ever want to load a plugin from a version different from Gazebo's but they should be able to...</p>\n<p>I also created a cmake function <code>gz_add_system</code> to reduce boilerplate across systems.</p>\n<p>The most important change in this PR are the following lines. They're doing the right thing, but their complexity makes me suspect there must be a better way of doing this, and there could be something wrong with them:</p>\n<div class=\"codehilite\"><pre><span></span>  INSTALL(CODE &quot;execute_process( \\\n    COMMAND <span class=\"cp\">${</span><span class=\"n\">CMAKE_COMMAND</span><span class=\"cp\">}</span> -E create_symlink \\\n    <span class=\"cp\">${</span><span class=\"n\">CMAKE_SHARED_LIBRARY_PREFIX</span><span class=\"cp\">}${</span><span class=\"n\">system_target</span><span class=\"cp\">}${</span><span class=\"n\">CMAKE_SHARED_LIBRARY_SUFFIX</span><span class=\"cp\">}</span> \\\n    <span class=\"cp\">${</span><span class=\"n\">IGNITION_GAZEBO_PLUGIN_INSTALL_DIR</span><span class=\"cp\">}</span>/<span class=\"cp\">${</span><span class=\"n\">CMAKE_SHARED_LIBRARY_PREFIX</span><span class=\"cp\">}${</span><span class=\"n\">PROJECT_NAME_NO_VERSION_LOWER</span><span class=\"cp\">}</span>-<span class=\"cp\">${</span><span class=\"n\">system_name</span><span class=\"cp\">}${</span><span class=\"n\">CMAKE_SHARED_LIBRARY_SUFFIX</span><span class=\"cp\">}</span> \\\n    )&quot;\n  )\n</pre></div>", "type": "rendered"}, "source": {"commit": {"hash": "8b06e31d556c", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/8b06e31d556c.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/8b06e31d556c"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "unversioned_lib"}}, "comment_count": 28, "state": "MERGED", "task_count": 0, "participants": [{"role": "REVIEWER", "participated_on": "2019-03-15T22:12:39.642578+00:00", "type": "participant", "approved": true, "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}}, {"role": "PARTICIPANT", "participated_on": "2019-03-15T21:41:58.788775+00:00", "type": "participant", "approved": false, "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}}], "reason": "", "updated_on": "2019-03-15T22:51:15.574664+00:00", "author": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "merge_commit": {"hash": "cf493c1f586b", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/cf493c1f586b.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/cf493c1f586b"}}}, "closed_by": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}}