{"pagelen": 100, "values": [{"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130/comments/89266991.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130/_/diff#comment-89266991"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 130, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130"}}, "title": "[A-6] Entity graph + factory"}, "content": {"raw": "I added another big-ish change to this PR. Now instead of reusing entities, they will be unique. I did this because when entities are deleted and inserted repeatedly very fast, possibly in the same iteration, it becomes difficult for systems to keep track of whether an entity is the same old one, or if it's a new one reusing that ID. That happens for example when levels are being loaded and unloaded.\n\nI changed the entity type from `int` to `uint64_t`, so hopefully it will be difficult for simulations to reach that number. I suggest we revisit this in the future if the limit becomes an issue. If that ever happens, I'd suggest using up the whole range of possible entities before going back to the lower numbers - that will hopefully minimize the chance that the old and new entities overlap.\n\n@nkoenig, I believe you were the one who originally implemented the entity reuse. Do you see any problem with this? All the adjacent memory tests are still passing.\n\n", "markup": "markdown", "html": "<p>I added another big-ish change to this PR. Now instead of reusing entities, they will be unique. I did this because when entities are deleted and inserted repeatedly very fast, possibly in the same iteration, it becomes difficult for systems to keep track of whether an entity is the same old one, or if it's a new one reusing that ID. That happens for example when levels are being loaded and unloaded.</p>\n<p>I changed the entity type from <code>int</code> to <code>uint64_t</code>, so hopefully it will be difficult for simulations to reach that number. I suggest we revisit this in the future if the limit becomes an issue. If that ever happens, I'd suggest using up the whole range of possible entities before going back to the lower numbers - that will hopefully minimize the chance that the old and new entities overlap.</p>\n<p>@nkoenig, I believe you were the one who originally implemented the entity reuse. Do you see any problem with this? All the adjacent memory tests are still passing.</p>", "type": "rendered"}, "created_on": "2019-01-24T23:17:07.075020+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2019-01-24T23:17:07.090240+00:00", "type": "pullrequest_comment", "id": 89266991}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130/comments/89397869.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-gazebo/diff/ignitionrobotics/ign-gazebo:028d1a9b7d4c..484e7ad7af4b?path=include%2Fignition%2Fgazebo%2FEntityComponentManager.hh"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130/_/diff#comment-89397869"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 130, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130"}}, "title": "[A-6] Entity graph + factory"}, "content": {"raw": "What do you think about making this `ChildrenByComponent` and return all entities that match? I think it could be useful, for example, to get all the links of a model.", "markup": "markdown", "html": "<p>What do you think about making this <code>ChildrenByComponent</code> and return all entities that match? I think it could be useful, for example, to get all the links of a model.</p>", "type": "rendered"}, "created_on": "2019-01-25T21:09:07.827098+00:00", "user": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}, "inline": {"to": 599, "from": null, "path": "include/ignition/gazebo/EntityComponentManager.hh"}, "updated_on": "2019-01-25T21:09:07.835174+00:00", "type": "pullrequest_comment", "id": 89397869}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130/comments/89398893.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-gazebo/diff/ignitionrobotics/ign-gazebo:028d1a9b7d4c..484e7ad7af4b?path=include%2Fignition%2Fgazebo%2FEntityComponentManager.hh"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130/_/diff#comment-89398893"}}, "parent": {"id": 89397869, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130/comments/89397869.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130/_/diff#comment-89397869"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 130, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130"}}, "title": "[A-6] Entity graph + factory"}, "content": {"raw": "Yeah I like that. I think it would also be nice to have a recursive option, like Qt's [findChild(ren)](http://doc.qt.io/qt-5/qobject.html#findChild). I'll do at least the change you proposed.\n\nAlso worth mentioning that since we're not getting rid of `ParentEntity` anymore, this function isn't strictly necessary right now.", "markup": "markdown", "html": "<p>Yeah I like that. I think it would also be nice to have a recursive option, like Qt's <a data-is-external-link=\"true\" href=\"http://doc.qt.io/qt-5/qobject.html#findChild\" rel=\"nofollow\">findChild(ren)</a>. I'll do at least the change you proposed.</p>\n<p>Also worth mentioning that since we're not getting rid of <code>ParentEntity</code> anymore, this function isn't strictly necessary right now.</p>", "type": "rendered"}, "created_on": "2019-01-25T21:22:17.438867+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {"to": 599, "from": null, "path": "include/ignition/gazebo/EntityComponentManager.hh"}, "updated_on": "2019-01-25T21:22:17.448770+00:00", "type": "pullrequest_comment", "id": 89398893}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130/comments/89408926.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-gazebo/diff/ignitionrobotics/ign-gazebo:b8aaded6692e..484e7ad7af4b?path=include%2Fignition%2Fgazebo%2FEntityComponentManager.hh"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130/_/diff#comment-89408926"}}, "parent": {"id": 89398893, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130/comments/89398893.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130/_/diff#comment-89398893"}}, "depth": 2}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 130, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130"}}, "title": "[A-6] Entity graph + factory"}, "content": {"raw": "Did your suggestion in b8aaded", "markup": "markdown", "html": "<p>Did your suggestion in <a href=\"#!/ignitionrobotics/ign-gazebo/commits/b8aaded\" rel=\"nofollow\" class=\"ap-connect-link\">b8aaded</a></p>", "type": "rendered"}, "created_on": "2019-01-26T01:15:09.113199+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {"to": 599, "from": null, "path": "include/ignition/gazebo/EntityComponentManager.hh"}, "updated_on": "2019-01-26T01:15:09.122666+00:00", "type": "pullrequest_comment", "id": 89408926}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130/comments/89397940.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-gazebo/diff/ignitionrobotics/ign-gazebo:028d1a9b7d4c..484e7ad7af4b?path=src%2FEntityComponentManager.cc"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130/_/diff#comment-89397940"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 130, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130"}}, "title": "[A-6] Entity graph + factory"}, "content": {"raw": "It might be more efficient to call `entities.VertexFromId` and check if it returns `NullVertex`\n", "markup": "markdown", "html": "<p>It might be more efficient to call <code>entities.VertexFromId</code> and check if it returns <code>NullVertex</code></p>", "type": "rendered"}, "created_on": "2019-01-25T21:10:08.629772+00:00", "user": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}, "inline": {"to": 292, "from": null, "path": "src/EntityComponentManager.cc"}, "updated_on": "2019-01-25T21:10:08.636226+00:00", "type": "pullrequest_comment", "id": 89397940}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130/comments/89398636.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-gazebo/diff/ignitionrobotics/ign-gazebo:028d1a9b7d4c..484e7ad7af4b?path=src%2FEntityComponentManager.cc"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130/_/diff#comment-89398636"}}, "parent": {"id": 89397940, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130/comments/89397940.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130/_/diff#comment-89397940"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 130, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130"}}, "title": "[A-6] Entity graph + factory"}, "content": {"raw": "Oh gosh I was looking for a function that did that for a while, thanks, will change!", "markup": "markdown", "html": "<p>Oh gosh I was looking for a function that did that for a while, thanks, will change!</p>", "type": "rendered"}, "created_on": "2019-01-25T21:18:18.648246+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {"to": 292, "from": null, "path": "src/EntityComponentManager.cc"}, "updated_on": "2019-01-25T21:18:18.656491+00:00", "type": "pullrequest_comment", "id": 89398636}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130/comments/89408921.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-gazebo/diff/ignitionrobotics/ign-gazebo:b8aaded6692e..484e7ad7af4b?path=src%2FEntityComponentManager.cc"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130/_/diff#comment-89408921"}}, "parent": {"id": 89398636, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130/comments/89398636.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130/_/diff#comment-89398636"}}, "depth": 2}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 130, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130"}}, "title": "[A-6] Entity graph + factory"}, "content": {"raw": "Done in b8aaded", "markup": "markdown", "html": "<p>Done in <a href=\"#!/ignitionrobotics/ign-gazebo/commits/b8aaded\" rel=\"nofollow\" class=\"ap-connect-link\">b8aaded</a></p>", "type": "rendered"}, "created_on": "2019-01-26T01:14:55.204501+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {"to": 292, "from": null, "path": "src/EntityComponentManager.cc"}, "updated_on": "2019-01-26T01:14:55.213960+00:00", "type": "pullrequest_comment", "id": 89408921}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130/comments/89399170.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-gazebo/diff/ignitionrobotics/ign-gazebo:028d1a9b7d4c..484e7ad7af4b?path=include%2Fignition%2Fgazebo%2FEntityComponentManager.hh"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130/_/diff#comment-89399170"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 130, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130"}}, "title": "[A-6] Entity graph + factory"}, "content": {"raw": "I noticed that this doesn't create a `ParentEntity` component on the `_child` entity. It would be nice if there was a function that sets the parent in the graph and also creates the `ParentEntity` component on the child. Maybe it could go in the `Factory` class.", "markup": "markdown", "html": "<p>I noticed that this doesn't create a <code>ParentEntity</code> component on the <code>_child</code> entity. It would be nice if there was a function that sets the parent in the graph and also creates the <code>ParentEntity</code> component on the child. Maybe it could go in the <code>Factory</code> class.</p>", "type": "rendered"}, "created_on": "2019-01-25T21:26:35.077176+00:00", "user": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}, "inline": {"to": 387, "from": null, "path": "include/ignition/gazebo/EntityComponentManager.hh"}, "updated_on": "2019-01-25T21:26:35.085443+00:00", "type": "pullrequest_comment", "id": 89399170}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130/comments/89399676.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-gazebo/diff/ignitionrobotics/ign-gazebo:028d1a9b7d4c..484e7ad7af4b?path=include%2Fignition%2Fgazebo%2FEntityComponentManager.hh"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130/_/diff#comment-89399676"}}, "parent": {"id": 89399170, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130/comments/89399170.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130/_/diff#comment-89399170"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 130, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130"}}, "title": "[A-6] Entity graph + factory"}, "content": {"raw": "Yeah, I wanted to keep the `EntityComponentManager` component-agnostic. I'll add a function to `Factory`.", "markup": "markdown", "html": "<p>Yeah, I wanted to keep the <code>EntityComponentManager</code> component-agnostic. I'll add a function to <code>Factory</code>.</p>", "type": "rendered"}, "created_on": "2019-01-25T21:32:46.404761+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {"to": 387, "from": null, "path": "include/ignition/gazebo/EntityComponentManager.hh"}, "updated_on": "2019-01-25T21:32:46.416337+00:00", "type": "pullrequest_comment", "id": 89399676}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130/comments/89408935.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-gazebo/diff/ignitionrobotics/ign-gazebo:b8aaded6692e..484e7ad7af4b?path=include%2Fignition%2Fgazebo%2FEntityComponentManager.hh"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130/_/diff#comment-89408935"}}, "parent": {"id": 89399676, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130/comments/89399676.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130/_/diff#comment-89399676"}}, "depth": 2}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 130, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130"}}, "title": "[A-6] Entity graph + factory"}, "content": {"raw": "Added `Factory::SetParent` b8aaded", "markup": "markdown", "html": "<p>Added <code>Factory::SetParent</code> <a href=\"#!/ignitionrobotics/ign-gazebo/commits/b8aaded\" rel=\"nofollow\" class=\"ap-connect-link\">b8aaded</a></p>", "type": "rendered"}, "created_on": "2019-01-26T01:15:25.757255+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {"to": 387, "from": null, "path": "include/ignition/gazebo/EntityComponentManager.hh"}, "updated_on": "2019-01-26T01:15:25.766493+00:00", "type": "pullrequest_comment", "id": 89408935}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130/comments/89399828.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-gazebo/diff/ignitionrobotics/ign-gazebo:028d1a9b7d4c..484e7ad7af4b?path=src%2FEntityComponentManager.cc"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130/_/diff#comment-89399828"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 130, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130"}}, "title": "[A-6] Entity graph + factory"}, "content": {"raw": "Since we're supporting non-recursive entity erasure, this could be a potential place for the graph and the `ParentEntity` component to go out of sync. If we remove an entity that is a parent to a number of child entities, the parent-child relationship is automatically removed from the graph, but we still have to remove the `ParentEntity` component from each child entity.", "markup": "markdown", "html": "<p>Since we're supporting non-recursive entity erasure, this could be a potential place for the graph and the <code>ParentEntity</code> component to go out of sync. If we remove an entity that is a parent to a number of child entities, the parent-child relationship is automatically removed from the graph, but we still have to remove the <code>ParentEntity</code> component from each child entity.</p>", "type": "rendered"}, "created_on": "2019-01-25T21:34:52.914598+00:00", "user": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}, "inline": {"to": 194, "from": null, "path": "src/EntityComponentManager.cc"}, "updated_on": "2019-01-25T21:34:52.921977+00:00", "type": "pullrequest_comment", "id": 89399828}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130/comments/89400405.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-gazebo/diff/ignitionrobotics/ign-gazebo:028d1a9b7d4c..484e7ad7af4b?path=src%2FEntityComponentManager.cc"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130/_/diff#comment-89400405"}}, "parent": {"id": 89399828, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130/comments/89399828.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130/_/diff#comment-89399828"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 130, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130"}}, "title": "[A-6] Entity graph + factory"}, "content": {"raw": "Nice catch. I think we can either not support non-recursive erasure for now, or provide an erasure interface that does the right thing through `Factory`.", "markup": "markdown", "html": "<p>Nice catch. I think we can either not support non-recursive erasure for now, or provide an erasure interface that does the right thing through <code>Factory</code>.</p>", "type": "rendered"}, "created_on": "2019-01-25T21:44:12.064044+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {"to": 194, "from": null, "path": "src/EntityComponentManager.cc"}, "updated_on": "2019-01-25T21:44:12.073838+00:00", "type": "pullrequest_comment", "id": 89400405}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130/comments/89409100.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-gazebo/diff/ignitionrobotics/ign-gazebo:b8aaded6692e..484e7ad7af4b?path=src%2FEntityComponentManager.cc"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130/_/diff#comment-89409100"}}, "parent": {"id": 89400405, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130/comments/89400405.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130/_/diff#comment-89400405"}}, "depth": 2}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 130, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130"}}, "title": "[A-6] Entity graph + factory"}, "content": {"raw": "I'll add a `Factory::RequestEraseEntity` function soon. That will be the 4th class to have this function - we really need to revisit the role of `Server`, `SimulationRunner` and the `EntityComponentManager` at some point, because there isn't a clear separation of concerns between them.\n\nFirst will make a separate PR implementing a convenient `EntityComponentManager::RemoveComponent`.\n\nPutting this PR on hold.", "markup": "markdown", "html": "<p>I'll add a <code>Factory::RequestEraseEntity</code> function soon. That will be the 4th class to have this function - we really need to revisit the role of <code>Server</code>, <code>SimulationRunner</code> and the <code>EntityComponentManager</code> at some point, because there isn't a clear separation of concerns between them.</p>\n<p>First will make a separate PR implementing a convenient <code>EntityComponentManager::RemoveComponent</code>.</p>\n<p>Putting this PR on hold.</p>", "type": "rendered"}, "created_on": "2019-01-26T01:28:15.316993+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {"to": 194, "from": null, "path": "src/EntityComponentManager.cc"}, "updated_on": "2019-01-26T01:28:15.326641+00:00", "type": "pullrequest_comment", "id": 89409100}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130/comments/89581076.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-gazebo/diff/ignitionrobotics/ign-gazebo:c5340ef6af90..3c4cb4f48bbf?path=src%2FEntityComponentManager.cc"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130/_/diff#comment-89581076"}}, "parent": {"id": 89409100, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130/comments/89409100.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130/_/diff#comment-89409100"}}, "depth": 3}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 130, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130"}}, "title": "[A-6] Entity graph + factory"}, "content": {"raw": "Implemented in c5340ef, this is now back open for review.", "markup": "markdown", "html": "<p>Implemented in <a href=\"#!/ignitionrobotics/ign-gazebo/commits/c5340ef\" rel=\"nofollow\" class=\"ap-connect-link\">c5340ef</a>, this is now back open for review.</p>", "type": "rendered"}, "created_on": "2019-01-29T00:29:33.236572+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {"to": 194, "from": null, "path": "src/EntityComponentManager.cc"}, "updated_on": "2019-01-29T00:29:33.245990+00:00", "type": "pullrequest_comment", "id": 89581076}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130/comments/89581241.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-gazebo/diff/ignitionrobotics/ign-gazebo:c5340ef6af90..3c4cb4f48bbf?path=include%2Fignition%2Fgazebo%2FEntity.hh"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130/_/diff#comment-89581241"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 130, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130"}}, "title": "[A-6] Entity graph + factory"}, "content": {"raw": "Can we still use `int`, maybe `int64t`? An int64 has a max value of 9,223,372,036,854,775,807 which is probably big enough. It will also let us use -1 as the Null case. I'm recommending this also because `std::numeric_limits<uint64_t>::max()` feels weird as a Null value.", "markup": "markdown", "html": "<p>Can we still use <code>int</code>, maybe <code>int64t</code>? An int64 has a max value of 9,223,372,036,854,775,807 which is probably big enough. It will also let us use -1 as the Null case. I'm recommending this also because <code>std::numeric_limits&lt;uint64_t&gt;::max()</code> feels weird as a Null value.</p>", "type": "rendered"}, "created_on": "2019-01-29T00:32:15.587328+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "inline": {"to": null, "from": 58, "path": "include/ignition/gazebo/Entity.hh"}, "updated_on": "2019-01-29T00:32:15.594597+00:00", "type": "pullrequest_comment", "id": 89581241}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130/comments/89581436.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-gazebo/diff/ignitionrobotics/ign-gazebo:c5340ef6af90..3c4cb4f48bbf?path=include%2Fignition%2Fgazebo%2FEntity.hh"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130/_/diff#comment-89581436"}}, "parent": {"id": 89581241, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130/comments/89581241.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130/_/diff#comment-89581241"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 130, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130"}}, "title": "[A-6] Entity graph + factory"}, "content": {"raw": "I was trying to make it as large as possible, and using signed int just to use `-1` feels like a waste of half the range. But I'll revert the change in any case.", "markup": "markdown", "html": "<p>I was trying to make it as large as possible, and using signed int just to use <code>-1</code> feels like a waste of half the range. But I'll revert the change in any case.</p>", "type": "rendered"}, "created_on": "2019-01-29T00:35:16.708960+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {"to": null, "from": 58, "path": "include/ignition/gazebo/Entity.hh"}, "updated_on": "2019-01-29T00:35:16.716871+00:00", "type": "pullrequest_comment", "id": 89581436}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130/comments/89582947.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-gazebo/diff/ignitionrobotics/ign-gazebo:4c38586b57ad..3c4cb4f48bbf?path=include%2Fignition%2Fgazebo%2FEntity.hh"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130/_/diff#comment-89582947"}}, "parent": {"id": 89581436, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130/comments/89581436.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130/_/diff#comment-89581436"}}, "depth": 2}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 130, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130"}}, "title": "[A-6] Entity graph + factory"}, "content": {"raw": "Changed in 4c38586", "markup": "markdown", "html": "<p>Changed in <a href=\"#!/ignitionrobotics/ign-gazebo/commits/4c38586\" rel=\"nofollow\" class=\"ap-connect-link\">4c38586</a></p>", "type": "rendered"}, "created_on": "2019-01-29T00:57:17.856396+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {"to": null, "from": 58, "path": "include/ignition/gazebo/Entity.hh"}, "updated_on": "2019-01-29T00:57:17.866554+00:00", "type": "pullrequest_comment", "id": 89582947}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130/comments/89581365.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-gazebo/diff/ignitionrobotics/ign-gazebo:c5340ef6af90..3c4cb4f48bbf?path=include%2Fignition%2Fgazebo%2FEntityComponentManager.hh"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130/_/diff#comment-89581365"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 130, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130"}}, "title": "[A-6] Entity graph + factory"}, "content": {"raw": "Do you mean to say: `Get the first parent of the given entity`? ", "markup": "markdown", "html": "<p>Do you mean to say: <code>Get the first parent of the given entity</code>? </p>", "type": "rendered"}, "created_on": "2019-01-29T00:34:11.125360+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "inline": {"to": 97, "from": null, "path": "include/ignition/gazebo/EntityComponentManager.hh"}, "updated_on": "2019-01-29T00:34:27.711419+00:00", "type": "pullrequest_comment", "id": 89581365}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130/comments/89582178.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-gazebo/diff/ignitionrobotics/ign-gazebo:c5340ef6af90..3c4cb4f48bbf?path=include%2Fignition%2Fgazebo%2FEntityComponentManager.hh"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130/_/diff#comment-89582178"}}, "parent": {"id": 89581365, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130/comments/89581365.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130/_/diff#comment-89581365"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 130, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130"}}, "title": "[A-6] Entity graph + factory"}, "content": {"raw": "Right now we're only supporting a single parent. I have some TODOs in the code asking if we want to support more in the future because I wasn't sure. The code is currently following the SDF hierarchy, which is a tree, i.e. joints and links are children of models.", "markup": "markdown", "html": "<p>Right now we're only supporting a single parent. I have some TODOs in the code asking if we want to support more in the future because I wasn't sure. The code is currently following the SDF hierarchy, which is a tree, i.e. joints and links are children of models.</p>", "type": "rendered"}, "created_on": "2019-01-29T00:45:34.226113+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {"to": 97, "from": null, "path": "include/ignition/gazebo/EntityComponentManager.hh"}, "updated_on": "2019-01-29T00:51:00.790555+00:00", "type": "pullrequest_comment", "id": 89582178}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130/comments/89582935.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-gazebo/diff/ignitionrobotics/ign-gazebo:4c38586b57ad..3c4cb4f48bbf?path=include%2Fignition%2Fgazebo%2FEntityComponentManager.hh"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130/_/diff#comment-89582935"}}, "parent": {"id": 89582178, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130/comments/89582178.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130/_/diff#comment-89582178"}}, "depth": 2}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 130, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130"}}, "title": "[A-6] Entity graph + factory"}, "content": {"raw": "Changed the documentation: 4c38586", "markup": "markdown", "html": "<p>Changed the documentation: <a href=\"#!/ignitionrobotics/ign-gazebo/commits/4c38586\" rel=\"nofollow\" class=\"ap-connect-link\">4c38586</a></p>", "type": "rendered"}, "created_on": "2019-01-29T00:57:06.182699+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {"to": 97, "from": null, "path": "include/ignition/gazebo/EntityComponentManager.hh"}, "updated_on": "2019-01-29T00:57:06.192618+00:00", "type": "pullrequest_comment", "id": 89582935}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130/comments/89581544.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-gazebo/diff/ignitionrobotics/ign-gazebo:c5340ef6af90..3c4cb4f48bbf?path=include%2Fignition%2Fgazebo%2FEntityComponentManager.hh"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130/_/diff#comment-89581544"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 130, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130"}}, "title": "[A-6] Entity graph + factory"}, "content": {"raw": "Change to `Set the parent of an entity`? ", "markup": "markdown", "html": "<p>Change to <code>Set the parent of an entity</code>? </p>", "type": "rendered"}, "created_on": "2019-01-29T00:36:22.151771+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "inline": {"to": 106, "from": null, "path": "include/ignition/gazebo/EntityComponentManager.hh"}, "updated_on": "2019-01-29T00:36:22.163766+00:00", "type": "pullrequest_comment", "id": 89581544}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130/comments/89582939.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-gazebo/diff/ignitionrobotics/ign-gazebo:4c38586b57ad..3c4cb4f48bbf?path=include%2Fignition%2Fgazebo%2FEntityComponentManager.hh"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130/_/diff#comment-89582939"}}, "parent": {"id": 89581544, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130/comments/89581544.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130/_/diff#comment-89581544"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 130, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130"}}, "title": "[A-6] Entity graph + factory"}, "content": {"raw": "Done in 4c38586", "markup": "markdown", "html": "<p>Done in <a href=\"#!/ignitionrobotics/ign-gazebo/commits/4c38586\" rel=\"nofollow\" class=\"ap-connect-link\">4c38586</a></p>", "type": "rendered"}, "created_on": "2019-01-29T00:57:10.171066+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {"to": 106, "from": null, "path": "include/ignition/gazebo/EntityComponentManager.hh"}, "updated_on": "2019-01-29T00:57:10.181077+00:00", "type": "pullrequest_comment", "id": 89582939}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130/comments/89694251.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130/_/diff#comment-89694251"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 130, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130"}}, "title": "[A-6] Entity graph + factory"}, "content": {"raw": "I have some architectural suggestions:\n\n1. Move `Factory.hh` to the `src` directory. It doesn't need to be installed.\n2. Make the Factory a member of EntityComponentManager. \n3. Don't have the Factory erase elements, it's a bit counter intuitive. I'd also remove the `SetParent` functionality from the Factory. Basically, try to make the Factory just about creation.\n\nIt's also strange to have a Factory that calls create functions on the ECM. A factory usually consumes some data and returns a unique pointer (for example) to a newly created object. The current implementation is confusing, and I'm not sure why the Factory exists.\n\nIt would be nice to eliminate the double set of interfaces, one in EntitytComonentManger and one in the Factory.", "markup": "markdown", "html": "<p>I have some architectural suggestions:</p>\n<ol>\n<li>Move <code>Factory.hh</code> to the <code>src</code> directory. It doesn't need to be installed.</li>\n<li>Make the Factory a member of EntityComponentManager. </li>\n<li>Don't have the Factory erase elements, it's a bit counter intuitive. I'd also remove the <code>SetParent</code> functionality from the Factory. Basically, try to make the Factory just about creation.</li>\n</ol>\n<p>It's also strange to have a Factory that calls create functions on the ECM. A factory usually consumes some data and returns a unique pointer (for example) to a newly created object. The current implementation is confusing, and I'm not sure why the Factory exists.</p>\n<p>It would be nice to eliminate the double set of interfaces, one in EntitytComonentManger and one in the Factory.</p>", "type": "rendered"}, "created_on": "2019-01-29T15:59:04.240127+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "updated_on": "2019-01-29T15:59:04.267403+00:00", "type": "pullrequest_comment", "id": 89694251}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130/comments/89699243.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130/_/diff#comment-89699243"}}, "parent": {"id": 89694251, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130/comments/89694251.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130/_/diff#comment-89694251"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 130, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130"}}, "title": "[A-6] Entity graph + factory"}, "content": {"raw": "Classes like `Factory` and `Model` were created to give plugin developers more intuitive interfaces than interacting with entities and components directly.\n\nSome of the earlier commits in pull request #98 (the design doc) described the rationale in more detail, going from a pure ECM approach to the final interfaces, but as the pull request evolved I ended up removing important points. I'll make a new PR adding that back, but hopefully the document's [current state](#!/ignitionrobotics/ign-gazebo/src/3c4cb4f48bbfa61e8e3ed0acc1868a005e663671/doc/architecture_design.md?at=default&fileviewer=file-view-default#markdown-header-plugin-interfaces) gives you a bit more context for now.\n\nSo, to address your points:\n\n1. It's meant to be installed and used by systems\n1. The functionality could be added directly to the ECM, but then the ECM wouldn't be component-agnostic any more and no longer would have the single responsibility of managing arbitrary entities and components. Keeping the interfaces in separate classes gives users what they need when they need it. I'd like to encourage downstream developers to also create such interfaces for their custom components.\n1. Perhaps the `Factory` name is misleading? Do you think it would make sense to keep spawn/delete functionality in the same class, but maybe give it a different name? This could also make it clearer for users who assume `Factory` has the classical meaning of creating objects, as you assumed.", "markup": "markdown", "html": "<p>Classes like <code>Factory</code> and <code>Model</code> were created to give plugin developers more intuitive interfaces than interacting with entities and components directly.</p>\n<p>Some of the earlier commits in <a href=\"#!/ignitionrobotics/ign-gazebo/pull-requests/98/design-doc-beginning-of-plugin-interface\" rel=\"nofollow\" class=\"ap-connect-link\">pull request #98</a> (the design doc) described the rationale in more detail, going from a pure ECM approach to the final interfaces, but as the pull request evolved I ended up removing important points. I'll make a new PR adding that back, but hopefully the document's <a data-is-external-link=\"true\" href=\"#!/ignitionrobotics/ign-gazebo/src/3c4cb4f48bbfa61e8e3ed0acc1868a005e663671/doc/architecture_design.md?at=default&amp;fileviewer=file-view-default#markdown-header-plugin-interfaces\" rel=\"nofollow\">current state</a> gives you a bit more context for now.</p>\n<p>So, to address your points:</p>\n<ol>\n<li>It's meant to be installed and used by systems</li>\n<li>The functionality could be added directly to the ECM, but then the ECM wouldn't be component-agnostic any more and no longer would have the single responsibility of managing arbitrary entities and components. Keeping the interfaces in separate classes gives users what they need when they need it. I'd like to encourage downstream developers to also create such interfaces for their custom components.</li>\n<li>Perhaps the <code>Factory</code> name is misleading? Do you think it would make sense to keep spawn/delete functionality in the same class, but maybe give it a different name? This could also make it clearer for users who assume <code>Factory</code> has the classical meaning of creating objects, as you assumed.</li>\n</ol>", "type": "rendered"}, "created_on": "2019-01-29T16:26:17.423789+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2019-01-29T16:26:17.469544+00:00", "type": "pullrequest_comment", "id": 89699243}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130/comments/89740113.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130/_/diff#comment-89740113"}}, "parent": {"id": 89699243, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130/comments/89699243.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130/_/diff#comment-89699243"}}, "depth": 2}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 130, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130"}}, "title": "[A-6] Entity graph + factory"}, "content": {"raw": "Thanks for the info. That all makes sense, but I'm still left wondering why `Factory` exists. For example, I was able to remove it in pull request #142.", "markup": "markdown", "html": "<p>Thanks for the info. That all makes sense, but I'm still left wondering why <code>Factory</code> exists. For example, I was able to remove it in <a href=\"#!/ignitionrobotics/ign-gazebo/pull-requests/142/remove-factory\" rel=\"nofollow\" class=\"ap-connect-link\">pull request #142</a>.</p>", "type": "rendered"}, "created_on": "2019-01-29T22:01:12.699416+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "updated_on": "2019-01-29T22:01:12.711089+00:00", "type": "pullrequest_comment", "id": 89740113}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130/comments/89741027.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130/_/diff#comment-89741027"}}, "parent": {"id": 89740113, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130/comments/89740113.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130/_/diff#comment-89740113"}}, "depth": 3}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 130, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130"}}, "title": "[A-6] Entity graph + factory"}, "content": {"raw": "Sorry, I probably should have added more context to the PR. I'm using this in the [UserCommands system](#!/ignitionrobotics/ign-gazebo/src/241fb13dd0168e71de3ddc735747f462e5674312/src/systems/usercommands/UserCommands.cc?at=user_cmds&fileviewer=file-view-default#UserCommands.cc-48)", "markup": "markdown", "html": "<p>Sorry, I probably should have added more context to the PR. I'm using this in the <a data-is-external-link=\"true\" href=\"#!/ignitionrobotics/ign-gazebo/src/241fb13dd0168e71de3ddc735747f462e5674312/src/systems/usercommands/UserCommands.cc?at=user_cmds&amp;fileviewer=file-view-default#UserCommands.cc-48\" rel=\"nofollow\">UserCommands system</a></p>", "type": "rendered"}, "created_on": "2019-01-29T22:10:50.399644+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2019-01-29T22:10:50.410091+00:00", "type": "pullrequest_comment", "id": 89741027}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130/comments/89879722.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130/_/diff#comment-89879722"}}, "parent": {"id": 89741027, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130/comments/89741027.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130/_/diff#comment-89741027"}}, "depth": 4}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 130, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130"}}, "title": "[A-6] Entity graph + factory"}, "content": {"raw": "@nkoenig , I'll merge this now, but as we spoke yesterday, let's revisit the API classes and the ECM's ownership for Ign-B.", "markup": "markdown", "html": "<p>@nkoenig , I'll merge this now, but as we spoke yesterday, let's revisit the API classes and the ECM's ownership for Ign-B.</p>", "type": "rendered"}, "created_on": "2019-01-30T18:14:55.632803+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2019-01-30T18:14:55.650068+00:00", "type": "pullrequest_comment", "id": 89879722}], "page": 1, "size": 27}