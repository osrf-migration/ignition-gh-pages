{"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130/comments/89694251.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130/_/diff#comment-89694251"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 130, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/130.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/130"}}, "title": "[A-6] Entity graph + factory"}, "content": {"raw": "I have some architectural suggestions:\n\n1. Move `Factory.hh` to the `src` directory. It doesn't need to be installed.\n2. Make the Factory a member of EntityComponentManager. \n3. Don't have the Factory erase elements, it's a bit counter intuitive. I'd also remove the `SetParent` functionality from the Factory. Basically, try to make the Factory just about creation.\n\nIt's also strange to have a Factory that calls create functions on the ECM. A factory usually consumes some data and returns a unique pointer (for example) to a newly created object. The current implementation is confusing, and I'm not sure why the Factory exists.\n\nIt would be nice to eliminate the double set of interfaces, one in EntitytComonentManger and one in the Factory.", "markup": "markdown", "html": "<p>I have some architectural suggestions:</p>\n<ol>\n<li>Move <code>Factory.hh</code> to the <code>src</code> directory. It doesn't need to be installed.</li>\n<li>Make the Factory a member of EntityComponentManager. </li>\n<li>Don't have the Factory erase elements, it's a bit counter intuitive. I'd also remove the <code>SetParent</code> functionality from the Factory. Basically, try to make the Factory just about creation.</li>\n</ol>\n<p>It's also strange to have a Factory that calls create functions on the ECM. A factory usually consumes some data and returns a unique pointer (for example) to a newly created object. The current implementation is confusing, and I'm not sure why the Factory exists.</p>\n<p>It would be nice to eliminate the double set of interfaces, one in EntitytComonentManger and one in the Factory.</p>", "type": "rendered"}, "created_on": "2019-01-29T15:59:04.240127+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "updated_on": "2019-01-29T15:59:04.267403+00:00", "type": "pullrequest_comment", "id": 89694251}