{"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/435/comments/119922620.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/435/_/diff#comment-119922620"}}, "parent": {"id": 119916735, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/435/comments/119916735.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/435/_/diff#comment-119916735"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 435, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/435.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/435"}}, "title": "Add mutex to protect views from potential concurrent access"}, "content": {"raw": "I agree that we aren\u2019t thread safe in the ECM.  My concern with trying to make that happen in the PostUpdates is that the mutex will be stored away from the data and it will be a bit more difficult to reason about to guarantee thread safety.\n\nI agree with reducing the scope of the locking to only the `FindView` and `AddView`, which is consistent with the backtrace that Alfredo saw.", "markup": "markdown", "html": "<p>I agree that we aren\u2019t thread safe in the ECM.  My concern with trying to make that happen in the PostUpdates is that the mutex will be stored away from the data and it will be a bit more difficult to reason about to guarantee thread safety.</p>\n<p>I agree with reducing the scope of the locking to only the <code>FindView</code> and <code>AddView</code>, which is consistent with the backtrace that Alfredo saw.</p>", "type": "rendered"}, "created_on": "2019-10-08T15:35:17.972178+00:00", "user": {"display_name": "Michael Carroll", "uuid": "{17dbbc15-cbc0-42f0-a985-cde9061c78a0}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B17dbbc15-cbc0-42f0-a985-cde9061c78a0%7D"}, "html": {"href": "https://bitbucket.org/%7B17dbbc15-cbc0-42f0-a985-cde9061c78a0%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:65740f22-cc56-4418-9608-7e17d0ed47b7/2aa259f5-4de1-4f68-9156-eded72041d84/128"}}, "nickname": "Michael Carroll", "type": "user", "account_id": "557058:65740f22-cc56-4418-9608-7e17d0ed47b7"}, "updated_on": "2019-10-08T15:35:17.993257+00:00", "type": "pullrequest_comment", "id": 119922620}