{"pagelen": 50, "values": [{"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/397/comments/115173315.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/397/_/diff#comment-115173315"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 397, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/397.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/397"}}, "title": "[Blueprint] Logging meshes and materials"}, "content": {"raw": "macOS 10.14 doesn't have c++17 filesystem support, but it looks like it will be available in xcode11 on macOS 10.15", "markup": "markdown", "html": "<p>macOS 10.14 doesn't have c++17 filesystem support, but it looks like it will be available in xcode11 on macOS 10.15</p>", "type": "rendered"}, "created_on": "2019-08-30T20:08:36.828877+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {}, "updated_on": "2019-08-30T20:08:36.838162+00:00", "type": "pullrequest_comment", "id": 115173315}, "pull_request": {"type": "pullrequest", "id": 397, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/397.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/397"}}, "title": "[Blueprint] Logging meshes and materials"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/397/comments/115011053.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/397/_/diff#comment-115011053"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 397, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/397.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/397"}}, "title": "[Blueprint] Logging meshes and materials"}, "content": {"raw": "Various observations:\n\n---\n\nI'm seeing the `log.zip` file being created even if I'm not recording resources. Is this expected?\n\n---\n\nI also noticed that if I run the `log_record_resources` world twice in a row I get these messages:\n\n```\n[Err] [Zip.cc:42] Error adding directory to zip: /tmp/log\n[Err] [Zip.cc:103] Error compressing file: /tmp/log\n[Err] [LogRecord.cc:534] Failed to compressed log file and resources to [/tmp/log.zip]\n```\n\nIf I remember correctly, we were creating new numbered directories if the directory already existed?\n\n---\n\nThe `zip` file is created as a sibling to the record path, i.e.:\n\n```\n/tmp/log\n|-- home\n|   `-- chapulina\n|-- server_console.log\n`-- state.tlog\n/tmp/log.zip\n```\n\nThis was a bit counter-intuitive to me, because I was expecting Gazebo not to create any files outside that directory. But maybe it's just me.\n\nAlso, keeping both the zip file and the original folders means every log takes even more space, with redundant information. Some things I'm wondering about:\n\n* Should we delete the directory after zipping it?\n\n* Should we make zipping optional?\n\n* Should we support playing back directly from the zip file?\n\n---\n\nI think we more fixes to the paths are needed. Try this:\n\n1. `ign gazebo -v 4 -r log_record_resources.sdf --record-resources --record-path '/tmp/log'`\n1. `rm -rf ~/.ignition/fuel/fuel.ignitionrobotics.org/openrobotics/models/subt_tunnel_staging_area`\n1. `ign gazebo --force-version 2.9.0 -v 4 -r log_playback.sdf`\n\nInstead of loading the logged mesh, the simulation prints these errors:\n\n```\n[GUI] [Err] [SystemPaths.cc:434] File [file:///home/chapulina/.ignition/fuel/fuel.ignitionrobotics.org/openrobotics/models/subt_tunnel_staging_area/2//meshes/Asphalt_Plane.DAE] resolved to path [/home/chapulina/.ignition/fuel/fuel.ignitionrobotics.org/openrobotics/models/subt_tunnel_staging_area/2//meshes/Asphalt_Plane.DAE] but the path does not exist\n[GUI] [Err] [MeshManager.cc:172] Unable to find file[file:///home/chapulina/.ignition/fuel/fuel.ignitionrobotics.org/openrobotics/models/subt_tunnel_staging_area/2//meshes/Asphalt_Plane.DAE]\n[GUI] [Err] [MeshDescriptor.cc:56] Mesh manager can't find mesh named [file:///home/chapulina/.ignition/fuel/fuel.ignitionrobotics.org/openrobotics/models/subt_tunnel_staging_area/2//meshes/Asphalt_Plane.DAE]\n[GUI] [Err] [Ogre2MeshFactory.cc:430] Cannot load null mesh [file:///home/chapulina/.ignition/fuel/fuel.ignitionrobotics.org/openrobotics/models/subt_tunnel_staging_area/2//meshes/Asphalt_Plane.DAE]\n[GUI] [Err] [Ogre2MeshFactory.cc:72] Failed to get Ogre item for [file:///home/chapulina/.ignition/fuel/fuel.ignitionrobotics.org/openrobotics/models/subt_tunnel_staging_area/2//meshes/Asphalt_Plane.DAE]\n[GUI] [Err] [SceneManager.cc:271] Failed to load geometry for visual: plane_visual\n[GUI] [Err] [SystemPaths.cc:434] File [file:///home/chapulina/.ignition/fuel/fuel.ignitionrobotics.org/openrobotics/models/subt_tunnel_staging_area/2//meshes/Entrance.obj] resolved to path [/home/chapulina/.ignition/fuel/fuel.ignitionrobotics.org/openrobotics/models/subt_tunnel_staging_area/2//meshes/Entrance.obj] but the path does not exist\n[GUI] [Err] [MeshManager.cc:172] Unable to find file[file:///home/chapulina/.ignition/fuel/fuel.ignitionrobotics.org/openrobotics/models/subt_tunnel_staging_area/2//meshes/Entrance.obj]\n[GUI] [Err] [MeshDescriptor.cc:56] Mesh manager can't find mesh named [file:///home/chapulina/.ignition/fuel/fuel.ignitionrobotics.org/openrobotics/models/subt_tunnel_staging_area/2//meshes/Entrance.obj]\n[GUI] [Err] [Ogre2MeshFactory.cc:430] Cannot load null mesh [file:///home/chapulina/.ignition/fuel/fuel.ignitionrobotics.org/openrobotics/models/subt_tunnel_staging_area/2//meshes/Entrance.obj]\n[GUI] [Err] [Ogre2MeshFactory.cc:72] Failed to get Ogre item for [file:///home/chapulina/.ignition/fuel/fuel.ignitionrobotics.org/openrobotics/models/subt_tunnel_staging_area/2//meshes/Entrance.obj]\n[GUI] [Err] [SceneManager.cc:271] Failed to load geometry for visual: visual\n```", "markup": "markdown", "html": "<p>Various observations:</p>\n<hr />\n<p>I'm seeing the <code>log.zip</code> file being created even if I'm not recording resources. Is this expected?</p>\n<hr />\n<p>I also noticed that if I run the <code>log_record_resources</code> world twice in a row I get these messages:</p>\n<div class=\"codehilite\"><pre><span></span>[Err] [Zip.cc:42] Error adding directory to zip: /tmp/log\n[Err] [Zip.cc:103] Error compressing file: /tmp/log\n[Err] [LogRecord.cc:534] Failed to compressed log file and resources to [/tmp/log.zip]\n</pre></div>\n\n\n<p>If I remember correctly, we were creating new numbered directories if the directory already existed?</p>\n<hr />\n<p>The <code>zip</code> file is created as a sibling to the record path, i.e.:</p>\n<div class=\"codehilite\"><pre><span></span>/tmp/log\n|-- home\n|   `-- chapulina\n|-- server_console.log\n`-- state.tlog\n/tmp/log.zip\n</pre></div>\n\n\n<p>This was a bit counter-intuitive to me, because I was expecting Gazebo not to create any files outside that directory. But maybe it's just me.</p>\n<p>Also, keeping both the zip file and the original folders means every log takes even more space, with redundant information. Some things I'm wondering about:</p>\n<ul>\n<li>\n<p>Should we delete the directory after zipping it?</p>\n</li>\n<li>\n<p>Should we make zipping optional?</p>\n</li>\n<li>\n<p>Should we support playing back directly from the zip file?</p>\n</li>\n</ul>\n<hr />\n<p>I think we more fixes to the paths are needed. Try this:</p>\n<ol>\n<li><code>ign gazebo -v 4 -r log_record_resources.sdf --record-resources --record-path '/tmp/log'</code></li>\n<li><code>rm -rf ~/.ignition/fuel/fuel.ignitionrobotics.org/openrobotics/models/subt_tunnel_staging_area</code></li>\n<li><code>ign gazebo --force-version 2.9.0 -v 4 -r log_playback.sdf</code></li>\n</ol>\n<p>Instead of loading the logged mesh, the simulation prints these errors:</p>\n<div class=\"codehilite\"><pre><span></span>[GUI] [Err] [SystemPaths.cc:434] File [file:///home/chapulina/.ignition/fuel/fuel.ignitionrobotics.org/openrobotics/models/subt_tunnel_staging_area/2//meshes/Asphalt_Plane.DAE] resolved to path [/home/chapulina/.ignition/fuel/fuel.ignitionrobotics.org/openrobotics/models/subt_tunnel_staging_area/2//meshes/Asphalt_Plane.DAE] but the path does not exist\n[GUI] [Err] [MeshManager.cc:172] Unable to find file[file:///home/chapulina/.ignition/fuel/fuel.ignitionrobotics.org/openrobotics/models/subt_tunnel_staging_area/2//meshes/Asphalt_Plane.DAE]\n[GUI] [Err] [MeshDescriptor.cc:56] Mesh manager can&#39;t find mesh named [file:///home/chapulina/.ignition/fuel/fuel.ignitionrobotics.org/openrobotics/models/subt_tunnel_staging_area/2//meshes/Asphalt_Plane.DAE]\n[GUI] [Err] [Ogre2MeshFactory.cc:430] Cannot load null mesh [file:///home/chapulina/.ignition/fuel/fuel.ignitionrobotics.org/openrobotics/models/subt_tunnel_staging_area/2//meshes/Asphalt_Plane.DAE]\n[GUI] [Err] [Ogre2MeshFactory.cc:72] Failed to get Ogre item for [file:///home/chapulina/.ignition/fuel/fuel.ignitionrobotics.org/openrobotics/models/subt_tunnel_staging_area/2//meshes/Asphalt_Plane.DAE]\n[GUI] [Err] [SceneManager.cc:271] Failed to load geometry for visual: plane_visual\n[GUI] [Err] [SystemPaths.cc:434] File [file:///home/chapulina/.ignition/fuel/fuel.ignitionrobotics.org/openrobotics/models/subt_tunnel_staging_area/2//meshes/Entrance.obj] resolved to path [/home/chapulina/.ignition/fuel/fuel.ignitionrobotics.org/openrobotics/models/subt_tunnel_staging_area/2//meshes/Entrance.obj] but the path does not exist\n[GUI] [Err] [MeshManager.cc:172] Unable to find file[file:///home/chapulina/.ignition/fuel/fuel.ignitionrobotics.org/openrobotics/models/subt_tunnel_staging_area/2//meshes/Entrance.obj]\n[GUI] [Err] [MeshDescriptor.cc:56] Mesh manager can&#39;t find mesh named [file:///home/chapulina/.ignition/fuel/fuel.ignitionrobotics.org/openrobotics/models/subt_tunnel_staging_area/2//meshes/Entrance.obj]\n[GUI] [Err] [Ogre2MeshFactory.cc:430] Cannot load null mesh [file:///home/chapulina/.ignition/fuel/fuel.ignitionrobotics.org/openrobotics/models/subt_tunnel_staging_area/2//meshes/Entrance.obj]\n[GUI] [Err] [Ogre2MeshFactory.cc:72] Failed to get Ogre item for [file:///home/chapulina/.ignition/fuel/fuel.ignitionrobotics.org/openrobotics/models/subt_tunnel_staging_area/2//meshes/Entrance.obj]\n[GUI] [Err] [SceneManager.cc:271] Failed to load geometry for visual: visual\n</pre></div>", "type": "rendered"}, "created_on": "2019-08-29T18:31:50.210692+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2019-08-29T18:32:42.365723+00:00", "type": "pullrequest_comment", "id": 115011053}, "pull_request": {"type": "pullrequest", "id": 397, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/397.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/397"}}, "title": "[Blueprint] Logging meshes and materials"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/397/comments/115009297.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/397/_/diff#comment-115009297"}}, "parent": {"id": 115008216, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/397/comments/115008216.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/397/_/diff#comment-115008216"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 397, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/397.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/397"}}, "title": "[Blueprint] Logging meshes and materials"}, "content": {"raw": "Actually I think it may be `auto success = resourceParam->Get<bool>(resources)`", "markup": "markdown", "html": "<p>Actually I think it may be <code>auto success = resourceParam-&gt;Get&lt;bool&gt;(resources)</code></p>", "type": "rendered"}, "created_on": "2019-08-29T18:16:58.595318+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {}, "updated_on": "2019-08-29T18:16:58.606337+00:00", "type": "pullrequest_comment", "id": 115009297}, "pull_request": {"type": "pullrequest", "id": 397, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/397.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/397"}}, "title": "[Blueprint] Logging meshes and materials"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/397/comments/115008751.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/397/_/diff#comment-115008751"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 397, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/397.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/397"}}, "title": "[Blueprint] Logging meshes and materials"}, "content": {"raw": "Nit: this doesn't need to be `const` because it's passed by value", "markup": "markdown", "html": "<p>Nit: this doesn't need to be <code>const</code> because it's passed by value</p>", "type": "rendered"}, "created_on": "2019-08-29T18:12:13.760683+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {}, "updated_on": "2019-08-29T18:12:13.768323+00:00", "type": "pullrequest_comment", "id": 115008751}, "pull_request": {"type": "pullrequest", "id": 397, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/397.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/397"}}, "title": "[Blueprint] Logging meshes and materials"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/397/comments/115008216.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/397/_/diff#comment-115008216"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 397, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/397.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/397"}}, "title": "[Blueprint] Logging meshes and materials"}, "content": {"raw": "I think you can do something like this: `resources = resourceParam->Get<bool>() ;`. That should support strings like `true`, `TRUE`, `1`, etc.", "markup": "markdown", "html": "<p>I think you can do something like this: <code>resources = resourceParam-&gt;Get&lt;bool&gt;() ;</code>. That should support strings like <code>true</code>, <code>TRUE</code>, <code>1</code>, etc.</p>", "type": "rendered"}, "created_on": "2019-08-29T18:07:39.931720+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {}, "updated_on": "2019-08-29T18:07:39.941460+00:00", "type": "pullrequest_comment", "id": 115008216}, "pull_request": {"type": "pullrequest", "id": 397, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/397.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/397"}}, "title": "[Blueprint] Logging meshes and materials"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/397/comments/115007199.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/397/_/diff#comment-115007199"}}, "parent": {"id": 115006300, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/397/comments/115006300.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/397/_/diff#comment-115006300"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 397, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/397.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/397"}}, "title": "[Blueprint] Logging meshes and materials"}, "content": {"raw": "I think we could document that `--record` is implicit with `--record-path` or `--record-resources`", "markup": "markdown", "html": "<p>I think we could document that <code>--record</code> is implicit with <code>--record-path</code> or <code>--record-resources</code></p>", "type": "rendered"}, "created_on": "2019-08-29T17:59:31.099484+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {}, "updated_on": "2019-08-29T17:59:31.111029+00:00", "type": "pullrequest_comment", "id": 115007199}, "pull_request": {"type": "pullrequest", "id": 397, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/397.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/397"}}, "title": "[Blueprint] Logging meshes and materials"}}, {"update": {"description": "Depends on [ign-common PR 200](#!/ignitionrobotics/ign-common/pull-requests/200/log-resources/diff).\r\n\r\nPorts [this Gazebo PR](https://bitbucket.org/osrf/gazebo/pull-requests/2811/save-models-material-and-meshes-when/diff) to Ignition.\r\n\r\nRecords resources \\(meshes and materials\\) to a directory under the specified log record directory, then compresses the whole directory, which contains the existing `.tlog` sqlite3 file and any resources, to a zip file.\r\n\r\nCan be triggered with `--record-resources` on command line or plugin parameter `<record_resources>1</record_resources>`. If both are specified and are different, current behavior is to take logical OR, so resources are recorded if either command line flag or SDF flag is true.\r\n\r\nTo test:\r\n\r\n```\r\n$ ign gazebo -v 4 -r examples/worlds/log_record_resources.sdf [--record-resources --record-path '/tmp/log']\r\n$ ign gazebo -v 4 -r examples/worlds/log_playback.sdf\r\n```\r\n\r\nTested with `<include><uri>https://fuel...</uri></include>` and `<mesh><uri>file://...</uri></mesh>`. Paths specified by `model://` are not supported in Ignition yet, so this case in the code is not tested.\r\n\r\nFiles are outputted in `/tmp/log` and `/tmp/log.zip` in this example. During record, the original path in `file://` is prepended with the specified path, e.g. `/tmp/log`. During playback, the specified path is prepended to the URIs in the SDF.\r\n\r\nRight now, the directory `/tmp/log` is not removed. Because we don't know what resources are recorded, and the code uses `fuel_tools::Zip::Compress()`, which does not support wildcards. So it zips the entire `/tmp/log` directory into `/tmp/log.zip`. If we remove the directory, the problem is that if you record a second time to `/tmp/log`, it will happily do so, but then when it tries to zip to `/tmp/log.zip`, file already exists, and it will fail. We can force overwrite it, but I feel like users would not like to do that by mistake. So, keeping the directory, the second record will automatically record to `/tmp/log(1)`, and there\u2019s no clash problem.", "title": "[Blueprint] Logging meshes and materials", "destination": {"commit": {"hash": "e1cfd3ad6932", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/e1cfd3ad6932.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/e1cfd3ad6932"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "ign-gazebo2"}}, "reason": "", "source": {"commit": {"hash": "8829d2c0e37f", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/8829d2c0e37f.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/8829d2c0e37f"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "log_resources"}}, "state": "OPEN", "author": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "date": "2019-08-29T17:56:33.816821+00:00"}, "pull_request": {"type": "pullrequest", "id": 397, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/397.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/397"}}, "title": "[Blueprint] Logging meshes and materials"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/397/comments/115006300.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/397/_/diff#comment-115006300"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 397, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/397.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/397"}}, "title": "[Blueprint] Logging meshes and materials"}, "content": {"raw": "Just checking, we're still recording if `_record == 0` but there's a `_recordPath` or `_recordResources`, right?", "markup": "markdown", "html": "<p>Just checking, we're still recording if <code>_record == 0</code> but there's a <code>_recordPath</code> or <code>_recordResources</code>, right?</p>", "type": "rendered"}, "created_on": "2019-08-29T17:53:04.476241+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {}, "updated_on": "2019-08-29T17:53:04.484433+00:00", "type": "pullrequest_comment", "id": 115006300}, "pull_request": {"type": "pullrequest", "id": 397, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/397.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/397"}}, "title": "[Blueprint] Logging meshes and materials"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/397/comments/113208166.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/397/_/diff#comment-113208166"}}, "parent": {"id": 112149701, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/397/comments/112149701.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/397/_/diff#comment-112149701"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 397, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/397.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/397"}}, "title": "[Blueprint] Logging meshes and materials"}, "content": {"raw": "Oops. Fixed in b669d63, which sets it from command line flag or SDF plugin parameter.", "markup": "markdown", "html": "<p>Oops. Fixed in <a href=\"#!/ignitionrobotics/ign-gazebo/commits/b669d63\" rel=\"nofollow\" class=\"ap-connect-link\">b669d63</a>, which sets it from command line flag or SDF plugin parameter.</p>", "type": "rendered"}, "created_on": "2019-08-15T07:25:56.016334+00:00", "user": {"display_name": "Mabel Zhang", "uuid": "{4b0e38fb-bf50-45c0-a496-61147518b2bf}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D"}, "html": {"href": "https://bitbucket.org/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:ceb5942c-6843-408c-8550-3ce4899d299b/4d48e5ea-cf28-4fa7-9715-8fc9e315d831/128"}}, "nickname": "mabelmzhang", "type": "user", "account_id": "557058:ceb5942c-6843-408c-8550-3ce4899d299b"}, "inline": {}, "updated_on": "2019-08-15T07:25:56.026094+00:00", "type": "pullrequest_comment", "id": 113208166}, "pull_request": {"type": "pullrequest", "id": 397, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/397.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/397"}}, "title": "[Blueprint] Logging meshes and materials"}}, {"update": {"description": "Depends on [ign-common PR 200](#!/ignitionrobotics/ign-common/pull-requests/200/log-resources/diff).\r\n\r\nPorts [this Gazebo PR](https://bitbucket.org/osrf/gazebo/pull-requests/2811/save-models-material-and-meshes-when/diff) to Ignition.\r\n\r\nRecords resources \\(meshes and materials\\) to a directory under the specified log record directory, then compresses the whole directory, which contains the existing `.tlog` sqlite3 file and any resources, to a zip file.\r\n\r\nCan be triggered with `--record-resources` on command line or plugin parameter `<record_resources>1</record_resources>`. If both are specified and are different, current behavior is to take logical OR, so resources are recorded if either command line flag or SDF flag is true.\r\n\r\nTo test:\r\n\r\n```\r\n$ ign gazebo -v 4 -r examples/worlds/log_record_resources.sdf [--record-resources --record-path '/tmp/log']\r\n$ ign gazebo -v 4 -r examples/worlds/log_playback.sdf\r\n```\r\n\r\nTested with `<include><uri>https://fuel...</uri></include>` and `<mesh><uri>file://...</uri></mesh>`. Paths specified by `model://` are not supported in Ignition yet, so this case in the code is not tested.\r\n\r\nFiles are outputted in `/tmp/log` and `/tmp/log.zip` in this example. During record, the original path in `file://` is prepended with the specified path, e.g. `/tmp/log`. During playback, the specified path is prepended to the URIs in the SDF.\r\n\r\nRight now, the directory `/tmp/log` is not removed. Because we don't know what resources are recorded, and the code uses `fuel_tools::Zip::Compress()`, which does not support wildcards. So it zips the entire `/tmp/log` directory into `/tmp/log.zip`. If we remove the directory, the problem is that if you record a second time to `/tmp/log`, it will happily do so, but then when it tries to zip to `/tmp/log.zip`, file already exists, and it will fail. We can force overwrite it, but I feel like users would not like to do that by mistake. So, keeping the directory, the second record will automatically record to `/tmp/log(1)`, and there\u2019s no clash problem.", "title": "[Blueprint] Logging meshes and materials", "destination": {"commit": {"hash": "567c54a1feb9", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/567c54a1feb9.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/567c54a1feb9"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "ign-gazebo2"}}, "reason": "", "source": {"commit": {"hash": "b669d631506a", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/b669d631506a.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/b669d631506a"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "log_resources"}}, "state": "OPEN", "author": {"display_name": "Mabel Zhang", "uuid": "{4b0e38fb-bf50-45c0-a496-61147518b2bf}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D"}, "html": {"href": "https://bitbucket.org/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:ceb5942c-6843-408c-8550-3ce4899d299b/4d48e5ea-cf28-4fa7-9715-8fc9e315d831/128"}}, "nickname": "mabelmzhang", "type": "user", "account_id": "557058:ceb5942c-6843-408c-8550-3ce4899d299b"}, "date": "2019-08-15T07:25:02.266542+00:00"}, "pull_request": {"type": "pullrequest", "id": 397, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/397.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/397"}}, "title": "[Blueprint] Logging meshes and materials"}}, {"update": {"description": "Depends on [ign-common PR 200](#!/ignitionrobotics/ign-common/pull-requests/200/log-resources/diff).\r\n\r\nPorts [this Gazebo PR](https://bitbucket.org/osrf/gazebo/pull-requests/2811/save-models-material-and-meshes-when/diff) to Ignition.\r\n\r\nRecords resources \\(meshes and materials\\) to a directory under the specified log record directory, then compresses the whole directory, which contains the existing `.tlog` sqlite3 file and any resources, to a zip file.\r\n\r\nCan be triggered with `--record-resources` on command line or plugin parameter `<record_resources>1</record_resources>`. If both are specified and are different, current behavior is to take logical OR, so resources are recorded if either command line flag or SDF flag is true.\r\n\r\nTo test:\r\n\r\n```\r\n$ ign gazebo -v 4 -r examples/worlds/log_record_resources.sdf [--record-resources --record-path '/tmp/log']\r\n$ ign gazebo -v 4 -r examples/worlds/log_playback.sdf\r\n```\r\n\r\nTested with `<include><uri>https://fuel...</uri></include>` and `<mesh><uri>file://...</uri></mesh>`. Paths specified by `model://` are not supported in Ignition yet, so this case in the code is not tested.\r\n\r\nFiles are outputted in `/tmp/log` and `/tmp/log.zip` in this example. During record, the original path in `file://` is prepended with the specified path, e.g. `/tmp/log`. During playback, the specified path is prepended to the URIs in the SDF.\r\n\r\nRight now, the directory `/tmp/log` is not removed. Because we don't know what resources are recorded, and the code uses `fuel_tools::Zip::Compress()`, which does not support wildcards. So it zips the entire `/tmp/log` directory into `/tmp/log.zip`. If we remove the directory, the problem is that if you record a second time to `/tmp/log`, it will happily do so, but then when it tries to zip to `/tmp/log.zip`, file already exists, and it will fail. We can force overwrite it, but I feel like users would not like to do that by mistake. So, keeping the directory, the second record will automatically record to `/tmp/log(1)`, and there\u2019s no clash problem.", "title": "[Blueprint] Logging meshes and materials", "destination": {"commit": {"hash": "567c54a1feb9", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/567c54a1feb9.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/567c54a1feb9"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "ign-gazebo2"}}, "reason": "", "source": {"commit": {"hash": "03c9b6941eb5", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/03c9b6941eb5.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/03c9b6941eb5"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "log_resources"}}, "state": "OPEN", "author": {"display_name": "Mabel Zhang", "uuid": "{4b0e38fb-bf50-45c0-a496-61147518b2bf}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D"}, "html": {"href": "https://bitbucket.org/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:ceb5942c-6843-408c-8550-3ce4899d299b/4d48e5ea-cf28-4fa7-9715-8fc9e315d831/128"}}, "nickname": "mabelmzhang", "type": "user", "account_id": "557058:ceb5942c-6843-408c-8550-3ce4899d299b"}, "date": "2019-08-15T07:24:31.723071+00:00"}, "pull_request": {"type": "pullrequest", "id": 397, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/397.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/397"}}, "title": "[Blueprint] Logging meshes and materials"}}, {"update": {"description": "Depends on [ign-common PR 200](#!/ignitionrobotics/ign-common/pull-requests/200/log-resources/diff).\r\n\r\nPorts [this Gazebo PR](https://bitbucket.org/osrf/gazebo/pull-requests/2811/save-models-material-and-meshes-when/diff) to Ignition.\r\n\r\nRecords resources \\(meshes and materials\\) to a directory under the specified log record directory, then compresses the whole directory, which contains the existing `.tlog` sqlite3 file and any resources, to a zip file.\r\n\r\nTo test:\r\n\r\n```\r\n$ ign gazebo -v 4 -r examples/worlds/log_record_resources.sdf\r\n$ ign gazebo -v 4 -r examples/worlds/log_playback.sdf\r\n```\r\n\r\nTested with `<include><uri>https://fuel...</uri></include>` and `<mesh><uri>file://...</uri></mesh>`. Paths specified by `model://` are not supported in Ignition yet, so this case in the code is not tested.\r\n\r\nFiles are outputted in `/tmp/log` and `/tmp/log.zip` in this example. During record, the original path in `file://` is prepended with the specified path, e.g. `/tmp/log`. During playback, the specified path is prepended to the URIs in the SDF.\r\n\r\nRight now, the directory `/tmp/log` is not removed. Because we don't know what resources are recorded, and the code uses `fuel_tools::Zip::Compress()`, which does not support wildcards. So it zips the entire `/tmp/log` directory into `/tmp/log.zip`. If we remove the directory, the problem is that if you record a second time to `/tmp/log`, it will happily do so, but then when it tries to zip to `/tmp/log.zip`, file already exists, and it will fail. We can force overwrite it, but I feel like users would not like to do that by mistake. So, keeping the directory, the second record will automatically record to `/tmp/log(1)`, and there\u2019s no clash problem.", "title": "[Blueprint] Logging meshes and materials", "destination": {"commit": {"hash": "567c54a1feb9", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/567c54a1feb9.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/567c54a1feb9"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "ign-gazebo2"}}, "reason": "", "source": {"commit": {"hash": "03c9b6941eb5", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/03c9b6941eb5.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/03c9b6941eb5"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "log_resources"}}, "state": "OPEN", "author": {"display_name": "Mabel Zhang", "uuid": "{4b0e38fb-bf50-45c0-a496-61147518b2bf}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D"}, "html": {"href": "https://bitbucket.org/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:ceb5942c-6843-408c-8550-3ce4899d299b/4d48e5ea-cf28-4fa7-9715-8fc9e315d831/128"}}, "nickname": "mabelmzhang", "type": "user", "account_id": "557058:ceb5942c-6843-408c-8550-3ce4899d299b"}, "date": "2019-08-15T05:31:42.697349+00:00"}, "pull_request": {"type": "pullrequest", "id": 397, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/397.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/397"}}, "title": "[Blueprint] Logging meshes and materials"}}, {"update": {"description": "Depends on [ign-common PR 200](#!/ignitionrobotics/ign-common/pull-requests/200/log-resources/diff).\r\n\r\nPorts [this Gazebo PR](https://bitbucket.org/osrf/gazebo/pull-requests/2811/save-models-material-and-meshes-when/diff) to Ignition.\r\n\r\nRecords resources \\(meshes and materials\\) to a directory under the specified log record directory, then compresses the whole directory, which contains the existing `.tlog` sqlite3 file and any resources, to a zip file.\r\n\r\nTo test:\r\n\r\n```\r\n$ ign gazebo -v 4 -r examples/worlds/log_record_resources.sdf\r\n$ ign gazebo -v 4 -r examples/worlds/log_playback.sdf\r\n```\r\n\r\nTested with `<include><uri>https://fuel...</uri></include>` and `<mesh><uri>file://...</uri></mesh>`. Paths specified by `model://` are not supported in Ignition yet, so this case in the code is not tested.\r\n\r\nFiles are outputted in `/tmp/log` and `/tmp/log.zip` in this example. During record, the original path in `file://` is prepended with the specified path, e.g. `/tmp/log`. During playback, the specified path is prepended to the URIs in the SDF.\r\n\r\nRight now, the directory `/tmp/log` is not removed. Because we don't know what resources are recorded, and the code uses `fuel_tools::Zip::Compress()`, which does not support wildcards. So it zips the entire `/tmp/log` directory into `/tmp/log.zip`. If we remove the directory, the problem is that if you record a second time to `/tmp/log`, it will happily do so, but then when it tries to zip to `/tmp/log.zip`, file already exists, and it will fail. We can force overwrite it, but I feel like users would not like to do that by mistake. So, keeping the directory, the second record will automatically record to `/tmp/log(1)`, and there\u2019s no clash problem.", "title": "[Blueprint] Logging meshes and materials", "destination": {"commit": {"hash": "613e4402fbae", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/613e4402fbae.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/613e4402fbae"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "ign-gazebo2"}}, "reason": "", "source": {"commit": {"hash": "070db8f9cab4", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/070db8f9cab4.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/070db8f9cab4"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "log_resources"}}, "state": "OPEN", "author": {"display_name": "Mabel Zhang", "uuid": "{4b0e38fb-bf50-45c0-a496-61147518b2bf}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D"}, "html": {"href": "https://bitbucket.org/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:ceb5942c-6843-408c-8550-3ce4899d299b/4d48e5ea-cf28-4fa7-9715-8fc9e315d831/128"}}, "nickname": "mabelmzhang", "type": "user", "account_id": "557058:ceb5942c-6843-408c-8550-3ce4899d299b"}, "date": "2019-08-12T22:59:54.114574+00:00"}, "pull_request": {"type": "pullrequest", "id": 397, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/397.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/397"}}, "title": "[Blueprint] Logging meshes and materials"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/397/comments/112149701.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/397/_/diff#comment-112149701"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 397, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/397.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/397"}}, "title": "[Blueprint] Logging meshes and materials"}, "content": {"raw": "How did you intend this to be used? I'm not sure where this could be called from. Right now I believe `recordResources` is always true?", "markup": "markdown", "html": "<p>How did you intend this to be used? I'm not sure where this could be called from. Right now I believe <code>recordResources</code> is always true?</p>", "type": "rendered"}, "created_on": "2019-08-06T21:36:31.477102+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {}, "updated_on": "2019-08-06T21:36:31.484310+00:00", "type": "pullrequest_comment", "id": 112149701}, "pull_request": {"type": "pullrequest", "id": 397, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/397.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/397"}}, "title": "[Blueprint] Logging meshes and materials"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/397/comments/111792251.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/397/_/diff#comment-111792251"}}, "parent": {"id": 111779032, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/397/comments/111779032.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/397/_/diff#comment-111779032"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 397, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/397.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/397"}}, "title": "[Blueprint] Logging meshes and materials"}, "content": {"raw": "Done in 938a006", "markup": "markdown", "html": "<p>Done in <a href=\"#!/ignitionrobotics/ign-gazebo/commits/938a006\" rel=\"nofollow\" class=\"ap-connect-link\">938a006</a></p>", "type": "rendered"}, "created_on": "2019-08-03T00:21:16.430196+00:00", "user": {"display_name": "Mabel Zhang", "uuid": "{4b0e38fb-bf50-45c0-a496-61147518b2bf}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D"}, "html": {"href": "https://bitbucket.org/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:ceb5942c-6843-408c-8550-3ce4899d299b/4d48e5ea-cf28-4fa7-9715-8fc9e315d831/128"}}, "nickname": "mabelmzhang", "type": "user", "account_id": "557058:ceb5942c-6843-408c-8550-3ce4899d299b"}, "updated_on": "2019-08-03T00:21:16.440138+00:00", "type": "pullrequest_comment", "id": 111792251}, "pull_request": {"type": "pullrequest", "id": 397, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/397.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/397"}}, "title": "[Blueprint] Logging meshes and materials"}}, {"update": {"description": "Depends on [ign-common PR 200](#!/ignitionrobotics/ign-common/pull-requests/200/log-resources/diff).\r\n\r\nPorts [this Gazebo PR](https://bitbucket.org/osrf/gazebo/pull-requests/2811/save-models-material-and-meshes-when/diff) to Ignition.\r\n\r\nRecords resources \\(meshes and materials\\) to a directory under the specified log record directory, then compresses the whole directory, which contains the existing `.tlog` sqlite3 file and any resources, to a zip file.\r\n\r\nTo test:\r\n\r\n```\r\n$ ign gazebo -v 4 -r examples/worlds/log_record_resources.sdf\r\n$ ign gazebo -v 4 -r examples/worlds/log_playback.sdf\r\n```\r\n\r\nTested with `<include><uri>https://fuel...</uri></include>` and `<mesh><uri>file://...</uri></mesh>`. Paths specified by `model://` are not supported in Ignition yet, so this case in the code is not tested.\r\n\r\nFiles are outputted in `/tmp/log` and `/tmp/log.zip` in this example. During record, the original path in `file://` is prepended with the specified path, e.g. `/tmp/log`. During playback, the specified path is prepended to the URIs in the SDF.\r\n\r\nRight now, the directory `/tmp/log` is not removed. Because we don't know what resources are recorded, and the code uses `fuel_tools::Zip::Compress()`, which does not support wildcards. So it zips the entire `/tmp/log` directory into `/tmp/log.zip`. If we remove the directory, the problem is that if you record a second time to `/tmp/log`, it will happily do so, but then when it tries to zip to `/tmp/log.zip`, file already exists, and it will fail. We can force overwrite it, but I feel like users would not like to do that by mistake. So, keeping the directory, the second record will automatically record to `/tmp/log(1)`, and there\u2019s no clash problem.", "title": "[Blueprint] Logging meshes and materials", "destination": {"commit": {"hash": "f9b006aeab90", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/f9b006aeab90.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/f9b006aeab90"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "ign-gazebo2"}}, "reason": "", "source": {"commit": {"hash": "938a006bc6c2", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/938a006bc6c2.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/938a006bc6c2"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "log_resources"}}, "state": "OPEN", "author": {"display_name": "Mabel Zhang", "uuid": "{4b0e38fb-bf50-45c0-a496-61147518b2bf}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D"}, "html": {"href": "https://bitbucket.org/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:ceb5942c-6843-408c-8550-3ce4899d299b/4d48e5ea-cf28-4fa7-9715-8fc9e315d831/128"}}, "nickname": "mabelmzhang", "type": "user", "account_id": "557058:ceb5942c-6843-408c-8550-3ce4899d299b"}, "date": "2019-08-03T00:20:45.191554+00:00"}, "pull_request": {"type": "pullrequest", "id": 397, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/397.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/397"}}, "title": "[Blueprint] Logging meshes and materials"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/397/comments/111779032.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/397/_/diff#comment-111779032"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 397, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/397.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/397"}}, "title": "[Blueprint] Logging meshes and materials"}, "content": {"raw": "@{mabelmzhang} , mind syncing with `ign-gazebo2`? Pull request #407 introduced a lot of conflicts", "markup": "markdown", "html": "<p><span class=\"ap-mention\" data-atlassian-id=\"557058:ceb5942c-6843-408c-8550-3ce4899d299b\">@Mabel Zhang</span> , mind syncing with <code>ign-gazebo2</code>? <a href=\"#!/ignitionrobotics/ign-gazebo/pull-requests/407/fix-log-playback-with-levels\" rel=\"nofollow\" class=\"ap-connect-link\">Pull request #407</a> introduced a lot of conflicts</p>", "type": "rendered"}, "created_on": "2019-08-02T20:02:40.867649+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2019-08-02T20:02:40.882350+00:00", "type": "pullrequest_comment", "id": 111779032}, "pull_request": {"type": "pullrequest", "id": 397, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/397.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/397"}}, "title": "[Blueprint] Logging meshes and materials"}}, {"update": {"description": "Depends on [ign-common PR 200](#!/ignitionrobotics/ign-common/pull-requests/200/log-resources/diff).\r\n\r\nPorts [this Gazebo PR](https://bitbucket.org/osrf/gazebo/pull-requests/2811/save-models-material-and-meshes-when/diff) to Ignition.\r\n\r\nRecords resources \\(meshes and materials\\) to a directory under the specified log record directory, then compresses the whole directory, which contains the existing `.tlog` sqlite3 file and any resources, to a zip file.\r\n\r\nTo test:\r\n\r\n```\r\n$ ign gazebo -v 4 -r examples/worlds/log_record_resources.sdf\r\n$ ign gazebo -v 4 -r examples/worlds/log_playback.sdf\r\n```\r\n\r\nTested with `<include><uri>https://fuel...</uri></include>` and `<mesh><uri>file://...</uri></mesh>`. Paths specified by `model://` are not supported in Ignition yet, so this case in the code is not tested.\r\n\r\nFiles are outputted in `/tmp/log` and `/tmp/log.zip` in this example. During record, the original path in `file://` is prepended with the specified path, e.g. `/tmp/log`. During playback, the specified path is prepended to the URIs in the SDF.\r\n\r\nRight now, the directory `/tmp/log` is not removed. Because we don't know what resources are recorded, and the code uses `fuel_tools::Zip::Compress()`, which does not support wildcards. So it zips the entire `/tmp/log` directory into `/tmp/log.zip`. If we remove the directory, the problem is that if you record a second time to `/tmp/log`, it will happily do so, but then when it tries to zip to `/tmp/log.zip`, file already exists, and it will fail. We can force overwrite it, but I feel like users would not like to do that by mistake. So, keeping the directory, the second record will automatically record to `/tmp/log(1)`, and there\u2019s no clash problem.", "title": "[Blueprint] Logging meshes and materials", "destination": {"commit": {"hash": "67a0e72ce175", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/67a0e72ce175.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/67a0e72ce175"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "ign-gazebo2"}}, "reason": "", "source": {"commit": {"hash": "b15953bd49d8", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/b15953bd49d8.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/b15953bd49d8"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "log_resources"}}, "state": "OPEN", "author": {"display_name": "Mabel Zhang", "uuid": "{4b0e38fb-bf50-45c0-a496-61147518b2bf}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D"}, "html": {"href": "https://bitbucket.org/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:ceb5942c-6843-408c-8550-3ce4899d299b/4d48e5ea-cf28-4fa7-9715-8fc9e315d831/128"}}, "nickname": "mabelmzhang", "type": "user", "account_id": "557058:ceb5942c-6843-408c-8550-3ce4899d299b"}, "date": "2019-07-25T18:54:21.506699+00:00"}, "pull_request": {"type": "pullrequest", "id": 397, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/397.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/397"}}, "title": "[Blueprint] Logging meshes and materials"}}, {"update": {"description": "Depends on [ign-common PR 200](#!/ignitionrobotics/ign-common/pull-requests/200/log-resources/diff).\r\n\r\nPorts [this Gazebo PR](https://bitbucket.org/osrf/gazebo/pull-requests/2811/save-models-material-and-meshes-when/diff) to Ignition.\r\n\r\nRecords resources \\(meshes and materials\\) to a directory under the specified log record directory, then compresses the whole directory, which contains the existing `.tlog` sqlite3 file and any resources, to a zip file.\r\n\r\nTo test:\r\n\r\n```\r\n$ ign gazebo -v 4 -r examples/worlds/log_record_resources.sdf\r\n$ ign gazebo -v 4 -r examples/worlds/log_playback.sdf\r\n```\r\n\r\nTested with `<include><uri>https://fuel...</uri></include>` and `<mesh><uri>file://...</uri></mesh>`. Paths specified by `model://` are not supported in Ignition yet, so this case in the code is not tested.\r\n\r\nFiles are outputted in `/tmp/log` and `/tmp/log.zip` in this example. During record, the original path in `file://` is prepended with the specified path, e.g. `/tmp/log`. During playback, the specified path is prepended to the URIs in the SDF.\r\n\r\nRight now, the directory `/tmp/log` is not removed. Because we don't know what resources are recorded, and the code uses `fuel_tools::Zip::Compress()`, which does not support wildcards. So it zips the entire `/tmp/log` directory into `/tmp/log.zip`. If we remove the directory, the problem is that if you record a second time to `/tmp/log`, it will happily do so, but then when it tries to zip to `/tmp/log.zip`, file already exists, and it will fail. We can force overwrite it, but I feel like users would not like to do that by mistake. So, keeping the directory, the second record will automatically record to `/tmp/log(1)`, and there\u2019s no clash problem.", "title": "[Blueprint] Logging meshes and materials", "destination": {"commit": {"hash": "67a0e72ce175", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/67a0e72ce175.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/67a0e72ce175"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "ign-gazebo2"}}, "reason": "", "source": {"commit": {"hash": "b15953bd49d8", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/b15953bd49d8.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/b15953bd49d8"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "log_resources"}}, "state": "OPEN", "author": {"display_name": "Mabel Zhang", "uuid": "{4b0e38fb-bf50-45c0-a496-61147518b2bf}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D"}, "html": {"href": "https://bitbucket.org/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:ceb5942c-6843-408c-8550-3ce4899d299b/4d48e5ea-cf28-4fa7-9715-8fc9e315d831/128"}}, "nickname": "mabelmzhang", "type": "user", "account_id": "557058:ceb5942c-6843-408c-8550-3ce4899d299b"}, "date": "2019-07-25T17:43:54.060416+00:00"}, "pull_request": {"type": "pullrequest", "id": 397, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/397.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/397"}}, "title": "[Blueprint] Logging meshes and materials"}}, {"update": {"description": "Depends on [ign-common PR 200](#!/ignitionrobotics/ign-common/pull-requests/200/log-resources/diff).\r\n\r\nPorts [this Gazebo PR](https://bitbucket.org/osrf/gazebo/pull-requests/2811/save-models-material-and-meshes-when/diff) to Ignition.\r\n\r\nRecords resources \\(meshes and materials\\) to a directory under the specified log record directory, then compresses the whole directory, which contains the existing `.tlog` sqlite3 file and any resources, to a zip file.\r\n\r\nTo test:\r\n\r\n```\r\n$ ign gazebo -v 4 -r examples/worlds/log_record_resources.sdf\r\n$ ign gazebo -v 4 -r examples/worlds/log_playback.sdf\r\n```\r\n\r\nTested with `<include><uri>https://fuel...</uri></include>` and `<mesh><uri>file://...</uri></mesh>`. Paths specified by `model://` are not supported in Ignition yet, so this case in the code is not tested.\r\n\r\nFiles are outputted in `/tmp/log` and `/tmp/log.zip` in this example. During record, the original path in `file://` is prepended with the specified path, e.g. `/tmp/log`. During playback, the specified path is prepended to the URIs in the SDF.\r\n\r\nRight now, the directory `/tmp/log` is not removed. Because we don't know what resources are recorded, and the code uses `fuel_tools::Zip::Compress()`, which does not support wildcards. So it zips the entire `/tmp/log` directory into `/tmp/log.zip`. If we remove the directory, the problem is that if you record a second time to `/tmp/log`, it will happily do so, but then when it tries to zip to `/tmp/log.zip`, file already exists, and it will fail. We can force overwrite it, but I feel like users would not like to do that by mistake. So, keeping the directory, the second record will automatically record to `/tmp/log(1)`, and there\u2019s no clash problem.", "title": "[Blueprint] Log record meshes and materials", "destination": {"commit": {"hash": "67a0e72ce175", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/67a0e72ce175.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/67a0e72ce175"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "ign-gazebo2"}}, "reason": "", "source": {"commit": {"hash": "b15953bd49d8", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/b15953bd49d8.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/b15953bd49d8"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "log_resources"}}, "state": "OPEN", "author": {"display_name": "Mabel Zhang", "uuid": "{4b0e38fb-bf50-45c0-a496-61147518b2bf}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D"}, "html": {"href": "https://bitbucket.org/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:ceb5942c-6843-408c-8550-3ce4899d299b/4d48e5ea-cf28-4fa7-9715-8fc9e315d831/128"}}, "nickname": "mabelmzhang", "type": "user", "account_id": "557058:ceb5942c-6843-408c-8550-3ce4899d299b"}, "date": "2019-07-25T17:43:28.137851+00:00"}, "pull_request": {"type": "pullrequest", "id": 397, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/397.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/397"}}, "title": "[Blueprint] Logging meshes and materials"}}, {"update": {"description": "Depends on [ign-common PR 200](#!/ignitionrobotics/ign-common/pull-requests/200/log-resources/diff).\r\n\r\nPorts [this Gazebo PR](https://bitbucket.org/osrf/gazebo/pull-requests/2811/save-models-material-and-meshes-when/diff) to Ignition.\r\n\r\nRecords resources \\(meshes and materials\\) to a directory under the specified log record directory, then compresses the whole directory, which contains the existing `.tlog` sqlite3 file and any resources, to a zip file.\r\n\r\nTo test:\r\n\r\n```\r\n$ ign gazebo -v 4 -r examples/worlds/log_record_resources.sdf\r\n$ ign gazebo -v 4 -r examples/worlds/log_playback.sdf\r\n```\r\n\r\nTested with `<include><uri>https://fuel...</uri></include>` and `<mesh><uri>file://...</uri></mesh>`. Paths specified by `model://` are not supported in Ignition yet, so this case in the code is not tested.\r\n\r\nFiles are outputted in `/tmp/log` and `/tmp/log.zip` in this example. During record, the original path in `file://` is prepended with the specified path, e.g. `/tmp/log`. During playback, the specified path is prepended to the URIs in the SDF.\r\n\r\nRight now, the directory `/tmp/log` is not removed. Because we don't know what resources are recorded, and the code uses `fuel_tools::Zip::Compress()`, which does not support wildcards. So it zips the entire `/tmp/log` directory into `/tmp/log.zip`. If we remove the directory, the problem is that if you record a second time to `/tmp/log`, it will happily do so, but then when it tries to zip to `/tmp/log.zip`, file already exists, and it will fail. We can force overwrite it, but I feel like users would not like to do that by mistake. So, keeping the directory, the second record will automatically record to `/tmp/log(1)`, and there\u2019s no clash problem.", "title": "[Blueprint] Log record meshes and materials", "destination": {"commit": {"hash": "67a0e72ce175", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/67a0e72ce175.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/67a0e72ce175"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "ign-gazebo2"}}, "reason": "", "source": {"commit": {"hash": "b15953bd49d8", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/b15953bd49d8.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/b15953bd49d8"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "log_resources"}}, "state": "OPEN", "author": {"display_name": "Mabel Zhang", "uuid": "{4b0e38fb-bf50-45c0-a496-61147518b2bf}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D"}, "html": {"href": "https://bitbucket.org/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:ceb5942c-6843-408c-8550-3ce4899d299b/4d48e5ea-cf28-4fa7-9715-8fc9e315d831/128"}}, "nickname": "mabelmzhang", "type": "user", "account_id": "557058:ceb5942c-6843-408c-8550-3ce4899d299b"}, "date": "2019-07-25T17:43:28.103676+00:00"}, "pull_request": {"type": "pullrequest", "id": 397, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/397.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/397"}}, "title": "[Blueprint] Logging meshes and materials"}}]}