{"rendered": {"description": {"raw": "Depends on [ign-common PR 200](#!/ignitionrobotics/ign-common/pull-requests/200/log-resources/diff).\r\n\r\nPorts [this Gazebo PR](https://bitbucket.org/osrf/gazebo/pull-requests/2811/save-models-material-and-meshes-when/diff) to Ignition.\r\n\r\nImplements `--record-resources`, and `--log-compress` and `--log-overwrite` to support it.\r\n\r\nRecords resources \\(`--record-resources`\\), i.e. meshes and materials, to a directory under the specified log record directory. Optionally compresses \\(`--log-compress`\\) the whole directory, which contains the existing `.tlog` sqlite3 file and any resources, to a zip file. If directory or compressed file already exist, optionally overwrites \\(`--log-overwrite`\\).\r\n\r\nCorresponding SDF plugin parameters: `<record_resources>1</record_resources>`, `<compress>1</compress>.`If both command line and SDF parameters are specified, command line option overwrites SDF parameter. `--log-overwrite` is handled on command line only, outside of the plugin. If recording is only enabled from SDF and not from command line, then behavior is to always overwrite.\r\n\r\n## Usage:\r\n\r\n```\r\nign gazebo [...] --record-resources --log-overwrite --log-compress\r\n```\r\n\r\n## Test --record-resources:\r\n\r\n```\r\n$ ign gazebo -v 4 -r examples/worlds/log_record_resources.sdf --log-overwrite --record-path /tmp/log\r\n# (Re)move local downloaded Fuel copy of resources\r\n$ mv ~/.ignition/fuel ~/.ignition/fuel_bak\r\n# Play back from recorded resources\r\n$ ign gazebo -v 4 -r --playback /tmp/log\r\n```\r\n\r\nTested with `<include><uri>https://fuel...</uri></include>` and `<mesh><uri>file://...</uri></mesh>`. Paths specified by `model://` are not supported in Ignition yet, so this case in the code is not tested.\r\n\r\n## Test --log-overwrite and --log-compress:\r\n\r\nWhen recording to `path`, the compression file is implied to be `path.zip`. Both are checked for existence.\r\n\r\nNo `--log-overwrite` \\(default\\):\r\n\r\n```\r\n# This SDF specifies the equivalent of --record-path '/tmp/log'\r\n$ ign gazebo -v 4 -r examples/worlds/log_record_resources.sdf\r\n\r\n# Run it again. By default it will always overwrite, because overwrite is now taken care of in ign.cc\r\n$ ign gazebo -v 4 -r examples/worlds/log_record_resources.sdf\r\n[Msg] Overwriting existing file [/tmp/log/state.tlog]\r\n[Msg] Recording to log file [/tmp/log/state.tlog]\r\n```\r\n\r\n`--log-overwrite`, `/tmp/log` already exists:\r\n\r\n```\r\n$ ign gazebo -v 4 -r examples/worlds/log_record_resources.sdf --log-overwrite --record-path '/tmp/log'\r\n[Msg] Log path already exists on disk! Existing files will be overwritten.\r\n[Msg] Removing existing path [/tmp/log]\r\n...\r\n[Msg] Recording to log file [/tmp/log/state.tlog]\r\n...\r\n[Msg] Stopping recording\r\n```\r\n\r\n`--log-overwrite --log-compress`, `/tmp/log` exists, `/tmp/log.zip` does not exist:\r\n\r\n```\r\n$ ign gazebo -v 4 -r examples/worlds/log_record_resources.sdf --log-compress --log-overwrite --record-path '/tmp/log'\r\n[Msg] Log path already exists on disk! Existing files will be overwritten.\r\n[Msg] Removing existing path [/tmp/log]\r\n...\r\n[Msg] Recording to log file [/tmp/log/state.tlog]\r\n...\r\n[Msg] Compressed log file and resources to [/tmp/log.zip].\r\nRemoving recorded directory [/tmp/log].\r\n[Msg] Stopping recording\r\n```\r\n\r\n`--log-overwrite --log-compress`, `/tmp/log` does not exist, `/tmp/log.zip` exists:\r\n\r\n```\r\n$ ign gazebo -v 4 -r examples/worlds/log_record_resources.sdf --log-compress --log-overwrite --record-path '/tmp/log'\r\n[Wrn] [ign.cc:121] Compressed log path already exists on disk! Existing files will be overwritten.\r\n[Msg] Removing existing compressed file [/tmp/log.zip]\r\n...\r\n[Msg] Recording to log file [/tmp/log/state.tlog]\r\n...\r\n[Msg] Compressed log file and resources to [/tmp/log.zip].\r\nRemoving recorded directory [/tmp/log].\r\n[Msg] Stopping recording\r\n```\r\n\r\n`--log-overwrite` only, `/tmp/log.zip` exists, `/tmp/log` does not exist:\r\n\r\n```\r\n$ ign gazebo -v 4 -r examples/worlds/log_record_resources.sdf --log-overwrite --record-path '/tmp/log'\r\n[Msg] Removing existing compressed file [/tmp/log.zip]\r\n...\r\n[Msg] Recording to log file [/tmp/log/state.tlog]\r\n...\r\n[Msg] Stopping recording\r\n```\r\n\r\n`--log-compress` only, both `/tmp/log` and `/tmp/log.zip` already exist:\r\n\r\n```\r\n$ ign gazebo -v 4 -r examples/worlds/log_record_resources.sdf --log-compress --record-path '/tmp/log'\r\n[Wrn] [ign.cc:152] Log path already exists on disk! Recording instead to [/tmp/log(1)]\r\n[Wrn] [ign.cc:154] Compressed log path already exists on disk! Recording instead to [/tmp/log(1).zip]\r\n...\r\n[Msg] Recording to log file [/tmp/log(1)/state.tlog]\r\n...\r\n[Msg] Compressed log file and resources to [/tmp/log(1).zip].\r\nRemoving recorded directory [/tmp/log(1)].\r\n[Msg] Stopping recording\r\n$ ls /tmp\r\nlog\r\n'log(1).zip'\r\nlog.zip\r\n```\r\n\r\n`--log-compress` only, `/tmp/log` does not exist, `/tmp/log.zip` exists, `/tmp/log(1).zip` exists:\r\n\r\n```\r\n$ ign gazebo -v 4 -r examples/worlds/log_record_resources.sdf --log-compress --record-path '/tmp/log'\r\n[Wrn] [ign.cc:152] Log path already exists on disk! Recording instead to [/tmp/log(2)]\r\n[Wrn] [ign.cc:154] Compressed log path already exists on disk! Recording instead to [/tmp/log(2).zip]\r\n...\r\n[Msg] Recording to log file [/tmp/log(2)/state.tlog]\r\n...\r\n[Msg] Compressed log file and resources to [/tmp/log(2).zip].\r\nRemoving recorded directory [/tmp/log(2)].\r\n[Msg] Stopping recording\r\n```\r\n\r\n## Record Path vs. Console Log Path\r\n\r\nIn Blueprint and Citadel, if `--record` is specified without `--record-path`, and `<path>` exists in SDF, a warning is printed, and recording will go to `<path>`, while console log will go to the default timestamp path.\r\n\r\nAs in this example:\r\n\r\n```\r\n# SDF specifies <path>/tmp/log</path>\r\n$ ign gazebo -v 4 -r examples/worlds/log_record_resources.sdf --record --log-compress -log-overwrite\r\n[Wrn] [ServerPrivate.cc:229] --record-path is not specified on command line. <path> is specified in SDF. Will record to <path>. Console will be logged to [/home/master/.ignition/gazebo/log/2019-09-20T19:51:33.996055619]. Note: In Ignition-D, <path> will be ignored, and all recordings will be written to default console log path if no path is specified on command line.\r\n[Msg] Overwriting existing file [/tmp/log/state.tlog]\r\n[Msg] Recording to log file [/tmp/log/state.tlog]\r\n...\r\n[Msg] Removing existing file [/tmp/log.zip].\r\n[Msg] Compressed log file and resources to [/tmp/log.zip].\r\nRemoving recorded directory [/tmp/log].\r\n```\r\n\r\nIn Ignition-D, `<path>` will be permanently ignored. Recordings and console log will go to same default path.\r\n\r\nIf `--record-path` is specified, then recording and console log will go to this path in Blueprint, Citadel, and Ignition-D.\r\n\r\n## Future Work\r\n\r\nFiles are outputted in `/tmp/log` and `/tmp/log.zip` in this example. During record, the original path in `file://` is prepended with the specified path, e.g. `/tmp/log`. During playback, the specified path is prepended to the URIs in the SDF.", "markup": "markdown", "html": "<p>Depends on <a data-is-external-link=\"true\" href=\"#!/ignitionrobotics/ign-common/pull-requests/200/log-resources/diff\" rel=\"nofollow\">ign-common PR 200</a>.</p>\n<p>Ports <a data-is-external-link=\"true\" href=\"https://bitbucket.org/osrf/gazebo/pull-requests/2811/save-models-material-and-meshes-when/diff\" rel=\"nofollow\">this Gazebo PR</a> to Ignition.</p>\n<p>Implements <code>--record-resources</code>, and <code>--log-compress</code> and <code>--log-overwrite</code> to support it.</p>\n<p>Records resources (<code>--record-resources</code>), i.e. meshes and materials, to a directory under the specified log record directory. Optionally compresses (<code>--log-compress</code>) the whole directory, which contains the existing <code>.tlog</code> sqlite3 file and any resources, to a zip file. If directory or compressed file already exist, optionally overwrites (<code>--log-overwrite</code>).</p>\n<p>Corresponding SDF plugin parameters: <code>&lt;record_resources&gt;1&lt;/record_resources&gt;</code>, <code>&lt;compress&gt;1&lt;/compress&gt;.</code>If both command line and SDF parameters are specified, command line option overwrites SDF parameter. <code>--log-overwrite</code> is handled on command line only, outside of the plugin. If recording is only enabled from SDF and not from command line, then behavior is to always overwrite.</p>\n<h2 id=\"markdown-header-usage\">Usage:</h2>\n<div class=\"codehilite\"><pre><span></span>ign gazebo [...] --record-resources --log-overwrite --log-compress\n</pre></div>\n\n\n<h2 id=\"markdown-header-test-record-resources\">Test --record-resources:</h2>\n<div class=\"codehilite\"><pre><span></span>$ ign gazebo -v <span class=\"m\">4</span> -r examples/worlds/log_record_resources.sdf --log-overwrite --record-path /tmp/log\n<span class=\"c1\"># (Re)move local downloaded Fuel copy of resources</span>\n$ mv ~/.ignition/fuel ~/.ignition/fuel_bak\n<span class=\"c1\"># Play back from recorded resources</span>\n$ ign gazebo -v <span class=\"m\">4</span> -r --playback /tmp/log\n</pre></div>\n\n\n<p>Tested with <code>&lt;include&gt;&lt;uri&gt;https://fuel...&lt;/uri&gt;&lt;/include&gt;</code> and <code>&lt;mesh&gt;&lt;uri&gt;file://...&lt;/uri&gt;&lt;/mesh&gt;</code>. Paths specified by <code>model://</code> are not supported in Ignition yet, so this case in the code is not tested.</p>\n<h2 id=\"markdown-header-test-log-overwrite-and-log-compress\">Test --log-overwrite and --log-compress:</h2>\n<p>When recording to <code>path</code>, the compression file is implied to be <code>path.zip</code>. Both are checked for existence.</p>\n<p>No <code>--log-overwrite</code> (default):</p>\n<div class=\"codehilite\"><pre><span></span># This SDF specifies the equivalent of --record-path &#39;/tmp/log&#39;\n$ ign gazebo -v 4 -r examples/worlds/log_record_resources.sdf\n\n# Run it again. By default it will always overwrite, because overwrite is now taken care of in ign.cc\n$ ign gazebo -v 4 -r examples/worlds/log_record_resources.sdf\n[Msg] Overwriting existing file [/tmp/log/state.tlog]\n[Msg] Recording to log file [/tmp/log/state.tlog]\n</pre></div>\n\n\n<p><code>--log-overwrite</code>, <code>/tmp/log</code> already exists:</p>\n<div class=\"codehilite\"><pre><span></span>$ ign gazebo -v <span class=\"m\">4</span> -r examples/worlds/log_record_resources.sdf --log-overwrite --record-path <span class=\"s1\">&#39;/tmp/log&#39;</span>\n<span class=\"o\">[</span>Msg<span class=\"o\">]</span> Log path already exists on disk! Existing files will be overwritten.\n<span class=\"o\">[</span>Msg<span class=\"o\">]</span> Removing existing path <span class=\"o\">[</span>/tmp/log<span class=\"o\">]</span>\n...\n<span class=\"o\">[</span>Msg<span class=\"o\">]</span> Recording to log file <span class=\"o\">[</span>/tmp/log/state.tlog<span class=\"o\">]</span>\n...\n<span class=\"o\">[</span>Msg<span class=\"o\">]</span> Stopping recording\n</pre></div>\n\n\n<p><code>--log-overwrite --log-compress</code>, <code>/tmp/log</code> exists, <code>/tmp/log.zip</code> does not exist:</p>\n<div class=\"codehilite\"><pre><span></span>$ ign gazebo -v <span class=\"m\">4</span> -r examples/worlds/log_record_resources.sdf --log-compress --log-overwrite --record-path <span class=\"s1\">&#39;/tmp/log&#39;</span>\n<span class=\"o\">[</span>Msg<span class=\"o\">]</span> Log path already exists on disk! Existing files will be overwritten.\n<span class=\"o\">[</span>Msg<span class=\"o\">]</span> Removing existing path <span class=\"o\">[</span>/tmp/log<span class=\"o\">]</span>\n...\n<span class=\"o\">[</span>Msg<span class=\"o\">]</span> Recording to log file <span class=\"o\">[</span>/tmp/log/state.tlog<span class=\"o\">]</span>\n...\n<span class=\"o\">[</span>Msg<span class=\"o\">]</span> Compressed log file and resources to <span class=\"o\">[</span>/tmp/log.zip<span class=\"o\">]</span>.\nRemoving recorded directory <span class=\"o\">[</span>/tmp/log<span class=\"o\">]</span>.\n<span class=\"o\">[</span>Msg<span class=\"o\">]</span> Stopping recording\n</pre></div>\n\n\n<p><code>--log-overwrite --log-compress</code>, <code>/tmp/log</code> does not exist, <code>/tmp/log.zip</code> exists:</p>\n<div class=\"codehilite\"><pre><span></span>$ ign gazebo -v <span class=\"m\">4</span> -r examples/worlds/log_record_resources.sdf --log-compress --log-overwrite --record-path <span class=\"s1\">&#39;/tmp/log&#39;</span>\n<span class=\"o\">[</span>Wrn<span class=\"o\">]</span> <span class=\"o\">[</span>ign.cc:121<span class=\"o\">]</span> Compressed log path already exists on disk! Existing files will be overwritten.\n<span class=\"o\">[</span>Msg<span class=\"o\">]</span> Removing existing compressed file <span class=\"o\">[</span>/tmp/log.zip<span class=\"o\">]</span>\n...\n<span class=\"o\">[</span>Msg<span class=\"o\">]</span> Recording to log file <span class=\"o\">[</span>/tmp/log/state.tlog<span class=\"o\">]</span>\n...\n<span class=\"o\">[</span>Msg<span class=\"o\">]</span> Compressed log file and resources to <span class=\"o\">[</span>/tmp/log.zip<span class=\"o\">]</span>.\nRemoving recorded directory <span class=\"o\">[</span>/tmp/log<span class=\"o\">]</span>.\n<span class=\"o\">[</span>Msg<span class=\"o\">]</span> Stopping recording\n</pre></div>\n\n\n<p><code>--log-overwrite</code> only, <code>/tmp/log.zip</code> exists, <code>/tmp/log</code> does not exist:</p>\n<div class=\"codehilite\"><pre><span></span>$ ign gazebo -v <span class=\"m\">4</span> -r examples/worlds/log_record_resources.sdf --log-overwrite --record-path <span class=\"s1\">&#39;/tmp/log&#39;</span>\n<span class=\"o\">[</span>Msg<span class=\"o\">]</span> Removing existing compressed file <span class=\"o\">[</span>/tmp/log.zip<span class=\"o\">]</span>\n...\n<span class=\"o\">[</span>Msg<span class=\"o\">]</span> Recording to log file <span class=\"o\">[</span>/tmp/log/state.tlog<span class=\"o\">]</span>\n...\n<span class=\"o\">[</span>Msg<span class=\"o\">]</span> Stopping recording\n</pre></div>\n\n\n<p><code>--log-compress</code> only, both <code>/tmp/log</code> and <code>/tmp/log.zip</code> already exist:</p>\n<div class=\"codehilite\"><pre><span></span>$ ign gazebo -v <span class=\"m\">4</span> -r examples/worlds/log_record_resources.sdf --log-compress --record-path <span class=\"s1\">&#39;/tmp/log&#39;</span>\n<span class=\"o\">[</span>Wrn<span class=\"o\">]</span> <span class=\"o\">[</span>ign.cc:152<span class=\"o\">]</span> Log path already exists on disk! Recording instead to <span class=\"o\">[</span>/tmp/log<span class=\"o\">(</span><span class=\"m\">1</span><span class=\"o\">)]</span>\n<span class=\"o\">[</span>Wrn<span class=\"o\">]</span> <span class=\"o\">[</span>ign.cc:154<span class=\"o\">]</span> Compressed log path already exists on disk! Recording instead to <span class=\"o\">[</span>/tmp/log<span class=\"o\">(</span><span class=\"m\">1</span><span class=\"o\">)</span>.zip<span class=\"o\">]</span>\n...\n<span class=\"o\">[</span>Msg<span class=\"o\">]</span> Recording to log file <span class=\"o\">[</span>/tmp/log<span class=\"o\">(</span><span class=\"m\">1</span><span class=\"o\">)</span>/state.tlog<span class=\"o\">]</span>\n...\n<span class=\"o\">[</span>Msg<span class=\"o\">]</span> Compressed log file and resources to <span class=\"o\">[</span>/tmp/log<span class=\"o\">(</span><span class=\"m\">1</span><span class=\"o\">)</span>.zip<span class=\"o\">]</span>.\nRemoving recorded directory <span class=\"o\">[</span>/tmp/log<span class=\"o\">(</span><span class=\"m\">1</span><span class=\"o\">)]</span>.\n<span class=\"o\">[</span>Msg<span class=\"o\">]</span> Stopping recording\n$ ls /tmp\nlog\n<span class=\"s1\">&#39;log(1).zip&#39;</span>\nlog.zip\n</pre></div>\n\n\n<p><code>--log-compress</code> only, <code>/tmp/log</code> does not exist, <code>/tmp/log.zip</code> exists, <code>/tmp/log(1).zip</code> exists:</p>\n<div class=\"codehilite\"><pre><span></span>$ ign gazebo -v <span class=\"m\">4</span> -r examples/worlds/log_record_resources.sdf --log-compress --record-path <span class=\"s1\">&#39;/tmp/log&#39;</span>\n<span class=\"o\">[</span>Wrn<span class=\"o\">]</span> <span class=\"o\">[</span>ign.cc:152<span class=\"o\">]</span> Log path already exists on disk! Recording instead to <span class=\"o\">[</span>/tmp/log<span class=\"o\">(</span><span class=\"m\">2</span><span class=\"o\">)]</span>\n<span class=\"o\">[</span>Wrn<span class=\"o\">]</span> <span class=\"o\">[</span>ign.cc:154<span class=\"o\">]</span> Compressed log path already exists on disk! Recording instead to <span class=\"o\">[</span>/tmp/log<span class=\"o\">(</span><span class=\"m\">2</span><span class=\"o\">)</span>.zip<span class=\"o\">]</span>\n...\n<span class=\"o\">[</span>Msg<span class=\"o\">]</span> Recording to log file <span class=\"o\">[</span>/tmp/log<span class=\"o\">(</span><span class=\"m\">2</span><span class=\"o\">)</span>/state.tlog<span class=\"o\">]</span>\n...\n<span class=\"o\">[</span>Msg<span class=\"o\">]</span> Compressed log file and resources to <span class=\"o\">[</span>/tmp/log<span class=\"o\">(</span><span class=\"m\">2</span><span class=\"o\">)</span>.zip<span class=\"o\">]</span>.\nRemoving recorded directory <span class=\"o\">[</span>/tmp/log<span class=\"o\">(</span><span class=\"m\">2</span><span class=\"o\">)]</span>.\n<span class=\"o\">[</span>Msg<span class=\"o\">]</span> Stopping recording\n</pre></div>\n\n\n<h2 id=\"markdown-header-record-path-vs-console-log-path\">Record Path vs. Console Log Path</h2>\n<p>In Blueprint and Citadel, if <code>--record</code> is specified without <code>--record-path</code>, and <code>&lt;path&gt;</code> exists in SDF, a warning is printed, and recording will go to <code>&lt;path&gt;</code>, while console log will go to the default timestamp path.</p>\n<p>As in this example:</p>\n<div class=\"codehilite\"><pre><span></span># SDF specifies <span class=\"nt\">&lt;path&gt;</span>/tmp/log<span class=\"nt\">&lt;/path&gt;</span>\n$ ign gazebo -v 4 -r examples/worlds/log_record_resources.sdf --record --log-compress -log-overwrite\n[Wrn] [ServerPrivate.cc:229] --record-path is not specified on command line. <span class=\"nt\">&lt;path&gt;</span> is specified in SDF. Will record to <span class=\"nt\">&lt;path&gt;</span>. Console will be logged to [/home/master/.ignition/gazebo/log/2019-09-20T19:51:33.996055619]. Note: In Ignition-D, <span class=\"nt\">&lt;path&gt;</span> will be ignored, and all recordings will be written to default console log path if no path is specified on command line.\n[Msg] Overwriting existing file [/tmp/log/state.tlog]\n[Msg] Recording to log file [/tmp/log/state.tlog]\n...\n[Msg] Removing existing file [/tmp/log.zip].\n[Msg] Compressed log file and resources to [/tmp/log.zip].\nRemoving recorded directory [/tmp/log].\n</pre></div>\n\n\n<p>In Ignition-D, <code>&lt;path&gt;</code> will be permanently ignored. Recordings and console log will go to same default path.</p>\n<p>If <code>--record-path</code> is specified, then recording and console log will go to this path in Blueprint, Citadel, and Ignition-D.</p>\n<h2 id=\"markdown-header-future-work\">Future Work</h2>\n<p>Files are outputted in <code>/tmp/log</code> and <code>/tmp/log.zip</code> in this example. During record, the original path in <code>file://</code> is prepended with the specified path, e.g. <code>/tmp/log</code>. During playback, the specified path is prepended to the URIs in the SDF.</p>", "type": "rendered"}, "title": {"raw": "[Blueprint] Logging meshes and materials", "markup": "markdown", "html": "<p>[Blueprint] Logging meshes and materials</p>", "type": "rendered"}}, "type": "pullrequest", "description": "Depends on [ign-common PR 200](#!/ignitionrobotics/ign-common/pull-requests/200/log-resources/diff).\r\n\r\nPorts [this Gazebo PR](https://bitbucket.org/osrf/gazebo/pull-requests/2811/save-models-material-and-meshes-when/diff) to Ignition.\r\n\r\nImplements `--record-resources`, and `--log-compress` and `--log-overwrite` to support it.\r\n\r\nRecords resources \\(`--record-resources`\\), i.e. meshes and materials, to a directory under the specified log record directory. Optionally compresses \\(`--log-compress`\\) the whole directory, which contains the existing `.tlog` sqlite3 file and any resources, to a zip file. If directory or compressed file already exist, optionally overwrites \\(`--log-overwrite`\\).\r\n\r\nCorresponding SDF plugin parameters: `<record_resources>1</record_resources>`, `<compress>1</compress>.`If both command line and SDF parameters are specified, command line option overwrites SDF parameter. `--log-overwrite` is handled on command line only, outside of the plugin. If recording is only enabled from SDF and not from command line, then behavior is to always overwrite.\r\n\r\n## Usage:\r\n\r\n```\r\nign gazebo [...] --record-resources --log-overwrite --log-compress\r\n```\r\n\r\n## Test --record-resources:\r\n\r\n```\r\n$ ign gazebo -v 4 -r examples/worlds/log_record_resources.sdf --log-overwrite --record-path /tmp/log\r\n# (Re)move local downloaded Fuel copy of resources\r\n$ mv ~/.ignition/fuel ~/.ignition/fuel_bak\r\n# Play back from recorded resources\r\n$ ign gazebo -v 4 -r --playback /tmp/log\r\n```\r\n\r\nTested with `<include><uri>https://fuel...</uri></include>` and `<mesh><uri>file://...</uri></mesh>`. Paths specified by `model://` are not supported in Ignition yet, so this case in the code is not tested.\r\n\r\n## Test --log-overwrite and --log-compress:\r\n\r\nWhen recording to `path`, the compression file is implied to be `path.zip`. Both are checked for existence.\r\n\r\nNo `--log-overwrite` \\(default\\):\r\n\r\n```\r\n# This SDF specifies the equivalent of --record-path '/tmp/log'\r\n$ ign gazebo -v 4 -r examples/worlds/log_record_resources.sdf\r\n\r\n# Run it again. By default it will always overwrite, because overwrite is now taken care of in ign.cc\r\n$ ign gazebo -v 4 -r examples/worlds/log_record_resources.sdf\r\n[Msg] Overwriting existing file [/tmp/log/state.tlog]\r\n[Msg] Recording to log file [/tmp/log/state.tlog]\r\n```\r\n\r\n`--log-overwrite`, `/tmp/log` already exists:\r\n\r\n```\r\n$ ign gazebo -v 4 -r examples/worlds/log_record_resources.sdf --log-overwrite --record-path '/tmp/log'\r\n[Msg] Log path already exists on disk! Existing files will be overwritten.\r\n[Msg] Removing existing path [/tmp/log]\r\n...\r\n[Msg] Recording to log file [/tmp/log/state.tlog]\r\n...\r\n[Msg] Stopping recording\r\n```\r\n\r\n`--log-overwrite --log-compress`, `/tmp/log` exists, `/tmp/log.zip` does not exist:\r\n\r\n```\r\n$ ign gazebo -v 4 -r examples/worlds/log_record_resources.sdf --log-compress --log-overwrite --record-path '/tmp/log'\r\n[Msg] Log path already exists on disk! Existing files will be overwritten.\r\n[Msg] Removing existing path [/tmp/log]\r\n...\r\n[Msg] Recording to log file [/tmp/log/state.tlog]\r\n...\r\n[Msg] Compressed log file and resources to [/tmp/log.zip].\r\nRemoving recorded directory [/tmp/log].\r\n[Msg] Stopping recording\r\n```\r\n\r\n`--log-overwrite --log-compress`, `/tmp/log` does not exist, `/tmp/log.zip` exists:\r\n\r\n```\r\n$ ign gazebo -v 4 -r examples/worlds/log_record_resources.sdf --log-compress --log-overwrite --record-path '/tmp/log'\r\n[Wrn] [ign.cc:121] Compressed log path already exists on disk! Existing files will be overwritten.\r\n[Msg] Removing existing compressed file [/tmp/log.zip]\r\n...\r\n[Msg] Recording to log file [/tmp/log/state.tlog]\r\n...\r\n[Msg] Compressed log file and resources to [/tmp/log.zip].\r\nRemoving recorded directory [/tmp/log].\r\n[Msg] Stopping recording\r\n```\r\n\r\n`--log-overwrite` only, `/tmp/log.zip` exists, `/tmp/log` does not exist:\r\n\r\n```\r\n$ ign gazebo -v 4 -r examples/worlds/log_record_resources.sdf --log-overwrite --record-path '/tmp/log'\r\n[Msg] Removing existing compressed file [/tmp/log.zip]\r\n...\r\n[Msg] Recording to log file [/tmp/log/state.tlog]\r\n...\r\n[Msg] Stopping recording\r\n```\r\n\r\n`--log-compress` only, both `/tmp/log` and `/tmp/log.zip` already exist:\r\n\r\n```\r\n$ ign gazebo -v 4 -r examples/worlds/log_record_resources.sdf --log-compress --record-path '/tmp/log'\r\n[Wrn] [ign.cc:152] Log path already exists on disk! Recording instead to [/tmp/log(1)]\r\n[Wrn] [ign.cc:154] Compressed log path already exists on disk! Recording instead to [/tmp/log(1).zip]\r\n...\r\n[Msg] Recording to log file [/tmp/log(1)/state.tlog]\r\n...\r\n[Msg] Compressed log file and resources to [/tmp/log(1).zip].\r\nRemoving recorded directory [/tmp/log(1)].\r\n[Msg] Stopping recording\r\n$ ls /tmp\r\nlog\r\n'log(1).zip'\r\nlog.zip\r\n```\r\n\r\n`--log-compress` only, `/tmp/log` does not exist, `/tmp/log.zip` exists, `/tmp/log(1).zip` exists:\r\n\r\n```\r\n$ ign gazebo -v 4 -r examples/worlds/log_record_resources.sdf --log-compress --record-path '/tmp/log'\r\n[Wrn] [ign.cc:152] Log path already exists on disk! Recording instead to [/tmp/log(2)]\r\n[Wrn] [ign.cc:154] Compressed log path already exists on disk! Recording instead to [/tmp/log(2).zip]\r\n...\r\n[Msg] Recording to log file [/tmp/log(2)/state.tlog]\r\n...\r\n[Msg] Compressed log file and resources to [/tmp/log(2).zip].\r\nRemoving recorded directory [/tmp/log(2)].\r\n[Msg] Stopping recording\r\n```\r\n\r\n## Record Path vs. Console Log Path\r\n\r\nIn Blueprint and Citadel, if `--record` is specified without `--record-path`, and `<path>` exists in SDF, a warning is printed, and recording will go to `<path>`, while console log will go to the default timestamp path.\r\n\r\nAs in this example:\r\n\r\n```\r\n# SDF specifies <path>/tmp/log</path>\r\n$ ign gazebo -v 4 -r examples/worlds/log_record_resources.sdf --record --log-compress -log-overwrite\r\n[Wrn] [ServerPrivate.cc:229] --record-path is not specified on command line. <path> is specified in SDF. Will record to <path>. Console will be logged to [/home/master/.ignition/gazebo/log/2019-09-20T19:51:33.996055619]. Note: In Ignition-D, <path> will be ignored, and all recordings will be written to default console log path if no path is specified on command line.\r\n[Msg] Overwriting existing file [/tmp/log/state.tlog]\r\n[Msg] Recording to log file [/tmp/log/state.tlog]\r\n...\r\n[Msg] Removing existing file [/tmp/log.zip].\r\n[Msg] Compressed log file and resources to [/tmp/log.zip].\r\nRemoving recorded directory [/tmp/log].\r\n```\r\n\r\nIn Ignition-D, `<path>` will be permanently ignored. Recordings and console log will go to same default path.\r\n\r\nIf `--record-path` is specified, then recording and console log will go to this path in Blueprint, Citadel, and Ignition-D.\r\n\r\n## Future Work\r\n\r\nFiles are outputted in `/tmp/log` and `/tmp/log.zip` in this example. During record, the original path in `file://` is prepended with the specified path, e.g. `/tmp/log`. During playback, the specified path is prepended to the URIs in the SDF.", "links": {"decline": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-gazebo/pullrequests/397/decline"}, "diffstat": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-gazebo/diffstat/ignitionrobotics/ign-gazebo:0f217dd1f710%0D80ec42737b5a?from_pullrequest_id=397"}, "commits": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/397/commits.json"}, "self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/397.json"}, "comments": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/397/comments_page=1.json"}, "merge": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-gazebo/pullrequests/397/merge"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/397"}, "activity": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/397/activity.json"}, "diff": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-gazebo/diff/ignitionrobotics/ign-gazebo:0f217dd1f710%0D80ec42737b5a?from_pullrequest_id=397"}, "approve": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-gazebo/pullrequests/397/approve"}, "statuses": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/397/statuses_page=1.json"}}, "title": "[Blueprint] Logging meshes and materials", "close_source_branch": true, "reviewers": [{"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}], "id": 397, "destination": {"commit": {"hash": "80ec42737b5a", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/80ec42737b5a.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/80ec42737b5a"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "ign-gazebo2"}}, "created_on": "2019-07-25T17:43:28.091850+00:00", "summary": {"raw": "Depends on [ign-common PR 200](#!/ignitionrobotics/ign-common/pull-requests/200/log-resources/diff).\r\n\r\nPorts [this Gazebo PR](https://bitbucket.org/osrf/gazebo/pull-requests/2811/save-models-material-and-meshes-when/diff) to Ignition.\r\n\r\nImplements `--record-resources`, and `--log-compress` and `--log-overwrite` to support it.\r\n\r\nRecords resources \\(`--record-resources`\\), i.e. meshes and materials, to a directory under the specified log record directory. Optionally compresses \\(`--log-compress`\\) the whole directory, which contains the existing `.tlog` sqlite3 file and any resources, to a zip file. If directory or compressed file already exist, optionally overwrites \\(`--log-overwrite`\\).\r\n\r\nCorresponding SDF plugin parameters: `<record_resources>1</record_resources>`, `<compress>1</compress>.`If both command line and SDF parameters are specified, command line option overwrites SDF parameter. `--log-overwrite` is handled on command line only, outside of the plugin. If recording is only enabled from SDF and not from command line, then behavior is to always overwrite.\r\n\r\n## Usage:\r\n\r\n```\r\nign gazebo [...] --record-resources --log-overwrite --log-compress\r\n```\r\n\r\n## Test --record-resources:\r\n\r\n```\r\n$ ign gazebo -v 4 -r examples/worlds/log_record_resources.sdf --log-overwrite --record-path /tmp/log\r\n# (Re)move local downloaded Fuel copy of resources\r\n$ mv ~/.ignition/fuel ~/.ignition/fuel_bak\r\n# Play back from recorded resources\r\n$ ign gazebo -v 4 -r --playback /tmp/log\r\n```\r\n\r\nTested with `<include><uri>https://fuel...</uri></include>` and `<mesh><uri>file://...</uri></mesh>`. Paths specified by `model://` are not supported in Ignition yet, so this case in the code is not tested.\r\n\r\n## Test --log-overwrite and --log-compress:\r\n\r\nWhen recording to `path`, the compression file is implied to be `path.zip`. Both are checked for existence.\r\n\r\nNo `--log-overwrite` \\(default\\):\r\n\r\n```\r\n# This SDF specifies the equivalent of --record-path '/tmp/log'\r\n$ ign gazebo -v 4 -r examples/worlds/log_record_resources.sdf\r\n\r\n# Run it again. By default it will always overwrite, because overwrite is now taken care of in ign.cc\r\n$ ign gazebo -v 4 -r examples/worlds/log_record_resources.sdf\r\n[Msg] Overwriting existing file [/tmp/log/state.tlog]\r\n[Msg] Recording to log file [/tmp/log/state.tlog]\r\n```\r\n\r\n`--log-overwrite`, `/tmp/log` already exists:\r\n\r\n```\r\n$ ign gazebo -v 4 -r examples/worlds/log_record_resources.sdf --log-overwrite --record-path '/tmp/log'\r\n[Msg] Log path already exists on disk! Existing files will be overwritten.\r\n[Msg] Removing existing path [/tmp/log]\r\n...\r\n[Msg] Recording to log file [/tmp/log/state.tlog]\r\n...\r\n[Msg] Stopping recording\r\n```\r\n\r\n`--log-overwrite --log-compress`, `/tmp/log` exists, `/tmp/log.zip` does not exist:\r\n\r\n```\r\n$ ign gazebo -v 4 -r examples/worlds/log_record_resources.sdf --log-compress --log-overwrite --record-path '/tmp/log'\r\n[Msg] Log path already exists on disk! Existing files will be overwritten.\r\n[Msg] Removing existing path [/tmp/log]\r\n...\r\n[Msg] Recording to log file [/tmp/log/state.tlog]\r\n...\r\n[Msg] Compressed log file and resources to [/tmp/log.zip].\r\nRemoving recorded directory [/tmp/log].\r\n[Msg] Stopping recording\r\n```\r\n\r\n`--log-overwrite --log-compress`, `/tmp/log` does not exist, `/tmp/log.zip` exists:\r\n\r\n```\r\n$ ign gazebo -v 4 -r examples/worlds/log_record_resources.sdf --log-compress --log-overwrite --record-path '/tmp/log'\r\n[Wrn] [ign.cc:121] Compressed log path already exists on disk! Existing files will be overwritten.\r\n[Msg] Removing existing compressed file [/tmp/log.zip]\r\n...\r\n[Msg] Recording to log file [/tmp/log/state.tlog]\r\n...\r\n[Msg] Compressed log file and resources to [/tmp/log.zip].\r\nRemoving recorded directory [/tmp/log].\r\n[Msg] Stopping recording\r\n```\r\n\r\n`--log-overwrite` only, `/tmp/log.zip` exists, `/tmp/log` does not exist:\r\n\r\n```\r\n$ ign gazebo -v 4 -r examples/worlds/log_record_resources.sdf --log-overwrite --record-path '/tmp/log'\r\n[Msg] Removing existing compressed file [/tmp/log.zip]\r\n...\r\n[Msg] Recording to log file [/tmp/log/state.tlog]\r\n...\r\n[Msg] Stopping recording\r\n```\r\n\r\n`--log-compress` only, both `/tmp/log` and `/tmp/log.zip` already exist:\r\n\r\n```\r\n$ ign gazebo -v 4 -r examples/worlds/log_record_resources.sdf --log-compress --record-path '/tmp/log'\r\n[Wrn] [ign.cc:152] Log path already exists on disk! Recording instead to [/tmp/log(1)]\r\n[Wrn] [ign.cc:154] Compressed log path already exists on disk! Recording instead to [/tmp/log(1).zip]\r\n...\r\n[Msg] Recording to log file [/tmp/log(1)/state.tlog]\r\n...\r\n[Msg] Compressed log file and resources to [/tmp/log(1).zip].\r\nRemoving recorded directory [/tmp/log(1)].\r\n[Msg] Stopping recording\r\n$ ls /tmp\r\nlog\r\n'log(1).zip'\r\nlog.zip\r\n```\r\n\r\n`--log-compress` only, `/tmp/log` does not exist, `/tmp/log.zip` exists, `/tmp/log(1).zip` exists:\r\n\r\n```\r\n$ ign gazebo -v 4 -r examples/worlds/log_record_resources.sdf --log-compress --record-path '/tmp/log'\r\n[Wrn] [ign.cc:152] Log path already exists on disk! Recording instead to [/tmp/log(2)]\r\n[Wrn] [ign.cc:154] Compressed log path already exists on disk! Recording instead to [/tmp/log(2).zip]\r\n...\r\n[Msg] Recording to log file [/tmp/log(2)/state.tlog]\r\n...\r\n[Msg] Compressed log file and resources to [/tmp/log(2).zip].\r\nRemoving recorded directory [/tmp/log(2)].\r\n[Msg] Stopping recording\r\n```\r\n\r\n## Record Path vs. Console Log Path\r\n\r\nIn Blueprint and Citadel, if `--record` is specified without `--record-path`, and `<path>` exists in SDF, a warning is printed, and recording will go to `<path>`, while console log will go to the default timestamp path.\r\n\r\nAs in this example:\r\n\r\n```\r\n# SDF specifies <path>/tmp/log</path>\r\n$ ign gazebo -v 4 -r examples/worlds/log_record_resources.sdf --record --log-compress -log-overwrite\r\n[Wrn] [ServerPrivate.cc:229] --record-path is not specified on command line. <path> is specified in SDF. Will record to <path>. Console will be logged to [/home/master/.ignition/gazebo/log/2019-09-20T19:51:33.996055619]. Note: In Ignition-D, <path> will be ignored, and all recordings will be written to default console log path if no path is specified on command line.\r\n[Msg] Overwriting existing file [/tmp/log/state.tlog]\r\n[Msg] Recording to log file [/tmp/log/state.tlog]\r\n...\r\n[Msg] Removing existing file [/tmp/log.zip].\r\n[Msg] Compressed log file and resources to [/tmp/log.zip].\r\nRemoving recorded directory [/tmp/log].\r\n```\r\n\r\nIn Ignition-D, `<path>` will be permanently ignored. Recordings and console log will go to same default path.\r\n\r\nIf `--record-path` is specified, then recording and console log will go to this path in Blueprint, Citadel, and Ignition-D.\r\n\r\n## Future Work\r\n\r\nFiles are outputted in `/tmp/log` and `/tmp/log.zip` in this example. During record, the original path in `file://` is prepended with the specified path, e.g. `/tmp/log`. During playback, the specified path is prepended to the URIs in the SDF.", "markup": "markdown", "html": "<p>Depends on <a data-is-external-link=\"true\" href=\"#!/ignitionrobotics/ign-common/pull-requests/200/log-resources/diff\" rel=\"nofollow\">ign-common PR 200</a>.</p>\n<p>Ports <a data-is-external-link=\"true\" href=\"https://bitbucket.org/osrf/gazebo/pull-requests/2811/save-models-material-and-meshes-when/diff\" rel=\"nofollow\">this Gazebo PR</a> to Ignition.</p>\n<p>Implements <code>--record-resources</code>, and <code>--log-compress</code> and <code>--log-overwrite</code> to support it.</p>\n<p>Records resources (<code>--record-resources</code>), i.e. meshes and materials, to a directory under the specified log record directory. Optionally compresses (<code>--log-compress</code>) the whole directory, which contains the existing <code>.tlog</code> sqlite3 file and any resources, to a zip file. If directory or compressed file already exist, optionally overwrites (<code>--log-overwrite</code>).</p>\n<p>Corresponding SDF plugin parameters: <code>&lt;record_resources&gt;1&lt;/record_resources&gt;</code>, <code>&lt;compress&gt;1&lt;/compress&gt;.</code>If both command line and SDF parameters are specified, command line option overwrites SDF parameter. <code>--log-overwrite</code> is handled on command line only, outside of the plugin. If recording is only enabled from SDF and not from command line, then behavior is to always overwrite.</p>\n<h2 id=\"markdown-header-usage\">Usage:</h2>\n<div class=\"codehilite\"><pre><span></span>ign gazebo [...] --record-resources --log-overwrite --log-compress\n</pre></div>\n\n\n<h2 id=\"markdown-header-test-record-resources\">Test --record-resources:</h2>\n<div class=\"codehilite\"><pre><span></span>$ ign gazebo -v <span class=\"m\">4</span> -r examples/worlds/log_record_resources.sdf --log-overwrite --record-path /tmp/log\n<span class=\"c1\"># (Re)move local downloaded Fuel copy of resources</span>\n$ mv ~/.ignition/fuel ~/.ignition/fuel_bak\n<span class=\"c1\"># Play back from recorded resources</span>\n$ ign gazebo -v <span class=\"m\">4</span> -r --playback /tmp/log\n</pre></div>\n\n\n<p>Tested with <code>&lt;include&gt;&lt;uri&gt;https://fuel...&lt;/uri&gt;&lt;/include&gt;</code> and <code>&lt;mesh&gt;&lt;uri&gt;file://...&lt;/uri&gt;&lt;/mesh&gt;</code>. Paths specified by <code>model://</code> are not supported in Ignition yet, so this case in the code is not tested.</p>\n<h2 id=\"markdown-header-test-log-overwrite-and-log-compress\">Test --log-overwrite and --log-compress:</h2>\n<p>When recording to <code>path</code>, the compression file is implied to be <code>path.zip</code>. Both are checked for existence.</p>\n<p>No <code>--log-overwrite</code> (default):</p>\n<div class=\"codehilite\"><pre><span></span># This SDF specifies the equivalent of --record-path &#39;/tmp/log&#39;\n$ ign gazebo -v 4 -r examples/worlds/log_record_resources.sdf\n\n# Run it again. By default it will always overwrite, because overwrite is now taken care of in ign.cc\n$ ign gazebo -v 4 -r examples/worlds/log_record_resources.sdf\n[Msg] Overwriting existing file [/tmp/log/state.tlog]\n[Msg] Recording to log file [/tmp/log/state.tlog]\n</pre></div>\n\n\n<p><code>--log-overwrite</code>, <code>/tmp/log</code> already exists:</p>\n<div class=\"codehilite\"><pre><span></span>$ ign gazebo -v <span class=\"m\">4</span> -r examples/worlds/log_record_resources.sdf --log-overwrite --record-path <span class=\"s1\">&#39;/tmp/log&#39;</span>\n<span class=\"o\">[</span>Msg<span class=\"o\">]</span> Log path already exists on disk! Existing files will be overwritten.\n<span class=\"o\">[</span>Msg<span class=\"o\">]</span> Removing existing path <span class=\"o\">[</span>/tmp/log<span class=\"o\">]</span>\n...\n<span class=\"o\">[</span>Msg<span class=\"o\">]</span> Recording to log file <span class=\"o\">[</span>/tmp/log/state.tlog<span class=\"o\">]</span>\n...\n<span class=\"o\">[</span>Msg<span class=\"o\">]</span> Stopping recording\n</pre></div>\n\n\n<p><code>--log-overwrite --log-compress</code>, <code>/tmp/log</code> exists, <code>/tmp/log.zip</code> does not exist:</p>\n<div class=\"codehilite\"><pre><span></span>$ ign gazebo -v <span class=\"m\">4</span> -r examples/worlds/log_record_resources.sdf --log-compress --log-overwrite --record-path <span class=\"s1\">&#39;/tmp/log&#39;</span>\n<span class=\"o\">[</span>Msg<span class=\"o\">]</span> Log path already exists on disk! Existing files will be overwritten.\n<span class=\"o\">[</span>Msg<span class=\"o\">]</span> Removing existing path <span class=\"o\">[</span>/tmp/log<span class=\"o\">]</span>\n...\n<span class=\"o\">[</span>Msg<span class=\"o\">]</span> Recording to log file <span class=\"o\">[</span>/tmp/log/state.tlog<span class=\"o\">]</span>\n...\n<span class=\"o\">[</span>Msg<span class=\"o\">]</span> Compressed log file and resources to <span class=\"o\">[</span>/tmp/log.zip<span class=\"o\">]</span>.\nRemoving recorded directory <span class=\"o\">[</span>/tmp/log<span class=\"o\">]</span>.\n<span class=\"o\">[</span>Msg<span class=\"o\">]</span> Stopping recording\n</pre></div>\n\n\n<p><code>--log-overwrite --log-compress</code>, <code>/tmp/log</code> does not exist, <code>/tmp/log.zip</code> exists:</p>\n<div class=\"codehilite\"><pre><span></span>$ ign gazebo -v <span class=\"m\">4</span> -r examples/worlds/log_record_resources.sdf --log-compress --log-overwrite --record-path <span class=\"s1\">&#39;/tmp/log&#39;</span>\n<span class=\"o\">[</span>Wrn<span class=\"o\">]</span> <span class=\"o\">[</span>ign.cc:121<span class=\"o\">]</span> Compressed log path already exists on disk! Existing files will be overwritten.\n<span class=\"o\">[</span>Msg<span class=\"o\">]</span> Removing existing compressed file <span class=\"o\">[</span>/tmp/log.zip<span class=\"o\">]</span>\n...\n<span class=\"o\">[</span>Msg<span class=\"o\">]</span> Recording to log file <span class=\"o\">[</span>/tmp/log/state.tlog<span class=\"o\">]</span>\n...\n<span class=\"o\">[</span>Msg<span class=\"o\">]</span> Compressed log file and resources to <span class=\"o\">[</span>/tmp/log.zip<span class=\"o\">]</span>.\nRemoving recorded directory <span class=\"o\">[</span>/tmp/log<span class=\"o\">]</span>.\n<span class=\"o\">[</span>Msg<span class=\"o\">]</span> Stopping recording\n</pre></div>\n\n\n<p><code>--log-overwrite</code> only, <code>/tmp/log.zip</code> exists, <code>/tmp/log</code> does not exist:</p>\n<div class=\"codehilite\"><pre><span></span>$ ign gazebo -v <span class=\"m\">4</span> -r examples/worlds/log_record_resources.sdf --log-overwrite --record-path <span class=\"s1\">&#39;/tmp/log&#39;</span>\n<span class=\"o\">[</span>Msg<span class=\"o\">]</span> Removing existing compressed file <span class=\"o\">[</span>/tmp/log.zip<span class=\"o\">]</span>\n...\n<span class=\"o\">[</span>Msg<span class=\"o\">]</span> Recording to log file <span class=\"o\">[</span>/tmp/log/state.tlog<span class=\"o\">]</span>\n...\n<span class=\"o\">[</span>Msg<span class=\"o\">]</span> Stopping recording\n</pre></div>\n\n\n<p><code>--log-compress</code> only, both <code>/tmp/log</code> and <code>/tmp/log.zip</code> already exist:</p>\n<div class=\"codehilite\"><pre><span></span>$ ign gazebo -v <span class=\"m\">4</span> -r examples/worlds/log_record_resources.sdf --log-compress --record-path <span class=\"s1\">&#39;/tmp/log&#39;</span>\n<span class=\"o\">[</span>Wrn<span class=\"o\">]</span> <span class=\"o\">[</span>ign.cc:152<span class=\"o\">]</span> Log path already exists on disk! Recording instead to <span class=\"o\">[</span>/tmp/log<span class=\"o\">(</span><span class=\"m\">1</span><span class=\"o\">)]</span>\n<span class=\"o\">[</span>Wrn<span class=\"o\">]</span> <span class=\"o\">[</span>ign.cc:154<span class=\"o\">]</span> Compressed log path already exists on disk! Recording instead to <span class=\"o\">[</span>/tmp/log<span class=\"o\">(</span><span class=\"m\">1</span><span class=\"o\">)</span>.zip<span class=\"o\">]</span>\n...\n<span class=\"o\">[</span>Msg<span class=\"o\">]</span> Recording to log file <span class=\"o\">[</span>/tmp/log<span class=\"o\">(</span><span class=\"m\">1</span><span class=\"o\">)</span>/state.tlog<span class=\"o\">]</span>\n...\n<span class=\"o\">[</span>Msg<span class=\"o\">]</span> Compressed log file and resources to <span class=\"o\">[</span>/tmp/log<span class=\"o\">(</span><span class=\"m\">1</span><span class=\"o\">)</span>.zip<span class=\"o\">]</span>.\nRemoving recorded directory <span class=\"o\">[</span>/tmp/log<span class=\"o\">(</span><span class=\"m\">1</span><span class=\"o\">)]</span>.\n<span class=\"o\">[</span>Msg<span class=\"o\">]</span> Stopping recording\n$ ls /tmp\nlog\n<span class=\"s1\">&#39;log(1).zip&#39;</span>\nlog.zip\n</pre></div>\n\n\n<p><code>--log-compress</code> only, <code>/tmp/log</code> does not exist, <code>/tmp/log.zip</code> exists, <code>/tmp/log(1).zip</code> exists:</p>\n<div class=\"codehilite\"><pre><span></span>$ ign gazebo -v <span class=\"m\">4</span> -r examples/worlds/log_record_resources.sdf --log-compress --record-path <span class=\"s1\">&#39;/tmp/log&#39;</span>\n<span class=\"o\">[</span>Wrn<span class=\"o\">]</span> <span class=\"o\">[</span>ign.cc:152<span class=\"o\">]</span> Log path already exists on disk! Recording instead to <span class=\"o\">[</span>/tmp/log<span class=\"o\">(</span><span class=\"m\">2</span><span class=\"o\">)]</span>\n<span class=\"o\">[</span>Wrn<span class=\"o\">]</span> <span class=\"o\">[</span>ign.cc:154<span class=\"o\">]</span> Compressed log path already exists on disk! Recording instead to <span class=\"o\">[</span>/tmp/log<span class=\"o\">(</span><span class=\"m\">2</span><span class=\"o\">)</span>.zip<span class=\"o\">]</span>\n...\n<span class=\"o\">[</span>Msg<span class=\"o\">]</span> Recording to log file <span class=\"o\">[</span>/tmp/log<span class=\"o\">(</span><span class=\"m\">2</span><span class=\"o\">)</span>/state.tlog<span class=\"o\">]</span>\n...\n<span class=\"o\">[</span>Msg<span class=\"o\">]</span> Compressed log file and resources to <span class=\"o\">[</span>/tmp/log<span class=\"o\">(</span><span class=\"m\">2</span><span class=\"o\">)</span>.zip<span class=\"o\">]</span>.\nRemoving recorded directory <span class=\"o\">[</span>/tmp/log<span class=\"o\">(</span><span class=\"m\">2</span><span class=\"o\">)]</span>.\n<span class=\"o\">[</span>Msg<span class=\"o\">]</span> Stopping recording\n</pre></div>\n\n\n<h2 id=\"markdown-header-record-path-vs-console-log-path\">Record Path vs. Console Log Path</h2>\n<p>In Blueprint and Citadel, if <code>--record</code> is specified without <code>--record-path</code>, and <code>&lt;path&gt;</code> exists in SDF, a warning is printed, and recording will go to <code>&lt;path&gt;</code>, while console log will go to the default timestamp path.</p>\n<p>As in this example:</p>\n<div class=\"codehilite\"><pre><span></span># SDF specifies <span class=\"nt\">&lt;path&gt;</span>/tmp/log<span class=\"nt\">&lt;/path&gt;</span>\n$ ign gazebo -v 4 -r examples/worlds/log_record_resources.sdf --record --log-compress -log-overwrite\n[Wrn] [ServerPrivate.cc:229] --record-path is not specified on command line. <span class=\"nt\">&lt;path&gt;</span> is specified in SDF. Will record to <span class=\"nt\">&lt;path&gt;</span>. Console will be logged to [/home/master/.ignition/gazebo/log/2019-09-20T19:51:33.996055619]. Note: In Ignition-D, <span class=\"nt\">&lt;path&gt;</span> will be ignored, and all recordings will be written to default console log path if no path is specified on command line.\n[Msg] Overwriting existing file [/tmp/log/state.tlog]\n[Msg] Recording to log file [/tmp/log/state.tlog]\n...\n[Msg] Removing existing file [/tmp/log.zip].\n[Msg] Compressed log file and resources to [/tmp/log.zip].\nRemoving recorded directory [/tmp/log].\n</pre></div>\n\n\n<p>In Ignition-D, <code>&lt;path&gt;</code> will be permanently ignored. Recordings and console log will go to same default path.</p>\n<p>If <code>--record-path</code> is specified, then recording and console log will go to this path in Blueprint, Citadel, and Ignition-D.</p>\n<h2 id=\"markdown-header-future-work\">Future Work</h2>\n<p>Files are outputted in <code>/tmp/log</code> and <code>/tmp/log.zip</code> in this example. During record, the original path in <code>file://</code> is prepended with the specified path, e.g. <code>/tmp/log</code>. During playback, the specified path is prepended to the URIs in the SDF.</p>", "type": "rendered"}, "source": {"commit": {"hash": "b2f3c65a8610", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/b2f3c65a8610.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/b2f3c65a8610"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "log_resources"}}, "comment_count": 93, "state": "MERGED", "task_count": 0, "participants": [{"role": "PARTICIPANT", "participated_on": "2020-03-20T22:37:34.978582+00:00", "type": "participant", "approved": false, "user": {"display_name": "Mabel Zhang", "uuid": "{4b0e38fb-bf50-45c0-a496-61147518b2bf}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D"}, "html": {"href": "https://bitbucket.org/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:ceb5942c-6843-408c-8550-3ce4899d299b/4d48e5ea-cf28-4fa7-9715-8fc9e315d831/128"}}, "nickname": "mabelmzhang", "type": "user", "account_id": "557058:ceb5942c-6843-408c-8550-3ce4899d299b"}}, {"role": "REVIEWER", "participated_on": "2019-10-22T18:55:01.224002+00:00", "type": "participant", "approved": true, "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}}, {"role": "PARTICIPANT", "participated_on": "2019-09-18T23:33:59.417152+00:00", "type": "participant", "approved": false, "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}}, {"role": "REVIEWER", "participated_on": "2020-03-21T00:45:09.081483+00:00", "type": "participant", "approved": true, "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}}, {"role": "PARTICIPANT", "participated_on": "2020-03-10T17:10:57.200594+00:00", "type": "participant", "approved": false, "user": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}}], "reason": "", "updated_on": "2020-03-21T01:23:45.820242+00:00", "author": {"display_name": "Mabel Zhang", "uuid": "{4b0e38fb-bf50-45c0-a496-61147518b2bf}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D"}, "html": {"href": "https://bitbucket.org/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:ceb5942c-6843-408c-8550-3ce4899d299b/4d48e5ea-cf28-4fa7-9715-8fc9e315d831/128"}}, "nickname": "mabelmzhang", "type": "user", "account_id": "557058:ceb5942c-6843-408c-8550-3ce4899d299b"}, "merge_commit": {"hash": "0f217dd1f710", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/0f217dd1f710.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/0f217dd1f710"}}}, "closed_by": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}}