{"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/273/comments/100887684.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-gazebo/diff/ignitionrobotics/ign-gazebo:455e13206d8b..fe55442346a3?path=src%2Fsystems%2Fcontact%2FContact.cc"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/273/_/diff#comment-100887684"}}, "parent": {"id": 100886664, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/273/comments/100886664.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/273/_/diff#comment-100886664"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 273, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/273.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/273"}}, "title": "[Acropolis] Port Wind plugin"}, "content": {"raw": "Oh interesting , it's because it's being moved below. This is the warning on default, which is using `const &`:\n\n~~~\n/home/developer/ws/src/ign-gazebo/src/systems/contact/Contact.cc:115:19: warning: std::move of the const variable '_topic' has no effect; remove std::move() or make the variable non-const [performance-move-const-arg]\n    this->topic = std::move(_topic);\n                  ^~~~~~~~~~~~~~~~~~\n~~~\n\nWouldn't using `const &` and removing the `std::move` result in the same number of copies as passing by non-const value and then moving?", "markup": "markdown", "html": "<p>Oh interesting , it's because it's being moved below. This is the warning on default, which is using <code>const &amp;</code>:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"o\">/</span><span class=\"nt\">home</span><span class=\"o\">/</span><span class=\"nt\">developer</span><span class=\"o\">/</span><span class=\"nt\">ws</span><span class=\"o\">/</span><span class=\"nt\">src</span><span class=\"o\">/</span><span class=\"nt\">ign-gazebo</span><span class=\"o\">/</span><span class=\"nt\">src</span><span class=\"o\">/</span><span class=\"nt\">systems</span><span class=\"o\">/</span><span class=\"nt\">contact</span><span class=\"o\">/</span><span class=\"nt\">Contact</span><span class=\"p\">.</span><span class=\"nc\">cc</span><span class=\"p\">:</span><span class=\"nd\">115</span><span class=\"p\">:</span><span class=\"nd\">19</span><span class=\"o\">:</span> <span class=\"nt\">warning</span><span class=\"o\">:</span> <span class=\"nt\">std</span><span class=\"p\">::</span><span class=\"nd\">move</span> <span class=\"nt\">of</span> <span class=\"nt\">the</span> <span class=\"nt\">const</span> <span class=\"nt\">variable</span> <span class=\"s1\">&#39;_topic&#39;</span> <span class=\"nt\">has</span> <span class=\"nt\">no</span> <span class=\"nt\">effect</span><span class=\"o\">;</span> <span class=\"nt\">remove</span> <span class=\"nt\">std</span><span class=\"p\">::</span><span class=\"nd\">move</span><span class=\"o\">()</span> <span class=\"nt\">or</span> <span class=\"nt\">make</span> <span class=\"nt\">the</span> <span class=\"nt\">variable</span> <span class=\"nt\">non-const</span> <span class=\"cp\">[</span><span class=\"nx\">performance</span><span class=\"na\">-move-const-arg</span><span class=\"cp\">]</span>\n    <span class=\"nt\">this-</span><span class=\"o\">&gt;</span><span class=\"nt\">topic</span> <span class=\"o\">=</span> <span class=\"nt\">std</span><span class=\"p\">::</span><span class=\"nd\">move</span><span class=\"o\">(</span><span class=\"nt\">_topic</span><span class=\"o\">);</span>\n                  <span class=\"o\">^~~~~~~~~~~~~~~~~~</span>\n</pre></div>\n\n\n<p>Wouldn't using <code>const &amp;</code> and removing the <code>std::move</code> result in the same number of copies as passing by non-const value and then moving?</p>", "type": "rendered"}, "created_on": "2019-05-03T19:09:36.187896+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {"to": null, "from": 103, "outdated": true, "path": "src/systems/contact/Contact.cc"}, "updated_on": "2019-05-03T19:09:57.522218+00:00", "type": "pullrequest_comment", "id": 100887684}