{"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/246/comments/97512928.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/246/_/diff#comment-97512928"}}, "parent": {"id": 97490837, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/246/comments/97490837.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/246/_/diff#comment-97490837"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 246, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/246.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/246"}}, "title": "Add JointController system"}, "content": {"raw": "> I would expect its UpdatePhysics to be called after the callbacks of all other systems before its Step (in order to get all the components that system might have addeed in the ECM)\n\nThe current recommendation is that only physics (or things like log playback) should use the `Update` callback. All other systems should use the `PreUpdate` and `PostUpdate` callbacks according to whether they want to affect the current physics iteration or just read its final results.\n\n> I still find confusing to understand the order of execution of the systems\n\nRight now we don't guarantee the order of execution, we hope to improve this by Blueprint. The goal is to have all systems being updated in parallel, so they shouldn't depend on each-other's results within the same `[Pre/Post]Update` callback. Once all systems have run a callback, the ECM will resolve conflicts according to the systems' priorities. We're considering either:\n\n* declaring a priority for each system at runtime (much like CSS's z-index, so they would be a group integers that make sense when used together), or\n* each system declaring its dependencies on other systems, forming a dependency tree\n\n", "markup": "markdown", "html": "<blockquote>\n<p>I would expect its UpdatePhysics to be called after the callbacks of all other systems before its Step (in order to get all the components that system might have addeed in the ECM)</p>\n</blockquote>\n<p>The current recommendation is that only physics (or things like log playback) should use the <code>Update</code> callback. All other systems should use the <code>PreUpdate</code> and <code>PostUpdate</code> callbacks according to whether they want to affect the current physics iteration or just read its final results.</p>\n<blockquote>\n<p>I still find confusing to understand the order of execution of the systems</p>\n</blockquote>\n<p>Right now we don't guarantee the order of execution, we hope to improve this by Blueprint. The goal is to have all systems being updated in parallel, so they shouldn't depend on each-other's results within the same <code>[Pre/Post]Update</code> callback. Once all systems have run a callback, the ECM will resolve conflicts according to the systems' priorities. We're considering either:</p>\n<ul>\n<li>declaring a priority for each system at runtime (much like CSS's z-index, so they would be a group integers that make sense when used together), or</li>\n<li>each system declaring its dependencies on other systems, forming a dependency tree</li>\n</ul>", "type": "rendered"}, "created_on": "2019-04-03T21:44:41.014659+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2019-04-03T21:44:41.023542+00:00", "type": "pullrequest_comment", "id": 97512928}