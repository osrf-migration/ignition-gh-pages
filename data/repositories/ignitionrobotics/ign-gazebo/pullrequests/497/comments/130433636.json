{"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/497/comments/130433636.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-gazebo/diff/ignitionrobotics/ign-gazebo:8fe80113d462..426e89205223?path=test%2Fintegration%2Flog_system.cc"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/497/_/diff#comment-130433636"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 497, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/497.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/497"}}, "title": "Log record overwrite"}, "content": {"raw": "It's usually better to prevent tests from writing to files outside the test directory, so it's easy for the user to wipe out all the test files and there's no confusion about what files were generated due to common use and due to testing. Therefore, how about changing the `$HOME` variable for the test? Something like\n\n`setenv(IGN_HOMEDIR, this->logsDir)`\n\nWe just need to remember to reset the variable to its original value in case other tests rely on it.\n\nIn fact, I think we should do this to the `ign` tests, so we prevent `server_console.log` from being written to a public location every time. I'll work on this on a separate PR.", "markup": "markdown", "html": "<p>It's usually better to prevent tests from writing to files outside the test directory, so it's easy for the user to wipe out all the test files and there's no confusion about what files were generated due to common use and due to testing. Therefore, how about changing the <code>$HOME</code> variable for the test? Something like</p>\n<p><code>setenv(IGN_HOMEDIR, this-&gt;logsDir)</code></p>\n<p>We just need to remember to reset the variable to its original value in case other tests rely on it.</p>\n<p>In fact, I think we should do this to the <code>ign</code> tests, so we prevent <code>server_console.log</code> from being written to a public location every time. I'll work on this on a separate PR.</p>", "type": "rendered"}, "created_on": "2020-01-03T18:32:52.429514+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {"to": 200, "from": null, "outdated": true, "path": "test/integration/log_system.cc"}, "updated_on": "2020-01-03T18:32:52.435669+00:00", "type": "pullrequest_comment", "id": 130433636}