{"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/5/comments/61185207.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-gazebo/diff/ignitionrobotics/ign-gazebo:440315cbf401..33c66560ff24?path=src%2FSigHandler_TEST.cc"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/5/_/diff#comment-61185207"}}, "parent": {"id": 61181591, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/5/comments/61181591.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/5/_/diff#comment-61181591"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 5, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/5.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/5"}}, "title": "Server"}, "content": {"raw": "The following works for me on Xenial and increases the test coverage, is the problem related to other OSs?\n\n~~~\ndiff -r 440315cbf401 src/SignalHandler_TEST.cc\n--- a/src/SignalHandler_TEST.cc\tTue Apr 10 11:28:05 2018 -0700\n+++ b/src/SignalHandler_TEST.cc\tTue Apr 10 15:54:59 2018 -0300\n@@ -16,6 +16,7 @@\n */\n \n #include \"SignalHandler.hh\"\n+#include <signal.h>\n #include <gtest/gtest.h>\n \n using namespace ignition;\n@@ -29,3 +30,20 @@\n   EXPECT_TRUE(handler1.Initialized());\n   EXPECT_TRUE(handler2.Initialized());\n }\n+\n+/////////////////////////////////////////////////\n+TEST(SignalHandler, Callback)\n+{\n+  bool called{false};\n+\n+  auto cb = [&called](int)\n+  {\n+    called = true;\n+  };\n+\n+  gazebo::SignalHandler handler;\n+  handler.AddCallback(cb);\n+\n+  raise(SIGINT);\n+  EXPECT_TRUE(called);\n+}\n~~~", "markup": "markdown", "html": "<p>The following works for me on Xenial and increases the test coverage, is the problem related to other OSs?</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"gh\">diff -r 440315cbf401 src/SignalHandler_TEST.cc</span>\n<span class=\"gd\">--- a/src/SignalHandler_TEST.cc Tue Apr 10 11:28:05 2018 -0700</span>\n<span class=\"gi\">+++ b/src/SignalHandler_TEST.cc Tue Apr 10 15:54:59 2018 -0300</span>\n<span class=\"gu\">@@ -16,6 +16,7 @@</span>\n */\n\n #include &quot;SignalHandler.hh&quot;\n<span class=\"gi\">+#include &lt;signal.h&gt;</span>\n #include &lt;gtest/gtest.h&gt;\n\n using namespace ignition;\n<span class=\"gu\">@@ -29,3 +30,20 @@</span>\n   EXPECT_TRUE(handler1.Initialized());\n   EXPECT_TRUE(handler2.Initialized());\n }\n<span class=\"gi\">+</span>\n<span class=\"gi\">+/////////////////////////////////////////////////</span>\n<span class=\"gi\">+TEST(SignalHandler, Callback)</span>\n<span class=\"gi\">+{</span>\n<span class=\"gi\">+  bool called{false};</span>\n<span class=\"gi\">+</span>\n<span class=\"gi\">+  auto cb = [&amp;called](int)</span>\n<span class=\"gi\">+  {</span>\n<span class=\"gi\">+    called = true;</span>\n<span class=\"gi\">+  };</span>\n<span class=\"gi\">+</span>\n<span class=\"gi\">+  gazebo::SignalHandler handler;</span>\n<span class=\"gi\">+  handler.AddCallback(cb);</span>\n<span class=\"gi\">+</span>\n<span class=\"gi\">+  raise(SIGINT);</span>\n<span class=\"gi\">+  EXPECT_TRUE(called);</span>\n<span class=\"gi\">+}</span>\n</pre></div>", "type": "rendered"}, "created_on": "2018-04-10T18:58:11.948899+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {"to": null, "from": null, "outdated": false, "path": "src/SigHandler_TEST.cc"}, "updated_on": "2018-04-10T18:58:11.952865+00:00", "type": "pullrequest_comment", "id": 61185207}