{"rendered": {"description": {"raw": "This PR adds logging plugin for recording and playback.\r\n\r\nRecording uses ign-transport messages, currently only poses are recorded \\(\\`/world/default/pose/info\\` topic\\).\r\n\r\n* Currently SDF file is dumped to a separate text file. Later, this will need to be published on another ign-transport topic, to be recorded together with the serialized ECM.\r\n\r\nPlayback loads the `.tlog` file using ign-transport `Log.hh`. When the timestamp from world startup reaches the recorded timestamp minus recording startup, the current model poses are overwritten by the recorded ones.\r\n\r\n* Currently only `Model` poses are played back, not `Link`, because for links with the same name but belonging to different models, there\u2019s no way from the ign-transport messages to tell which model the link belonged to.  \r\n  This should be resolved once we replace the pose topic with the topic with serialized ECM.\r\n\r\nExample SDF files and a keyboard example for controlling the two vehicles are included for testing out the plugins.\r\n\r\n## Testing\r\n\r\n### Recording\r\n\r\n`cd ign-gazebo/examples/standalone/keyboard/build`\r\n\r\n`./keyboard ../keyboard.sdf`\r\n\r\n`cd ign-gazebo/examples/worlds`\r\n\r\n`ign-gazebo -v 4 -f log_record.sdf -r`\r\n\r\nUse arrow keys and ASDW to move the vehicles somewhere.\r\n\r\n### Playback\r\n\r\n`ign-gazebo -f empty.sdf -v 4`\r\n\r\nPhysics must be off.\r\n\r\nFixed. **~~Intermittent bug~~**~~: Sometimes nothing is loaded into the world. Might have to do with how the SDF is loaded? Currently it's loaded using these two lines in~~ `Configure()`~~:~~\r\n\r\n`ignition::gazebo::SdfEntityCreator creator = ignition::gazebo::SdfEntityCreator(_ecm, _eventMgr);`  \r\n`creator.CreateEntities(sdf_world);`\r\n\r\n~~Also tried putting~~ `CreateEntities()` ~~in~~ `PreUpdate()` ~~instead of~~ `Configure()`~~, in case GUI might see them as new entities. Issue persists.~~\r\n\r\n## Next steps\r\n\r\nUpon PR #184 completion, replace the topic used in recording and playback with the topic with serialized ECM, as well as an additional topic for the SDF string, published once at startup.", "markup": "markdown", "html": "<p>This PR adds logging plugin for recording and playback.</p>\n<p>Recording uses ign-transport messages, currently only poses are recorded (`/world/default/pose/info` topic).</p>\n<ul>\n<li>Currently SDF file is dumped to a separate text file. Later, this will need to be published on another ign-transport topic, to be recorded together with the serialized ECM.</li>\n</ul>\n<p>Playback loads the <code>.tlog</code> file using ign-transport <code>Log.hh</code>. When the timestamp from world startup reaches the recorded timestamp minus recording startup, the current model poses are overwritten by the recorded ones.</p>\n<ul>\n<li>Currently only <code>Model</code> poses are played back, not <code>Link</code>, because for links with the same name but belonging to different models, there\u2019s no way from the ign-transport messages to tell which model the link belonged to.<br />\n  This should be resolved once we replace the pose topic with the topic with serialized ECM.</li>\n</ul>\n<p>Example SDF files and a keyboard example for controlling the two vehicles are included for testing out the plugins.</p>\n<h2 id=\"markdown-header-testing\">Testing</h2>\n<h3 id=\"markdown-header-recording\">Recording</h3>\n<p><code>cd ign-gazebo/examples/standalone/keyboard/build</code></p>\n<p><code>./keyboard ../keyboard.sdf</code></p>\n<p><code>cd ign-gazebo/examples/worlds</code></p>\n<p><code>ign-gazebo -v 4 -f log_record.sdf -r</code></p>\n<p>Use arrow keys and ASDW to move the vehicles somewhere.</p>\n<h3 id=\"markdown-header-playback\">Playback</h3>\n<p><code>ign-gazebo -f empty.sdf -v 4</code></p>\n<p>Physics must be off.</p>\n<p>Fixed. <strong><del>Intermittent bug</del></strong><del>: Sometimes nothing is loaded into the world. Might have to do with how the SDF is loaded? Currently it's loaded using these two lines in</del> <code>Configure()</code><del>:</del></p>\n<p><code>ignition::gazebo::SdfEntityCreator creator = ignition::gazebo::SdfEntityCreator(_ecm, _eventMgr);</code><br />\n<code>creator.CreateEntities(sdf_world);</code></p>\n<p><del>Also tried putting</del> <code>CreateEntities()</code> <del>in</del> <code>PreUpdate()</code> <del>instead of</del> <code>Configure()</code><del>, in case GUI might see them as new entities. Issue persists.</del></p>\n<h2 id=\"markdown-header-next-steps\">Next steps</h2>\n<p>Upon <a href=\"#!/ignitionrobotics/ign-gazebo/pull-requests/184/acropolis-complete-state-streaming\" rel=\"nofollow\" class=\"ap-connect-link\">PR #184</a> completion, replace the topic used in recording and playback with the topic with serialized ECM, as well as an additional topic for the SDF string, published once at startup.</p>", "type": "rendered"}, "title": {"raw": "[Acropolis] Add logging", "markup": "markdown", "html": "<p>[Acropolis] Add logging</p>", "type": "rendered"}}, "type": "pullrequest", "description": "This PR adds logging plugin for recording and playback.\r\n\r\nRecording uses ign-transport messages, currently only poses are recorded \\(\\`/world/default/pose/info\\` topic\\).\r\n\r\n* Currently SDF file is dumped to a separate text file. Later, this will need to be published on another ign-transport topic, to be recorded together with the serialized ECM.\r\n\r\nPlayback loads the `.tlog` file using ign-transport `Log.hh`. When the timestamp from world startup reaches the recorded timestamp minus recording startup, the current model poses are overwritten by the recorded ones.\r\n\r\n* Currently only `Model` poses are played back, not `Link`, because for links with the same name but belonging to different models, there\u2019s no way from the ign-transport messages to tell which model the link belonged to.  \r\n  This should be resolved once we replace the pose topic with the topic with serialized ECM.\r\n\r\nExample SDF files and a keyboard example for controlling the two vehicles are included for testing out the plugins.\r\n\r\n## Testing\r\n\r\n### Recording\r\n\r\n`cd ign-gazebo/examples/standalone/keyboard/build`\r\n\r\n`./keyboard ../keyboard.sdf`\r\n\r\n`cd ign-gazebo/examples/worlds`\r\n\r\n`ign-gazebo -v 4 -f log_record.sdf -r`\r\n\r\nUse arrow keys and ASDW to move the vehicles somewhere.\r\n\r\n### Playback\r\n\r\n`ign-gazebo -f empty.sdf -v 4`\r\n\r\nPhysics must be off.\r\n\r\nFixed. **~~Intermittent bug~~**~~: Sometimes nothing is loaded into the world. Might have to do with how the SDF is loaded? Currently it's loaded using these two lines in~~ `Configure()`~~:~~\r\n\r\n`ignition::gazebo::SdfEntityCreator creator = ignition::gazebo::SdfEntityCreator(_ecm, _eventMgr);`  \r\n`creator.CreateEntities(sdf_world);`\r\n\r\n~~Also tried putting~~ `CreateEntities()` ~~in~~ `PreUpdate()` ~~instead of~~ `Configure()`~~, in case GUI might see them as new entities. Issue persists.~~\r\n\r\n## Next steps\r\n\r\nUpon PR #184 completion, replace the topic used in recording and playback with the topic with serialized ECM, as well as an additional topic for the SDF string, published once at startup.", "links": {"decline": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-gazebo/pullrequests/181/decline"}, "diffstat": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-gazebo/diffstat/ignitionrobotics/ign-gazebo:9e7b0c4ae5d8%0Db5a848f7e562?from_pullrequest_id=181"}, "commits": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/181/commits.json"}, "self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/181.json"}, "comments": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/181/comments_page=1.json"}, "merge": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-gazebo/pullrequests/181/merge"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/181"}, "activity": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/181/activity.json"}, "diff": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-gazebo/diff/ignitionrobotics/ign-gazebo:9e7b0c4ae5d8%0Db5a848f7e562?from_pullrequest_id=181"}, "approve": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-gazebo/pullrequests/181/approve"}, "statuses": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/181/statuses_page=1.json"}}, "title": "[Acropolis] Add logging", "close_source_branch": true, "reviewers": [{"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}], "id": 181, "destination": {"commit": {"hash": "b5a848f7e562", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/b5a848f7e562.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/b5a848f7e562"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "ign-gazebo1"}}, "created_on": "2019-02-26T00:10:46.835855+00:00", "summary": {"raw": "This PR adds logging plugin for recording and playback.\r\n\r\nRecording uses ign-transport messages, currently only poses are recorded \\(\\`/world/default/pose/info\\` topic\\).\r\n\r\n* Currently SDF file is dumped to a separate text file. Later, this will need to be published on another ign-transport topic, to be recorded together with the serialized ECM.\r\n\r\nPlayback loads the `.tlog` file using ign-transport `Log.hh`. When the timestamp from world startup reaches the recorded timestamp minus recording startup, the current model poses are overwritten by the recorded ones.\r\n\r\n* Currently only `Model` poses are played back, not `Link`, because for links with the same name but belonging to different models, there\u2019s no way from the ign-transport messages to tell which model the link belonged to.  \r\n  This should be resolved once we replace the pose topic with the topic with serialized ECM.\r\n\r\nExample SDF files and a keyboard example for controlling the two vehicles are included for testing out the plugins.\r\n\r\n## Testing\r\n\r\n### Recording\r\n\r\n`cd ign-gazebo/examples/standalone/keyboard/build`\r\n\r\n`./keyboard ../keyboard.sdf`\r\n\r\n`cd ign-gazebo/examples/worlds`\r\n\r\n`ign-gazebo -v 4 -f log_record.sdf -r`\r\n\r\nUse arrow keys and ASDW to move the vehicles somewhere.\r\n\r\n### Playback\r\n\r\n`ign-gazebo -f empty.sdf -v 4`\r\n\r\nPhysics must be off.\r\n\r\nFixed. **~~Intermittent bug~~**~~: Sometimes nothing is loaded into the world. Might have to do with how the SDF is loaded? Currently it's loaded using these two lines in~~ `Configure()`~~:~~\r\n\r\n`ignition::gazebo::SdfEntityCreator creator = ignition::gazebo::SdfEntityCreator(_ecm, _eventMgr);`  \r\n`creator.CreateEntities(sdf_world);`\r\n\r\n~~Also tried putting~~ `CreateEntities()` ~~in~~ `PreUpdate()` ~~instead of~~ `Configure()`~~, in case GUI might see them as new entities. Issue persists.~~\r\n\r\n## Next steps\r\n\r\nUpon PR #184 completion, replace the topic used in recording and playback with the topic with serialized ECM, as well as an additional topic for the SDF string, published once at startup.", "markup": "markdown", "html": "<p>This PR adds logging plugin for recording and playback.</p>\n<p>Recording uses ign-transport messages, currently only poses are recorded (`/world/default/pose/info` topic).</p>\n<ul>\n<li>Currently SDF file is dumped to a separate text file. Later, this will need to be published on another ign-transport topic, to be recorded together with the serialized ECM.</li>\n</ul>\n<p>Playback loads the <code>.tlog</code> file using ign-transport <code>Log.hh</code>. When the timestamp from world startup reaches the recorded timestamp minus recording startup, the current model poses are overwritten by the recorded ones.</p>\n<ul>\n<li>Currently only <code>Model</code> poses are played back, not <code>Link</code>, because for links with the same name but belonging to different models, there\u2019s no way from the ign-transport messages to tell which model the link belonged to.<br />\n  This should be resolved once we replace the pose topic with the topic with serialized ECM.</li>\n</ul>\n<p>Example SDF files and a keyboard example for controlling the two vehicles are included for testing out the plugins.</p>\n<h2 id=\"markdown-header-testing\">Testing</h2>\n<h3 id=\"markdown-header-recording\">Recording</h3>\n<p><code>cd ign-gazebo/examples/standalone/keyboard/build</code></p>\n<p><code>./keyboard ../keyboard.sdf</code></p>\n<p><code>cd ign-gazebo/examples/worlds</code></p>\n<p><code>ign-gazebo -v 4 -f log_record.sdf -r</code></p>\n<p>Use arrow keys and ASDW to move the vehicles somewhere.</p>\n<h3 id=\"markdown-header-playback\">Playback</h3>\n<p><code>ign-gazebo -f empty.sdf -v 4</code></p>\n<p>Physics must be off.</p>\n<p>Fixed. <strong><del>Intermittent bug</del></strong><del>: Sometimes nothing is loaded into the world. Might have to do with how the SDF is loaded? Currently it's loaded using these two lines in</del> <code>Configure()</code><del>:</del></p>\n<p><code>ignition::gazebo::SdfEntityCreator creator = ignition::gazebo::SdfEntityCreator(_ecm, _eventMgr);</code><br />\n<code>creator.CreateEntities(sdf_world);</code></p>\n<p><del>Also tried putting</del> <code>CreateEntities()</code> <del>in</del> <code>PreUpdate()</code> <del>instead of</del> <code>Configure()</code><del>, in case GUI might see them as new entities. Issue persists.</del></p>\n<h2 id=\"markdown-header-next-steps\">Next steps</h2>\n<p>Upon <a href=\"#!/ignitionrobotics/ign-gazebo/pull-requests/184/acropolis-complete-state-streaming\" rel=\"nofollow\" class=\"ap-connect-link\">PR #184</a> completion, replace the topic used in recording and playback with the topic with serialized ECM, as well as an additional topic for the SDF string, published once at startup.</p>", "type": "rendered"}, "source": {"commit": {"hash": "fa0799756917", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/fa0799756917.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/fa0799756917"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "logging_mz"}}, "comment_count": 60, "state": "MERGED", "task_count": 0, "participants": [{"role": "PARTICIPANT", "participated_on": "2019-03-04T22:35:09.930799+00:00", "type": "participant", "approved": false, "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}}, {"role": "PARTICIPANT", "participated_on": "2019-03-09T04:39:41.247198+00:00", "type": "participant", "approved": false, "user": {"display_name": "Mabel Zhang", "uuid": "{4b0e38fb-bf50-45c0-a496-61147518b2bf}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D"}, "html": {"href": "https://bitbucket.org/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:ceb5942c-6843-408c-8550-3ce4899d299b/4d48e5ea-cf28-4fa7-9715-8fc9e315d831/128"}}, "nickname": "mabelmzhang", "type": "user", "account_id": "557058:ceb5942c-6843-408c-8550-3ce4899d299b"}}, {"role": "REVIEWER", "participated_on": "2019-03-09T05:03:18.628896+00:00", "type": "participant", "approved": true, "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}}, {"role": "PARTICIPANT", "participated_on": "2019-03-08T22:13:36.774274+00:00", "type": "participant", "approved": false, "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}}], "reason": "", "updated_on": "2019-03-09T05:03:58.228150+00:00", "author": {"display_name": "Mabel Zhang", "uuid": "{4b0e38fb-bf50-45c0-a496-61147518b2bf}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D"}, "html": {"href": "https://bitbucket.org/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:ceb5942c-6843-408c-8550-3ce4899d299b/4d48e5ea-cf28-4fa7-9715-8fc9e315d831/128"}}, "nickname": "mabelmzhang", "type": "user", "account_id": "557058:ceb5942c-6843-408c-8550-3ce4899d299b"}, "merge_commit": {"hash": "9e7b0c4ae5d8", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/9e7b0c4ae5d8.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/9e7b0c4ae5d8"}}}, "closed_by": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}}