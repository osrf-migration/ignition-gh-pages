{"pagelen": 50, "values": [{"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573/comments/145160012.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573/_/diff#comment-145160012"}}, "parent": {"id": 145092445, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573/comments/145092445.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573/_/diff#comment-145092445"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 573, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573"}}, "title": "Optional physics features"}, "content": {"raw": "I\u2019m not 100% clear on why an additional `RequestFeatures` would be needed, but the runtime cost of it should be unnoticeable if the casted entities are being cached.\n\nEither way, this is probably a premature optimization concern. I\u2019d say whenever there\u2019s a need in the future to audit the compilation times, this would be a prime candidate to look at.", "markup": "markdown", "html": "<p>I\u2019m not 100% clear on why an additional <code>RequestFeatures</code> would be needed, but the runtime cost of it should be unnoticeable if the casted entities are being cached.</p>\n<p>Either way, this is probably a premature optimization concern. I\u2019d say whenever there\u2019s a need in the future to audit the compilation times, this would be a prime candidate to look at.</p>", "type": "rendered"}, "created_on": "2020-04-15T04:02:00.594908+00:00", "user": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "updated_on": "2020-04-15T04:02:00.602013+00:00", "type": "pullrequest_comment", "id": 145160012}, "pull_request": {"type": "pullrequest", "id": 573, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573"}}, "title": "Optional physics features"}}, {"update": {"description": "## Overview\r\n\r\nPull request #541 adds the ability to choose different physics engine from the command line.\r\n\r\nThis pull request builds on top of that, and reduces `MinimumFeatureList` so that physics engines are not required to implement all features, and some of them are treated as optional.\r\n\r\n## Bullet\r\n\r\nI've been testing this with bullet using [this ign-physics PR](#!/ignitionrobotics/ign-physics/pull-requests/134/wip-bullet-updates/diff). There's only one feature left which Bullet doesn't implement, `ConstructSdfLink`. This PR an alternative to pull request #421.\r\n\r\n## Implementation\r\n\r\nThis PR makes the following features optional:\r\n\r\n* Features for detachable joints:\r\n\r\n    * `ignition::physics::AttachFixedJointFeature`\r\n    * `ignition::physics::DetachJointFeature`\r\n    * `ignition::physics::SetJointTransformFromParentFeature`\r\n    \r\n* Features for bounding box:\r\n\r\n    * `ignition::physics::GetModelBoundingBox`\r\n    \r\n* Features for joint velocity commands:\r\n\r\n    * `ignition::physics::SetJointVelocityCommandFeature`\r\n    \r\n* Features for 3D meshes:\r\n\r\n    * `ignition::physics::mesh::AttachMeshShapeFeature`\r\n    \r\n\r\nFor each group of optional features:\r\n\r\n* Create a feature list, i.e. `DetachableJointFeatureList`\r\n* Create entity types which use that list, i.e. `JointDetachableJointPtrType`\r\n* Create an entity map that holds the specialized entity type, i.e. `entityJointDetachableJointMap`\r\n* Use `entityCast` to cast from the original entity, created with `MinimumFeatureList`, to the specialized entity. `entityCast` will also populate the specialized map the first time it's called and get the entity from that map on subsequent calls. This means that `RequestFeature` is only called once for each combination of entity \\+ feature list.\r\n\r\nAny engine implementing all the minimum features will be loaded. If, at runtime, there's an attempt to use an unsupported feature, a warning is printed. That is:\r\n\r\n* If a `component::DetachableJoint` is created, a warning is printed and the joint isn't attached or detached.\r\n* If a `components::AxisAlignedBox` is created, a warning is printed and the box is not populated.\r\n* If a `components::JointVelocityCmd` is created, a warning is printed and the command has no effect.\r\n* If a collision has a mesh geometry, a warning is printed and the geometry isn't created.\r\n\r\n---\r\n\r\nThis PR is ready for review. I'll stop looking into Bullet now and remove features not needed by TPE on a subsequent PR.", "title": "Optional physics features", "destination": {"commit": {"hash": "963fe2188cf1", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/963fe2188cf1.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/963fe2188cf1"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "ign-gazebo2"}}, "reason": "This is causing bounding box test failures on OSX. Reopen the PR on GitHub, see issue #58.", "source": {"commit": {"hash": "105475d5a229", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/105475d5a229.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/105475d5a229"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "chapulina/bullet"}}, "state": "DECLINED", "author": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "date": "2020-04-14T18:47:21.820850+00:00"}, "pull_request": {"type": "pullrequest", "id": 573, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573"}}, "title": "Optional physics features"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573/comments/145107437.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573/_/diff#comment-145107437"}}, "parent": {"id": 145104700, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573/comments/145104700.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573/_/diff#comment-145104700"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 573, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573"}}, "title": "Optional physics features"}, "content": {"raw": "The original is 2879. Then 2883 failed the same way. It's clear to me that this is a new test failure introduced by this PR, so I'll go ahead and decline this. We should still keep an eye on 2885 because the verbosity may give some leads.", "markup": "markdown", "html": "<p>The original is 2879. Then 2883 failed the same way. It's clear to me that this is a new test failure introduced by this PR, so I'll go ahead and decline this. We should still keep an eye on 2885 because the verbosity may give some leads.</p>", "type": "rendered"}, "created_on": "2020-04-14T18:39:06.232552+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2020-04-14T18:39:06.238838+00:00", "type": "pullrequest_comment", "id": 145107437}, "pull_request": {"type": "pullrequest", "id": 573, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573"}}, "title": "Optional physics features"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573/comments/145104700.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573/_/diff#comment-145104700"}}, "parent": {"id": 145104469, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573/comments/145104469.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573/_/diff#comment-145104469"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 573, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573"}}, "title": "Optional physics features"}, "content": {"raw": "Oops, maybe not. that's the original one.", "markup": "markdown", "html": "<p>Oops, maybe not. that's the original one.</p>", "type": "rendered"}, "created_on": "2020-04-14T18:22:18.954490+00:00", "user": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}, "updated_on": "2020-04-14T18:22:18.958458+00:00", "type": "pullrequest_comment", "id": 145104700}, "pull_request": {"type": "pullrequest", "id": 573, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573"}}, "title": "Optional physics features"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573/comments/145104469.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573/_/diff#comment-145104469"}}, "parent": {"id": 145100469, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573/comments/145100469.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573/_/diff#comment-145100469"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 573, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573"}}, "title": "Optional physics features"}, "content": {"raw": "Sounds good. I think the first retry already [failed](https://build.osrfoundation.org/job/ignition_gazebo-ci-pr_any-homebrew-amd64/2883/testReport/(root)/INTEGRATION_physics_system/test_ran/).", "markup": "markdown", "html": "<p>Sounds good. I think the first retry already <a data-is-external-link=\"true\" href=\"https://build.osrfoundation.org/job/ignition_gazebo-ci-pr_any-homebrew-amd64/2883/testReport/(root)/INTEGRATION_physics_system/test_ran/\" rel=\"nofollow\">failed</a>.</p>", "type": "rendered"}, "created_on": "2020-04-14T18:20:48.859976+00:00", "user": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}, "updated_on": "2020-04-14T18:20:48.865402+00:00", "type": "pullrequest_comment", "id": 145104469}, "pull_request": {"type": "pullrequest", "id": 573, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573"}}, "title": "Optional physics features"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573/comments/145100469.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573/_/diff#comment-145100469"}}, "parent": {"id": 145092645, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573/comments/145092645.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573/_/diff#comment-145092645"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 573, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573"}}, "title": "Optional physics features"}, "content": {"raw": "I can't reproduce the test failure using clang on Linux. I made the test verbose on 105475d so we can get more info from Jenkins logs.\n\nHere's a build I had triggered before making the test verbose: [![Build Status](https://build.osrfoundation.org/job/ignition_gazebo-ci-pr_any-homebrew-amd64/2883/badge/icon)](https://build.osrfoundation.org/job/ignition_gazebo-ci-pr_any-homebrew-amd64/2883/)\n\nAnd I triggered a new one to be verbose: [![Build Status](https://build.osrfoundation.org/job/ignition_gazebo-ci-pr_any-homebrew-amd64/2885/badge/icon)](https://build.osrfoundation.org/job/ignition_gazebo-ci-pr_any-homebrew-amd64/2885/)\n\nIf these pass, I think we can consider the test flaky and merge.\n\nIf at least one of them fails, I think we should decline this PR and revisit on GitHub.\n\nLet me know what you think.", "markup": "markdown", "html": "<p>I can't reproduce the test failure using clang on Linux. I made the test verbose on <a href=\"#!/ignitionrobotics/ign-gazebo/commits/105475d\" rel=\"nofollow\" class=\"ap-connect-link\">105475d</a> so we can get more info from Jenkins logs.</p>\n<p>Here's a build I had triggered before making the test verbose: <a data-is-external-link=\"true\" href=\"https://build.osrfoundation.org/job/ignition_gazebo-ci-pr_any-homebrew-amd64/2883/\" rel=\"nofollow\"><img alt=\"Build Status\" src=\"https://build.osrfoundation.org/job/ignition_gazebo-ci-pr_any-homebrew-amd64/2883/badge/icon\" /></a></p>\n<p>And I triggered a new one to be verbose: <a data-is-external-link=\"true\" href=\"https://build.osrfoundation.org/job/ignition_gazebo-ci-pr_any-homebrew-amd64/2885/\" rel=\"nofollow\"><img alt=\"Build Status\" src=\"https://build.osrfoundation.org/job/ignition_gazebo-ci-pr_any-homebrew-amd64/2885/badge/icon\" /></a></p>\n<p>If these pass, I think we can consider the test flaky and merge.</p>\n<p>If at least one of them fails, I think we should decline this PR and revisit on GitHub.</p>\n<p>Let me know what you think.</p>", "type": "rendered"}, "created_on": "2020-04-14T17:55:12.234850+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2020-04-14T17:55:12.241307+00:00", "type": "pullrequest_comment", "id": 145100469}, "pull_request": {"type": "pullrequest", "id": 573, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573"}}, "title": "Optional physics features"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573/comments/145099922.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573/_/diff#comment-145099922"}}, "parent": {"id": 144945005, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573/comments/144945005.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573/_/diff#comment-144945005"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 573, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573"}}, "title": "Optional physics features"}, "content": {"raw": "Good call, done in 105475d", "markup": "markdown", "html": "<p>Good call, done in <a href=\"#!/ignitionrobotics/ign-gazebo/commits/105475d\" rel=\"nofollow\" class=\"ap-connect-link\">105475d</a></p>", "type": "rendered"}, "created_on": "2020-04-14T17:51:47.714656+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {}, "updated_on": "2020-04-14T17:51:47.721131+00:00", "type": "pullrequest_comment", "id": 145099922}, "pull_request": {"type": "pullrequest", "id": 573, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573"}}, "title": "Optional physics features"}}, {"update": {"description": "## Overview\r\n\r\nPull request #541 adds the ability to choose different physics engine from the command line.\r\n\r\nThis pull request builds on top of that, and reduces `MinimumFeatureList` so that physics engines are not required to implement all features, and some of them are treated as optional.\r\n\r\n## Bullet\r\n\r\nI've been testing this with bullet using [this ign-physics PR](#!/ignitionrobotics/ign-physics/pull-requests/134/wip-bullet-updates/diff). There's only one feature left which Bullet doesn't implement, `ConstructSdfLink`. This PR an alternative to pull request #421.\r\n\r\n## Implementation\r\n\r\nThis PR makes the following features optional:\r\n\r\n* Features for detachable joints:\r\n\r\n    * `ignition::physics::AttachFixedJointFeature`\r\n    * `ignition::physics::DetachJointFeature`\r\n    * `ignition::physics::SetJointTransformFromParentFeature`\r\n    \r\n* Features for bounding box:\r\n\r\n    * `ignition::physics::GetModelBoundingBox`\r\n    \r\n* Features for joint velocity commands:\r\n\r\n    * `ignition::physics::SetJointVelocityCommandFeature`\r\n    \r\n* Features for 3D meshes:\r\n\r\n    * `ignition::physics::mesh::AttachMeshShapeFeature`\r\n    \r\n\r\nFor each group of optional features:\r\n\r\n* Create a feature list, i.e. `DetachableJointFeatureList`\r\n* Create entity types which use that list, i.e. `JointDetachableJointPtrType`\r\n* Create an entity map that holds the specialized entity type, i.e. `entityJointDetachableJointMap`\r\n* Use `entityCast` to cast from the original entity, created with `MinimumFeatureList`, to the specialized entity. `entityCast` will also populate the specialized map the first time it's called and get the entity from that map on subsequent calls. This means that `RequestFeature` is only called once for each combination of entity \\+ feature list.\r\n\r\nAny engine implementing all the minimum features will be loaded. If, at runtime, there's an attempt to use an unsupported feature, a warning is printed. That is:\r\n\r\n* If a `component::DetachableJoint` is created, a warning is printed and the joint isn't attached or detached.\r\n* If a `components::AxisAlignedBox` is created, a warning is printed and the box is not populated.\r\n* If a `components::JointVelocityCmd` is created, a warning is printed and the command has no effect.\r\n* If a collision has a mesh geometry, a warning is printed and the geometry isn't created.\r\n\r\n---\r\n\r\nThis PR is ready for review. I'll stop looking into Bullet now and remove features not needed by TPE on a subsequent PR.", "title": "Optional physics features", "destination": {"commit": {"hash": "963fe2188cf1", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/963fe2188cf1.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/963fe2188cf1"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "ign-gazebo2"}}, "reason": "", "source": {"commit": {"hash": "105475d5a229", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/105475d5a229.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/105475d5a229"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "chapulina/bullet"}}, "state": "OPEN", "author": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "date": "2020-04-14T17:51:19.534839+00:00"}, "pull_request": {"type": "pullrequest", "id": 573, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573"}}, "title": "Optional physics features"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573/comments/145092645.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573/_/diff#comment-145092645"}}, "parent": {"id": 145092050, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573/comments/145092050.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573/_/diff#comment-145092050"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 573, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573"}}, "title": "Optional physics features"}, "content": {"raw": "It's the bounding box, I'm checking.", "markup": "markdown", "html": "<p>It's the bounding box, I'm checking.</p>", "type": "rendered"}, "created_on": "2020-04-14T17:08:18.494888+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2020-04-14T17:08:18.500023+00:00", "type": "pullrequest_comment", "id": 145092645}, "pull_request": {"type": "pullrequest", "id": 573, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573"}}, "title": "Optional physics features"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573/comments/145092445.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573/_/diff#comment-145092445"}}, "parent": {"id": 144929424, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573/comments/144929424.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573/_/diff#comment-144929424"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 573, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573"}}, "title": "Optional physics features"}, "content": {"raw": ">  a trade off between developer expediency and compilation times\n\nI think there's another variable to add to the trade-offs: _runtime performance_. Removing `MinimumFeatureList` from `DetachableJointList` would add 2 `RequestFeatures` calls whenever we create a detachable joint, one for the child link, the other for the joint. \n\nSo I think for now the scale is tipping towards keeping the `MinimumFeatureList` there for now. Once all joint features are removed from `MinimumFeatureList`, the impact on compilation time should be decreased.", "markup": "markdown", "html": "<blockquote>\n<p>a trade off between developer expediency and compilation times</p>\n</blockquote>\n<p>I think there's another variable to add to the trade-offs: <em>runtime performance</em>. Removing <code>MinimumFeatureList</code> from <code>DetachableJointList</code> would add 2 <code>RequestFeatures</code> calls whenever we create a detachable joint, one for the child link, the other for the joint. </p>\n<p>So I think for now the scale is tipping towards keeping the <code>MinimumFeatureList</code> there for now. Once all joint features are removed from <code>MinimumFeatureList</code>, the impact on compilation time should be decreased.</p>", "type": "rendered"}, "created_on": "2020-04-14T17:07:06.226437+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2020-04-14T17:07:06.231380+00:00", "type": "pullrequest_comment", "id": 145092445}, "pull_request": {"type": "pullrequest", "id": 573, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573"}}, "title": "Optional physics features"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573/comments/145092050.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573/_/diff#comment-145092050"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 573, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573"}}, "title": "Optional physics features"}, "content": {"raw": "`INTEGRATION_physics_system` is failing on macOS", "markup": "markdown", "html": "<p><code>INTEGRATION_physics_system</code> is failing on macOS</p>", "type": "rendered"}, "created_on": "2020-04-14T17:04:41.607708+00:00", "user": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}, "updated_on": "2020-04-14T17:04:41.610471+00:00", "type": "pullrequest_comment", "id": 145092050}, "pull_request": {"type": "pullrequest", "id": 573, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573"}}, "title": "Optional physics features"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573/comments/144945005.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573/_/diff#comment-144945005"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 573, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573"}}, "title": "Optional physics features"}, "content": {"raw": "can this be `const &`?", "markup": "markdown", "html": "<p>can this be <code>const &amp;</code>?</p>", "type": "rendered"}, "created_on": "2020-04-14T06:22:45.451138+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "inline": {}, "updated_on": "2020-04-14T06:22:45.455177+00:00", "type": "pullrequest_comment", "id": 144945005}, "pull_request": {"type": "pullrequest", "id": 573, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573"}}, "title": "Optional physics features"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573/comments/144929424.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573/_/diff#comment-144929424"}}, "parent": {"id": 144863367, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573/comments/144863367.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573/_/diff#comment-144863367"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 573, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573"}}, "title": "Optional physics features"}, "content": {"raw": "The biggest downside is it will increase compilation times. The best practice for the sake of compilation times is to only specify the features that you need. If the implementation of the joint removal ever changes in the future and you need more of the features, it\u2019s okay to expand the feature list as needed; that won\u2019t have any negative consequences, as long as the object isn\u2019t being exposed in a public API.\n\nThere\u2019s also some very slight increase in the amount of time it might take to cast the entity type, but that will be completely unnoticeable if the casted entities are being cached.\n\nSo mostly it comes down to a trade off between developer expediency and compilation times, much like using `#include` to pull in a \u201cmaster\u201d header that aggregates other headers that you don\u2019t really need.", "markup": "markdown", "html": "<p>The biggest downside is it will increase compilation times. The best practice for the sake of compilation times is to only specify the features that you need. If the implementation of the joint removal ever changes in the future and you need more of the features, it\u2019s okay to expand the feature list as needed; that won\u2019t have any negative consequences, as long as the object isn\u2019t being exposed in a public API.</p>\n<p>There\u2019s also some very slight increase in the amount of time it might take to cast the entity type, but that will be completely unnoticeable if the casted entities are being cached.</p>\n<p>So mostly it comes down to a trade off between developer expediency and compilation times, much like using <code>#include</code> to pull in a \u201cmaster\u201d header that aggregates other headers that you don\u2019t really need.</p>", "type": "rendered"}, "created_on": "2020-04-14T03:28:24.727121+00:00", "user": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "updated_on": "2020-04-14T03:29:13.995121+00:00", "type": "pullrequest_comment", "id": 144929424}, "pull_request": {"type": "pullrequest", "id": 573, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573"}}, "title": "Optional physics features"}}, {"update": {"description": "## Overview\r\n\r\nPull request #541 adds the ability to choose different physics engine from the command line.\r\n\r\nThis pull request builds on top of that, and reduces `MinimumFeatureList` so that physics engines are not required to implement all features, and some of them are treated as optional.\r\n\r\n## Bullet\r\n\r\nI've been testing this with bullet using [this ign-physics PR](#!/ignitionrobotics/ign-physics/pull-requests/134/wip-bullet-updates/diff). There's only one feature left which Bullet doesn't implement, `ConstructSdfLink`. This PR an alternative to pull request #421.\r\n\r\n## Implementation\r\n\r\nThis PR makes the following features optional:\r\n\r\n* Features for detachable joints:\r\n\r\n    * `ignition::physics::AttachFixedJointFeature`\r\n    * `ignition::physics::DetachJointFeature`\r\n    * `ignition::physics::SetJointTransformFromParentFeature`\r\n    \r\n* Features for bounding box:\r\n\r\n    * `ignition::physics::GetModelBoundingBox`\r\n    \r\n* Features for joint velocity commands:\r\n\r\n    * `ignition::physics::SetJointVelocityCommandFeature`\r\n    \r\n* Features for 3D meshes:\r\n\r\n    * `ignition::physics::mesh::AttachMeshShapeFeature`\r\n    \r\n\r\nFor each group of optional features:\r\n\r\n* Create a feature list, i.e. `DetachableJointFeatureList`\r\n* Create entity types which use that list, i.e. `JointDetachableJointPtrType`\r\n* Create an entity map that holds the specialized entity type, i.e. `entityJointDetachableJointMap`\r\n* Use `entityCast` to cast from the original entity, created with `MinimumFeatureList`, to the specialized entity. `entityCast` will also populate the specialized map the first time it's called and get the entity from that map on subsequent calls. This means that `RequestFeature` is only called once for each combination of entity \\+ feature list.\r\n\r\nAny engine implementing all the minimum features will be loaded. If, at runtime, there's an attempt to use an unsupported feature, a warning is printed. That is:\r\n\r\n* If a `component::DetachableJoint` is created, a warning is printed and the joint isn't attached or detached.\r\n* If a `components::AxisAlignedBox` is created, a warning is printed and the box is not populated.\r\n* If a `components::JointVelocityCmd` is created, a warning is printed and the command has no effect.\r\n* If a collision has a mesh geometry, a warning is printed and the geometry isn't created.\r\n\r\n---\r\n\r\nThis PR is ready for review. I'll stop looking into Bullet now and remove features not needed by TPE on a subsequent PR.", "title": "Optional physics features", "destination": {"commit": {"hash": "963fe2188cf1", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/963fe2188cf1.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/963fe2188cf1"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "ign-gazebo2"}}, "reason": "", "source": {"commit": {"hash": "8831d4207ce8", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/8831d4207ce8.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/8831d4207ce8"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "chapulina/bullet"}}, "state": "OPEN", "author": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "date": "2020-04-14T03:04:53.846273+00:00"}, "pull_request": {"type": "pullrequest", "id": 573, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573"}}, "title": "Optional physics features"}}, {"update": {"description": "## Overview\r\n\r\nPull request #541 adds the ability to choose different physics engine from the command line.\r\n\r\nThis pull request builds on top of that, and reduces `MinimumFeatureList` so that physics engines are not required to implement all features, and some of them are treated as optional.\r\n\r\n## Bullet\r\n\r\nI've been testing this with bullet using [this ign-physics PR](#!/ignitionrobotics/ign-physics/pull-requests/134/wip-bullet-updates/diff). There's only one feature left which Bullet doesn't implement, `ConstructSdfLink`. This PR an alternative to pull request #421.\r\n\r\n## Implementation\r\n\r\nThis PR makes the following features optional:\r\n\r\n* Features for detachable joints:\r\n\r\n    * `ignition::physics::AttachFixedJointFeature`\r\n    * `ignition::physics::DetachJointFeature`\r\n    * `ignition::physics::SetJointTransformFromParentFeature`\r\n    \r\n* Features for bounding box:\r\n\r\n    * `ignition::physics::GetModelBoundingBox`\r\n    \r\n* Features for joint velocity commands:\r\n\r\n    * `ignition::physics::SetJointVelocityCommandFeature`\r\n    \r\n* Features for 3D meshes:\r\n\r\n    * `ignition::physics::mesh::AttachMeshShapeFeature`\r\n    \r\n\r\nFor each group of optional features:\r\n\r\n* Create a feature list, i.e. `DetachableJointFeatureList`\r\n* Create entity types which use that list, i.e. `JointDetachableJointPtrType`\r\n* Create an entity map that holds the specialized entity type, i.e. `entityJointDetachableJointMap`\r\n* Use `entityCast` to cast from the original entity, created with `MinimumFeatureList`, to the specialized entity. `entityCast` will also populate the specialized map the first time it's called and get the entity from that map on subsequent calls. This means that `RequestFeature` is only called once for each combination of entity \\+ feature list.\r\n\r\nAny engine implementing all the minimum features will be loaded. If, at runtime, there's an attempt to use an unsupported feature, a warning is printed. That is:\r\n\r\n* If a `component::DetachableJoint` is created, a warning is printed and the joint isn't attached or detached.\r\n* If a `components::AxisAlignedBox` is created, a warning is printed and the box is not populated.\r\n* If a `components::JointVelocityCmd` is created, a warning is printed and the command has no effect.\r\n* If a collision has a mesh geometry, a warning is printed and the geometry isn't created.\r\n\r\n---\r\n\r\nThis PR is ready for review. I'll stop looking into Bullet now and remove features not needed by TPE on a subsequent PR.", "title": "Optional physics features", "destination": {"commit": {"hash": "963fe2188cf1", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/963fe2188cf1.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/963fe2188cf1"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "ign-gazebo2"}}, "reason": "", "source": {"commit": {"hash": "643b15357f5d", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/643b15357f5d.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/643b15357f5d"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "chapulina/bullet"}}, "state": "OPEN", "author": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "date": "2020-04-14T01:25:18.690385+00:00"}, "pull_request": {"type": "pullrequest", "id": 573, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573"}}, "title": "Optional physics features"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573/comments/144863367.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573/_/diff#comment-144863367"}}, "parent": {"id": 144772652, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573/comments/144772652.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573/_/diff#comment-144772652"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 573, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573"}}, "title": "Optional physics features"}, "content": {"raw": "> not a feature list that combines MinimumFeatureList + DetachableJointFeature\n\nYeah the only reason I added `MinimumFeatureList` there is because while processing detachable joints, we also need some core joint features, and it's more convenient to use the same pointer for everything. Let me know if there's a downside to this.\n\nFor TPE, I also made joints optional on [this branch](#!/ignitionrobotics/ign-gazebo/branch/chapulina/tpe?dest=chapulina%2Fbullet_citadel#diff), so the detachable joints extend `JointFeatureList` instead of `MinimumFeatureList`.", "markup": "markdown", "html": "<blockquote>\n<p>not a feature list that combines MinimumFeatureList + DetachableJointFeature</p>\n</blockquote>\n<p>Yeah the only reason I added <code>MinimumFeatureList</code> there is because while processing detachable joints, we also need some core joint features, and it's more convenient to use the same pointer for everything. Let me know if there's a downside to this.</p>\n<p>For TPE, I also made joints optional on <a data-is-external-link=\"true\" href=\"#!/ignitionrobotics/ign-gazebo/branch/chapulina/tpe?dest=chapulina%2Fbullet_citadel#diff\" rel=\"nofollow\">this branch</a>, so the detachable joints extend <code>JointFeatureList</code> instead of <code>MinimumFeatureList</code>.</p>", "type": "rendered"}, "created_on": "2020-04-13T16:33:36.111329+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2020-04-13T16:33:36.117744+00:00", "type": "pullrequest_comment", "id": 144863367}, "pull_request": {"type": "pullrequest", "id": 573, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573"}}, "title": "Optional physics features"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573/comments/144772652.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573/_/diff#comment-144772652"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 573, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573"}}, "title": "Optional physics features"}, "content": {"raw": "To be clear, the ABI wouldn\u2019t break by adding a new feature to the feature list. It would just potentially change which plugins qualify as satisfying the `MinimumFeatureList`.\n\nI do think it\u2019s best to keep the minimum feature list frozen, because we don\u2019t want plugin developers to have a moving target that they need their plugins to qualify for. If a new feature needs to be added, it could be handled as its own independent feature branch within the physics system. That branch could simply contain a set of `Model3dPtr<FeatureList<DetachableJointFeature>>` \\(not a feature list that combines `MinimumFeatureList` \\+ `DetachableJointFeature`, but just the `DetachableJointFeature` API alone\\), and that branch only concerns itself with commands related to joints detaching.", "markup": "markdown", "html": "<p>To be clear, the ABI wouldn\u2019t break by adding a new feature to the feature list. It would just potentially change which plugins qualify as satisfying the <code>MinimumFeatureList</code>.</p>\n<p>I do think it\u2019s best to keep the minimum feature list frozen, because we don\u2019t want plugin developers to have a moving target that they need their plugins to qualify for. If a new feature needs to be added, it could be handled as its own independent feature branch within the physics system. That branch could simply contain a set of <code>Model3dPtr&lt;FeatureList&lt;DetachableJointFeature&gt;&gt;</code> (not a feature list that combines <code>MinimumFeatureList</code> + <code>DetachableJointFeature</code>, but just the <code>DetachableJointFeature</code> API alone), and that branch only concerns itself with commands related to joints detaching.</p>", "type": "rendered"}, "created_on": "2020-04-13T04:02:54.647812+00:00", "user": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "updated_on": "2020-04-13T04:02:54.650650+00:00", "type": "pullrequest_comment", "id": 144772652}, "pull_request": {"type": "pullrequest", "id": 573, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573"}}, "title": "Optional physics features"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573/comments/144717615.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573/_/diff#comment-144717615"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 573, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573"}}, "title": "Optional physics features"}, "content": {"raw": "This looks great! I like how casts are cached so that they don't hurt performance. I wanted to point out that it's not just the `MinimumFeatureList` that should not be modified. Even the `DetachableJointFeatureList` is now part of the ABI because adding a feature to it would break physics engine plugins that once worked. So if we really needed to add a feature to `DetachableJointFeatureList`, I guess we'll have to have another list, maybe `DetachableJointFeatureListWithNewFeature` and have some logic that tries to cast to `DetachableJointFeatureListWithNewFeature` first then fallback to `DetachableJointFeatureList`. I really hope it doesn't come to that though :fingers_crossed: \n", "markup": "markdown", "html": "<p>This looks great! I like how casts are cached so that they don't hurt performance. I wanted to point out that it's not just the <code>MinimumFeatureList</code> that should not be modified. Even the <code>DetachableJointFeatureList</code> is now part of the ABI because adding a feature to it would break physics engine plugins that once worked. So if we really needed to add a feature to <code>DetachableJointFeatureList</code>, I guess we'll have to have another list, maybe <code>DetachableJointFeatureListWithNewFeature</code> and have some logic that tries to cast to <code>DetachableJointFeatureListWithNewFeature</code> first then fallback to <code>DetachableJointFeatureList</code>. I really hope it doesn't come to that though <img class=\"emoji\" src=\"data/pf-emoji-service--cdn.us-east-1.prod.public.atl-paas.net/standard/551c9814-1d37-4573-819d-afab3afeaf32/48x48/1f91e.png\" alt=\"\ud83e\udd1e\" title=\":fingers_crossed:\" data-emoji-short-name=\":fingers_crossed:\" /> </p>", "type": "rendered"}, "created_on": "2020-04-10T20:15:42.084503+00:00", "user": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}, "updated_on": "2020-04-10T20:15:42.087324+00:00", "type": "pullrequest_comment", "id": 144717615}, "pull_request": {"type": "pullrequest", "id": 573, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573"}}, "title": "Optional physics features"}}, {"update": {"description": "## Overview\r\n\r\nPull request #541 adds the ability to choose different physics engine from the command line.\r\n\r\nThis pull request builds on top of that, and reduces `MinimumFeatureList` so that physics engines are not required to implement all features, and some of them are treated as optional.\r\n\r\n## Bullet\r\n\r\nI've been testing this with bullet using [this ign-physics PR](#!/ignitionrobotics/ign-physics/pull-requests/134/wip-bullet-updates/diff). There's only one feature left which Bullet doesn't implement, `ConstructSdfLink`. This PR an alternative to pull request #421.\r\n\r\n## Implementation\r\n\r\nThis PR makes the following features optional:\r\n\r\n* Features for detachable joints:\r\n\r\n    * `ignition::physics::AttachFixedJointFeature`\r\n    * `ignition::physics::DetachJointFeature`\r\n    * `ignition::physics::SetJointTransformFromParentFeature`\r\n    \r\n* Features for bounding box:\r\n\r\n    * `ignition::physics::GetModelBoundingBox`\r\n    \r\n* Features for joint velocity commands:\r\n\r\n    * `ignition::physics::SetJointVelocityCommandFeature`\r\n    \r\n* Features for 3D meshes:\r\n\r\n    * `ignition::physics::mesh::AttachMeshShapeFeature`\r\n    \r\n\r\nFor each group of optional features:\r\n\r\n* Create a feature list, i.e. `DetachableJointFeatureList`\r\n* Create entity types which use that list, i.e. `JointDetachableJointPtrType`\r\n* Create an entity map that holds the specialized entity type, i.e. `entityJointDetachableJointMap`\r\n* Use `entityCast` to cast from the original entity, created with `MinimumFeatureList`, to the specialized entity. `entityCast` will also populate the specialized map the first time it's called and get the entity from that map on subsequent calls. This means that `RequestFeature` is only called once for each combination of entity \\+ feature list.\r\n\r\nAny engine implementing all the minimum features will be loaded. If, at runtime, there's an attempt to use an unsupported feature, a warning is printed. That is:\r\n\r\n* If a `component::DetachableJoint` is created, a warning is printed and the joint isn't attached or detached.\r\n* If a `components::AxisAlignedBox` is created, a warning is printed and the box is not populated.\r\n* If a `components::JointVelocityCmd` is created, a warning is printed and the command has no effect.\r\n* If a collision has a mesh geometry, a warning is printed and the geometry isn't created.\r\n\r\n---\r\n\r\nThis PR is ready for review. I'll stop looking into Bullet now and remove features not needed by TPE on a subsequent PR.", "title": "Optional physics features", "destination": {"commit": {"hash": "3de8c831cdf6", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/3de8c831cdf6.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/3de8c831cdf6"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "ign-gazebo2"}}, "reason": "", "source": {"commit": {"hash": "61da24a1b843", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/61da24a1b843.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/61da24a1b843"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "chapulina/bullet"}}, "state": "OPEN", "author": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "date": "2020-04-10T18:42:49.346002+00:00"}, "pull_request": {"type": "pullrequest", "id": 573, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573"}}, "title": "Optional physics features"}}, {"update": {"description": "## Overview\r\n\r\nPull request #541 adds the ability to choose different physics engine from the command line.\r\n\r\nThis pull request builds on top of that, and reduces `MinimumFeatureList` so that physics engines are not required to implement all features, and some of them are treated as optional.\r\n\r\n## Bullet\r\n\r\nI've been testing this with bullet using [this ign-physics PR](#!/ignitionrobotics/ign-physics/pull-requests/134/wip-bullet-updates/diff). There's only one feature left which Bullet doesn't implement, `ConstructSdfLink`. This PR an alternative to pull request #421.\r\n\r\n## Implementation\r\n\r\nThis PR makes the following features optional:\r\n\r\n* Features for detachable joints:\r\n\r\n    * `ignition::physics::AttachFixedJointFeature`\r\n    * `ignition::physics::DetachJointFeature`\r\n    * `ignition::physics::SetJointTransformFromParentFeature`\r\n    \r\n* Features for bounding box:\r\n\r\n    * `ignition::physics::GetModelBoundingBox`\r\n    \r\n* Features for joint velocity commands:\r\n\r\n    * `ignition::physics::SetJointVelocityCommandFeature`\r\n    \r\n* Features for 3D meshes:\r\n\r\n    * `ignition::physics::mesh::AttachMeshShapeFeature`\r\n    \r\n\r\nFor each group of optional features:\r\n\r\n* Create a feature list, i.e. `DetachableJointFeatureList`\r\n* Create entity types which use that list, i.e. `JointDetachableJointPtrType`\r\n* Create an entity map that holds the specialized entity type, i.e. `entityJointDetachableJointMap`\r\n* Use `entityCast` to cast from the original entity, created with `MinimumFeatureList`, to the specialized entity. `entityCast` will also populate the specialized map the first time it's called and get the entity from that map on subsequent calls. This means that `RequestFeature` is only called once for each combination of entity \\+ feature list.\r\n\r\nAny engine implementing all the minimum features will be loaded. If, at runtime, there's an attempt to use an unsupported feature, a warning is printed. That is:\r\n\r\n* If a `component::DetachableJoint` is created, a warning is printed and the joint isn't attached or detached.\r\n* If a `components::AxisAlignedBox` is created, a warning is printed and the box is not populated.\r\n* If a `components::JointVelocityCmd` is created, a warning is printed and the command has no effect.\r\n* If a collision has a mesh geometry, a warning is printed and the geometry isn't created.\r\n\r\n---\r\n\r\nThis PR is ready for review. I'll stop looking into Bullet now and remove features not needed by TPE on a subsequent PR.", "title": "Optional physics features", "destination": {"commit": {"hash": "3de8c831cdf6", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/3de8c831cdf6.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/3de8c831cdf6"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "ign-gazebo2"}}, "reason": "", "source": {"commit": {"hash": "b81bb3b03372", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/b81bb3b03372.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/b81bb3b03372"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "chapulina/bullet"}}, "state": "OPEN", "author": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "date": "2020-04-10T18:42:12.822177+00:00"}, "pull_request": {"type": "pullrequest", "id": 573, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573"}}, "title": "Optional physics features"}}, {"update": {"description": "## Overview\r\n\r\nPull request #541 adds the ability to choose different physics engine from the command line.\r\n\r\nThis pull request builds on top of that, and reduces `MinimumFeatureList` so that physics engines are not required to implement all features, and some of them are treated as optional.\r\n\r\n## Bullet\r\n\r\nI've been testing this with bullet using [this ign-physics PR](#!/ignitionrobotics/ign-physics/pull-requests/134/wip-bullet-updates/diff). There's only one feature left which Bullet doesn't implement, `ConstructSdfLink`. This PR an alternative to pull request #421.\r\n\r\n## Implementation\r\n\r\nThis PR makes the following features optional:\r\n\r\n* Features for detachable joints:\r\n\r\n    * `ignition::physics::AttachFixedJointFeature`\r\n    * `ignition::physics::DetachJointFeature`\r\n    * `ignition::physics::SetJointTransformFromParentFeature`\r\n    \r\n* Features for bounding box:\r\n\r\n    * `ignition::physics::GetModelBoundingBox`\r\n    \r\n* Features for joint velocity commands:\r\n\r\n    * `ignition::physics::SetJointVelocityCommandFeature`\r\n    \r\n* Features for 3D meshes:\r\n\r\n    * `ignition::physics::mesh::AttachMeshShapeFeature`\r\n    \r\n\r\nFor each group of optional features:\r\n\r\n* Create a feature list, i.e. `DetachableJointFeatureList`\r\n* Create entity types which use that list, i.e. `JointDetachableJointPtrType`\r\n* Create an entity map that holds the specialized entity type, i.e. `entityJointDetachableJointMap`\r\n* Use `entityCast` to cast from the original entity, created with `MinimumFeatureList`, to the specialized entity. `entityCast` will also populate the specialized map the first time it's called and get the entity from that map on subsequent calls. This means that `RequestFeature` is only called once for each combination of entity \\+ feature list.\r\n\r\nAny engine implementing all the minimum features will be loaded. If, at runtime, there's an attempt to use an unsupported feature, a warning is printed. That is:\r\n\r\n* If a `component::DetachableJoint` is created, a warning is printed and the joint isn't attached or detached.\r\n* If a `components::AxisAlignedBox` is created, a warning is printed and the box is not populated.\r\n* If a `components::JointVelocityCmd` is created, a warning is printed and the command has no effect.\r\n* If a collision has a mesh geometry, a warning is printed and the geometry isn't created.\r\n\r\n---\r\n\r\nThis PR is ready for review. I'll stop looking into Bullet now and remove features not needed by TPE on a subsequent PR.", "title": "Optional physics features", "destination": {"commit": {"hash": "3de8c831cdf6", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/3de8c831cdf6.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/3de8c831cdf6"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "ign-gazebo2"}}, "reason": "", "source": {"commit": {"hash": "b81bb3b03372", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/b81bb3b03372.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/b81bb3b03372"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "chapulina/bullet"}}, "state": "OPEN", "author": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "date": "2020-04-10T18:42:12.771827+00:00"}, "pull_request": {"type": "pullrequest", "id": 573, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573"}}, "title": "Optional physics features"}}, {"approval": {"date": "2020-04-10T01:20:53.402449+00:00", "pullrequest": {"type": "pullrequest", "id": 573, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573"}}, "title": "Optional physics features"}, "user": {"display_name": "Claire Wang", "uuid": "{4b4ab2f2-8148-463e-a671-2eed1e6ccd42}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B4b4ab2f2-8148-463e-a671-2eed1e6ccd42%7D"}, "html": {"href": "https://bitbucket.org/%7B4b4ab2f2-8148-463e-a671-2eed1e6ccd42%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5d3f35705e485d0dab01c896/a44642e6-28d8-4727-b9cc-b4c18e91d167/128"}}, "nickname": "Claire Wang", "type": "user", "account_id": "5d3f35705e485d0dab01c896"}}, "pull_request": {"type": "pullrequest", "id": 573, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573"}}, "title": "Optional physics features"}}, {"update": {"description": "## Overview\r\n\r\nPull request #541 adds the ability to choose different physics engine from the command line.\r\n\r\nThis pull request builds on top of that, and reduces `MinimumFeatureList` so that physics engines are not required to implement all features, and some of them are treated as optional.\r\n\r\n## Bullet\r\n\r\nI've been testing this with bullet using [this ign-physics PR](#!/ignitionrobotics/ign-physics/pull-requests/134/wip-bullet-updates/diff). There's only one feature left which Bullet doesn't implement, `ConstructSdfLink`. This PR an alternative to pull request #421.\r\n\r\n## Implementation\r\n\r\nThis PR makes the following features optional:\r\n\r\n* Features for detachable joints:\r\n\r\n    * `ignition::physics::AttachFixedJointFeature`\r\n    * `ignition::physics::DetachJointFeature`\r\n    * `ignition::physics::SetJointTransformFromParentFeature`\r\n    \r\n* Features for bounding box:\r\n\r\n    * `ignition::physics::GetModelBoundingBox`\r\n    \r\n* Features for joint velocity commands:\r\n\r\n    * `ignition::physics::SetJointVelocityCommandFeature`\r\n    \r\n* Features for 3D meshes:\r\n\r\n    * `ignition::physics::mesh::AttachMeshShapeFeature`\r\n    \r\n\r\nFor each group of optional features:\r\n\r\n* Create a feature list, i.e. `DetachableJointFeatureList`\r\n* Create entity types which use that list, i.e. `JointDetachableJointPtrType`\r\n* Create an entity map that holds the specialized entity type, i.e. `entityJointDetachableJointMap`\r\n* Use `entityCast` to cast from the original entity, created with `MinimumFeatureList`, to the specialized entity. `entityCast` will also populate the specialized map the first time it's called and get the entity from that map on subsequent calls. This means that `RequestFeature` is only called once for each combination of entity \\+ feature list.\r\n\r\nAny engine implementing all the minimum features will be loaded. If, at runtime, there's an attempt to use an unsupported feature, a warning is printed. That is:\r\n\r\n* If a `component::DetachableJoint` is created, a warning is printed and the joint isn't attached or detached.\r\n* If a `components::AxisAlignedBox` is created, a warning is printed and the box is not populated.\r\n* If a `components::JointVelocityCmd` is created, a warning is printed and the command has no effect.\r\n* If a collision has a mesh geometry, a warning is printed and the geometry isn't created.\r\n\r\n---\r\n\r\nThis PR is ready for review. I'll stop looking into Bullet now and remove features not needed by TPE on a subsequent PR.", "title": "Optional physics features", "destination": {"commit": {"hash": "bc00ff278175", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/bc00ff278175.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/bc00ff278175"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "ign-gazebo2"}}, "reason": "", "source": {"commit": {"hash": "b81bb3b03372", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/b81bb3b03372.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/b81bb3b03372"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "chapulina/bullet"}}, "state": "OPEN", "author": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "date": "2020-04-10T00:34:39.238310+00:00"}, "pull_request": {"type": "pullrequest", "id": 573, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573"}}, "title": "Optional physics features"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573/comments/143648543.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573/_/diff#comment-143648543"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 573, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573"}}, "title": "Optional physics features"}, "content": {"raw": "Confirm behaviour as expected. Different/shorter list of missing features are warned when testing with TPE/Bullet/HelloWorld plugins.\n\nTerminal output see below\n\n`Bullet`: `find_physics_engined` \n\n```\n$ IGN_GAZEBO_PHYSICS_ENGINE_PATH=`pwd`/build/ignition-physics ign gazebo -v 2 shapes.sdf --physics-engine ignition-physics-bullet-plugin\n[Wrn] [Physics.cc:378] Plugin [ignition::physics::bullet::Plugin] misses required features:\n- N8ignition7physics14FixedJointCastE\n- N8ignition7physics18DetachJointFeatureE\n- N8ignition7physics19GetShapeBoundingBoxE\n- N8ignition7physics23AttachFixedJointFeatureE\n- N8ignition7physics30SetJointVelocityCommandFeatureE\n- N8ignition7physics34SetJointTransformFromParentFeatureE\n- N8ignition7physics3sdf16ConstructSdfLinkE\n- N8ignition7physics4mesh13MeshShapeCastE\n- N8ignition7physics4mesh22AttachMeshShapeFeatureE\n[Err] [Physics.cc:383] Failed to load a valid physics engine from [/home/claire/blueprint_ws/install/lib/ign-physics-1/engine-plugins/libignition-physics-bullet-plugin.so].\n[GUI] [Wrn] [Application.cc:649] [QT] file::/ComponentInspector/ComponentInspector.qml:161: ReferenceError: ComponentsModel is not defined\n[GUI] [Wrn] [RenderUtil.cc:903] Failed to create grid for scene [scene] on engine [ogre2]\n```\n\n`Bullet`: `chapulina/bullet`, with significantly fewer missing features printed\n\n```\n$ IGN_GAZEBO_PHYSICS_ENGINE_PATH=`pwd`/build/ignition-physics ign gazebo -v 2 shapes.sdf --physics-engine ignition-physics-bullet-plugin\n[Wrn] [Physics.cc:471] Plugin [ignition::physics::bullet::Plugin] misses required features:\n- N8ignition7physics3sdf16ConstructSdfLinkE\n[Err] [Physics.cc:476] Failed to load a valid physics engine from [/home/claire/blueprint_ws/install/lib/ign-physics-1/engine-plugins/libignition-physics-bullet-plugin.so].\n[GUI] [Wrn] [Application.cc:649] [QT] file::/ComponentInspector/ComponentInspector.qml:161: ReferenceError: ComponentsModel is not defined\n[GUI] [Wrn] [RenderUtil.cc:903] Failed to create grid for scene [scene] on engine [ogre2]\n```\n\n`TPE`: the last two missing features are different from `find_physics_engined` branch output\n\n```\n$ IGN_GAZEBO_PHYSICS_ENGINE_PATH=`pwd`/build/ignition-physics ign gazebo -v 2 shapes.sdf --physics-engine ignition-physics-tpe-plugin    \n[Wrn] [Physics.cc:476] Plugin [ignition::physics::tpeplugin::Plugin] misses required features:\n- N8ignition7physics17GetJointFromModelE\n- N8ignition7physics18GetBasicJointStateE\n- N8ignition7physics18SetBasicJointStateE\n- N8ignition7physics23GetBasicJointPropertiesE\n- N8ignition7physics26AddLinkExternalForceTorqueE\n- N8ignition7physics30GetContactsFromLastStepFeatureE\n- N8ignition7physics3sdf17ConstructSdfJointE\n- N8ignition7physics3sdf21ConstructSdfCollisionE\n[Err] [Physics.cc:481] Failed to load a valid physics engine from [/home/claire/citadel_ws/install/lib/ign-physics-2/engine-plugins/libignition-physics-tpe-plugin.so].\n[GUI] [Wrn] [Application.cc:649] [QT] file::/ComponentInspector/ComponentInspector.qml:161: ReferenceError: ComponentsModel is not defined\n```\n\n`HelloWorld`: only ~20 missing features are printed vs. ~23 in `find_physics_engined` \n\n```\n$ IGN_GAZEBO_PHYSICS_ENGINE_PATH=`pwd`/build ign gazebo -v 2 build/rolling_box.sdf --physics-engine HelloWorldPlugin\n[Wrn] [Physics.cc:476] Plugin [mock::HelloWorldPlugin] misses required features:\n- N8ignition7physics11ForwardStepE\n- N8ignition7physics16GetLinkFromModelE\n- N8ignition7physics16GetShapeFromLinkE\n- N8ignition7physics17GetJointFromModelE\n- N8ignition7physics17GetModelFromWorldE\n- N8ignition7physics18GetBasicJointStateE\n- N8ignition7physics18GetWorldFromEngineE\n- N8ignition7physics18LinkFrameSemanticsE\n- N8ignition7physics18SetBasicJointStateE\n- N8ignition7physics20FindFreeGroupFeatureE\n- N8ignition7physics20RemoveModelFromWorldE\n- N8ignition7physics21SetFreeGroupWorldPoseE\n- N8ignition7physics23GetBasicJointPropertiesE\n- N8ignition7physics26AddLinkExternalForceTorqueE\n- N8ignition7physics30GetContactsFromLastStepFeatureE\n- N8ignition7physics3sdf16ConstructSdfLinkE\n- N8ignition7physics3sdf17ConstructSdfJointE\n- N8ignition7physics3sdf17ConstructSdfModelE\n- N8ignition7physics3sdf17ConstructSdfWorldE\n- N8ignition7physics3sdf21ConstructSdfCollisionE\n[Err] [Physics.cc:481] Failed to load a valid physics engine from [/home/claire/citadel_ws/src/ign-physics/examples/hello_world_plugin/build/libHelloWorldPlugin.so].\n```\n\n\u200c", "markup": "markdown", "html": "<p>Confirm behaviour as expected. Different/shorter list of missing features are warned when testing with TPE/Bullet/HelloWorld plugins.</p>\n<p>Terminal output see below</p>\n<p><code>Bullet</code>: <code>find_physics_engined</code> </p>\n<div class=\"codehilite\"><pre><span></span>$ <span class=\"nv\">IGN_GAZEBO_PHYSICS_ENGINE_PATH</span><span class=\"o\">=</span><span class=\"sb\">`</span><span class=\"nb\">pwd</span><span class=\"sb\">`</span>/build/ignition-physics ign gazebo -v <span class=\"m\">2</span> shapes.sdf --physics-engine ignition-physics-bullet-plugin\n<span class=\"o\">[</span>Wrn<span class=\"o\">]</span> <span class=\"o\">[</span>Physics.cc:378<span class=\"o\">]</span> Plugin <span class=\"o\">[</span>ignition::physics::bullet::Plugin<span class=\"o\">]</span> misses required features:\n- N8ignition7physics14FixedJointCastE\n- N8ignition7physics18DetachJointFeatureE\n- N8ignition7physics19GetShapeBoundingBoxE\n- N8ignition7physics23AttachFixedJointFeatureE\n- N8ignition7physics30SetJointVelocityCommandFeatureE\n- N8ignition7physics34SetJointTransformFromParentFeatureE\n- N8ignition7physics3sdf16ConstructSdfLinkE\n- N8ignition7physics4mesh13MeshShapeCastE\n- N8ignition7physics4mesh22AttachMeshShapeFeatureE\n<span class=\"o\">[</span>Err<span class=\"o\">]</span> <span class=\"o\">[</span>Physics.cc:383<span class=\"o\">]</span> Failed to load a valid physics engine from <span class=\"o\">[</span>/home/claire/blueprint_ws/install/lib/ign-physics-1/engine-plugins/libignition-physics-bullet-plugin.so<span class=\"o\">]</span>.\n<span class=\"o\">[</span>GUI<span class=\"o\">]</span> <span class=\"o\">[</span>Wrn<span class=\"o\">]</span> <span class=\"o\">[</span>Application.cc:649<span class=\"o\">]</span> <span class=\"o\">[</span>QT<span class=\"o\">]</span> file::/ComponentInspector/ComponentInspector.qml:161: ReferenceError: ComponentsModel is not defined\n<span class=\"o\">[</span>GUI<span class=\"o\">]</span> <span class=\"o\">[</span>Wrn<span class=\"o\">]</span> <span class=\"o\">[</span>RenderUtil.cc:903<span class=\"o\">]</span> Failed to create grid <span class=\"k\">for</span> scene <span class=\"o\">[</span>scene<span class=\"o\">]</span> on engine <span class=\"o\">[</span>ogre2<span class=\"o\">]</span>\n</pre></div>\n\n\n<p><code>Bullet</code>: <code>chapulina/bullet</code>, with significantly fewer missing features printed</p>\n<div class=\"codehilite\"><pre><span></span>$ <span class=\"nv\">IGN_GAZEBO_PHYSICS_ENGINE_PATH</span><span class=\"o\">=</span><span class=\"sb\">`</span><span class=\"nb\">pwd</span><span class=\"sb\">`</span>/build/ignition-physics ign gazebo -v <span class=\"m\">2</span> shapes.sdf --physics-engine ignition-physics-bullet-plugin\n<span class=\"o\">[</span>Wrn<span class=\"o\">]</span> <span class=\"o\">[</span>Physics.cc:471<span class=\"o\">]</span> Plugin <span class=\"o\">[</span>ignition::physics::bullet::Plugin<span class=\"o\">]</span> misses required features:\n- N8ignition7physics3sdf16ConstructSdfLinkE\n<span class=\"o\">[</span>Err<span class=\"o\">]</span> <span class=\"o\">[</span>Physics.cc:476<span class=\"o\">]</span> Failed to load a valid physics engine from <span class=\"o\">[</span>/home/claire/blueprint_ws/install/lib/ign-physics-1/engine-plugins/libignition-physics-bullet-plugin.so<span class=\"o\">]</span>.\n<span class=\"o\">[</span>GUI<span class=\"o\">]</span> <span class=\"o\">[</span>Wrn<span class=\"o\">]</span> <span class=\"o\">[</span>Application.cc:649<span class=\"o\">]</span> <span class=\"o\">[</span>QT<span class=\"o\">]</span> file::/ComponentInspector/ComponentInspector.qml:161: ReferenceError: ComponentsModel is not defined\n<span class=\"o\">[</span>GUI<span class=\"o\">]</span> <span class=\"o\">[</span>Wrn<span class=\"o\">]</span> <span class=\"o\">[</span>RenderUtil.cc:903<span class=\"o\">]</span> Failed to create grid <span class=\"k\">for</span> scene <span class=\"o\">[</span>scene<span class=\"o\">]</span> on engine <span class=\"o\">[</span>ogre2<span class=\"o\">]</span>\n</pre></div>\n\n\n<p><code>TPE</code>: the last two missing features are different from <code>find_physics_engined</code> branch output</p>\n<div class=\"codehilite\"><pre><span></span>$ <span class=\"nv\">IGN_GAZEBO_PHYSICS_ENGINE_PATH</span><span class=\"o\">=</span><span class=\"sb\">`</span><span class=\"nb\">pwd</span><span class=\"sb\">`</span>/build/ignition-physics ign gazebo -v <span class=\"m\">2</span> shapes.sdf --physics-engine ignition-physics-tpe-plugin    \n<span class=\"o\">[</span>Wrn<span class=\"o\">]</span> <span class=\"o\">[</span>Physics.cc:476<span class=\"o\">]</span> Plugin <span class=\"o\">[</span>ignition::physics::tpeplugin::Plugin<span class=\"o\">]</span> misses required features:\n- N8ignition7physics17GetJointFromModelE\n- N8ignition7physics18GetBasicJointStateE\n- N8ignition7physics18SetBasicJointStateE\n- N8ignition7physics23GetBasicJointPropertiesE\n- N8ignition7physics26AddLinkExternalForceTorqueE\n- N8ignition7physics30GetContactsFromLastStepFeatureE\n- N8ignition7physics3sdf17ConstructSdfJointE\n- N8ignition7physics3sdf21ConstructSdfCollisionE\n<span class=\"o\">[</span>Err<span class=\"o\">]</span> <span class=\"o\">[</span>Physics.cc:481<span class=\"o\">]</span> Failed to load a valid physics engine from <span class=\"o\">[</span>/home/claire/citadel_ws/install/lib/ign-physics-2/engine-plugins/libignition-physics-tpe-plugin.so<span class=\"o\">]</span>.\n<span class=\"o\">[</span>GUI<span class=\"o\">]</span> <span class=\"o\">[</span>Wrn<span class=\"o\">]</span> <span class=\"o\">[</span>Application.cc:649<span class=\"o\">]</span> <span class=\"o\">[</span>QT<span class=\"o\">]</span> file::/ComponentInspector/ComponentInspector.qml:161: ReferenceError: ComponentsModel is not defined\n</pre></div>\n\n\n<p><code>HelloWorld</code>: only ~20 missing features are printed vs. ~23 in <code>find_physics_engined</code> </p>\n<div class=\"codehilite\"><pre><span></span>$ <span class=\"nv\">IGN_GAZEBO_PHYSICS_ENGINE_PATH</span><span class=\"o\">=</span><span class=\"sb\">`</span><span class=\"nb\">pwd</span><span class=\"sb\">`</span>/build ign gazebo -v <span class=\"m\">2</span> build/rolling_box.sdf --physics-engine HelloWorldPlugin\n<span class=\"o\">[</span>Wrn<span class=\"o\">]</span> <span class=\"o\">[</span>Physics.cc:476<span class=\"o\">]</span> Plugin <span class=\"o\">[</span>mock::HelloWorldPlugin<span class=\"o\">]</span> misses required features:\n- N8ignition7physics11ForwardStepE\n- N8ignition7physics16GetLinkFromModelE\n- N8ignition7physics16GetShapeFromLinkE\n- N8ignition7physics17GetJointFromModelE\n- N8ignition7physics17GetModelFromWorldE\n- N8ignition7physics18GetBasicJointStateE\n- N8ignition7physics18GetWorldFromEngineE\n- N8ignition7physics18LinkFrameSemanticsE\n- N8ignition7physics18SetBasicJointStateE\n- N8ignition7physics20FindFreeGroupFeatureE\n- N8ignition7physics20RemoveModelFromWorldE\n- N8ignition7physics21SetFreeGroupWorldPoseE\n- N8ignition7physics23GetBasicJointPropertiesE\n- N8ignition7physics26AddLinkExternalForceTorqueE\n- N8ignition7physics30GetContactsFromLastStepFeatureE\n- N8ignition7physics3sdf16ConstructSdfLinkE\n- N8ignition7physics3sdf17ConstructSdfJointE\n- N8ignition7physics3sdf17ConstructSdfModelE\n- N8ignition7physics3sdf17ConstructSdfWorldE\n- N8ignition7physics3sdf21ConstructSdfCollisionE\n<span class=\"o\">[</span>Err<span class=\"o\">]</span> <span class=\"o\">[</span>Physics.cc:481<span class=\"o\">]</span> Failed to load a valid physics engine from <span class=\"o\">[</span>/home/claire/citadel_ws/src/ign-physics/examples/hello_world_plugin/build/libHelloWorldPlugin.so<span class=\"o\">]</span>.\n</pre></div>\n\n\n<p>\u200c</p>", "type": "rendered"}, "created_on": "2020-04-04T02:09:37.986471+00:00", "user": {"display_name": "Claire Wang", "uuid": "{4b4ab2f2-8148-463e-a671-2eed1e6ccd42}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B4b4ab2f2-8148-463e-a671-2eed1e6ccd42%7D"}, "html": {"href": "https://bitbucket.org/%7B4b4ab2f2-8148-463e-a671-2eed1e6ccd42%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5d3f35705e485d0dab01c896/a44642e6-28d8-4727-b9cc-b4c18e91d167/128"}}, "nickname": "Claire Wang", "type": "user", "account_id": "5d3f35705e485d0dab01c896"}, "updated_on": "2020-04-04T02:09:37.989015+00:00", "type": "pullrequest_comment", "id": 143648543}, "pull_request": {"type": "pullrequest", "id": 573, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573"}}, "title": "Optional physics features"}}, {"update": {"description": "## Overview\r\n\r\nPull request #541 adds the ability to choose different physics engine from the command line.\r\n\r\nThis pull request builds on top of that, and reduces `MinimumFeatureList` so that physics engines are not required to implement all features, and some of them are treated as optional.\r\n\r\n## Bullet\r\n\r\nI've been testing this with bullet using [this ign-physics PR](#!/ignitionrobotics/ign-physics/pull-requests/134/wip-bullet-updates/diff). There's only one feature left which Bullet doesn't implement, `ConstructSdfLink`. This PR an alternative to pull request #421.\r\n\r\n## Implementation\r\n\r\nThis PR makes the following features optional:\r\n\r\n* Features for detachable joints:\r\n\r\n    * `ignition::physics::AttachFixedJointFeature`\r\n    * `ignition::physics::DetachJointFeature`\r\n    * `ignition::physics::SetJointTransformFromParentFeature`\r\n    \r\n* Features for bounding box:\r\n\r\n    * `ignition::physics::GetModelBoundingBox`\r\n    \r\n* Features for joint velocity commands:\r\n\r\n    * `ignition::physics::SetJointVelocityCommandFeature`\r\n    \r\n* Features for 3D meshes:\r\n\r\n    * `ignition::physics::mesh::AttachMeshShapeFeature`\r\n    \r\n\r\nFor each group of optional features:\r\n\r\n* Create a feature list, i.e. `DetachableJointFeatureList`\r\n* Create entity types which use that list, i.e. `JointDetachableJointPtrType`\r\n* Create an entity map that holds the specialized entity type, i.e. `entityJointDetachableJointMap`\r\n* Use `entityCast` to cast from the original entity, created with `MinimumFeatureList`, to the specialized entity. `entityCast` will also populate the specialized map the first time it's called and get the entity from that map on subsequent calls. This means that `RequestFeature` is only called once for each combination of entity \\+ feature list.\r\n\r\nAny engine implementing all the minimum features will be loaded. If, at runtime, there's an attempt to use an unsupported feature, a warning is printed. That is:\r\n\r\n* If a `component::DetachableJoint` is created, a warning is printed and the joint isn't attached or detached.\r\n* If a `components::AxisAlignedBox` is created, a warning is printed and the box is not populated.\r\n* If a `components::JointVelocityCmd` is created, a warning is printed and the command has no effect.\r\n* If a collision has a mesh geometry, a warning is printed and the geometry isn't created.\r\n\r\n---\r\n\r\nThis PR is ready for review. I'll stop looking into Bullet now and remove features not needed by TPE on a subsequent PR.", "title": "Optional physics features", "destination": {"commit": {"hash": "7fa2a0455c29", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/7fa2a0455c29.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/7fa2a0455c29"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "ign-gazebo2"}}, "reason": "", "source": {"commit": {"hash": "c3b861e78f39", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/c3b861e78f39.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/c3b861e78f39"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "chapulina/bullet"}}, "state": "OPEN", "author": {"display_name": "Claire Wang", "uuid": "{4b4ab2f2-8148-463e-a671-2eed1e6ccd42}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B4b4ab2f2-8148-463e-a671-2eed1e6ccd42%7D"}, "html": {"href": "https://bitbucket.org/%7B4b4ab2f2-8148-463e-a671-2eed1e6ccd42%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5d3f35705e485d0dab01c896/a44642e6-28d8-4727-b9cc-b4c18e91d167/128"}}, "nickname": "Claire Wang", "type": "user", "account_id": "5d3f35705e485d0dab01c896"}, "date": "2020-04-03T21:47:15.051021+00:00"}, "pull_request": {"type": "pullrequest", "id": 573, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573"}}, "title": "Optional physics features"}}, {"update": {"description": "## Overview\n\nPull request #541 adds the ability to choose different physics engine from the command line.\n\nThis pull request builds on top of that, and reduces `MinimumFeatureList` so that physics engines are not required to implement all features, and some of them are treated as optional.\n\n## Bullet\n\nI've been testing this with bullet using [this ign-physics PR](#!/ignitionrobotics/ign-physics/pull-requests/134/wip-bullet-updates/diff). There's only one feature left which Bullet doesn't implement, `ConstructSdfLink`. This PR an alternative to pull request #421.\n\n## Implementation\n\nThis PR makes the following features optional:\n\n* Features for detachable joints:\n    * `ignition::physics::AttachFixedJointFeature`\n    * `ignition::physics::DetachJointFeature`\n    * `ignition::physics::SetJointTransformFromParentFeature`\n* Features for bounding box:\n    * `ignition::physics::GetModelBoundingBox`\n* Features for joint velocity commands:\n    * `ignition::physics::SetJointVelocityCommandFeature`\n* Features for 3D meshes:\n    * `ignition::physics::mesh::AttachMeshShapeFeature`\n\nFor each group of optional features:\n\n* Create a feature list, i.e. `DetachableJointFeatureList`\n* Create entity types which use that list, i.e. `JointDetachableJointPtrType`\n* Create an entity map that holds the specialized entity type, i.e. `entityJointDetachableJointMap`\n* Use `entityCast` to cast from the original entity, created with `MinimumFeatureList`, to the specialized entity. `entityCast` will also populate the specialized map the first time it's called and get the entity from that map on subsequent calls. This means that `RequestFeature` is only called once for each combination of entity + feature list.\n\nAny engine implementing all the minimum features will be loaded. If, at runtime, there's an attempt to use an unsupported feature, a warning is printed. That is:\n\n* If a `component::DetachableJoint` is created, a warning is printed and the joint isn't attached or detached.\n* If a `components::AxisAlignedBox` is created, a warning is printed and the box is not populated.\n* If a `components::JointVelocityCmd` is created, a warning is printed and the command has no effect.\n* If a collision has a mesh geometry, a warning is printed and the geometry isn't created.\n\n---\n\nThis PR is ready for review. I'll stop looking into Bullet now and remove features not needed by TPE on a subsequent PR.", "title": "Optional physics features", "destination": {"commit": {"hash": "7fa2a0455c29", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/7fa2a0455c29.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/7fa2a0455c29"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "ign-gazebo2"}}, "reason": "", "source": {"commit": {"hash": "c3b861e78f39", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/c3b861e78f39.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/c3b861e78f39"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "chapulina/bullet"}}, "state": "OPEN", "author": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "date": "2020-04-03T00:19:13.143326+00:00"}, "pull_request": {"type": "pullrequest", "id": 573, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573"}}, "title": "Optional physics features"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573/comments/143222802.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573/_/diff#comment-143222802"}}, "parent": {"id": 143222503, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573/comments/143222503.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573/_/diff#comment-143222503"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 573, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573"}}, "title": "Optional physics features"}, "content": {"raw": "Sounds good. I\u2019ll check those. Thanks!", "markup": "markdown", "html": "<p>Sounds good. I\u2019ll check those. Thanks!</p>", "type": "rendered"}, "created_on": "2020-04-02T02:31:28.663283+00:00", "user": {"display_name": "Claire Wang", "uuid": "{4b4ab2f2-8148-463e-a671-2eed1e6ccd42}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B4b4ab2f2-8148-463e-a671-2eed1e6ccd42%7D"}, "html": {"href": "https://bitbucket.org/%7B4b4ab2f2-8148-463e-a671-2eed1e6ccd42%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5d3f35705e485d0dab01c896/a44642e6-28d8-4727-b9cc-b4c18e91d167/128"}}, "nickname": "Claire Wang", "type": "user", "account_id": "5d3f35705e485d0dab01c896"}, "updated_on": "2020-04-02T02:31:28.667818+00:00", "type": "pullrequest_comment", "id": 143222802}, "pull_request": {"type": "pullrequest", "id": 573, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573"}}, "title": "Optional physics features"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573/comments/143222503.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573/_/diff#comment-143222503"}}, "parent": {"id": 143221799, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573/comments/143221799.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573/_/diff#comment-143221799"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 573, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573"}}, "title": "Optional physics features"}, "content": {"raw": "Thanks for checking. You can try with Bullet to see that the missing features list decreases. Another thing to check is that all features being made optional still work with DART. \n\nChecking with TPE would be good, but it will just print a different list of missing features. So maybe it's not worth the effort right now.\n\nI think the main thing to check in this PR is whether the general approach is ok. I'll open new PRs to make all the features missing from TPE optional.", "markup": "markdown", "html": "<p>Thanks for checking. You can try with Bullet to see that the missing features list decreases. Another thing to check is that all features being made optional still work with DART. </p>\n<p>Checking with TPE would be good, but it will just print a different list of missing features. So maybe it's not worth the effort right now.</p>\n<p>I think the main thing to check in this PR is whether the general approach is ok. I'll open new PRs to make all the features missing from TPE optional.</p>", "type": "rendered"}, "created_on": "2020-04-02T02:26:26.030885+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2020-04-02T02:26:26.035512+00:00", "type": "pullrequest_comment", "id": 143222503}, "pull_request": {"type": "pullrequest", "id": 573, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573"}}, "title": "Optional physics features"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573/comments/143221799.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573/_/diff#comment-143221799"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 573, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573"}}, "title": "Optional physics features"}, "content": {"raw": "Any tips on best way to test this branch? I tried to backport TPE to blueprint to test this, but encountered compiling issues due to feature conflicts. Should I just use bullet in this case? Or I can forward port this into a citadel branch like what you did with #541. I think Im gonna try that", "markup": "markdown", "html": "<p>Any tips on best way to test this branch? I tried to backport TPE to blueprint to test this, but encountered compiling issues due to feature conflicts. Should I just use bullet in this case? Or I can forward port this into a citadel branch like what you did with #541. I think Im gonna try that</p>", "type": "rendered"}, "created_on": "2020-04-02T02:12:45.889490+00:00", "user": {"display_name": "Claire Wang", "uuid": "{4b4ab2f2-8148-463e-a671-2eed1e6ccd42}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B4b4ab2f2-8148-463e-a671-2eed1e6ccd42%7D"}, "html": {"href": "https://bitbucket.org/%7B4b4ab2f2-8148-463e-a671-2eed1e6ccd42%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5d3f35705e485d0dab01c896/a44642e6-28d8-4727-b9cc-b4c18e91d167/128"}}, "nickname": "Claire Wang", "type": "user", "account_id": "5d3f35705e485d0dab01c896"}, "updated_on": "2020-04-02T02:14:47.887667+00:00", "type": "pullrequest_comment", "id": 143221799}, "pull_request": {"type": "pullrequest", "id": 573, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573"}}, "title": "Optional physics features"}}, {"update": {"description": "## Overview\n\nPull request #541 adds the ability to choose different physics engine from the command line.\n\nThis pull request builds on top of that, and reduces `MinimumFeatureList` so that physics engines are not required to implement all features, and some of them are treated as optional.\n\n## Bullet\n\nI've been testing this with bullet using [this ign-physics PR](#!/ignitionrobotics/ign-physics/pull-requests/134/wip-bullet-updates/diff). There's only one feature left which Bullet doesn't implement, `ConstructSdfLink`. This PR an alternative to pull request #421.\n\n## Implementation\n\nThis PR makes the following features optional:\n\n* Features for detachable joints:\n    * `ignition::physics::AttachFixedJointFeature`\n    * `ignition::physics::DetachJointFeature`\n    * `ignition::physics::SetJointTransformFromParentFeature`\n* Features for bounding box:\n    * `ignition::physics::GetModelBoundingBox`\n* Features for joint velocity commands:\n    * `ignition::physics::SetJointVelocityCommandFeature`\n* Features for 3D meshes:\n    * `ignition::physics::mesh::AttachMeshShapeFeature`\n\nFor each group of optional features:\n\n* Create a feature list, i.e. `DetachableJointFeatureList`\n* Create entity types which use that list, i.e. `JointDetachableJointPtrType`\n* Create an entity map that holds the specialized entity type, i.e. `entityJointDetachableJointMap`\n* Use `entityCast` to cast from the original entity, created with `MinimumFeatureList`, to the specialized entity. `entityCast` will also populate the specialized map the first time it's called and get the entity from that map on subsequent calls. This means that `RequestFeature` is only called once for each combination of entity + feature list.\n\nAny engine implementing all the minimum features will be loaded. If, at runtime, there's an attempt to use an unsupported feature, a warning is printed. That is:\n\n* If a `component::DetachableJoint` is created, a warning is printed and the joint isn't attached or detached.\n* If a `components::AxisAlignedBox` is created, a warning is printed and the box is not populated.\n* If a `components::JointVelocityCmd` is created, a warning is printed and the command has no effect.\n* If a collision has a mesh geometry, a warning is printed and the geometry isn't created.\n\n---\n\nThis PR is ready for review. I'll stop looking into Bullet now and remove features not needed by TPE on a subsequent PR.", "title": "Optional physics features", "destination": {"commit": {"hash": "5dc8a7734f7e", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/5dc8a7734f7e.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/5dc8a7734f7e"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "ign-gazebo2"}}, "reason": "", "source": {"commit": {"hash": "f3933a447ace", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/f3933a447ace.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/f3933a447ace"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "chapulina/bullet"}}, "state": "OPEN", "author": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "date": "2020-03-27T17:17:25.940094+00:00"}, "pull_request": {"type": "pullrequest", "id": 573, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573"}}, "title": "Optional physics features"}}, {"update": {"description": "## Overview\n\nPull request #541 adds the ability to choose different physics engine from the command line.\n\nThis pull request builds on top of that, and reduces `MinimumFeatureList` so that physics engines are not required to implement all features, and some of them are treated as optional.\n\n## Bullet\n\nI've been testing this with bullet using [this ign-physics PR](#!/ignitionrobotics/ign-physics/pull-requests/134/wip-bullet-updates/diff). There's only one feature left which Bullet doesn't implement, `ConstructSdfLink`. This PR an alternative to pull request #421.\n\n## Implementation\n\nThis PR makes the following features optional:\n\n* Features for detachable joints:\n    * `ignition::physics::AttachFixedJointFeature`\n    * `ignition::physics::DetachJointFeature`\n    * `ignition::physics::SetJointTransformFromParentFeature`\n* Features for bounding box:\n    * `ignition::physics::GetModelBoundingBox`\n* Features for joint velocity commands:\n    * `ignition::physics::SetJointVelocityCommandFeature`\n* Features for 3D meshes:\n    * `ignition::physics::mesh::AttachMeshShapeFeature`\n\nFor each group of optional features:\n\n* Create a feature list, i.e. `DetachableJointFeatureList`\n* Create entity types which use that list, i.e. `JointDetachableJointPtrType`\n* Create an entity map that holds the specialized entity type, i.e. `entityJointDetachableJointMap`\n* Use `entityCast` to cast from the original entity, created with `MinimumFeatureList`, to the specialized entity. `entityCast` will also populate the specialized map the first time it's called and get the entity from that map on subsequent calls. This means that `RequestFeature` is only called once for each combination of entity + feature list.\n\nAny engine implementing all the minimum features will be loaded. If, at runtime, there's an attempt to use an unsupported feature, a warning is printed. That is:\n\n* If a `component::DetachableJoint` is created, a warning is printed and the joint isn't attached or detached.\n* If a `components::AxisAlignedBox` is created, a warning is printed and the box is not populated.\n* If a `components::JointVelocityCmd` is created, a warning is printed and the command has no effect.\n* If a collision has a mesh geometry, a warning is printed and the geometry isn't created.\n\n---\n\nThis PR is ready for review. I'll stop looking into Bullet now and remove features not needed by TPE on a subsequent PR.", "title": "Optional physics features", "destination": {"commit": {"hash": "b7ae79cd029f", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/b7ae79cd029f.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/b7ae79cd029f"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "ign-gazebo2"}}, "reason": "", "source": {"commit": {"hash": "4975aa03aaaf", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/4975aa03aaaf.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/4975aa03aaaf"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "chapulina/bullet"}}, "state": "OPEN", "author": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "date": "2020-03-27T01:30:38.058402+00:00"}, "pull_request": {"type": "pullrequest", "id": 573, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573"}}, "title": "Optional physics features"}}, {"update": {"description": "## Overview\n\nPull request #541 adds the ability to choose different physics engine from the command line.\n\nThis pull request builds on top of that, and reduces `MinimumFeatureList` so that physics engines are not required to implement all features, and some of them are treated as optional.\n\n## Bullet\n\nI've been testing this with bullet using [this ign-physics PR](#!/ignitionrobotics/ign-physics/pull-requests/134/wip-bullet-updates/diff). There's only one feature left which Bullet doesn't implement, `ConstructSdfLink`. This PR an alternative to pull request #421.\n\n## Implementation\n\nThis PR makes the following features optional:\n\n* Features for detachable joints:\n    * `ignition::physics::AttachFixedJointFeature`\n    * `ignition::physics::DetachJointFeature`\n    * `ignition::physics::SetJointTransformFromParentFeature`\n* Features for bounding box:\n    * `ignition::physics::GetModelBoundingBox`\n* Features for joint velocity commands:\n    * `ignition::physics::SetJointVelocityCommandFeature`\n* Features for 3D meshes:\n    * `ignition::physics::mesh::AttachMeshShapeFeature`\n\nFor each group of optional features:\n\n* Create a feature list, i.e. `DetachableJointFeatureList`\n* Create entity types which use that list, i.e. `JointDetachableJointPtrType`\n* Create an entity map that holds the specialized entity type, i.e. `entityJointDetachableJointMap`\n* Use `entityCast` to cast from the original entity, created with `MinimumFeatureList`, to the specialized entity. `entityCast` will also populate the specialized map the first time it's called and get the entity from that map on subsequent calls. This means that `RequestFeature` is only called once for each combination of entity + feature list.\n\nAny engine implementing all the minimum features will be loaded. If, at runtime, there's an attempt to use an unsupported feature, a warning is printed. That is:\n\n* If a `component::DetachableJoint` is created, a warning is printed and the joint isn't attached or detached.\n* If a `components::AxisAlignedBox` is created, a warning is printed and the box is not populated.\n* If a `components::JointVelocityCmd` is created, a warning is printed and the command has no effect.\n* If a collision has a mesh geometry, a warning is printed and the geometry isn't created.\n\n---\n\nThis PR is ready for review. I'll stop looking into Bullet now and remove features not needed by TPE on a subsequent PR.", "title": "Optional physics features", "destination": {"commit": {"hash": "b7ae79cd029f", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/b7ae79cd029f.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/b7ae79cd029f"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "ign-gazebo2"}}, "reason": "", "source": {"commit": {"hash": "03bd944ffff2", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/03bd944ffff2.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/03bd944ffff2"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "chapulina/bullet"}}, "state": "OPEN", "author": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "date": "2020-03-27T00:55:03.090103+00:00"}, "pull_request": {"type": "pullrequest", "id": 573, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573"}}, "title": "Optional physics features"}}, {"update": {"description": "## Overview\n\nPull request #541 adds the ability to choose different physics engine from the command line.\n\nThis pull request builds on top of that, and reduces `MinimumFeatureList` so that physics engines are not required to implement all features, and some of them are treated as optional.\n\n## Bullet\n\nI've been testing this with bullet using [this ign-physics PR](#!/ignitionrobotics/ign-physics/pull-requests/134/wip-bullet-updates/diff). There's only one feature left which Bullet doesn't implement, `ConstructSdfLink`. This PR an alternative to pull request #421.\n\n## Implementation\n\nThis PR makes the following features optional:\n\n* Features for detachable joints:\n    * `ignition::physics::AttachFixedJointFeature`\n    * `ignition::physics::DetachJointFeature`\n    * `ignition::physics::SetJointTransformFromParentFeature`\n* Features for bounding box:\n    * `ignition::physics::GetModelBoundingBox`\n* Features for joint velocity commands:\n    * `ignition::physics::SetJointVelocityCommandFeature`\n* Features for 3D meshes:\n    * `ignition::physics::mesh::AttachMeshShapeFeature`\n\nFor each group of optional features:\n\n* Create a feature list, i.e. `DetachableJointFeatureList`\n* Create entity types which use that list, i.e. `JointDetachableJointPtrType`\n* Create an entity map that holds the specialized entity type, i.e. `entityJointDetachableJointMap`\n* Use `entityCast` to cast from the original entity, created with `MinimumFeatureList`, to the specialized entity. `entityCast` will also populate the specialized map the first time it's called and get the entity from that map on subsequent calls. This means that `RequestFeature` is only called once for each combination of entity + feature list.\n\nAny engine implementing all the minimum features will be loaded. If, at runtime, there's an attempt to use an unsupported feature, a warning is printed. That is:\n\n* If a `component::DetachableJoint` is created, a warning is printed and the joint isn't attached or detached.\n* If a `components::AxisAlignedBox` is created, a warning is printed and the box is not populated.\n* If a `components::JointVelocityCmd` is created, a warning is printed and the command has no effect.\n* If a collision has a mesh geometry, a warning is printed and the geometry isn't created.\n\n---\n\nThis PR is ready for review. I'll stop looking into Bullet now and remove features not needed by TPE on a subsequent PR.", "title": "Optional physics features", "destination": {"commit": {"hash": "b7ae79cd029f", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/b7ae79cd029f.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/b7ae79cd029f"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "ign-gazebo2"}}, "reason": "", "source": {"commit": {"hash": "03bd944ffff2", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/03bd944ffff2.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/03bd944ffff2"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "chapulina/bullet"}}, "state": "OPEN", "author": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "date": "2020-03-27T00:55:03.055350+00:00"}, "pull_request": {"type": "pullrequest", "id": 573, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/573.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/573"}}, "title": "Optional physics features"}}]}