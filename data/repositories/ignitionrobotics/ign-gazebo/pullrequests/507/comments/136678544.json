{"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/507/comments/136678544.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/507/_/diff#comment-136678544"}}, "parent": {"id": 136653493, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/507/comments/136653493.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/507/_/diff#comment-136653493"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 507, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/507.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/507"}}, "title": "Add GUI to configure grid"}, "content": {"raw": "The boost thread error must be coming from within Ogre 1, because Ignition doesn't use boost. I was able to catch a backtrace, it seems to be a problem destroying materials (at least this time):\n\n~~~\nThread 13 \"ignition::gazeb\" received signal SIGABRT, Aborted.\n[Switching to Thread 0x7fffa37ff700 (LWP 10554)]\n__GI_raise (sig=sig@entry=6) at ../sysdeps/unix/sysv/linux/raise.c:51\n51      ../sysdeps/unix/sysv/linux/raise.c: No such file or directory.\n(gdb) bt\n#0  0x00007ffff7571e97 in __GI_raise (sig=sig@entry=6) at ../sysdeps/unix/sysv/linux/raise.c:51\n#1  0x00007ffff7573801 in __GI_abort () at abort.c:79\n#2  0x00007ffff756339a in __assert_fail_base (fmt=0x7ffff76ea7d8 \"%s%s%s:%u: %s%sAssertion `%s' failed.\\n%n\", assertion=assertion@entry=0x7fffa2881078 \"!pthread_mutex_lock(&m)\", file=file@entry=0x7fffa2881028 \"/usr/include/boost/thread/pthread/recursive_mutex.hpp\", line=line@entry=113, function=function@entry=0x7fffa28b78e0 \"void boost::recursive_mutex::lock()\") at assert.c:92\n#3  0x00007ffff7563412 in __GI___assert_fail (assertion=0x7fffa2881078 \"!pthread_mutex_lock(&m)\", file=0x7fffa2881028 \"/usr/include/boost/thread/pthread/recursive_mutex.hpp\", line=113, function=0x7fffa28b78e0 \"void boost::recursive_mutex::lock()\") at assert.c:101\n#4  0x00007fffa26f404b in Ogre::Pass::_dirtyHash() () at /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.9.0\n#5  0x00007fffa26f4f04 in Ogre::Pass::removeAllTextureUnitStates() () at /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.9.0\n#6  0x00007fffa26f5c37 in Ogre::Pass::queueForDeletion() () at /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.9.0\n#7  0x00007fffa2836a54 in Ogre::Technique::removeAllPasses() () at /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.9.0\n#8  0x00007fffa283acec in Ogre::Technique::~Technique() () at /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.9.0\n#9  0x00007fffa2674ad0 in Ogre::Material::removeAllTechniques() () at /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.9.0\n#10 0x00007fffa2674b37 in Ogre::Material::~Material() () at /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.9.0\n#11 0x00007fffa2674bc9 in Ogre::Material::~Material() () at /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.9.0\n#12 0x00007fffa2ce339e in Ogre::SharedPtr<Ogre::Material>::destroy() (this=0x7fff64ff4de8, this=0x7fff64ff4de8) at /usr/include/OGRE/OgreMemoryNedPooling.h:77\n#13 0x00007fffa2ce339e in Ogre::SharedPtr<Ogre::Material>::release() (this=0x7fff64ff4de8) at /usr/include/OGRE/OgreSharedPtr.h:292\n#14 0x00007fffa2ce339e in Ogre::SharedPtr<Ogre::Material>::setNull() (this=0x7fff64ff4de8) at /usr/include/OGRE/OgreSharedPtr.h:280\n#15 0x00007fffa2ce339e in ignition::rendering::v2::OgreMaterial::Destroy() (this=0x7fff64ff4d60) at /home/chapulina/blueprint_ws/src/ign-rendering/ogre/src/OgreMaterial.cc:53\n#16 0x00007fffa2ce339e in ignition::rendering::v2::OgreMaterial::Destroy() (this=0x7fff64ff4d60) at /home/chapulina/blueprint_ws/src/ign-rendering/ogre/src/OgreMaterial.cc:43\n#17 0x00007fffbc44eb8a in ignition::rendering::v2::BaseScene::DestroyMaterials() (this=0x7fff981ac180) at /usr/include/c++/8/bits/shared_ptr_base.h:1018\n#18 0x00007fffbc44b2a0 in ignition::rendering::v2::BaseScene::Clear() (this=0x7fff981ac180) at /home/chapulina/blueprint_ws/src/ign-rendering/src/base/BaseScene.cc:1031\n#19 0x00007fffbc44b2cd in ignition::rendering::v2::BaseScene::Destroy() (this=this@entry=0x7fff981ac180)\n    at /home/chapulina/blueprint_ws/src/ign-rendering/src/base/BaseScene.cc:1039\n#20 0x00007fffa2d16159 in ignition::rendering::v2::OgreScene::Destroy() (this=0x7fff981ac180) at /home/chapulina/blueprint_ws/src/ign-rendering/ogre/src/OgreScene.cc:288\n#21 0x00007fffa2cf154d in ignition::rendering::v2::BaseStore<ignition::rendering::v2::Scene, ignition::rendering::v2::OgreScene>::DestroyImpl(std::_Rb_tree_iterator<std::pair<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const, std::shared_ptr<ignition::rendering::v2::OgreScene> > >) (this=<optimized out>, _iter=...) at /home/chapulina/blueprint_ws/src/ign-rendering/include/ignition/rendering/base/BaseStorage.hh:953\n#22 0x00007fffa2cf3000 in ignition::rendering::v2::BaseStore<ignition::rendering::v2::Scene, ignition::rendering::v2::OgreScene>::Destroy(std::shared_ptr<ignition::rendering::v2::Scene>) (this=0x7fff981bdc50, _object=...) at /usr/include/c++/8/bits/shared_ptr_base.h:1167\n#23 0x00007fffbc449e76 in ignition::rendering::v2::BaseRenderEngine::DestroyScene(std::shared_ptr<ignition::rendering::v2::Scene>) (this=<optimized out>, _scene=\n    std::shared_ptr<ignition::rendering::v2::Scene> (use count 12392, weak count 1) = {...}) at /usr/include/c++/8/ext/atomicity.h:96\n#24 0x00007fffbc90f38c in ignition::gazebo::v2::IgnRenderer::Destroy() (this=0x555556e00130) at /usr/include/c++/8/ext/atomicity.h:96\n#25 0x00007fffbc90f435 in ignition::gazebo::v2::RenderThread::ShutDown() (this=0x555556e00110)\n    at /home/chapulina/blueprint_ws/src/ign-gazebo/src/gui/plugins/scene3d/Scene3D.cc:1244\n~~~", "markup": "markdown", "html": "<p>The boost thread error must be coming from within Ogre 1, because Ignition doesn't use boost. I was able to catch a backtrace, it seems to be a problem destroying materials (at least this time):</p>\n<div class=\"codehilite\"><pre><span></span>Thread 13 &quot;ignition::gazeb&quot; received signal SIGABRT, Aborted.\n[Switching to Thread 0x7fffa37ff700 (LWP 10554)]\n__GI_raise (sig=sig@entry=6) at ../sysdeps/unix/sysv/linux/raise.c:51\n51      ../sysdeps/unix/sysv/linux/raise.c: No such file or directory.\n(gdb) bt\n#0  0x00007ffff7571e97 in __GI_raise (sig=sig@entry=6) at ../sysdeps/unix/sysv/linux/raise.c:51\n#1  0x00007ffff7573801 in __GI_abort () at abort.c:79\n#2  0x00007ffff756339a in __assert_fail_base (fmt=0x7ffff76ea7d8 &quot;%s%s%s:%u: %s%sAssertion `%s&#39; failed.\\n%n&quot;, assertion=assertion@entry=0x7fffa2881078 &quot;!pthread_mutex_lock(&amp;m)&quot;, file=file@entry=0x7fffa2881028 &quot;/usr/include/boost/thread/pthread/recursive_mutex.hpp&quot;, line=line@entry=113, function=function@entry=0x7fffa28b78e0 &quot;void boost::recursive_mutex::lock()&quot;) at assert.c:92\n#3  0x00007ffff7563412 in __GI___assert_fail (assertion=0x7fffa2881078 &quot;!pthread_mutex_lock(&amp;m)&quot;, file=0x7fffa2881028 &quot;/usr/include/boost/thread/pthread/recursive_mutex.hpp&quot;, line=113, function=0x7fffa28b78e0 &quot;void boost::recursive_mutex::lock()&quot;) at assert.c:101\n#4  0x00007fffa26f404b in Ogre::Pass::_dirtyHash() () at /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.9.0\n#5  0x00007fffa26f4f04 in Ogre::Pass::removeAllTextureUnitStates() () at /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.9.0\n#6  0x00007fffa26f5c37 in Ogre::Pass::queueForDeletion() () at /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.9.0\n#7  0x00007fffa2836a54 in Ogre::Technique::removeAllPasses() () at /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.9.0\n#8  0x00007fffa283acec in Ogre::Technique::~Technique() () at /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.9.0\n#9  0x00007fffa2674ad0 in Ogre::Material::removeAllTechniques() () at /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.9.0\n#10 0x00007fffa2674b37 in Ogre::Material::~Material() () at /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.9.0\n#11 0x00007fffa2674bc9 in Ogre::Material::~Material() () at /usr/lib/x86_64-linux-gnu/libOgreMain.so.1.9.0\n#12 0x00007fffa2ce339e in Ogre::SharedPtr&lt;Ogre::Material&gt;::destroy() (this=0x7fff64ff4de8, this=0x7fff64ff4de8) at /usr/include/OGRE/OgreMemoryNedPooling.h:77\n#13 0x00007fffa2ce339e in Ogre::SharedPtr&lt;Ogre::Material&gt;::release() (this=0x7fff64ff4de8) at /usr/include/OGRE/OgreSharedPtr.h:292\n#14 0x00007fffa2ce339e in Ogre::SharedPtr&lt;Ogre::Material&gt;::setNull() (this=0x7fff64ff4de8) at /usr/include/OGRE/OgreSharedPtr.h:280\n#15 0x00007fffa2ce339e in ignition::rendering::v2::OgreMaterial::Destroy() (this=0x7fff64ff4d60) at /home/chapulina/blueprint_ws/src/ign-rendering/ogre/src/OgreMaterial.cc:53\n#16 0x00007fffa2ce339e in ignition::rendering::v2::OgreMaterial::Destroy() (this=0x7fff64ff4d60) at /home/chapulina/blueprint_ws/src/ign-rendering/ogre/src/OgreMaterial.cc:43\n#17 0x00007fffbc44eb8a in ignition::rendering::v2::BaseScene::DestroyMaterials() (this=0x7fff981ac180) at /usr/include/c++/8/bits/shared_ptr_base.h:1018\n#18 0x00007fffbc44b2a0 in ignition::rendering::v2::BaseScene::Clear() (this=0x7fff981ac180) at /home/chapulina/blueprint_ws/src/ign-rendering/src/base/BaseScene.cc:1031\n#19 0x00007fffbc44b2cd in ignition::rendering::v2::BaseScene::Destroy() (this=this@entry=0x7fff981ac180)\n    at /home/chapulina/blueprint_ws/src/ign-rendering/src/base/BaseScene.cc:1039\n#20 0x00007fffa2d16159 in ignition::rendering::v2::OgreScene::Destroy() (this=0x7fff981ac180) at /home/chapulina/blueprint_ws/src/ign-rendering/ogre/src/OgreScene.cc:288\n#21 0x00007fffa2cf154d in ignition::rendering::v2::BaseStore&lt;ignition::rendering::v2::Scene, ignition::rendering::v2::OgreScene&gt;::DestroyImpl(std::_Rb_tree_iterator&lt;std::pair&lt;std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const, std::shared_ptr&lt;ignition::rendering::v2::OgreScene&gt; &gt; &gt;) (this=&lt;optimized out&gt;, _iter=...) at /home/chapulina/blueprint_ws/src/ign-rendering/include/ignition/rendering/base/BaseStorage.hh:953\n#22 0x00007fffa2cf3000 in ignition::rendering::v2::BaseStore&lt;ignition::rendering::v2::Scene, ignition::rendering::v2::OgreScene&gt;::Destroy(std::shared_ptr&lt;ignition::rendering::v2::Scene&gt;) (this=0x7fff981bdc50, _object=...) at /usr/include/c++/8/bits/shared_ptr_base.h:1167\n#23 0x00007fffbc449e76 in ignition::rendering::v2::BaseRenderEngine::DestroyScene(std::shared_ptr&lt;ignition::rendering::v2::Scene&gt;) (this=&lt;optimized out&gt;, _scene=\n    std::shared_ptr&lt;ignition::rendering::v2::Scene&gt; (use count 12392, weak count 1) = {...}) at /usr/include/c++/8/ext/atomicity.h:96\n#24 0x00007fffbc90f38c in ignition::gazebo::v2::IgnRenderer::Destroy() (this=0x555556e00130) at /usr/include/c++/8/ext/atomicity.h:96\n#25 0x00007fffbc90f435 in ignition::gazebo::v2::RenderThread::ShutDown() (this=0x555556e00110)\n    at /home/chapulina/blueprint_ws/src/ign-gazebo/src/gui/plugins/scene3d/Scene3D.cc:1244\n</pre></div>", "type": "rendered"}, "created_on": "2020-02-19T22:07:49.975203+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2020-02-19T22:07:49.983594+00:00", "type": "pullrequest_comment", "id": 136678544}