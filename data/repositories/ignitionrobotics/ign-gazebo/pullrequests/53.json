{"rendered": {"description": {"raw": "This caches the data produced during an \"EntityComponent::Each\" into a new class called a View. There is an upfront cost associated with creating a cache, but the benefit pays off over the long run.\r\n\r\nPreviously, each call to Each from every System would find all entities that match a set of components. Now a call to Each will be cached, and that cache will be used for subsequent Each calls.\r\n\r\nI will handle addition and removal of entities and components at runtime in the next PR.\r\n\r\nThere is an example program you can run to generate performance data:\r\n```\r\ncd examples/standalong/each_performance\r\nmkdir build; cd build; cmake ..; make\r\n./each\r\ngnuplot -e \"filename='each.data'\" ../each.gp\r\neog *.png\r\n```\r\n\r\nAttached is output from my PC.![matching-entity.png](data/bitbucket.org/repo/8zodKzn/images/1834264985-matching-entity.png)\r\n\r\n![nonmatching-entity.png](data/bitbucket.org/repo/8zodKzn/images/3505323985-nonmatching-entity.png)", "markup": "markdown", "html": "<p>This caches the data produced during an \"EntityComponent::Each\" into a new class called a View. There is an upfront cost associated with creating a cache, but the benefit pays off over the long run.</p>\n<p>Previously, each call to Each from every System would find all entities that match a set of components. Now a call to Each will be cached, and that cache will be used for subsequent Each calls.</p>\n<p>I will handle addition and removal of entities and components at runtime in the next PR.</p>\n<p>There is an example program you can run to generate performance data:</p>\n<div class=\"codehilite\"><pre><span></span>cd examples/standalong/each_performance\nmkdir build; cd build; cmake ..; make\n./each\ngnuplot -e &quot;filename=&#39;each.data&#39;&quot; ../each.gp\neog *.png\n</pre></div>\n\n\n<p>Attached is output from my PC.<img alt=\"matching-entity.png\" src=\"data/bitbucket.org/repo/8zodKzn/images/1834264985-matching-entity.png\" /></p>\n<p><img alt=\"nonmatching-entity.png\" src=\"data/bitbucket.org/repo/8zodKzn/images/3505323985-nonmatching-entity.png\" /></p>", "type": "rendered"}, "title": {"raw": "View cache", "markup": "markdown", "html": "<p>View cache</p>", "type": "rendered"}}, "type": "pullrequest", "description": "This caches the data produced during an \"EntityComponent::Each\" into a new class called a View. There is an upfront cost associated with creating a cache, but the benefit pays off over the long run.\r\n\r\nPreviously, each call to Each from every System would find all entities that match a set of components. Now a call to Each will be cached, and that cache will be used for subsequent Each calls.\r\n\r\nI will handle addition and removal of entities and components at runtime in the next PR.\r\n\r\nThere is an example program you can run to generate performance data:\r\n```\r\ncd examples/standalong/each_performance\r\nmkdir build; cd build; cmake ..; make\r\n./each\r\ngnuplot -e \"filename='each.data'\" ../each.gp\r\neog *.png\r\n```\r\n\r\nAttached is output from my PC.![matching-entity.png](data/bitbucket.org/repo/8zodKzn/images/1834264985-matching-entity.png)\r\n\r\n![nonmatching-entity.png](data/bitbucket.org/repo/8zodKzn/images/3505323985-nonmatching-entity.png)", "links": {"decline": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-gazebo/pullrequests/53/decline"}, "diffstat": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-gazebo/diffstat/ignitionrobotics/ign-gazebo:eba5f7ee090a%0D8f375f722b29?from_pullrequest_id=53"}, "commits": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/53/commits.json"}, "self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/53.json"}, "comments": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/53/comments_page=1.json"}, "merge": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-gazebo/pullrequests/53/merge"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/53"}, "activity": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/53/activity.json"}, "diff": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-gazebo/diff/ignitionrobotics/ign-gazebo:eba5f7ee090a%0D8f375f722b29?from_pullrequest_id=53"}, "approve": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-gazebo/pullrequests/53/approve"}, "statuses": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/53/statuses_page=1.json"}}, "title": "View cache", "close_source_branch": true, "reviewers": [], "id": 53, "destination": {"commit": {"hash": "8f375f722b29", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/8f375f722b29.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/8f375f722b29"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "default"}}, "created_on": "2018-10-04T21:47:27.174550+00:00", "summary": {"raw": "This caches the data produced during an \"EntityComponent::Each\" into a new class called a View. There is an upfront cost associated with creating a cache, but the benefit pays off over the long run.\r\n\r\nPreviously, each call to Each from every System would find all entities that match a set of components. Now a call to Each will be cached, and that cache will be used for subsequent Each calls.\r\n\r\nI will handle addition and removal of entities and components at runtime in the next PR.\r\n\r\nThere is an example program you can run to generate performance data:\r\n```\r\ncd examples/standalong/each_performance\r\nmkdir build; cd build; cmake ..; make\r\n./each\r\ngnuplot -e \"filename='each.data'\" ../each.gp\r\neog *.png\r\n```\r\n\r\nAttached is output from my PC.![matching-entity.png](data/bitbucket.org/repo/8zodKzn/images/1834264985-matching-entity.png)\r\n\r\n![nonmatching-entity.png](data/bitbucket.org/repo/8zodKzn/images/3505323985-nonmatching-entity.png)", "markup": "markdown", "html": "<p>This caches the data produced during an \"EntityComponent::Each\" into a new class called a View. There is an upfront cost associated with creating a cache, but the benefit pays off over the long run.</p>\n<p>Previously, each call to Each from every System would find all entities that match a set of components. Now a call to Each will be cached, and that cache will be used for subsequent Each calls.</p>\n<p>I will handle addition and removal of entities and components at runtime in the next PR.</p>\n<p>There is an example program you can run to generate performance data:</p>\n<div class=\"codehilite\"><pre><span></span>cd examples/standalong/each_performance\nmkdir build; cd build; cmake ..; make\n./each\ngnuplot -e &quot;filename=&#39;each.data&#39;&quot; ../each.gp\neog *.png\n</pre></div>\n\n\n<p>Attached is output from my PC.<img alt=\"matching-entity.png\" src=\"data/bitbucket.org/repo/8zodKzn/images/1834264985-matching-entity.png\" /></p>\n<p><img alt=\"nonmatching-entity.png\" src=\"data/bitbucket.org/repo/8zodKzn/images/3505323985-nonmatching-entity.png\" /></p>", "type": "rendered"}, "source": {"commit": {"hash": "9ee9e31f32e9", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/9ee9e31f32e9.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/9ee9e31f32e9"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "view_cache"}}, "comment_count": 7, "state": "MERGED", "task_count": 0, "participants": [{"role": "PARTICIPANT", "participated_on": "2018-10-11T21:08:09.108531+00:00", "type": "participant", "approved": true, "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}}], "reason": "", "updated_on": "2018-10-11T21:13:22.654860+00:00", "author": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "merge_commit": {"hash": "eba5f7ee090a", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/eba5f7ee090a.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/eba5f7ee090a"}}}, "closed_by": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}}