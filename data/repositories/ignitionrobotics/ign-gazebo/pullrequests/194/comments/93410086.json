{"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/194/comments/93410086.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/194/_/diff#comment-93410086"}}, "parent": {"id": 93399357, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/194/comments/93399357.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/194/_/diff#comment-93399357"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 194, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/194.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/194"}}, "title": "[Acropolis] Consolidate system directory structure"}, "content": {"raw": "Did some more debugging and was able to reproduce the issue, but couldn't get a backtrace.\n\nIf I start a container with:\n\n`docker run -ti ubuntu:bionic /bin/bash`\n\nAnd follow all the instructions from pipelines, I can reproduce the segfault, but gdb doensn't work because it needs permission to perform address space randomization and use ptrace. The former is solved with [set disable-randomization off](http://visualgdb.com/gdbreference/commands/set_disable-randomization), but I couldn't figure out how to solve the latter within that container, so I started a new one [with](https://stackoverflow.com/a/46676868/6451468):\n\n`docker run -ti --cap-add=SYS_PTRACE --security-opt seccomp=unconfined ubuntu:bionic /bin/bash`\n\nThen followed all the pipelines instructions again, but this time, there's no segfault :woman_shrugging: \n\nSince the test is passing on Jenkins both for Ubuntu and Homebrew, I'm inclined to disable the test on pipelines, ticket an issue and let future us deal with it.", "markup": "markdown", "html": "<p>Did some more debugging and was able to reproduce the issue, but couldn't get a backtrace.</p>\n<p>If I start a container with:</p>\n<p><code>docker run -ti ubuntu:bionic /bin/bash</code></p>\n<p>And follow all the instructions from pipelines, I can reproduce the segfault, but gdb doensn't work because it needs permission to perform address space randomization and use ptrace. The former is solved with <a data-is-external-link=\"true\" href=\"http://visualgdb.com/gdbreference/commands/set_disable-randomization\" rel=\"nofollow\">set disable-randomization off</a>, but I couldn't figure out how to solve the latter within that container, so I started a new one <a data-is-external-link=\"true\" href=\"https://stackoverflow.com/a/46676868/6451468\" rel=\"nofollow\">with</a>:</p>\n<p><code>docker run -ti --cap-add=SYS_PTRACE --security-opt seccomp=unconfined ubuntu:bionic /bin/bash</code></p>\n<p>Then followed all the pipelines instructions again, but this time, there's no segfault <img class=\"emoji\" src=\"data/pf-emoji-service--cdn.us-east-1.prod.public.atl-paas.net/standard/551c9814-1d37-4573-819d-afab3afeaf32/48x48/1f937-200d-2640-fe0f.png\" alt=\"\ud83e\udd37\u200d\u2640\ufe0f\" title=\":woman_shrugging:\" data-emoji-short-name=\":woman_shrugging:\" /> </p>\n<p>Since the test is passing on Jenkins both for Ubuntu and Homebrew, I'm inclined to disable the test on pipelines, ticket an issue and let future us deal with it.</p>", "type": "rendered"}, "created_on": "2019-02-28T23:59:23.550989+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2019-02-28T23:59:23.560260+00:00", "type": "pullrequest_comment", "id": 93410086}