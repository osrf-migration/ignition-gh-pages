{"pagelen": 50, "values": [{"update": {"description": "There are 2 threads that are interesting for us in the GUI:\r\n\r\n* `Scene3D`'s render thread: `RenderThread`\r\n* The threads spun up on demand as the GUI runner receives a new state message: `GuiRunner::OnState`\r\n\r\nResults running a SubT world:\r\n\r\n## RenderThread\r\n\r\n![render_thread.png](https://bitbucket.org/repo/8zodKzn/images/770033905-render_thread.png)\r\n![render_thread_2.png](https://bitbucket.org/repo/8zodKzn/images/1429930800-render_thread_2.png)\r\n\r\nAlmost all the time is spend on `camera->Update()`\r\n\r\n\r\n## GuiRunner::OnState\r\n\r\n![onstate_thread.png](https://bitbucket.org/repo/8zodKzn/images/2215345235-onstate_thread.png)\r\n![onstate_thread_2.png](https://bitbucket.org/repo/8zodKzn/images/1157025931-onstate_thread_2.png)\r\n\r\nThe majority of time is spend on `RenderUtilPrivate::UpdateRenderingEntities`, which consists of several simple `Each` calls.\r\n\r\nI tried consolidating all `Each` calls into a single one that gets all entities with a pose, even if rendering doesn't care about them, and that made the performance slightly worse.\r\n\r\n~~~\r\n   _ecm.Each<components::Pose>(\r\n       [&](const Entity &_entity,\r\n         const components::Pose *_pose)->bool\r\n       {\r\n         this->entityPoses[_entity] = _pose->Data();\r\n         return true;\r\n       });\r\n~~~\r\n\r\n---\r\n\r\nWith these preliminary results, I'm inclined to say that the client is processing well the incoming data. Therefore, delays on display are a result from the server being slow in publishing messages. I wouldn't say this is conclusive though.", "title": "Add profiling points to GUI", "destination": {"commit": {"hash": "5964c66d2ef3", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/5964c66d2ef3.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/5964c66d2ef3"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "ign-gazebo2"}}, "reason": "", "source": {"commit": {"hash": "9ca823ba8a62", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/9ca823ba8a62.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/9ca823ba8a62"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "profile_gui"}}, "state": "MERGED", "author": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "date": "2019-07-29T15:46:49.260842+00:00"}, "pull_request": {"type": "pullrequest", "id": 399, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/399.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/399"}}, "title": "Add profiling points to GUI"}}, {"approval": {"date": "2019-07-29T15:14:45.925780+00:00", "pullrequest": {"type": "pullrequest", "id": 399, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/399.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/399"}}, "title": "Add profiling points to GUI"}, "user": {"display_name": "Michael Carroll", "uuid": "{17dbbc15-cbc0-42f0-a985-cde9061c78a0}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B17dbbc15-cbc0-42f0-a985-cde9061c78a0%7D"}, "html": {"href": "https://bitbucket.org/%7B17dbbc15-cbc0-42f0-a985-cde9061c78a0%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:65740f22-cc56-4418-9608-7e17d0ed47b7/2aa259f5-4de1-4f68-9156-eded72041d84/128"}}, "nickname": "Michael Carroll", "type": "user", "account_id": "557058:65740f22-cc56-4418-9608-7e17d0ed47b7"}}, "pull_request": {"type": "pullrequest", "id": 399, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/399.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/399"}}, "title": "Add profiling points to GUI"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/399/comments/110771652.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/399/_/diff#comment-110771652"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 399, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/399.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/399"}}, "title": "Add profiling points to GUI"}, "content": {"raw": "I recommend the diff without whitespace: #!/ignitionrobotics/ign-gazebo/pull-requests/399/add-profiling-points-to-gui/diff?w=1", "markup": "markdown", "html": "<p>I recommend the diff without whitespace: <a href=\"#!/ignitionrobotics/ign-gazebo/pull-requests/399/add-profiling-points-to-gui/diff?w=1\" rel=\"nofollow\" class=\"ap-connect-link\">#!/ignitionrobotics/ign-gazebo/pull-requests/399/add-profiling-points-to-gui/diff?w=1</a></p>", "type": "rendered"}, "created_on": "2019-07-26T00:44:32.833005+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2019-07-26T00:44:32.840230+00:00", "type": "pullrequest_comment", "id": 110771652}, "pull_request": {"type": "pullrequest", "id": 399, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/399.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/399"}}, "title": "Add profiling points to GUI"}}, {"update": {"description": "There are 2 threads that are interesting for us in the GUI:\r\n\r\n* `Scene3D`'s render thread: `RenderThread`\r\n* The threads spun up on demand as the GUI runner receives a new state message: `GuiRunner::OnState`\r\n\r\nResults running a SubT world:\r\n\r\n## RenderThread\r\n\r\n![render_thread.png](https://bitbucket.org/repo/8zodKzn/images/770033905-render_thread.png)\r\n![render_thread_2.png](https://bitbucket.org/repo/8zodKzn/images/1429930800-render_thread_2.png)\r\n\r\nAlmost all the time is spend on `camera->Update()`\r\n\r\n\r\n## GuiRunner::OnState\r\n\r\n![onstate_thread.png](https://bitbucket.org/repo/8zodKzn/images/2215345235-onstate_thread.png)\r\n![onstate_thread_2.png](https://bitbucket.org/repo/8zodKzn/images/1157025931-onstate_thread_2.png)\r\n\r\nThe majority of time is spend on `RenderUtilPrivate::UpdateRenderingEntities`, which consists of several simple `Each` calls.\r\n\r\nI tried consolidating all `Each` calls into a single one that gets all entities with a pose, even if rendering doesn't care about them, and that made the performance slightly worse.\r\n\r\n~~~\r\n   _ecm.Each<components::Pose>(\r\n       [&](const Entity &_entity,\r\n         const components::Pose *_pose)->bool\r\n       {\r\n         this->entityPoses[_entity] = _pose->Data();\r\n         return true;\r\n       });\r\n~~~\r\n\r\n---\r\n\r\nWith these preliminary results, I'm inclined to say that the client is processing well the incoming data. Therefore, delays on display are a result from the server being slow in publishing messages. I wouldn't say this is conclusive though.", "title": "Add profiling points to GUI", "destination": {"commit": {"hash": "7c58d6b84583", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/7c58d6b84583.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/7c58d6b84583"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "ign-gazebo2"}}, "reason": "", "source": {"commit": {"hash": "9ca823ba8a62", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/9ca823ba8a62.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/9ca823ba8a62"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "profile_gui"}}, "state": "OPEN", "author": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "date": "2019-07-25T22:28:53.824482+00:00"}, "pull_request": {"type": "pullrequest", "id": 399, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/399.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/399"}}, "title": "Add profiling points to GUI"}}, {"update": {"description": "There are 2 threads that are interesting for us in the GUI:\r\n\r\n* `Scene3D`'s render thread: `RenderThread`\r\n* The threads spun up on demand as the GUI runner receives a new state message: `GuiRunner::OnState`\r\n\r\nResults running a SubT world:\r\n\r\n## RenderThread\r\n\r\n![render_thread.png](https://bitbucket.org/repo/8zodKzn/images/770033905-render_thread.png)\r\n![render_thread_2.png](https://bitbucket.org/repo/8zodKzn/images/1429930800-render_thread_2.png)\r\n\r\nAlmost all the time is spend on `camera->Update()`\r\n\r\n\r\n## GuiRunner::OnState\r\n\r\n![onstate_thread.png](https://bitbucket.org/repo/8zodKzn/images/2215345235-onstate_thread.png)\r\n![onstate_thread_2.png](https://bitbucket.org/repo/8zodKzn/images/1157025931-onstate_thread_2.png)\r\n\r\nThe majority of time is spend on `RenderUtilPrivate::UpdateRenderingEntities`, which consists of several simple `Each` calls.\r\n\r\nI tried consolidating all `Each` calls into a single one that gets all entities with a pose, even if rendering doesn't care about them, and that made the performance slightly worse.\r\n\r\n~~~\r\n   _ecm.Each<components::Pose>(\r\n       [&](const Entity &_entity,\r\n         const components::Pose *_pose)->bool\r\n       {\r\n         this->entityPoses[_entity] = _pose->Data();\r\n         return true;\r\n       });\r\n~~~\r\n\r\n---\r\n\r\nWith these preliminary results, I'm inclined to say that the client is processing well the incoming data. Therefore, delays on display are a result from the server being slow in publishing messages. I wouldn't say this is conclusive though.", "title": "Add profiling points to GUI", "destination": {"commit": {"hash": "7c58d6b84583", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/7c58d6b84583.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/7c58d6b84583"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "ign-gazebo2"}}, "reason": "", "source": {"commit": {"hash": "9ca823ba8a62", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/9ca823ba8a62.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/9ca823ba8a62"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "profile_gui"}}, "state": "OPEN", "author": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "date": "2019-07-25T22:28:53.794413+00:00"}, "pull_request": {"type": "pullrequest", "id": 399, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/399.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/399"}}, "title": "Add profiling points to GUI"}}]}