{"pagelen": 50, "values": [{"update": {"description": "I think the `touchplugin` test is failing on Mac because a model system is added in the middle of the pre-update calls. This PR adds a mutex to protect all the system containers, which is important now that plugins can be spawned on demand.", "title": "[Acropolis][WIP] Mutex to protect systems added on demand", "destination": {"commit": {"hash": "4a78b3e50f7b", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/4a78b3e50f7b.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/4a78b3e50f7b"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "ign-gazebo1"}}, "reason": "This doesn't solve the issue", "source": {"commit": {"hash": "44c79420340e", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/44c79420340e.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/44c79420340e"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "systems_mutex"}}, "state": "DECLINED", "author": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "date": "2019-03-25T23:18:59.691382+00:00"}, "pull_request": {"type": "pullrequest", "id": 224, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/224.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/224"}}, "title": "[Acropolis][WIP] Mutex to protect systems added on demand"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/224/comments/95926859.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/224/_/diff#comment-95926859"}}, "parent": {"id": 95616909, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/224/comments/95616909.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/224/_/diff#comment-95616909"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 224, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/224.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/224"}}, "title": "[Acropolis][WIP] Mutex to protect systems added on demand"}, "content": {"raw": "I'm having a hard time picturing what that would look like, is the idea that systems themselves can iterate over all systems?", "markup": "markdown", "html": "<p>I'm having a hard time picturing what that would look like, is the idea that systems themselves can iterate over all systems?</p>", "type": "rendered"}, "created_on": "2019-03-21T16:52:16.995232+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2019-03-21T16:52:17.005990+00:00", "type": "pullrequest_comment", "id": 95926859}, "pull_request": {"type": "pullrequest", "id": 224, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/224.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/224"}}, "title": "[Acropolis][WIP] Mutex to protect systems added on demand"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/224/comments/95616909.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/224/_/diff#comment-95616909"}}, "parent": {"id": 95610735, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/224/comments/95610735.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/224/_/diff#comment-95610735"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 224, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/224.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/224"}}, "title": "[Acropolis][WIP] Mutex to protect systems added on demand"}, "content": {"raw": "I guess I was considering the addition of an `Entity` with an explicity `SystemTag` component, that could then be attached to the model via a `Parent` component?  That way we can iterate systems, etc.  I don\u2019t know if that makes sense?", "markup": "markdown", "html": "<p>I guess I was considering the addition of an <code>Entity</code> with an explicity <code>SystemTag</code> component, that could then be attached to the model via a <code>Parent</code> component?  That way we can iterate systems, etc.  I don\u2019t know if that makes sense?</p>", "type": "rendered"}, "created_on": "2019-03-19T20:07:35.835623+00:00", "user": {"display_name": "Michael Carroll", "uuid": "{17dbbc15-cbc0-42f0-a985-cde9061c78a0}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B17dbbc15-cbc0-42f0-a985-cde9061c78a0%7D"}, "html": {"href": "https://bitbucket.org/%7B17dbbc15-cbc0-42f0-a985-cde9061c78a0%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:65740f22-cc56-4418-9608-7e17d0ed47b7/2aa259f5-4de1-4f68-9156-eded72041d84/128"}}, "nickname": "Michael Carroll", "type": "user", "account_id": "557058:65740f22-cc56-4418-9608-7e17d0ed47b7"}, "updated_on": "2019-03-19T20:07:35.846721+00:00", "type": "pullrequest_comment", "id": 95616909}, "pull_request": {"type": "pullrequest", "id": 224, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/224.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/224"}}, "title": "[Acropolis][WIP] Mutex to protect systems added on demand"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/224/comments/95610735.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/224/_/diff#comment-95610735"}}, "parent": {"id": 95607851, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/224/comments/95607851.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/224/_/diff#comment-95607851"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 224, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/224.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/224"}}, "title": "[Acropolis][WIP] Mutex to protect systems added on demand"}, "content": {"raw": "> Are we creating entities for each system as it stands?\n\nIt's more the other way around. Every system is \"attached\" to an entity, which is usually the world entity, and sometimes a model. In the SDF, this is the parent of the `<plugin>` tag. This is the entity passed at the `Configure` call. Ideally, the system would be unloaded when that entity is removed.", "markup": "markdown", "html": "<blockquote>\n<p>Are we creating entities for each system as it stands?</p>\n</blockquote>\n<p>It's more the other way around. Every system is \"attached\" to an entity, which is usually the world entity, and sometimes a model. In the SDF, this is the parent of the <code>&lt;plugin&gt;</code> tag. This is the entity passed at the <code>Configure</code> call. Ideally, the system would be unloaded when that entity is removed.</p>", "type": "rendered"}, "created_on": "2019-03-19T19:09:41.938130+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2019-03-19T19:09:41.949958+00:00", "type": "pullrequest_comment", "id": 95610735}, "pull_request": {"type": "pullrequest", "id": 224, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/224.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/224"}}, "title": "[Acropolis][WIP] Mutex to protect systems added on demand"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/224/comments/95607851.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/224/_/diff#comment-95607851"}}, "parent": {"id": 95606050, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/224/comments/95606050.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/224/_/diff#comment-95606050"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 224, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/224.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/224"}}, "title": "[Acropolis][WIP] Mutex to protect systems added on demand"}, "content": {"raw": "> we currently queue entity removal, but creation takes effect immediately\n\nI see, I was mis-remembering, I thought that we queued on both addition and removal.\n\n> where the system is always tied to an entity\n\nI\u2019m not sure I understand what you mean by this?  I didn\u2019t think that there was any relationship between loaded systems and entities unless explicitly created by a plugin.  Are we creating entities for each system as it stands?", "markup": "markdown", "html": "<blockquote>\n<p>we currently queue entity removal, but creation takes effect immediately</p>\n</blockquote>\n<p>I see, I was mis-remembering, I thought that we queued on both addition and removal.</p>\n<blockquote>\n<p>where the system is always tied to an entity</p>\n</blockquote>\n<p>I\u2019m not sure I understand what you mean by this?  I didn\u2019t think that there was any relationship between loaded systems and entities unless explicitly created by a plugin.  Are we creating entities for each system as it stands?</p>", "type": "rendered"}, "created_on": "2019-03-19T18:47:50.151110+00:00", "user": {"display_name": "Michael Carroll", "uuid": "{17dbbc15-cbc0-42f0-a985-cde9061c78a0}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B17dbbc15-cbc0-42f0-a985-cde9061c78a0%7D"}, "html": {"href": "https://bitbucket.org/%7B17dbbc15-cbc0-42f0-a985-cde9061c78a0%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:65740f22-cc56-4418-9608-7e17d0ed47b7/2aa259f5-4de1-4f68-9156-eded72041d84/128"}}, "nickname": "Michael Carroll", "type": "user", "account_id": "557058:65740f22-cc56-4418-9608-7e17d0ed47b7"}, "updated_on": "2019-03-19T18:47:50.159830+00:00", "type": "pullrequest_comment", "id": 95607851}, "pull_request": {"type": "pullrequest", "id": 224, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/224.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/224"}}, "title": "[Acropolis][WIP] Mutex to protect systems added on demand"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/224/comments/95606050.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/224/_/diff#comment-95606050"}}, "parent": {"id": 95597843, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/224/comments/95597843.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/224/_/diff#comment-95597843"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 224, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/224.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/224"}}, "title": "[Acropolis][WIP] Mutex to protect systems added on demand"}, "content": {"raw": "> I agree with adding new systems to a queue, much like we do entities.\n\nIf I understand correctly, we currently queue entity removal, but creation takes effect immediately. New entities are marked as new until the end of the iteration, but anyone calling `Each` in the same update as the entity is created may get it or not (we need to fix this).\n\n>  making an entity for each system that is added\n\nDo you mean that there would be an entity that just has the system so their lifecycles are managed together? I think that wouldn't be much different from what we have now, where the system is always tied to an entity. I just think we're not unloading the system when the entity is deleted, and we should.", "markup": "markdown", "html": "<blockquote>\n<p>I agree with adding new systems to a queue, much like we do entities.</p>\n</blockquote>\n<p>If I understand correctly, we currently queue entity removal, but creation takes effect immediately. New entities are marked as new until the end of the iteration, but anyone calling <code>Each</code> in the same update as the entity is created may get it or not (we need to fix this).</p>\n<blockquote>\n<p>making an entity for each system that is added</p>\n</blockquote>\n<p>Do you mean that there would be an entity that just has the system so their lifecycles are managed together? I think that wouldn't be much different from what we have now, where the system is always tied to an entity. I just think we're not unloading the system when the entity is deleted, and we should.</p>", "type": "rendered"}, "created_on": "2019-03-19T18:31:41.899871+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2019-03-19T18:31:41.915455+00:00", "type": "pullrequest_comment", "id": 95606050}, "pull_request": {"type": "pullrequest", "id": 224, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/224.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/224"}}, "title": "[Acropolis][WIP] Mutex to protect systems added on demand"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/224/comments/95597843.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/224/_/diff#comment-95597843"}}, "parent": {"id": 95463185, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/224/comments/95463185.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/224/_/diff#comment-95463185"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 224, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/224.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/224"}}, "title": "[Acropolis][WIP] Mutex to protect systems added on demand"}, "content": {"raw": "I agree with adding new systems to a queue, much like we do entities.\n\nIf we are thinking about making an entity for each system that is added, we may be able to keep it as a single method that dispatches accordingly?", "markup": "markdown", "html": "<p>I agree with adding new systems to a queue, much like we do entities.</p>\n<p>If we are thinking about making an entity for each system that is added, we may be able to keep it as a single method that dispatches accordingly?</p>", "type": "rendered"}, "created_on": "2019-03-19T17:30:09.000485+00:00", "user": {"display_name": "Michael Carroll", "uuid": "{17dbbc15-cbc0-42f0-a985-cde9061c78a0}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B17dbbc15-cbc0-42f0-a985-cde9061c78a0%7D"}, "html": {"href": "https://bitbucket.org/%7B17dbbc15-cbc0-42f0-a985-cde9061c78a0%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:65740f22-cc56-4418-9608-7e17d0ed47b7/2aa259f5-4de1-4f68-9156-eded72041d84/128"}}, "nickname": "Michael Carroll", "type": "user", "account_id": "557058:65740f22-cc56-4418-9608-7e17d0ed47b7"}, "updated_on": "2019-03-19T17:30:09.056208+00:00", "type": "pullrequest_comment", "id": 95597843}, "pull_request": {"type": "pullrequest", "id": 224, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/224.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/224"}}, "title": "[Acropolis][WIP] Mutex to protect systems added on demand"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/224/comments/95463185.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/224/_/diff#comment-95463185"}}, "parent": {"id": 95462430, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/224/comments/95462430.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/224/_/diff#comment-95462430"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 224, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/224.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/224"}}, "title": "[Acropolis][WIP] Mutex to protect systems added on demand"}, "content": {"raw": "Thanks for looking into this, your diagnostic sounds right.\n\n> use std::list as the container\n\nI think we could still have problems when removing systems.\n\n>  add new systems to a queue\n\n+1\n", "markup": "markdown", "html": "<p>Thanks for looking into this, your diagnostic sounds right.</p>\n<blockquote>\n<p>use std::list as the container</p>\n</blockquote>\n<p>I think we could still have problems when removing systems.</p>\n<blockquote>\n<p>add new systems to a queue</p>\n</blockquote>\n<p>+1</p>", "type": "rendered"}, "created_on": "2019-03-19T00:39:26.480641+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2019-03-19T00:39:26.499208+00:00", "type": "pullrequest_comment", "id": 95463185}, "pull_request": {"type": "pullrequest", "id": 224, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/224.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/224"}}, "title": "[Acropolis][WIP] Mutex to protect systems added on demand"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/224/comments/95462430.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/224/_/diff#comment-95462430"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 224, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/224.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/224"}}, "title": "[Acropolis][WIP] Mutex to protect systems added on demand"}, "content": {"raw": "I did some digging and I don't think its so much a race condition, but an issue of invalidated iterators. This piece of code is from[ SimulationRunner:301](#!/ignitionrobotics/ign-gazebo/src/44c79420340e66bf009bc7b939d9fc99459fabc9/src/SimulationRunner.cc?fileviewer=file-view-default#SimulationRunner.cc-301)\n```\n {\n    IGN_PROFILE(\"PreUpdate\");\n    for (auto& system : this->systemsPreupdate)\n      system->PreUpdate(this->currentInfo, this->entityCompMgr);\n  }\n```\nWhen `system->PreUpdate` is called, a system can add another system by invoking an event. But this all happens in the same thread so it's not a race condition. However, the `this->systemsPreupdate` container is a `std::vector` and all its iterators become invalid when a `push_back` is called and the vector has to be resized. One solution is to use `std::list` as the container for all `systems(Pre|Post)update` containers as the iterators and references to elements never get invalidated as a result of a `push_back`. I have tested this on macOS and it fixes the segfaults, but I didn't know if this is the best solution.\n\nAnother solution is to add new systems to a queue when the `LoadPlugins` event is triggered and only add the systems to the `systems(Pre|Post)update` containers after `SimulationRunner::UpdateSystems` is finished.\n\nThoughts?", "markup": "markdown", "html": "<p>I did some digging and I don't think its so much a race condition, but an issue of invalidated iterators. This piece of code is from<a data-is-external-link=\"true\" href=\"#!/ignitionrobotics/ign-gazebo/src/44c79420340e66bf009bc7b939d9fc99459fabc9/src/SimulationRunner.cc?fileviewer=file-view-default#SimulationRunner.cc-301\" rel=\"nofollow\"> SimulationRunner:301</a></p>\n<div class=\"codehilite\"><pre><span></span> {\n    IGN_PROFILE(&quot;PreUpdate&quot;);\n    for (auto&amp; system : this-&gt;systemsPreupdate)\n      system-&gt;PreUpdate(this-&gt;currentInfo, this-&gt;entityCompMgr);\n  }\n</pre></div>\n\n\n<p>When <code>system-&gt;PreUpdate</code> is called, a system can add another system by invoking an event. But this all happens in the same thread so it's not a race condition. However, the <code>this-&gt;systemsPreupdate</code> container is a <code>std::vector</code> and all its iterators become invalid when a <code>push_back</code> is called and the vector has to be resized. One solution is to use <code>std::list</code> as the container for all <code>systems(Pre|Post)update</code> containers as the iterators and references to elements never get invalidated as a result of a <code>push_back</code>. I have tested this on macOS and it fixes the segfaults, but I didn't know if this is the best solution.</p>\n<p>Another solution is to add new systems to a queue when the <code>LoadPlugins</code> event is triggered and only add the systems to the <code>systems(Pre|Post)update</code> containers after <code>SimulationRunner::UpdateSystems</code> is finished.</p>\n<p>Thoughts?</p>", "type": "rendered"}, "created_on": "2019-03-19T00:24:43.972785+00:00", "user": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}, "updated_on": "2019-03-19T00:24:43.982418+00:00", "type": "pullrequest_comment", "id": 95462430}, "pull_request": {"type": "pullrequest", "id": 224, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/224.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/224"}}, "title": "[Acropolis][WIP] Mutex to protect systems added on demand"}}, {"update": {"description": "I think the `touchplugin` test is failing on Mac because a model system is added in the middle of the pre-update calls. This PR adds a mutex to protect all the system containers, which is important now that plugins can be spawned on demand.", "title": "[Acropolis][WIP] Mutex to protect systems added on demand", "destination": {"commit": {"hash": "d2c2ffcecdf1", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/d2c2ffcecdf1.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/d2c2ffcecdf1"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "ign-gazebo1"}}, "reason": "", "source": {"commit": {"hash": "44c79420340e", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/44c79420340e.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/44c79420340e"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "systems_mutex"}}, "state": "OPEN", "author": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "date": "2019-03-18T22:09:07.131077+00:00"}, "pull_request": {"type": "pullrequest", "id": 224, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/224.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/224"}}, "title": "[Acropolis][WIP] Mutex to protect systems added on demand"}}, {"update": {"description": "I think the `touchplugin` test is failing on Mac because a model system is added in the middle of the pre-update calls. This PR adds a mutex to protect all the system containers, which is important now that plugins can be spawned on demand.", "title": "[Acropolis] Mutex to protect systems added on demand", "destination": {"commit": {"hash": "d2c2ffcecdf1", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/d2c2ffcecdf1.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/d2c2ffcecdf1"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "ign-gazebo1"}}, "reason": "", "source": {"commit": {"hash": "44c79420340e", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/44c79420340e.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/44c79420340e"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "systems_mutex"}}, "state": "OPEN", "author": {"display_name": "Addisu Z. Taddese", "uuid": "{9d7fdc68-d270-4080-bf03-4df0d0dbf635}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D"}, "html": {"href": "https://bitbucket.org/%7B9d7fdc68-d270-4080-bf03-4df0d0dbf635%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:90bc87b0-2886-4377-a17c-3a6629a697ff/afbf9be5-1e4c-4810-89d4-e58831f34b11/128"}}, "nickname": "azeey", "type": "user", "account_id": "557058:90bc87b0-2886-4377-a17c-3a6629a697ff"}, "date": "2019-03-18T17:44:41.304957+00:00"}, "pull_request": {"type": "pullrequest", "id": 224, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/224.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/224"}}, "title": "[Acropolis][WIP] Mutex to protect systems added on demand"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/224/comments/95253181.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/224/_/diff#comment-95253181"}}, "parent": {"id": 95251843, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/224/comments/95251843.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/224/_/diff#comment-95251843"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 224, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/224.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/224"}}, "title": "[Acropolis][WIP] Mutex to protect systems added on demand"}, "content": {"raw": "Argh, I should be testing this on a Mac. Thanks for the backtraces!", "markup": "markdown", "html": "<p>Argh, I should be testing this on a Mac. Thanks for the backtraces!</p>", "type": "rendered"}, "created_on": "2019-03-15T20:49:52.484951+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2019-03-15T20:49:52.496085+00:00", "type": "pullrequest_comment", "id": 95253181}, "pull_request": {"type": "pullrequest", "id": 224, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/224.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/224"}}, "title": "[Acropolis][WIP] Mutex to protect systems added on demand"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/224/comments/95251843.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/224/_/diff#comment-95251843"}}, "parent": {"id": 95247976, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/224/comments/95247976.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/224/_/diff#comment-95247976"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 224, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/224.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/224"}}, "title": "[Acropolis][WIP] Mutex to protect systems added on demand"}, "content": {"raw": "new backtrace is a little different\n\n* https://gist.github.com/scpeters/0fd39d52786ae2a4cc245ca648de3c2d", "markup": "markdown", "html": "<p>new backtrace is a little different</p>\n<ul>\n<li><a href=\"https://gist.github.com/scpeters/0fd39d52786ae2a4cc245ca648de3c2d\" rel=\"nofollow\" class=\"ap-connect-link\">https://gist.github.com/scpeters/0fd39d52786ae2a4cc245ca648de3c2d</a></li>\n</ul>", "type": "rendered"}, "created_on": "2019-03-15T20:33:56.408679+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2019-03-15T20:33:56.421131+00:00", "type": "pullrequest_comment", "id": 95251843}, "pull_request": {"type": "pullrequest", "id": 224, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/224.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/224"}}, "title": "[Acropolis][WIP] Mutex to protect systems added on demand"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/224/comments/95247976.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/224/_/diff#comment-95247976"}}, "parent": {"id": 95246941, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/224/comments/95246941.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/224/_/diff#comment-95246941"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 224, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/224.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/224"}}, "title": "[Acropolis][WIP] Mutex to protect systems added on demand"}, "content": {"raw": "here is the backtrace I have seen in the past for reference:\n\n* https://gist.github.com/scpeters/085ad8e69c4352bba126bcf19edcb79b", "markup": "markdown", "html": "<p>here is the backtrace I have seen in the past for reference:</p>\n<ul>\n<li><a href=\"https://gist.github.com/scpeters/085ad8e69c4352bba126bcf19edcb79b\" rel=\"nofollow\" class=\"ap-connect-link\">https://gist.github.com/scpeters/085ad8e69c4352bba126bcf19edcb79b</a></li>\n</ul>", "type": "rendered"}, "created_on": "2019-03-15T19:50:38.655653+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2019-03-15T19:50:38.670632+00:00", "type": "pullrequest_comment", "id": 95247976}, "pull_request": {"type": "pullrequest", "id": 224, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/224.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/224"}}, "title": "[Acropolis][WIP] Mutex to protect systems added on demand"}}, {"update": {"description": "I think the `touchplugin` test is failing on Mac because a model system is added in the middle of the pre-update calls. This PR adds a mutex to protect all the system containers, which is important now that plugins can be spawned on demand.", "title": "[Acropolis] Mutex to protect systems added on demand", "destination": {"commit": {"hash": "63ea9c445cf2", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/63ea9c445cf2.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/63ea9c445cf2"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "ign-gazebo1"}}, "reason": "", "source": {"commit": {"hash": "d4d9e8c3b707", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/d4d9e8c3b707.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/d4d9e8c3b707"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "systems_mutex"}}, "state": "OPEN", "author": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "date": "2019-03-15T19:43:42.867982+00:00"}, "pull_request": {"type": "pullrequest", "id": 224, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/224.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/224"}}, "title": "[Acropolis][WIP] Mutex to protect systems added on demand"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/224/comments/95246941.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/224/_/diff#comment-95246941"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 224, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/224.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/224"}}, "title": "[Acropolis][WIP] Mutex to protect systems added on demand"}, "content": {"raw": "test is still failing on mac", "markup": "markdown", "html": "<p>test is still failing on mac</p>", "type": "rendered"}, "created_on": "2019-03-15T19:38:44.116090+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2019-03-15T19:38:44.126827+00:00", "type": "pullrequest_comment", "id": 95246941}, "pull_request": {"type": "pullrequest", "id": 224, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/224.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/224"}}, "title": "[Acropolis][WIP] Mutex to protect systems added on demand"}}, {"update": {"description": "I think the `touchplugin` test is failing on Mac because a model system is added in the middle of the pre-update calls. This PR adds a mutex to protect all the system containers, which is important now that plugins can be spawned on demand.", "title": "[Acropolis] Mutext to protect systems added on demand", "destination": {"commit": {"hash": "63ea9c445cf2", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/63ea9c445cf2.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/63ea9c445cf2"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "ign-gazebo1"}}, "reason": "", "source": {"commit": {"hash": "d4d9e8c3b707", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/d4d9e8c3b707.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/d4d9e8c3b707"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "systems_mutex"}}, "state": "OPEN", "author": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "date": "2019-03-15T18:38:52.974227+00:00"}, "pull_request": {"type": "pullrequest", "id": 224, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/224.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/224"}}, "title": "[Acropolis][WIP] Mutex to protect systems added on demand"}}, {"update": {"description": "I think the `touchplugin` test is failing on Mac because a model system is added in the middle of the pre-update calls. This PR adds a mutex to protect all the system containers, which is important now that plugins can be spawned on demand.", "title": "[Acropolis] Mutext to protect systems added on demand", "destination": {"commit": {"hash": "63ea9c445cf2", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/63ea9c445cf2.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/63ea9c445cf2"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "ign-gazebo1"}}, "reason": "", "source": {"commit": {"hash": "d4d9e8c3b707", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/d4d9e8c3b707.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/d4d9e8c3b707"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "systems_mutex"}}, "state": "OPEN", "author": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "date": "2019-03-15T18:38:52.927483+00:00"}, "pull_request": {"type": "pullrequest", "id": 224, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/224.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/224"}}, "title": "[Acropolis][WIP] Mutex to protect systems added on demand"}}]}