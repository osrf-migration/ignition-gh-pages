{"pagelen": 50, "values": [{"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/234/comments/97177919.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/234/_/diff#comment-97177919"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 234, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/234.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/234"}}, "title": "[Acropolis] Port battery plugin from Gazebo classic"}, "content": {"raw": "Instead of getting `dt` from the SDF, you could get it from `UpdateInfo.dt` at every update, in case it changes during the simulation. It's probably also best not to rely on parent SDF elements, so the plugin works even if just the current element and its children are passed.\n\nAlso, note that `dt` will be zero when simulation is paused, so you could check for that and shortcut the logic early.", "markup": "markdown", "html": "<p>Instead of getting <code>dt</code> from the SDF, you could get it from <code>UpdateInfo.dt</code> at every update, in case it changes during the simulation. It's probably also best not to rely on parent SDF elements, so the plugin works even if just the current element and its children are passed.</p>\n<p>Also, note that <code>dt</code> will be zero when simulation is paused, so you could check for that and shortcut the logic early.</p>", "type": "rendered"}, "created_on": "2019-04-02T01:21:44.277784+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {}, "updated_on": "2019-04-02T01:21:44.284871+00:00", "type": "pullrequest_comment", "id": 97177919}, "pull_request": {"type": "pullrequest", "id": 234, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/234.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/234"}}, "title": "[Acropolis] Port battery plugin from Gazebo classic"}}, {"update": {"description": "Depends on sdformat add\\_battery branch \\([this PR](https://bitbucket.org/osrf/sdformat/pull-requests/513/add-battery-tag-under-link/diff)\\) for new type `sdf::Battery`, and ign-common battery\\_plugin branch \\([this PR](#!/ignitionrobotics/ign-common/pull-requests/186/battery-additions-for-plugin-port/diff)\\) for additions to `common::Battery`.\r\n\r\nThis PR ports LinearBatteryPlugin from Gazebo classic:\r\n\r\n[LinearBatteryPlugin.hh](https://bitbucket.org/osrf/gazebo/src/42d7d20dbf5075936965afaef40c8e3d08124b88/plugins/LinearBatteryPlugin.hh?at=default&fileviewer=file-view-default)\r\n\r\n[LinearBatteryPlugin.cc](https://bitbucket.org/osrf/gazebo/src/42d7d20dbf5075936965afaef40c8e3d08124b88/plugins/LinearBatteryPlugin.cc?at=default)\r\n\r\n[LinearBatteryConsumerPlugin.hh](https://bitbucket.org/osrf/gazebo/src/42d7d20dbf5075936965afaef40c8e3d08124b88/plugins/LinearBatteryConsumerPlugin.hh?at=default&fileviewer=file-view-default)\r\n\r\n[LinearBatteryConsumerPlugin.cc](https://bitbucket.org/osrf/gazebo/src/42d7d20dbf5075936965afaef40c8e3d08124b88/plugins/LinearBatteryConsumerPlugin.cc?at=default)\r\n\r\nIntegration tests are added for single link consuming single battery, multiple links consuming the same battery, single link consuming multiple batteries, multiple links consuming multiple batteries, and links of the same name under different models consuming different batteries.\r\n\r\n## Testing\r\n\r\n```\r\ncd ign-gazebo/examples/worlds\r\nign-gazebo -f linear_battery_demo.sdf -v 4 -r\r\n```\r\n\r\nThis file has two `<link>`s consuming the same battery.\r\n\r\nTwo batteries are currently considered the same if their `<link><battery name=\"foo\"><voltage>12.0</voltage></battery></link>` tags in the SDF have the same name and same initial voltage \\(checked by `common::Battery::operator==()` \\).\r\n\r\nAt component creation time of `component::Battery`, whose `Data()` is a `common::BatteryPtr` , `SdfEntityCreator.cc` checks that if two links are to consume the same battery, instead of creating a new `common::Battery`, it points to the existing `common::BatteryPtr` in an existing `components::Battery`. A new `Entity` and a new `Component` will still be created, just the `common::BatteryPtr` is the same, so that it can have multiple consumers and drain accordingly.\r\n\r\nMore SDF files for testing are in `test/worlds` used for integration tests, for comparing drainage between single and multiple links/batteries.\r\n\r\nThere's some debug printouts right now to see the voltage and number of consumers \\( `PowerLoads().size()` \\) - these are printed in the plugin and will be removed, but for now, there's no other way of telling how much is left in the battery.", "title": "[Acropolis] Port battery plugin from Gazebo classic", "destination": {"commit": {"hash": "fda9e0bf683e", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/fda9e0bf683e.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/fda9e0bf683e"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "ign-gazebo1"}}, "reason": "", "source": {"commit": {"hash": "f5bb12efda1d", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/f5bb12efda1d.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/f5bb12efda1d"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "battery_plugin"}}, "state": "OPEN", "author": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "date": "2019-03-29T23:32:43.731966+00:00"}, "pull_request": {"type": "pullrequest", "id": 234, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/234.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/234"}}, "title": "[Acropolis] Port battery plugin from Gazebo classic"}}, {"update": {"description": "Depends on sdformat add\\_battery branch \\([this PR](https://bitbucket.org/osrf/sdformat/pull-requests/513/add-battery-tag-under-link/diff)\\) for new type `sdf::Battery`, and ign-common battery\\_plugin branch \\([this PR](https://bitbucket.org/osrf/sdformat/pull-requests/513/add-battery-tag-under-link/diff)\\) for additions to `common::Battery`.\r\n\r\nThis PR ports LinearBatteryPlugin from Gazebo classic:\r\n\r\n[LinearBatteryPlugin.hh](https://bitbucket.org/osrf/gazebo/src/42d7d20dbf5075936965afaef40c8e3d08124b88/plugins/LinearBatteryPlugin.hh?at=default&fileviewer=file-view-default)\r\n\r\n[LinearBatteryPlugin.cc](https://bitbucket.org/osrf/gazebo/src/42d7d20dbf5075936965afaef40c8e3d08124b88/plugins/LinearBatteryPlugin.cc?at=default)\r\n\r\n[LinearBatteryConsumerPlugin.hh](https://bitbucket.org/osrf/gazebo/src/42d7d20dbf5075936965afaef40c8e3d08124b88/plugins/LinearBatteryConsumerPlugin.hh?at=default&fileviewer=file-view-default)\r\n\r\n[LinearBatteryConsumerPlugin.cc](https://bitbucket.org/osrf/gazebo/src/42d7d20dbf5075936965afaef40c8e3d08124b88/plugins/LinearBatteryConsumerPlugin.cc?at=default)\r\n\r\nIntegration tests are added for single link consuming single battery, multiple links consuming the same battery, single link consuming multiple batteries, multiple links consuming multiple batteries, and links of the same name under different models consuming different batteries.\r\n\r\n## Testing\r\n\r\n```\r\ncd ign-gazebo/examples/worlds\r\nign-gazebo -f linear_battery_demo.sdf -v 4 -r\r\n```\r\n\r\nThis file has two `<link>`s consuming the same battery.\r\n\r\nTwo batteries are currently considered the same if their `<link><battery name=\"foo\"><voltage>12.0</voltage></battery></link>` tags in the SDF have the same name and same initial voltage \\(checked by `common::Battery::operator==()` \\).\r\n\r\nAt component creation time of `component::Battery`, whose `Data()` is a `common::BatteryPtr` , `SdfEntityCreator.cc` checks that if two links are to consume the same battery, instead of creating a new `common::Battery`, it points to the existing `common::BatteryPtr` in an existing `components::Battery`. A new `Entity` and a new `Component` will still be created, just the `common::BatteryPtr` is the same, so that it can have multiple consumers and drain accordingly.\r\n\r\nMore SDF files for testing are in `test/worlds` used for integration tests, for comparing drainage between single and multiple links/batteries.\r\n\r\nThere's some debug printouts right now to see the voltage and number of consumers \\( `PowerLoads().size()` \\) - these are printed in the plugin and will be removed, but for now, there's no other way of telling how much is left in the battery.", "title": "[Acropolis] Port battery plugin from Gazebo classic", "destination": {"commit": {"hash": "4a78b3e50f7b", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/4a78b3e50f7b.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/4a78b3e50f7b"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "ign-gazebo1"}}, "reason": "", "source": {"commit": {"hash": "f5bb12efda1d", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/f5bb12efda1d.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/f5bb12efda1d"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "battery_plugin"}}, "state": "OPEN", "author": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "date": "2019-03-25T21:27:35.824835+00:00"}, "pull_request": {"type": "pullrequest", "id": 234, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/234.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/234"}}, "title": "[Acropolis] Port battery plugin from Gazebo classic"}}, {"update": {"description": "Depends on sdformat add\\_battery branch \\([this PR](https://bitbucket.org/osrf/sdformat/pull-requests/513/add-battery-tag-under-link/diff)\\) for new type `sdf::Battery`, and ign-common battery\\_plugin branch \\([this PR](https://bitbucket.org/osrf/sdformat/pull-requests/513/add-battery-tag-under-link/diff)\\) for additions to `common::Battery`.\r\n\r\nThis PR ports LinearBatteryPlugin from Gazebo classic:\r\n\r\n[LinearBatteryPlugin.hh](https://bitbucket.org/osrf/gazebo/src/42d7d20dbf5075936965afaef40c8e3d08124b88/plugins/LinearBatteryPlugin.hh?at=default&fileviewer=file-view-default)\r\n\r\n[LinearBatteryPlugin.cc](https://bitbucket.org/osrf/gazebo/src/42d7d20dbf5075936965afaef40c8e3d08124b88/plugins/LinearBatteryPlugin.cc?at=default)\r\n\r\n[LinearBatteryConsumerPlugin.hh](https://bitbucket.org/osrf/gazebo/src/42d7d20dbf5075936965afaef40c8e3d08124b88/plugins/LinearBatteryConsumerPlugin.hh?at=default&fileviewer=file-view-default)\r\n\r\n[LinearBatteryConsumerPlugin.cc](https://bitbucket.org/osrf/gazebo/src/42d7d20dbf5075936965afaef40c8e3d08124b88/plugins/LinearBatteryConsumerPlugin.cc?at=default)\r\n\r\nIntegration tests are added for single link consuming single battery, multiple links consuming the same battery, single link consuming multiple batteries, multiple links consuming multiple batteries, and links of the same name under different models consuming different batteries.\r\n\r\n## Testing\r\n\r\n```\r\ncd ign-gazebo/examples/worlds\r\nign-gazebo -f linear_battery_demo.sdf -v 4 -r\r\n```\r\n\r\nThis file has two `<link>`s consuming the same battery.\r\n\r\nTwo batteries are currently considered the same if their `<link><battery name=\"foo\"><voltage>12.0</voltage></battery></link>` tags in the SDF have the same name and same initial voltage \\(checked by `common::Battery::operator==()` \\).\r\n\r\nAt component creation time of `component::Battery`, whose `Data()` is a `common::BatteryPtr` , `SdfEntityCreator.cc` checks that if two links are to consume the same battery, instead of creating a new `common::Battery`, it points to the existing `common::BatteryPtr` in an existing `components::Battery`. A new `Entity` and a new `Component` will still be created, just the `common::BatteryPtr` is the same, so that it can have multiple consumers and drain accordingly.\r\n\r\nMore SDF files for testing are in `test/worlds` used for integration tests, for comparing drainage between single and multiple links/batteries.\r\n\r\nThere's some debug printouts right now to see the voltage and number of consumers \\( `PowerLoads().size()` \\) - these are printed in the plugin and will be removed, but for now, there's no other way of telling how much is left in the battery.", "title": "[Acropolis] Port battery plugin from Gazebo classic", "destination": {"commit": {"hash": "ce17434d4ff5", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/ce17434d4ff5.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/ce17434d4ff5"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "ign-gazebo1"}}, "reason": "", "source": {"commit": {"hash": "f5bb12efda1d", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/f5bb12efda1d.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/f5bb12efda1d"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "battery_plugin"}}, "state": "OPEN", "author": {"display_name": "Mabel Zhang", "uuid": "{4b0e38fb-bf50-45c0-a496-61147518b2bf}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D"}, "html": {"href": "https://bitbucket.org/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:ceb5942c-6843-408c-8550-3ce4899d299b/4d48e5ea-cf28-4fa7-9715-8fc9e315d831/128"}}, "nickname": "mabelmzhang", "type": "user", "account_id": "557058:ceb5942c-6843-408c-8550-3ce4899d299b"}, "date": "2019-03-23T07:11:52.161573+00:00"}, "pull_request": {"type": "pullrequest", "id": 234, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/234.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/234"}}, "title": "[Acropolis] Port battery plugin from Gazebo classic"}}, {"update": {"description": "Depends on sdformat add\\_battery branch \\([this PR](https://bitbucket.org/osrf/sdformat/pull-requests/513/add-battery-tag-under-link/diff)\\) for new type `sdf::Battery`, and ign-common battery\\_plugin branch \\([this PR](https://bitbucket.org/osrf/sdformat/pull-requests/513/add-battery-tag-under-link/diff)\\) for additions to `common::Battery`.\r\n\r\nThis PR ports LinearBatteryPlugin from Gazebo classic:\r\n\r\n[LinearBatteryPlugin.hh](https://bitbucket.org/osrf/gazebo/src/42d7d20dbf5075936965afaef40c8e3d08124b88/plugins/LinearBatteryPlugin.hh?at=default&fileviewer=file-view-default)\r\n\r\n[LinearBatteryPlugin.cc](https://bitbucket.org/osrf/gazebo/src/42d7d20dbf5075936965afaef40c8e3d08124b88/plugins/LinearBatteryPlugin.cc?at=default)\r\n\r\n[LinearBatteryConsumerPlugin.hh](https://bitbucket.org/osrf/gazebo/src/42d7d20dbf5075936965afaef40c8e3d08124b88/plugins/LinearBatteryConsumerPlugin.hh?at=default&fileviewer=file-view-default)\r\n\r\n[LinearBatteryConsumerPlugin.cc](https://bitbucket.org/osrf/gazebo/src/42d7d20dbf5075936965afaef40c8e3d08124b88/plugins/LinearBatteryConsumerPlugin.cc?at=default)\r\n\r\nIntegration tests are added for single link consuming single battery, multiple links consuming the same battery, single link consuming multiple batteries, multiple links consuming multiple batteries, and links of the same name under different models consuming different batteries.\r\n\r\n## Testing\r\n\r\n```\r\ncd ign-gazebo/examples/worlds\r\nign-gazebo -f linear_battery_demo.sdf -v 4 -r\r\n```\r\n\r\nThis file has two `<link>`s consuming the same battery.\r\n\r\nTwo batteries are currently considered the same if their `<link><battery name=\"foo\"><voltage>12.0</voltage></battery></link>` tags in the SDF have the same name and same initial voltage \\(checked by `common::Battery::operator==()` \\).\r\n\r\nAt component creation time of `component::Battery`, whose `Data()` is a `common::BatteryPtr` , `SdfEntityCreator.cc` checks that if two links are to consume the same battery, instead of creating a new `common::Battery`, it points to the existing `common::BatteryPtr` in an existing `components::Battery`. A new `Entity` and a new `Component` will still be created, just the `common::BatteryPtr` is the same, so that it can have multiple consumers and drain accordingly.\r\n\r\nMore SDF files for testing are in  integration tests `test/worlds`, for comparing drainage between single and multiple links/batteries.\r\n\r\nThere's some debug printouts right now to see the voltage and number of consumers \\( `PowerLoads().size()` \\) - these are printed in the plugin and will be removed, but for now, there's no other way of telling how much is left in the battery.", "title": "[Acropolis] Port battery plugin from Gazebo classic", "destination": {"commit": {"hash": "ce17434d4ff5", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/ce17434d4ff5.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/ce17434d4ff5"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "ign-gazebo1"}}, "reason": "", "source": {"commit": {"hash": "f5bb12efda1d", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/f5bb12efda1d.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/f5bb12efda1d"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "battery_plugin"}}, "state": "OPEN", "author": {"display_name": "Mabel Zhang", "uuid": "{4b0e38fb-bf50-45c0-a496-61147518b2bf}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D"}, "html": {"href": "https://bitbucket.org/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:ceb5942c-6843-408c-8550-3ce4899d299b/4d48e5ea-cf28-4fa7-9715-8fc9e315d831/128"}}, "nickname": "mabelmzhang", "type": "user", "account_id": "557058:ceb5942c-6843-408c-8550-3ce4899d299b"}, "date": "2019-03-23T07:11:28.959892+00:00"}, "pull_request": {"type": "pullrequest", "id": 234, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/234.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/234"}}, "title": "[Acropolis] Port battery plugin from Gazebo classic"}}, {"update": {"description": "Depends on sdformat add\\_battery branch \\([this PR](https://bitbucket.org/osrf/sdformat/pull-requests/513/add-battery-tag-under-link/diff)\\) for new type `sdf::Battery`, and ign-common battery\\_plugin branch \\([this PR](https://bitbucket.org/osrf/sdformat/pull-requests/513/add-battery-tag-under-link/diff)\\) for additions to `common::Battery`.\r\n\r\nThis PR ports LinearBatteryPlugin from Gazebo classic:\r\n\r\n[LinearBatteryPlugin.hh](https://bitbucket.org/osrf/gazebo/src/42d7d20dbf5075936965afaef40c8e3d08124b88/plugins/LinearBatteryPlugin.hh?at=default&fileviewer=file-view-default)\r\n\r\n[LinearBatteryPlugin.cc](https://bitbucket.org/osrf/gazebo/src/42d7d20dbf5075936965afaef40c8e3d08124b88/plugins/LinearBatteryPlugin.cc?at=default)\r\n\r\n[LinearBatteryConsumerPlugin.hh](https://bitbucket.org/osrf/gazebo/src/42d7d20dbf5075936965afaef40c8e3d08124b88/plugins/LinearBatteryConsumerPlugin.hh?at=default&fileviewer=file-view-default)\r\n\r\n[LinearBatteryConsumerPlugin.cc](https://bitbucket.org/osrf/gazebo/src/42d7d20dbf5075936965afaef40c8e3d08124b88/plugins/LinearBatteryConsumerPlugin.cc?at=default)\r\n\r\nIntegration tests are added for single link consuming single battery, multiple links consuming the same battery, single link consuming multiple batteries, multiple links consuming multiple batteries, and links of the same name under different models consuming different batteries.\r\n\r\n## Testing\r\n\r\n```\r\ncd ign-gazebo/examples/worlds\r\nign-gazebo -f linear_battery_demo.sdf -v 4 -r\r\n```\r\n\r\nThis file has two `<link>`s consuming the same battery.\r\n\r\nTwo batteries are currently considered the same if their `<link><battery name=\"foo\"><voltage>12.0</voltage></battery></link>` tags in the SDF have the same name and same initial voltage \\(checked by `common::Battery::operator==()` \\).\r\n\r\nAt component creation time of `component::Battery`, whose `Data()` is a `common::BatteryPtr` , `SdfEntityCreator.cc` checks that if two links are to consume the same battery, instead of creating a new `common::Battery`, it points to the existing `common::BatteryPtr` in an existing `components::Battery`. A new `Entity` and a new `Component` will still be created, just the `common::BatteryPtr` is the same, so that it can have multiple consumers and drain accordingly.\r\n\r\nMore SDF files for testing are in `test/worlds`, for comparing drainage between single and multiple links/batteries.\r\n\r\nThere's some debug printouts right now to see the voltage and number of consumers \\( `PowerLoads().size()` \\) - these are printed in the plugin and will be removed, but for now, there's no other way of telling how much is left in the battery.", "title": "[Acropolis] Port battery plugin from Gazebo classic", "destination": {"commit": {"hash": "ce17434d4ff5", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/ce17434d4ff5.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/ce17434d4ff5"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "ign-gazebo1"}}, "reason": "", "source": {"commit": {"hash": "f5bb12efda1d", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/f5bb12efda1d.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/f5bb12efda1d"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "battery_plugin"}}, "state": "OPEN", "author": {"display_name": "Mabel Zhang", "uuid": "{4b0e38fb-bf50-45c0-a496-61147518b2bf}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D"}, "html": {"href": "https://bitbucket.org/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:ceb5942c-6843-408c-8550-3ce4899d299b/4d48e5ea-cf28-4fa7-9715-8fc9e315d831/128"}}, "nickname": "mabelmzhang", "type": "user", "account_id": "557058:ceb5942c-6843-408c-8550-3ce4899d299b"}, "date": "2019-03-23T07:09:59.888254+00:00"}, "pull_request": {"type": "pullrequest", "id": 234, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/234.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/234"}}, "title": "[Acropolis] Port battery plugin from Gazebo classic"}}, {"update": {"description": "Depends on sdformat add\\_battery branch \\([this PR](https://bitbucket.org/osrf/sdformat/pull-requests/513/add-battery-tag-under-link/diff)\\) for new type `sdf::Battery`, and ign-common battery\\_plugin branch \\([this PR](https://bitbucket.org/osrf/sdformat/pull-requests/513/add-battery-tag-under-link/diff)\\) for additions to `common::Battery`.\r\n\r\nThis PR ports LinearBatteryPlugin from Gazebo classic:\r\n\r\n[LinearBatteryPlugin.hh](https://bitbucket.org/osrf/gazebo/src/42d7d20dbf5075936965afaef40c8e3d08124b88/plugins/LinearBatteryPlugin.hh?at=default&fileviewer=file-view-default)\r\n\r\n[LinearBatteryPlugin.cc](https://bitbucket.org/osrf/gazebo/src/42d7d20dbf5075936965afaef40c8e3d08124b88/plugins/LinearBatteryPlugin.cc?at=default)\r\n\r\n[LinearBatteryConsumerPlugin.hh](https://bitbucket.org/osrf/gazebo/src/42d7d20dbf5075936965afaef40c8e3d08124b88/plugins/LinearBatteryConsumerPlugin.hh?at=default&fileviewer=file-view-default)\r\n\r\n[LinearBatteryConsumerPlugin.cc](https://bitbucket.org/osrf/gazebo/src/42d7d20dbf5075936965afaef40c8e3d08124b88/plugins/LinearBatteryConsumerPlugin.cc?at=default)\r\n\r\nIntegration tests are added for single link consuming single battery, multiple links consuming the same battery, single link consuming multiple batteries, multiple links consuming multiple batteries, and links of the same name under different models consuming different batteries.\r\n\r\n## Testing\r\n\r\n```\r\ncd ign-gazebo/examples/worlds\r\nign-gazebo -f linear_battery_demo.sdf -v 4 -r\r\n```\r\n\r\nThis file has two `<link>`s consuming the same battery.\r\n\r\nTwo batteries are currently considered the same if their `<link><battery name=\"foo\"><voltage>12.0</voltage></battery></link>` tags in the SDF have the same name and same initial voltage \\(checked by `common::Battery::operator==()` \\).\r\n\r\nAt component creation time of `component::Battery`, whose `Data()` is a `common::BatteryPtr` , `SdfEntityCreator.cc` checks that if two links are to consume the same battery, instead of creating a new `common::Battery`, it points to the existing `common::BatteryPtr` in an existing `components::Battery`. A new `Entity` and a new `Component` will still be created, just the `common::BatteryPtr` is the same, so that it can have multiple consumers and drain accordingly.\r\n\r\nMore SDF files for testing are in `test/worlds`, for comparing drainage between single and multiple links/batteries.\r\n\r\nThere's some debug printouts right now to see the voltage and number of consumers \\( `PowerLoads().size()` \\) - these are printed in the plugin and will be removed, but for now, there's no other way of telling how much is left in the battery.", "title": "[Acropolis] Port battery plugin from Gazebo classic", "destination": {"commit": {"hash": "ce17434d4ff5", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/ce17434d4ff5.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/ce17434d4ff5"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "ign-gazebo1"}}, "reason": "", "source": {"commit": {"hash": "a85a0481ce39", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/a85a0481ce39.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/a85a0481ce39"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "battery_plugin"}}, "state": "OPEN", "author": {"display_name": "Mabel Zhang", "uuid": "{4b0e38fb-bf50-45c0-a496-61147518b2bf}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D"}, "html": {"href": "https://bitbucket.org/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:ceb5942c-6843-408c-8550-3ce4899d299b/4d48e5ea-cf28-4fa7-9715-8fc9e315d831/128"}}, "nickname": "mabelmzhang", "type": "user", "account_id": "557058:ceb5942c-6843-408c-8550-3ce4899d299b"}, "date": "2019-03-23T06:43:35.134996+00:00"}, "pull_request": {"type": "pullrequest", "id": 234, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/234.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/234"}}, "title": "[Acropolis] Port battery plugin from Gazebo classic"}}, {"update": {"description": "Depends on sdformat add\\_battery branch \\([this PR](https://bitbucket.org/osrf/sdformat/pull-requests/513/add-battery-tag-under-link/diff)\\) for new type `sdf::Battery`, and ign-common battery\\_plugin branch \\([this PR](https://bitbucket.org/osrf/sdformat/pull-requests/513/add-battery-tag-under-link/diff)\\) for additions to `common::Battery`.\r\n\r\nThis PR ports LinearBatteryPlugin from Gazebo classic:\r\n\r\n[LinearBatteryPlugin.hh](https://bitbucket.org/osrf/gazebo/src/42d7d20dbf5075936965afaef40c8e3d08124b88/plugins/LinearBatteryPlugin.hh?at=default&fileviewer=file-view-default)\r\n\r\n[LinearBatteryPlugin.cc](https://bitbucket.org/osrf/gazebo/src/42d7d20dbf5075936965afaef40c8e3d08124b88/plugins/LinearBatteryPlugin.cc?at=default)\r\n\r\n[LinearBatteryConsumerPlugin.hh](https://bitbucket.org/osrf/gazebo/src/42d7d20dbf5075936965afaef40c8e3d08124b88/plugins/LinearBatteryConsumerPlugin.hh?at=default&fileviewer=file-view-default)\r\n\r\n[LinearBatteryConsumerPlugin.cc](https://bitbucket.org/osrf/gazebo/src/42d7d20dbf5075936965afaef40c8e3d08124b88/plugins/LinearBatteryConsumerPlugin.cc?at=default)\r\n\r\nIntegration tests are added for single link consuming single battery, multiple links consuming the same battery, single link consuming multiple batteries, multiple links consuming multiple batteries, and links of the same name under different models consuming different batteries.\r\n\r\n## Testing\r\n\r\n```\r\ncd ign-gazebo/examples/worlds\r\nign-gazebo -f linear_battery_demo.sdf -v 4 -r\r\n```\r\n\r\nThis file has two `<link>`s consuming the same battery.\r\n\r\nTwo batteries are currently considered the same if their `<link><battery name=\"foo\"><voltage>12.0</voltage></battery></link>` tags in the SDF have the same name and same initial voltage \\(checked by `common::Battery::operator==()` \\).\r\n\r\nAt component creation time of `component::Battery`, whose `Data()` is a `common::BatteryPtr` , `SdfEntityCreator.cc` checks that if two links are to consume the same battery, instead of creating a new `common::Battery`, it points to the existing `common::BatteryPtr` in an existing `components::Battery`. A new `Entity` and a new `Component` will still be created, just the `common::BatteryPtr` is the same, so that it can have multiple consumers and drain accordingly.\r\n\r\nMore SDF files for testing are in `test/worlds`, for comparing drainage between single and multiple links/batteries.\r\n\r\nThere's some debug printouts right now to see the voltage and number of consumers \\( `PowerLoads().size()` \\) - these are printed in the plugin and will be removed, but for now, there's no other way of telling how much is left in the battery.", "title": "[Acropolis] Port battery plugin from Gazebo classic", "destination": {"commit": {"hash": "ce17434d4ff5", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/ce17434d4ff5.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/ce17434d4ff5"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "ign-gazebo1"}}, "reason": "", "source": {"commit": {"hash": "706e560a8317", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/706e560a8317.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/706e560a8317"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "battery_plugin"}}, "state": "OPEN", "author": {"display_name": "Mabel Zhang", "uuid": "{4b0e38fb-bf50-45c0-a496-61147518b2bf}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D"}, "html": {"href": "https://bitbucket.org/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:ceb5942c-6843-408c-8550-3ce4899d299b/4d48e5ea-cf28-4fa7-9715-8fc9e315d831/128"}}, "nickname": "mabelmzhang", "type": "user", "account_id": "557058:ceb5942c-6843-408c-8550-3ce4899d299b"}, "date": "2019-03-23T06:34:13.349871+00:00"}, "pull_request": {"type": "pullrequest", "id": 234, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/234.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/234"}}, "title": "[Acropolis] Port battery plugin from Gazebo classic"}}, {"update": {"description": "Depends on sdformat add\\_battery branch for new type `sdf::Battery`, and ign-common battery\\_plugin branch for additions to `common::Battery`.\r\n\r\nThis PR ports LinearBatteryPlugin from Gazebo classic:\r\n\r\n[https://bitbucket.org/osrf/gazebo/src/42d7d20dbf5075936965afaef40c8e3d08124b88/plugins/LinearBatteryPlugin.hh?at=default&fileviewer=file-view-default](https://bitbucket.org/osrf/gazebo/src/42d7d20dbf5075936965afaef40c8e3d08124b88/plugins/LinearBatteryPlugin.hh?at=default&fileviewer=file-view-default)\r\n\r\n[https://bitbucket.org/osrf/gazebo/src/42d7d20dbf5075936965afaef40c8e3d08124b88/plugins/LinearBatteryPlugin.cc?at=default](https://bitbucket.org/osrf/gazebo/src/42d7d20dbf5075936965afaef40c8e3d08124b88/plugins/LinearBatteryPlugin.cc?at=default)\r\n\r\n[https://bitbucket.org/osrf/gazebo/src/42d7d20dbf5075936965afaef40c8e3d08124b88/plugins/LinearBatteryConsumerPlugin.hh?at=default&fileviewer=file-view-default](https://bitbucket.org/osrf/gazebo/src/42d7d20dbf5075936965afaef40c8e3d08124b88/plugins/LinearBatteryConsumerPlugin.hh?at=default&fileviewer=file-view-default)\r\n\r\n[https://bitbucket.org/osrf/gazebo/src/42d7d20dbf5075936965afaef40c8e3d08124b88/plugins/LinearBatteryConsumerPlugin.cc?at=default](https://bitbucket.org/osrf/gazebo/src/42d7d20dbf5075936965afaef40c8e3d08124b88/plugins/LinearBatteryConsumerPlugin.cc?at=default)\r\n\r\nIntegration tests are added for single link consuming single battery, multiple links consuming the same battery, single link consuming multiple batteries, multiple links consuming multiple batteries, and links of the same name under different models consuming different batteries.\r\n\r\n## Testing\r\n\r\n```\r\ncd ign-gazebo/examples/worlds\r\nign-gazebo -f linear_battery_demo.sdf -v 4 -r\r\n```\r\n\r\nThis file has two `<link>`s consuming the same battery. \r\n\r\nTwo batteries are currently considered the same if their `<link><battery name=\"foo\"><voltage>12.0</voltage></battery></link>` tags in the SDF have the same name and same initial voltage \\(checked by `common::Battery::operator==()` \\).\r\n\r\nAt component creation time of `component::Battery`, whose `Data()` is a `common::BatteryPtr` , `SdfEntityCreator.cc` checks that if two links are to consume the same battery, instead of creating a new `common::Battery`, it points to the existing `common::BatteryPtr` in an existing `components::Battery`. A new `Entity` and a new `Component` will still be created, just the `common::BatteryPtr` is the same, so that it can have multiple consumers and drain accordingly.\r\n\r\nMore SDF files for testing are in `test/worlds`, for comparing drainage between single and multiple links/batteries.\r\n\r\nThere's some debug printouts right now to see the voltage and number of consumers \\( `PowerLoads().size()` \\) - these are printed in the plugin and will be removed, but for now, there's no other way of telling how much is left in the battery.", "title": "[Acropolis] Port battery plugin from Gazebo classic", "destination": {"commit": {"hash": "ce17434d4ff5", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/ce17434d4ff5.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/ce17434d4ff5"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "ign-gazebo1"}}, "reason": "", "source": {"commit": {"hash": "706e560a8317", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/706e560a8317.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/706e560a8317"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "battery_plugin"}}, "state": "OPEN", "author": {"display_name": "Mabel Zhang", "uuid": "{4b0e38fb-bf50-45c0-a496-61147518b2bf}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D"}, "html": {"href": "https://bitbucket.org/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:ceb5942c-6843-408c-8550-3ce4899d299b/4d48e5ea-cf28-4fa7-9715-8fc9e315d831/128"}}, "nickname": "mabelmzhang", "type": "user", "account_id": "557058:ceb5942c-6843-408c-8550-3ce4899d299b"}, "date": "2019-03-23T06:07:57.800197+00:00"}, "pull_request": {"type": "pullrequest", "id": 234, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/234.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/234"}}, "title": "[Acropolis] Port battery plugin from Gazebo classic"}}, {"update": {"description": "Depends on sdformat add\\_battery branch for new type `sdf::Battery`, and ign-common battery\\_plugin branch for additions to `common::Battery`.\r\n\r\nThis PR ports LinearBatteryPlugin from Gazebo classic:\r\n\r\n[https://bitbucket.org/osrf/gazebo/src/42d7d20dbf5075936965afaef40c8e3d08124b88/plugins/LinearBatteryPlugin.hh?at=default&fileviewer=file-view-default](https://bitbucket.org/osrf/gazebo/src/42d7d20dbf5075936965afaef40c8e3d08124b88/plugins/LinearBatteryPlugin.hh?at=default&fileviewer=file-view-default)\r\n\r\n[https://bitbucket.org/osrf/gazebo/src/42d7d20dbf5075936965afaef40c8e3d08124b88/plugins/LinearBatteryPlugin.cc?at=default](https://bitbucket.org/osrf/gazebo/src/42d7d20dbf5075936965afaef40c8e3d08124b88/plugins/LinearBatteryPlugin.cc?at=default)\r\n\r\n[https://bitbucket.org/osrf/gazebo/src/42d7d20dbf5075936965afaef40c8e3d08124b88/plugins/LinearBatteryConsumerPlugin.hh?at=default&fileviewer=file-view-default](https://bitbucket.org/osrf/gazebo/src/42d7d20dbf5075936965afaef40c8e3d08124b88/plugins/LinearBatteryConsumerPlugin.hh?at=default&fileviewer=file-view-default)\r\n\r\n[https://bitbucket.org/osrf/gazebo/src/42d7d20dbf5075936965afaef40c8e3d08124b88/plugins/LinearBatteryConsumerPlugin.cc?at=default](https://bitbucket.org/osrf/gazebo/src/42d7d20dbf5075936965afaef40c8e3d08124b88/plugins/LinearBatteryConsumerPlugin.cc?at=default)\r\n\r\nIntegration tests are added for single link consuming single battery, multiple links consuming the same battery, single link consuming multiple batteries, multiple links consuming multiple batteries, and links of the same name under different models consuming different batteries.\r\n\r\n## Testing\r\n\r\n```\r\ncd ign-gazebo/examples/worlds\r\nign-gazebo -f linear_battery_demo.sdf -v 4 -r\r\n```\r\n\r\nThis file has two `<link>`s consuming the same battery. \r\n\r\nTwo batteries are currently considered the same if their `<link><battery name=\"foo\"><voltage>12.0</voltage></battery></link>` tags in the SDF have the same name and same initial voltage \\(checked by `common::Battery::operator==()` \\).\r\n\r\nAt component creation time of `component::Battery`, whose `Data()` is a `common::BatteryPtr` , `SdfEntityCreator.cc` checks that if two links are to consume the same battery, instead of creating a new `common::Battery`, it points to the existing `common::BatteryPtr` in an existing `components::Battery`. A new `Entity` and a new `Component` will still be created, just the `common::BatteryPtr` is the same, so that it can have multiple consumers and drain accordingly.\r\n\r\nMore SDF files for testing are in `test/worlds`, for comparing drainage between single and multiple links/batteries.\r\n\r\nThere's some debug printouts right now to see the voltage and number of consumers \\( `PowerLoads().size()` \\) - these are printed in the plugin and will be removed, but for now, there's no other way of telling how much is left in the battery.", "title": "[Acropolis] Port battery plugin from Gazebo classic", "destination": {"commit": {"hash": "ce17434d4ff5", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/ce17434d4ff5.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/ce17434d4ff5"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "ign-gazebo1"}}, "reason": "", "source": {"commit": {"hash": "706e560a8317", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/commit/706e560a8317.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/commits/706e560a8317"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "branch": {"name": "battery_plugin"}}, "state": "OPEN", "author": {"display_name": "Mabel Zhang", "uuid": "{4b0e38fb-bf50-45c0-a496-61147518b2bf}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D"}, "html": {"href": "https://bitbucket.org/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:ceb5942c-6843-408c-8550-3ce4899d299b/4d48e5ea-cf28-4fa7-9715-8fc9e315d831/128"}}, "nickname": "mabelmzhang", "type": "user", "account_id": "557058:ceb5942c-6843-408c-8550-3ce4899d299b"}, "date": "2019-03-23T06:07:57.766527+00:00"}, "pull_request": {"type": "pullrequest", "id": 234, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/234.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/234"}}, "title": "[Acropolis] Port battery plugin from Gazebo classic"}}]}