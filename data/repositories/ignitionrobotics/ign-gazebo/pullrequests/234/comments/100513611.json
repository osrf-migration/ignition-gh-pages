{"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/234/comments/100513611.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/234/_/diff#comment-100513611"}}, "parent": {"id": 100381304, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/234/comments/100381304.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/234/_/diff#comment-100381304"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 234, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/234.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/234"}}, "title": "[Acropolis] Port battery plugin from Gazebo classic"}, "content": {"raw": "I'm not sure the `q` computation as it is now is correct... The numbers look weird. It's always nearly 0, even though it's initialized to 1.1665 by `<initial_charge>` in `linear_battery_demo.sdf`. I didn't change the equation. The only difference there could be from classic Gazebo is `dt`, which I believe should be in seconds, because they then divide by 3600 to convert to hours in the computation of `q`.\n\n`q / c` is also almost nearly 0 \\(e.g. -0.00133 when the SOC as computed currently is 0.86698\\). The SOC numbers at least do decrease from 1 to 0 gradually.", "markup": "markdown", "html": "<p>I'm not sure the <code>q</code> computation as it is now is correct... The numbers look weird. It's always nearly 0, even though it's initialized to 1.1665 by <code>&lt;initial_charge&gt;</code> in <code>linear_battery_demo.sdf</code>. I didn't change the equation. The only difference there could be from classic Gazebo is <code>dt</code>, which I believe should be in seconds, because they then divide by 3600 to convert to hours in the computation of <code>q</code>.</p>\n<p><code>q / c</code> is also almost nearly 0 (e.g. -0.00133 when the SOC as computed currently is 0.86698). The SOC numbers at least do decrease from 1 to 0 gradually.</p>", "type": "rendered"}, "created_on": "2019-04-30T18:37:44.631177+00:00", "user": {"display_name": "Mabel Zhang", "uuid": "{4b0e38fb-bf50-45c0-a496-61147518b2bf}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D"}, "html": {"href": "https://bitbucket.org/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:ceb5942c-6843-408c-8550-3ce4899d299b/4d48e5ea-cf28-4fa7-9715-8fc9e315d831/128"}}, "nickname": "mabelmzhang", "type": "user", "account_id": "557058:ceb5942c-6843-408c-8550-3ce4899d299b"}, "updated_on": "2019-04-30T18:38:18.791405+00:00", "type": "pullrequest_comment", "id": 100513611}