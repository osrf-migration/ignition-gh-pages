{"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/234/comments/99545892.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/234/_/diff#comment-99545892"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 234, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/pullrequests/234.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/pull-requests/234"}}, "title": "[Acropolis] Port battery plugin from Gazebo classic"}, "content": {"raw": "Simplifications from group discussion have been implemented in the latest commit.\n\n* 1 battery per Model \\(as opposed to per Link, because it is unclear in the case of a joint having multiple child links, if the battery runs out for one link but not another, it is unclear how to disable the joint such that it turns off one link without turning off the other\\)\n* `components::BatterySoC` added, maintains a `double`. Currently this is just the voltage. In the future it can be [capacity computed from the voltage](https://batteryuniversity.com/learn/article/how_to_measure_state_of_charge).\n* Physics system checks battery state. When battery drains \\(voltage < 0 currently\\), turn off all joints of that Model \\(set force to 0. Currently also set velocity to 0 because diff\\_drive does not use JointForceCmd yet, otherwise vehicle continues gliding.\\)\n* Removed `<battery>` tag from anywhere in SDF \\([this PR in sdformat](https://bitbucket.org/osrf/sdformat/pull-requests/513/add-battery-tag-under-link/diff) can be scrapped\\). Battery only specified in `<plugin>` under `<model>`\n\n", "markup": "markdown", "html": "<p>Simplifications from group discussion have been implemented in the latest commit.</p>\n<ul>\n<li>1 battery per Model (as opposed to per Link, because it is unclear in the case of a joint having multiple child links, if the battery runs out for one link but not another, it is unclear how to disable the joint such that it turns off one link without turning off the other)</li>\n<li><code>components::BatterySoC</code> added, maintains a <code>double</code>. Currently this is just the voltage. In the future it can be <a data-is-external-link=\"true\" href=\"https://batteryuniversity.com/learn/article/how_to_measure_state_of_charge\" rel=\"nofollow\">capacity computed from the voltage</a>.</li>\n<li>Physics system checks battery state. When battery drains (voltage &lt; 0 currently), turn off all joints of that Model (set force to 0. Currently also set velocity to 0 because diff_drive does not use JointForceCmd yet, otherwise vehicle continues gliding.)</li>\n<li>Removed <code>&lt;battery&gt;</code> tag from anywhere in SDF (<a data-is-external-link=\"true\" href=\"https://bitbucket.org/osrf/sdformat/pull-requests/513/add-battery-tag-under-link/diff\" rel=\"nofollow\">this PR in sdformat</a> can be scrapped). Battery only specified in <code>&lt;plugin&gt;</code> under <code>&lt;model&gt;</code></li>\n</ul>", "type": "rendered"}, "created_on": "2019-04-22T18:05:49.715374+00:00", "user": {"display_name": "Mabel Zhang", "uuid": "{4b0e38fb-bf50-45c0-a496-61147518b2bf}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D"}, "html": {"href": "https://bitbucket.org/%7B4b0e38fb-bf50-45c0-a496-61147518b2bf%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:ceb5942c-6843-408c-8550-3ce4899d299b/4d48e5ea-cf28-4fa7-9715-8fc9e315d831/128"}}, "nickname": "mabelmzhang", "type": "user", "account_id": "557058:ceb5942c-6843-408c-8550-3ce4899d299b"}, "updated_on": "2019-04-22T21:29:19.101254+00:00", "type": "pullrequest_comment", "id": 99545892}