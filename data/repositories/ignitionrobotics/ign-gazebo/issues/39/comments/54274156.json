{"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/issues/39/comments/54274156.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/issues/39#comment-54274156"}}, "issue": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/issues/39.json"}}, "type": "issue", "id": 39, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "title": "Load model during runtime: how to run model plugins?"}, "content": {"raw": "I found that due to a problem in the SDF generation from C\\+\\+ code, the plugin SDF element was not correctly inserted in the DOM of the object I was sending.\n\nThe responsible of processing the `sdf::Model*` object and creating its entities and components is [SdfEntityCreator.hh](#!/ignitionrobotics/ign-gazebo/src/default/include/ignition/gazebo/SdfEntityCreator.hh), which has the support of loading model plugins. Therefore, this issue can be closed.\n\nWhat\u2019s still missing, instead, is the plugin unloading when the model is removed from the world. The object exposing the `gazebo::System` which loaded from the plugin is deleted only when the `ignition::gazebo::Server` is destroyed in the end of the simulation. It might create an effect similar to a memory leak if the process of adding and removing models is repeated hundreds of times. Instead, from what I know, entities should be cached.\n\n\u200c\n\n\u200c", "markup": "markdown", "html": "<p>I found that due to a problem in the SDF generation from C++ code, the plugin SDF element was not correctly inserted in the DOM of the object I was sending.</p>\n<p>The responsible of processing the <code>sdf::Model*</code> object and creating its entities and components is <a data-is-external-link=\"true\" href=\"#!/ignitionrobotics/ign-gazebo/src/default/include/ignition/gazebo/SdfEntityCreator.hh\" rel=\"nofollow\">SdfEntityCreator.hh</a>, which has the support of loading model plugins. Therefore, this issue can be closed.</p>\n<p>What\u2019s still missing, instead, is the plugin unloading when the model is removed from the world. The object exposing the <code>gazebo::System</code> which loaded from the plugin is deleted only when the <code>ignition::gazebo::Server</code> is destroyed in the end of the simulation. It might create an effect similar to a memory leak if the process of adding and removing models is repeated hundreds of times. Instead, from what I know, entities should be cached.</p>\n<p>\u200c</p>\n<p>\u200c</p>", "type": "rendered"}, "created_on": "2019-10-09T12:56:06.122701+00:00", "user": {"display_name": "Diego Ferigo", "uuid": "{994b27a5-7d6d-42b2-8aa7-2ea82fbe7bf6}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B994b27a5-7d6d-42b2-8aa7-2ea82fbe7bf6%7D"}, "html": {"href": "https://bitbucket.org/%7B994b27a5-7d6d-42b2-8aa7-2ea82fbe7bf6%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:054df869-5cda-48f2-8b4e-81a61c133346/130cd3bf-aa0a-4355-bec2-c90f195acc4c/128"}}, "nickname": "dgferigo", "type": "user", "account_id": "557058:054df869-5cda-48f2-8b4e-81a61c133346"}, "updated_on": "2019-10-09T12:57:08.418488+00:00", "type": "issue_comment", "id": 54274156}