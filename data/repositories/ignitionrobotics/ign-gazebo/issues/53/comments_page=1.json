{"pagelen": 100, "values": [{"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/issues/53/comments/56674888.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/issues/53#comment-56674888"}}, "issue": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/issues/53.json"}}, "type": "issue", "id": 53, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "title": "How to manually set link states"}, "content": {"raw": "Waiting a reply from the maintainers of the simulator, I can tell you that as far as I know setting the state of the links \\(position, velocity, \u2026\\) is not possible.\n\nWhat\u2019s more common is, instead, setting the state of the joints. You can reset the initial joint position and velocity of the joints with the new components introduced in [this PR](#!/ignitionrobotics/ign-gazebo/pull-requests/437/jointpositionreset-and-jointvelocityreset), and then actuating it either applying a raw joint force through the `JointForceCmd` component or using a PID controller.\n\nIn more complex robots, sometimes is not straightforward calculating the joint configuration corresponding of the desired link position. If this is your use case, you could calculate the joint configuration by solving an inverse kinematics problem. Note that not all the IK libraries allow the definition of link orientations, but just the position and orientation of a single link \\(typically the end effector\\).", "markup": "markdown", "html": "<p>Waiting a reply from the maintainers of the simulator, I can tell you that as far as I know setting the state of the links (position, velocity, \u2026) is not possible.</p>\n<p>What\u2019s more common is, instead, setting the state of the joints. You can reset the initial joint position and velocity of the joints with the new components introduced in <a data-is-external-link=\"true\" href=\"#!/ignitionrobotics/ign-gazebo/pull-requests/437/jointpositionreset-and-jointvelocityreset\" rel=\"nofollow\">this PR</a>, and then actuating it either applying a raw joint force through the <code>JointForceCmd</code> component or using a PID controller.</p>\n<p>In more complex robots, sometimes is not straightforward calculating the joint configuration corresponding of the desired link position. If this is your use case, you could calculate the joint configuration by solving an inverse kinematics problem. Note that not all the IK libraries allow the definition of link orientations, but just the position and orientation of a single link (typically the end effector).</p>", "type": "rendered"}, "created_on": "2020-03-26T12:13:00.683670+00:00", "user": {"display_name": "Diego Ferigo", "uuid": "{994b27a5-7d6d-42b2-8aa7-2ea82fbe7bf6}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B994b27a5-7d6d-42b2-8aa7-2ea82fbe7bf6%7D"}, "html": {"href": "https://bitbucket.org/%7B994b27a5-7d6d-42b2-8aa7-2ea82fbe7bf6%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:054df869-5cda-48f2-8b4e-81a61c133346/130cd3bf-aa0a-4355-bec2-c90f195acc4c/128"}}, "nickname": "dgferigo", "type": "user", "account_id": "557058:054df869-5cda-48f2-8b4e-81a61c133346"}, "updated_on": "2020-03-26T12:15:05.700624+00:00", "type": "issue_comment", "id": 56674888}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/issues/53/comments/56679118.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/issues/53#comment-56679118"}}, "issue": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/issues/53.json"}}, "type": "issue", "id": 53, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "title": "How to manually set link states"}, "content": {"raw": "Hi @{557058:054df869-5cda-48f2-8b4e-81a61c133346} , thanks for the reply. Appreciate it!\n\nI noticed that in one of an earlier [PR](#!/ignitionrobotics/ign-gazebo/pull-requests/556/update-physics-state-even-when-paused-not/diff) you mentioned that using the `WorldPoseCmd` component to set a new model pose. If I understand correctly, this is only able to set pose for a model, not for link/joint. Can you tell me a little more on how to use `WorldPoseCmd` to set the pose for a model?\n\nThanks.", "markup": "markdown", "html": "<p>Hi <span class=\"ap-mention\" data-atlassian-id=\"557058:054df869-5cda-48f2-8b4e-81a61c133346\">@Diego Ferigo</span> , thanks for the reply. Appreciate it!</p>\n<p>I noticed that in one of an earlier <a data-is-external-link=\"true\" href=\"#!/ignitionrobotics/ign-gazebo/pull-requests/556/update-physics-state-even-when-paused-not/diff\" rel=\"nofollow\">PR</a> you mentioned that using the <code>WorldPoseCmd</code> component to set a new model pose. If I understand correctly, this is only able to set pose for a model, not for link/joint. Can you tell me a little more on how to use <code>WorldPoseCmd</code> to set the pose for a model?</p>\n<p>Thanks.</p>", "type": "rendered"}, "created_on": "2020-03-26T17:29:45.287907+00:00", "user": {"display_name": "waytry", "uuid": "{fa936e07-3ee7-4baf-af48-c270f92e27c1}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bfa936e07-3ee7-4baf-af48-c270f92e27c1%7D"}, "html": {"href": "https://bitbucket.org/%7Bfa936e07-3ee7-4baf-af48-c270f92e27c1%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/2c0f646484ce36365398eb45f86bca37d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsW-2.png"}}, "nickname": "waytry", "type": "user", "account_id": "5e6fbd9afad9000c325cf76b"}, "updated_on": null, "type": "issue_comment", "id": 56679118}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/issues/53/comments/56683982.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/issues/53#comment-56683982"}}, "issue": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/issues/53.json"}}, "type": "issue", "id": 53, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "title": "How to manually set link states"}, "content": {"raw": "Diego\u2019s reply is completely correct: link poses and link velocities cannot generally be set directly, because those properties are constrained by joints. If you were able to set them directly, there\u2019s a good chance that the system would be put into an invalid state, and your simulation might \u201cexplode\u201d \\(historically this has been a leading cause of simulation bugs among Gazebo users\\). Because of this it\u2019s best to set joint states directly, since arbitrary joint state values aren\u2019t as likely to violate simulation constraints.\n\nI think the [JointVelocityCmd](#!/ignitionrobotics/ign-gazebo/src/default/include/ignition/gazebo/components/JointVelocityCmd.hh) component should be able to help with setting the joint velocities. However, that gets treated as a command rather than setting the joint state directly, so something like a `ResetJointVelocity` component would be better, if such a thing existed.\n\nIt doesn\u2019t look like there\u2019s a component for setting joint positions directly. These are features that could \\(and should\\) be added to ignition-gazebo. I would recommend the adding the following components to ignition-gazebo:\n\n* `ResetJointPosition[s]`: Use this to directly set the joint position state, with no regard for physical constraints\n* `ResetJointVelocit[y|ies]`: Use this directly set the joint velocity state, with no regard for physical constraints\n\nMaybe there\u2019s a better word that could be used besides `Reset`, but I don\u2019t want to use `Cmd` because `Cmd` implies that it is acceptable to use as controller input into a live simulation, which is very much not the case for these features. I also don\u2019t want to use `Set` because I think that\u2019s too easily interpreted as a feature that can be used casually without significant side-effects. I hope that `Reset` can express the sense that using the component will break the flow of the simulation and create a physical discontinuity. But if anyone can think of an alternative word that expresses that better, please do share.", "markup": "markdown", "html": "<p>Diego\u2019s reply is completely correct: link poses and link velocities cannot generally be set directly, because those properties are constrained by joints. If you were able to set them directly, there\u2019s a good chance that the system would be put into an invalid state, and your simulation might \u201cexplode\u201d (historically this has been a leading cause of simulation bugs among Gazebo users). Because of this it\u2019s best to set joint states directly, since arbitrary joint state values aren\u2019t as likely to violate simulation constraints.</p>\n<p>I think the <a data-is-external-link=\"true\" href=\"#!/ignitionrobotics/ign-gazebo/src/default/include/ignition/gazebo/components/JointVelocityCmd.hh\" rel=\"nofollow\">JointVelocityCmd</a> component should be able to help with setting the joint velocities. However, that gets treated as a command rather than setting the joint state directly, so something like a <code>ResetJointVelocity</code> component would be better, if such a thing existed.</p>\n<p>It doesn\u2019t look like there\u2019s a component for setting joint positions directly. These are features that could (and should) be added to ignition-gazebo. I would recommend the adding the following components to ignition-gazebo:</p>\n<ul>\n<li><code>ResetJointPosition[s]</code>: Use this to directly set the joint position state, with no regard for physical constraints</li>\n<li><code>ResetJointVelocit[y|ies]</code>: Use this directly set the joint velocity state, with no regard for physical constraints</li>\n</ul>\n<p>Maybe there\u2019s a better word that could be used besides <code>Reset</code>, but I don\u2019t want to use <code>Cmd</code> because <code>Cmd</code> implies that it is acceptable to use as controller input into a live simulation, which is very much not the case for these features. I also don\u2019t want to use <code>Set</code> because I think that\u2019s too easily interpreted as a feature that can be used casually without significant side-effects. I hope that <code>Reset</code> can express the sense that using the component will break the flow of the simulation and create a physical discontinuity. But if anyone can think of an alternative word that expresses that better, please do share.</p>", "type": "rendered"}, "created_on": "2020-03-27T05:18:25.071445+00:00", "user": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "updated_on": "2020-03-27T05:19:24.002269+00:00", "type": "issue_comment", "id": 56683982}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/issues/53/comments/56851713.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/issues/53#comment-56851713"}}, "issue": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/issues/53.json"}}, "type": "issue", "id": 53, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "title": "How to manually set link states"}, "content": {"raw": "> so something like a `ResetJointVelocity` component would be better, if such a thing existed\n\nI\u2019m not sure if I got your point correctly, `Reset*` components have been added in [ignitionrobotics/ign-gazebo#437](#!/ignitionrobotics/ign-gazebo/pull-requests/437/jointpositionreset-and-jointvelocityreset/diff).", "markup": "markdown", "html": "<blockquote>\n<p>so something like a <code>ResetJointVelocity</code> component would be better, if such a thing existed</p>\n</blockquote>\n<p>I\u2019m not sure if I got your point correctly, <code>Reset*</code> components have been added in <a data-is-external-link=\"true\" href=\"#!/ignitionrobotics/ign-gazebo/pull-requests/437/jointpositionreset-and-jointvelocityreset/diff\" rel=\"nofollow\">ignitionrobotics/ign-gazebo#437</a>.</p>", "type": "rendered"}, "created_on": "2020-04-08T06:53:16.365240+00:00", "user": {"display_name": "Diego Ferigo", "uuid": "{994b27a5-7d6d-42b2-8aa7-2ea82fbe7bf6}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B994b27a5-7d6d-42b2-8aa7-2ea82fbe7bf6%7D"}, "html": {"href": "https://bitbucket.org/%7B994b27a5-7d6d-42b2-8aa7-2ea82fbe7bf6%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:054df869-5cda-48f2-8b4e-81a61c133346/130cd3bf-aa0a-4355-bec2-c90f195acc4c/128"}}, "nickname": "dgferigo", "type": "user", "account_id": "557058:054df869-5cda-48f2-8b4e-81a61c133346"}, "updated_on": null, "type": "issue_comment", "id": 56851713}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/issues/53/comments/56867946.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/issues/53#comment-56867946"}}, "issue": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/issues/53.json"}}, "type": "issue", "id": 53, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "title": "How to manually set link states"}, "content": {"raw": "Oh wow, that\u2019s literally exactly what I had in mind. I didn\u2019t realize that already existed, because I was looking at the `default` branch of `ignition-gazebo`, and it seems those changes haven\u2019t been merged to there yet.\n\nThanks for already contributing that!", "markup": "markdown", "html": "<p>Oh wow, that\u2019s literally exactly what I had in mind. I didn\u2019t realize that already existed, because I was looking at the <code>default</code> branch of <code>ignition-gazebo</code>, and it seems those changes haven\u2019t been merged to there yet.</p>\n<p>Thanks for already contributing that!</p>", "type": "rendered"}, "created_on": "2020-04-09T04:14:52.468500+00:00", "user": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "updated_on": null, "type": "issue_comment", "id": 56867946}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/issues/53/comments/56867963.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/issues/53#comment-56867963"}}, "issue": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/issues/53.json"}}, "type": "issue", "id": 53, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "title": "How to manually set link states"}, "content": {"raw": "But now I realize you linked to those new features in your original comment. So your first comment was perfect, and I had no need to add anything to it :thumbsup:", "markup": "markdown", "html": "<p>But now I realize you linked to those new features in your original comment. So your first comment was perfect, and I had no need to add anything to it <img class=\"emoji\" src=\"data/pf-emoji-service--cdn.us-east-1.prod.public.atl-paas.net/standard/551c9814-1d37-4573-819d-afab3afeaf32/48x48/1f44d.png\" alt=\"\ud83d\udc4d\" title=\":thumbsup:\" data-emoji-short-name=\":thumbsup:\" /></p>", "type": "rendered"}, "created_on": "2020-04-09T04:17:20.613811+00:00", "user": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "updated_on": "2020-04-09T04:17:40.815022+00:00", "type": "issue_comment", "id": 56867963}], "page": 1, "size": 6}