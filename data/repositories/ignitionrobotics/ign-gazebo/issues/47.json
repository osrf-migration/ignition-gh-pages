{"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "links": {"attachments": {"href": "data/repositories/ignitionrobotics/ign-gazebo/issues/47/attachments_page=1.json"}, "self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/issues/47.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-gazebo/issues/47/watch"}, "comments": {"href": "data/repositories/ignitionrobotics/ign-gazebo/issues/47/comments_page=1.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/issues/47/possible-log-playback-memory-leak"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-gazebo/issues/47/vote"}}, "reporter": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "title": "Possible log playback memory leak", "component": null, "votes": 1, "watches": 2, "content": {"raw": "# Description\r\n\r\nLog playback consumes a lot of memory. It was observed that when playing back the attached `state.tlog` \\(2.7MB\\) recorded in `levels.sdf` world, memory usage grew consistently over time to roughly >300MB by the end of the playback \\(~46s sim time\\)\r\n\r\n# Steps to Reproduce\r\n\r\n1. Playback the attached `state.tlog` \\(or any other log file\\), e.g. `ign gazebo -v 4 -p [path_to_log_dir]`\r\n2. Hit Play on ign-gazebo gui\r\n3. Open `top` and observe memory usage\r\n\r\n**Expected behavior:**\r\n\r\nIt is expected that memory may grow as states get loaded but it should be at a slower pace. There should also be a cap on how much memory that can be consumed.\r\n\r\n**Actual behavior:**\r\n\r\nHigh memory usage \\( >300MB over 46s sim time\\)\r\n\r\n**Reproduces how often:**\r\n\r\nAll the time\r\n\r\n# Versions\r\n\r\nign-gazebo 2.0\r\n\r\n# Additional Information\r\n\r\nRelated [subt issue](https://bitbucket.org/osrf/subt/issues/318/ign-log-playback-memory-leak). It was reported that playback used up all 32GB of RAM", "markup": "markdown", "html": "<h1 id=\"markdown-header-description\">Description</h1>\n<p>Log playback consumes a lot of memory. It was observed that when playing back the attached <code>state.tlog</code> (2.7MB) recorded in <code>levels.sdf</code> world, memory usage grew consistently over time to roughly &gt;300MB by the end of the playback (~46s sim time)</p>\n<h1 id=\"markdown-header-steps-to-reproduce\">Steps to Reproduce</h1>\n<ol>\n<li>Playback the attached <code>state.tlog</code> (or any other log file), e.g. <code>ign gazebo -v 4 -p [path_to_log_dir]</code></li>\n<li>Hit Play on ign-gazebo gui</li>\n<li>Open <code>top</code> and observe memory usage</li>\n</ol>\n<p><strong>Expected behavior:</strong></p>\n<p>It is expected that memory may grow as states get loaded but it should be at a slower pace. There should also be a cap on how much memory that can be consumed.</p>\n<p><strong>Actual behavior:</strong></p>\n<p>High memory usage ( &gt;300MB over 46s sim time)</p>\n<p><strong>Reproduces how often:</strong></p>\n<p>All the time</p>\n<h1 id=\"markdown-header-versions\">Versions</h1>\n<p>ign-gazebo 2.0</p>\n<h1 id=\"markdown-header-additional-information\">Additional Information</h1>\n<p>Related <a data-is-external-link=\"true\" href=\"https://bitbucket.org/osrf/subt/issues/318/ign-log-playback-memory-leak\" rel=\"nofollow\">subt issue</a>. It was reported that playback used up all 32GB of RAM</p>", "type": "rendered"}, "assignee": {"display_name": "Michael Carroll", "uuid": "{17dbbc15-cbc0-42f0-a985-cde9061c78a0}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B17dbbc15-cbc0-42f0-a985-cde9061c78a0%7D"}, "html": {"href": "https://bitbucket.org/%7B17dbbc15-cbc0-42f0-a985-cde9061c78a0%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:65740f22-cc56-4418-9608-7e17d0ed47b7/2aa259f5-4de1-4f68-9156-eded72041d84/128"}}, "nickname": "Michael Carroll", "type": "user", "account_id": "557058:65740f22-cc56-4418-9608-7e17d0ed47b7"}, "state": "resolved", "version": null, "edited_on": null, "created_on": "2020-01-06T18:44:06.109247+00:00", "milestone": null, "updated_on": "2020-02-26T22:07:44.288148+00:00", "type": "issue", "id": 47}