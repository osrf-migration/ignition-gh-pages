{"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/issues/16/comments/51118071.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo/issues/16#comment-51118071"}}, "issue": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo/issues/16.json"}}, "type": "issue", "id": 16, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gazebo.json"}, "html": {"href": "#!/ignitionrobotics/ign-gazebo"}, "avatar": {"href": "data/bytebucket.org/ravatar/{f98d11fe-f287-4dfb-99c3-e2b76a13232e}ts=2082645"}}, "type": "repository", "name": "ign-gazebo", "full_name": "ignitionrobotics/ign-gazebo", "uuid": "{f98d11fe-f287-4dfb-99c3-e2b76a13232e}"}, "title": "ignition-gazebo major version is hard-coded in plugin filenames in sdf files"}, "content": {"raw": "One important detail here is that systems are not only shared libraries, but also cmake components.\n\nOne of the consequences is that their targets need to include the full project name for this to work: `ign_find_package(ignition-gazebo1 REQUIRED COMPONENTS contact-system)`. And I imagine there must be other consequences for packaging?\n\nSo I'm assuming that we shouldn't remove the `ign-gazebo` version from the component or the target names. **Please correct me if I'm wrong.**\n\nIn that case, we could either:\n\n* Add an option to `ign-cmake` to support a custom library name, something like:\n\n        ign_add_component(${component_name}\n            SOURCES ${component_sources}\n            CUSTOM_LIB_NAME ${PROJECT_NAME_NO_VERSION_LOWER}-${component_name}\n            GET_TARGET_NAME component_target\n            CXX_STANDARD 17)\n\n    In this case, the lib name would be different from the target name and **I'm not sure if this would be a good idea**.\n  \n* Create an unversioned symlink to the lib after the fact. I started working on this solution in f5bf535.\n\nLet me know what y'all think.", "markup": "markdown", "html": "<p>One important detail here is that systems are not only shared libraries, but also cmake components.</p>\n<p>One of the consequences is that their targets need to include the full project name for this to work: <code>ign_find_package(ignition-gazebo1 REQUIRED COMPONENTS contact-system)</code>. And I imagine there must be other consequences for packaging?</p>\n<p>So I'm assuming that we shouldn't remove the <code>ign-gazebo</code> version from the component or the target names. <strong>Please correct me if I'm wrong.</strong></p>\n<p>In that case, we could either:</p>\n<ul>\n<li>\n<p>Add an option to <code>ign-cmake</code> to support a custom library name, something like:</p>\n<div class=\"codehilite\"><pre><span></span>ign_add_component(<span class=\"cp\">${</span><span class=\"n\">component_name</span><span class=\"cp\">}</span>\n    SOURCES <span class=\"cp\">${</span><span class=\"n\">component_sources</span><span class=\"cp\">}</span>\n    CUSTOM_LIB_NAME <span class=\"cp\">${</span><span class=\"n\">PROJECT_NAME_NO_VERSION_LOWER</span><span class=\"cp\">}</span>-<span class=\"cp\">${</span><span class=\"n\">component_name</span><span class=\"cp\">}</span>\n    GET_TARGET_NAME component_target\n    CXX_STANDARD 17)\n</pre></div>\n\n\n<p>In this case, the lib name would be different from the target name and <strong>I'm not sure if this would be a good idea</strong>.</p>\n</li>\n<li>\n<p>Create an unversioned symlink to the lib after the fact. I started working on this solution in <a href=\"#!/ignitionrobotics/ign-gazebo/commits/f5bf535\" rel=\"nofollow\" class=\"ap-connect-link\">f5bf535</a>.</p>\n</li>\n</ul>\n<p>Let me know what y'all think.</p>", "type": "rendered"}, "created_on": "2019-03-13T02:06:00.003249+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": null, "type": "issue_comment", "id": 51118071}