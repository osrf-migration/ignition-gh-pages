{"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-math.json"}, "html": {"href": "#!/ignitionrobotics/ign-math"}, "avatar": {"href": "data/bytebucket.org/ravatar/{18503e50-08ea-4d88-ab99-110fde3c7256}ts=1533305"}}, "type": "repository", "name": "ign-math", "full_name": "ignitionrobotics/ign-math", "uuid": "{18503e50-08ea-4d88-ab99-110fde3c7256}"}, "links": {"attachments": {"href": "data/repositories/ignitionrobotics/ign-math/issues/49/attachments_page=1.json"}, "self": {"href": "data/repositories/ignitionrobotics/ign-math/issues/49.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-math/issues/49/watch"}, "comments": {"href": "data/repositories/ignitionrobotics/ign-math/issues/49/comments_page=1.json"}, "html": {"href": "#!/ignitionrobotics/ign-math/issues/49/long-double-and-arm"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-math/issues/49/vote"}}, "reporter": {"display_name": "Rich Mattes", "uuid": "{1ef6f3dd-b8db-412b-94e9-e430e7aafd23}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B1ef6f3dd-b8db-412b-94e9-e430e7aafd23%7D"}, "html": {"href": "https://bitbucket.org/%7B1ef6f3dd-b8db-412b-94e9-e430e7aafd23%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/d431baafeedf5d8921cb50a3c9902e16d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsRM-0.png"}}, "nickname": "richmattes", "type": "user", "account_id": "557058:a38935e3-9a08-40d9-917a-ff19973e58df"}, "title": "Long double and ARM", "component": null, "votes": 0, "watches": 1, "content": {"raw": "It looks like on ARMv7, the \"long double\" type is the same as the \"double\" type.  This means that the Szudzek pair function (Pair() and Unpair()) don't work as expected, and the unit tests for large numbers fail.  I'm seeing the tests in src/Helpers_TEST.cc:411 fail quite badly while building: see \"build.log\" at http://koji.fedoraproject.org/koji/taskinfo?taskID=14931350 (the log is quite big due to the number of tests that fail)\r\n\r\nAttached is a patch that adds an \\_\\_arm\\_\\_ check to the _MSC_VER check that downgrades the PairInput and PairOutput data types and blocks the large number unit tests.", "markup": "markdown", "html": "<p>It looks like on ARMv7, the \"long double\" type is the same as the \"double\" type.  This means that the Szudzek pair function (Pair() and Unpair()) don't work as expected, and the unit tests for large numbers fail.  I'm seeing the tests in src/Helpers_TEST.cc:411 fail quite badly while building: see \"build.log\" at <a href=\"http://koji.fedoraproject.org/koji/taskinfo?taskID=14931350\" rel=\"nofollow\" class=\"ap-connect-link\">http://koji.fedoraproject.org/koji/taskinfo?taskID=14931350</a> (the log is quite big due to the number of tests that fail)</p>\n<p>Attached is a patch that adds an __arm__ check to the _MSC_VER check that downgrades the PairInput and PairOutput data types and blocks the large number unit tests.</p>", "type": "rendered"}, "assignee": null, "state": "resolved", "version": null, "edited_on": null, "created_on": "2016-07-18T02:56:31.242519+00:00", "milestone": null, "updated_on": "2017-12-20T02:35:40.432013+00:00", "type": "issue", "id": 49}