{"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-math/pullrequests/58/comments/9268569.json"}, "html": {"href": "#!/ignitionrobotics/ign-math/pull-requests/58/_/diff#comment-9268569"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 58, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-math/pullrequests/58.json"}, "html": {"href": "#!/ignitionrobotics/ign-math/pull-requests/58"}}, "title": "Change equality helper to work with 387 fp unit"}, "content": {"raw": "I did some more digging.  Atlas gets around this particular issue by declaring the operands of the equality checks to be volatile when the x87 fpu is being used:\nhttp://atlas-computing.web.cern.ch/atlas-computing/links/buildDirectory/AtlasOffline/19.0.0/InstallArea/doc/CxxUtils/html/fpcompare_8h_source.html\n\nDeclaring a, b, and epsilon as volatile does fix the issue in this bug.  I can do something similar to what atlas does with preprocessor macros and update the PR.", "markup": "markdown", "html": "<p>I did some more digging.  Atlas gets around this particular issue by declaring the operands of the equality checks to be volatile when the x87 fpu is being used:\n<a href=\"http://atlas-computing.web.cern.ch/atlas-computing/links/buildDirectory/AtlasOffline/19.0.0/InstallArea/doc/CxxUtils/html/fpcompare_8h_source.html\" rel=\"nofollow\" class=\"ap-connect-link\">http://atlas-computing.web.cern.ch/atlas-computing/links/buildDirectory/AtlasOffline/19.0.0/InstallArea/doc/CxxUtils/html/fpcompare_8h_source.html</a></p>\n<p>Declaring a, b, and epsilon as volatile does fix the issue in this bug.  I can do something similar to what atlas does with preprocessor macros and update the PR.</p>", "type": "rendered"}, "created_on": "2015-08-21T02:33:24.649050+00:00", "user": {"display_name": "Rich Mattes", "uuid": "{1ef6f3dd-b8db-412b-94e9-e430e7aafd23}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B1ef6f3dd-b8db-412b-94e9-e430e7aafd23%7D"}, "html": {"href": "https://bitbucket.org/%7B1ef6f3dd-b8db-412b-94e9-e430e7aafd23%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/d431baafeedf5d8921cb50a3c9902e16d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsRM-0.png"}}, "nickname": "richmattes", "type": "user", "account_id": "557058:a38935e3-9a08-40d9-917a-ff19973e58df"}, "updated_on": "2015-08-21T02:33:24.726663+00:00", "type": "pullrequest_comment", "id": 9268569}