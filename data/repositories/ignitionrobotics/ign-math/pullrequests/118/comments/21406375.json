{"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-math/pullrequests/118/comments/21406375.json"}, "html": {"href": "#!/ignitionrobotics/ign-math/pull-requests/118/_/diff#comment-21406375"}}, "parent": {"id": 21404485, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-math/pullrequests/118/comments/21404485.json"}, "html": {"href": "#!/ignitionrobotics/ign-math/pull-requests/118/_/diff#comment-21404485"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 118, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-math/pullrequests/118.json"}, "html": {"href": "#!/ignitionrobotics/ign-math/pull-requests/118"}}, "title": "pass string literal to project() to make the project name parsable"}, "content": {"raw": "> While this patch changes the value of PROJECT_NAME it maintains all generated file names, locations and install targets. I compared an installed folder without and with the patch and they have no difference.\n\n> Can you please point out which exact thing is being broken by this patch?\n\nOn Windows (unless you are using Cygwin) the default installation path (`CMAKE_INSTALL_PREFIX`) before this patch was `C:\\Program Files\\ignition-math2` , while after this patch is `C:\\Program Files\\ignition-math`. See [2] for the source on this behavior. \n\nThis means that before the `ignition-math2-config.cmake` used to be installed at:\n~~~\nC:\\Program Files\\ignition-math2\\CMake\\ignition-math2-config.cmake\n~~~\nwhile now it is installed at:\n~~~\nC:\\Program Files\\ignition-math\\CMake\\ignition-math2-config.cmake\n~~~\n\n`find_package(ignition-math2)` finds automatically the  `ignition-math2-config.cmake` in the first case, while it fails in the second case, due to  how `find_package` works in Windows [1]. #!/ignitionrobotics/ign-math/pull-requests/119/check-if-find_package-ignition-math/diff should highlight the issue. \n\n> I don't think that embedding the major version into the name is the right way to do it. \n\nI totally agree. : ) \n\nI think it was done to easily enable side-by-side installation of different major versions of `ignition-math`.\n\n[1] : https://cmake.org/cmake/help/v3.6/command/find_package.html#command:find_package\n\n[2] : https://gitlab.kitware.com/cmake/cmake/blob/master/Source/cmLocalGenerator.cxx#L240\n", "markup": "markdown", "html": "<blockquote>\n<p>While this patch changes the value of PROJECT_NAME it maintains all generated file names, locations and install targets. I compared an installed folder without and with the patch and they have no difference.</p>\n<p>Can you please point out which exact thing is being broken by this patch?</p>\n</blockquote>\n<p>On Windows (unless you are using Cygwin) the default installation path (<code>CMAKE_INSTALL_PREFIX</code>) before this patch was <code>C:\\Program Files\\ignition-math2</code> , while after this patch is <code>C:\\Program Files\\ignition-math</code>. See [2] for the source on this behavior. </p>\n<p>This means that before the <code>ignition-math2-config.cmake</code> used to be installed at:</p>\n<div class=\"codehilite\"><pre><span></span>C:\\Program Files\\ignition-math2\\CMake\\ignition-math2-config.cmake\n</pre></div>\n\n\n<p>while now it is installed at:</p>\n<div class=\"codehilite\"><pre><span></span>C:\\Program Files\\ignition-math\\CMake\\ignition-math2-config.cmake\n</pre></div>\n\n\n<p><code>find_package(ignition-math2)</code> finds automatically the  <code>ignition-math2-config.cmake</code> in the first case, while it fails in the second case, due to  how <code>find_package</code> works in Windows [1]. <a href=\"#!/ignitionrobotics/ign-math/pull-requests/119/check-if-find_package-ignition-math/diff\" rel=\"nofollow\" class=\"ap-connect-link\">#!/ignitionrobotics/ign-math/pull-requests/119/check-if-find_package-ignition-math/diff</a> should highlight the issue. </p>\n<blockquote>\n<p>I don't think that embedding the major version into the name is the right way to do it. </p>\n</blockquote>\n<p>I totally agree. : ) </p>\n<p>I think it was done to easily enable side-by-side installation of different major versions of <code>ignition-math</code>.</p>\n<p>[1] : <a href=\"https://cmake.org/cmake/help/v3.6/command/find_package.html#command:find_package\" rel=\"nofollow\" class=\"ap-connect-link\">https://cmake.org/cmake/help/v3.6/command/find_package.html#command:find_package</a></p>\n<p>[2] : <a href=\"https://gitlab.kitware.com/cmake/cmake/blob/master/Source/cmLocalGenerator.cxx#L240\" rel=\"nofollow\" class=\"ap-connect-link\">https://gitlab.kitware.com/cmake/cmake/blob/master/Source/cmLocalGenerator.cxx#L240</a></p>", "type": "rendered"}, "created_on": "2016-07-23T09:27:17.761720+00:00", "user": {"display_name": "Silvio Traversaro", "uuid": "{34f404cb-5642-4f27-a032-e04c7143d776}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D"}, "html": {"href": "https://bitbucket.org/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6/578caaa1-056c-45a2-8bf9-bee94c3bebef/128"}}, "nickname": "traversaro", "type": "user", "account_id": "557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6"}, "updated_on": "2016-07-23T09:31:01.770762+00:00", "type": "pullrequest_comment", "id": 21406375}