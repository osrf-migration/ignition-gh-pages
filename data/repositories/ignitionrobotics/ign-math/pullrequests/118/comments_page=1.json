{"pagelen": 100, "values": [{"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-math/pullrequests/118/comments/21403133.json"}, "html": {"href": "#!/ignitionrobotics/ign-math/pull-requests/118/_/diff#comment-21403133"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 118, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-math/pullrequests/118.json"}, "html": {"href": "#!/ignitionrobotics/ign-math/pull-requests/118"}}, "title": "pass string literal to project() to make the project name parsable"}, "content": {"raw": "The change in the `PROJECT_NAME` reverted by this PR was introduced in #!/ignitionrobotics/ign-math/pull-requests/63/fix-logic-of-installation-of-cmake/diff explicitly to permit to find the library in the default installation directory automatically (as it happens in `*nix` systems), without the need of setting  `ignition-math2_DIR` or appending the install path to `CMAKE_PREFIX_PATH`.\n\nThis PR breaks this workflow. While I think that probably there were no Win developers relying on this workflow (that is anyway definitely convenient, at least for me), I miss the point why we have to be able to \"parse\" the `CMakeLists.txt` to get the `PROJECT_NAME` instead of accessing it as any other CMake variable.. perhaps is for using some tool that re-implements a CMake language parser? ", "markup": "markdown", "html": "<p>The change in the <code>PROJECT_NAME</code> reverted by this PR was introduced in <a href=\"#!/ignitionrobotics/ign-math/pull-requests/63/fix-logic-of-installation-of-cmake/diff\" rel=\"nofollow\" class=\"ap-connect-link\">#!/ignitionrobotics/ign-math/pull-requests/63/fix-logic-of-installation-of-cmake/diff</a> explicitly to permit to find the library in the default installation directory automatically (as it happens in <code>*nix</code> systems), without the need of setting  <code>ignition-math2_DIR</code> or appending the install path to <code>CMAKE_PREFIX_PATH</code>.</p>\n<p>This PR breaks this workflow. While I think that probably there were no Win developers relying on this workflow (that is anyway definitely convenient, at least for me), I miss the point why we have to be able to \"parse\" the <code>CMakeLists.txt</code> to get the <code>PROJECT_NAME</code> instead of accessing it as any other CMake variable.. perhaps is for using some tool that re-implements a CMake language parser? </p>", "type": "rendered"}, "created_on": "2016-07-22T22:28:59.245495+00:00", "user": {"display_name": "Silvio Traversaro", "uuid": "{34f404cb-5642-4f27-a032-e04c7143d776}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D"}, "html": {"href": "https://bitbucket.org/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6/578caaa1-056c-45a2-8bf9-bee94c3bebef/128"}}, "nickname": "traversaro", "type": "user", "account_id": "557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6"}, "updated_on": "2016-07-22T22:29:53.452781+00:00", "type": "pullrequest_comment", "id": 21403133}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-math/pullrequests/118/comments/21403721.json"}, "html": {"href": "#!/ignitionrobotics/ign-math/pull-requests/118/_/diff#comment-21403721"}}, "parent": {"id": 21403133, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-math/pullrequests/118/comments/21403133.json"}, "html": {"href": "#!/ignitionrobotics/ign-math/pull-requests/118/_/diff#comment-21403133"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 118, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-math/pullrequests/118.json"}, "html": {"href": "#!/ignitionrobotics/ign-math/pull-requests/118"}}, "title": "pass string literal to project() to make the project name parsable"}, "content": {"raw": "Hm...I forgot about that.\n\n@dirk-thomas ?", "markup": "markdown", "html": "<p>Hm...I forgot about that.</p>\n<p>@dirk-thomas ?</p>", "type": "rendered"}, "created_on": "2016-07-22T23:02:24.287361+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2016-07-22T23:02:24.296246+00:00", "type": "pullrequest_comment", "id": 21403721}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-math/pullrequests/118/comments/21404485.json"}, "html": {"href": "#!/ignitionrobotics/ign-math/pull-requests/118/_/diff#comment-21404485"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 118, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-math/pullrequests/118.json"}, "html": {"href": "#!/ignitionrobotics/ign-math/pull-requests/118"}}, "title": "pass string literal to project() to make the project name parsable"}, "content": {"raw": "While this patch changes the value of `PROJECT_NAME` it maintains all generated file names, locations and install targets. I compared an installed folder without and with the patch and they have no difference.\n\nCan you please point out which exact thing is being broken by this patch?\n\n(I don't think that embedding the major version into the name is the right way to do it. Instead you should use the following signature to find the package which is the way it is intended to be done in CMake: `find_package(<package> [major[.minor]]`. But that is a topic for a separate discussion.)", "markup": "markdown", "html": "<p>While this patch changes the value of <code>PROJECT_NAME</code> it maintains all generated file names, locations and install targets. I compared an installed folder without and with the patch and they have no difference.</p>\n<p>Can you please point out which exact thing is being broken by this patch?</p>\n<p>(I don't think that embedding the major version into the name is the right way to do it. Instead you should use the following signature to find the package which is the way it is intended to be done in CMake: <code>find_package(&lt;package&gt; [major[.minor]]</code>. But that is a topic for a separate discussion.)</p>", "type": "rendered"}, "created_on": "2016-07-23T00:07:31.208142+00:00", "user": {"display_name": "Dirk Thomas", "uuid": "{a8effe61-90f2-4949-89a8-9c6972071de7}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Ba8effe61-90f2-4949-89a8-9c6972071de7%7D"}, "html": {"href": "https://bitbucket.org/%7Ba8effe61-90f2-4949-89a8-9c6972071de7%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/2f77876936467715bd75258c967bcaa4d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsDT-2.png"}}, "nickname": "Dirk Thomas", "type": "user", "account_id": "557058:763d049c-c4c6-4e59-85a5-2d7a8fbbdd58"}, "updated_on": "2016-07-23T00:24:54.844500+00:00", "type": "pullrequest_comment", "id": 21404485}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-math/pullrequests/118/comments/21406375.json"}, "html": {"href": "#!/ignitionrobotics/ign-math/pull-requests/118/_/diff#comment-21406375"}}, "parent": {"id": 21404485, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-math/pullrequests/118/comments/21404485.json"}, "html": {"href": "#!/ignitionrobotics/ign-math/pull-requests/118/_/diff#comment-21404485"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 118, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-math/pullrequests/118.json"}, "html": {"href": "#!/ignitionrobotics/ign-math/pull-requests/118"}}, "title": "pass string literal to project() to make the project name parsable"}, "content": {"raw": "> While this patch changes the value of PROJECT_NAME it maintains all generated file names, locations and install targets. I compared an installed folder without and with the patch and they have no difference.\n\n> Can you please point out which exact thing is being broken by this patch?\n\nOn Windows (unless you are using Cygwin) the default installation path (`CMAKE_INSTALL_PREFIX`) before this patch was `C:\\Program Files\\ignition-math2` , while after this patch is `C:\\Program Files\\ignition-math`. See [2] for the source on this behavior. \n\nThis means that before the `ignition-math2-config.cmake` used to be installed at:\n~~~\nC:\\Program Files\\ignition-math2\\CMake\\ignition-math2-config.cmake\n~~~\nwhile now it is installed at:\n~~~\nC:\\Program Files\\ignition-math\\CMake\\ignition-math2-config.cmake\n~~~\n\n`find_package(ignition-math2)` finds automatically the  `ignition-math2-config.cmake` in the first case, while it fails in the second case, due to  how `find_package` works in Windows [1]. #!/ignitionrobotics/ign-math/pull-requests/119/check-if-find_package-ignition-math/diff should highlight the issue. \n\n> I don't think that embedding the major version into the name is the right way to do it. \n\nI totally agree. : ) \n\nI think it was done to easily enable side-by-side installation of different major versions of `ignition-math`.\n\n[1] : https://cmake.org/cmake/help/v3.6/command/find_package.html#command:find_package\n\n[2] : https://gitlab.kitware.com/cmake/cmake/blob/master/Source/cmLocalGenerator.cxx#L240\n", "markup": "markdown", "html": "<blockquote>\n<p>While this patch changes the value of PROJECT_NAME it maintains all generated file names, locations and install targets. I compared an installed folder without and with the patch and they have no difference.</p>\n<p>Can you please point out which exact thing is being broken by this patch?</p>\n</blockquote>\n<p>On Windows (unless you are using Cygwin) the default installation path (<code>CMAKE_INSTALL_PREFIX</code>) before this patch was <code>C:\\Program Files\\ignition-math2</code> , while after this patch is <code>C:\\Program Files\\ignition-math</code>. See [2] for the source on this behavior. </p>\n<p>This means that before the <code>ignition-math2-config.cmake</code> used to be installed at:</p>\n<div class=\"codehilite\"><pre><span></span>C:\\Program Files\\ignition-math2\\CMake\\ignition-math2-config.cmake\n</pre></div>\n\n\n<p>while now it is installed at:</p>\n<div class=\"codehilite\"><pre><span></span>C:\\Program Files\\ignition-math\\CMake\\ignition-math2-config.cmake\n</pre></div>\n\n\n<p><code>find_package(ignition-math2)</code> finds automatically the  <code>ignition-math2-config.cmake</code> in the first case, while it fails in the second case, due to  how <code>find_package</code> works in Windows [1]. <a href=\"#!/ignitionrobotics/ign-math/pull-requests/119/check-if-find_package-ignition-math/diff\" rel=\"nofollow\" class=\"ap-connect-link\">#!/ignitionrobotics/ign-math/pull-requests/119/check-if-find_package-ignition-math/diff</a> should highlight the issue. </p>\n<blockquote>\n<p>I don't think that embedding the major version into the name is the right way to do it. </p>\n</blockquote>\n<p>I totally agree. : ) </p>\n<p>I think it was done to easily enable side-by-side installation of different major versions of <code>ignition-math</code>.</p>\n<p>[1] : <a href=\"https://cmake.org/cmake/help/v3.6/command/find_package.html#command:find_package\" rel=\"nofollow\" class=\"ap-connect-link\">https://cmake.org/cmake/help/v3.6/command/find_package.html#command:find_package</a></p>\n<p>[2] : <a href=\"https://gitlab.kitware.com/cmake/cmake/blob/master/Source/cmLocalGenerator.cxx#L240\" rel=\"nofollow\" class=\"ap-connect-link\">https://gitlab.kitware.com/cmake/cmake/blob/master/Source/cmLocalGenerator.cxx#L240</a></p>", "type": "rendered"}, "created_on": "2016-07-23T09:27:17.761720+00:00", "user": {"display_name": "Silvio Traversaro", "uuid": "{34f404cb-5642-4f27-a032-e04c7143d776}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D"}, "html": {"href": "https://bitbucket.org/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6/578caaa1-056c-45a2-8bf9-bee94c3bebef/128"}}, "nickname": "traversaro", "type": "user", "account_id": "557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6"}, "updated_on": "2016-07-23T09:31:01.770762+00:00", "type": "pullrequest_comment", "id": 21406375}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-math/pullrequests/118/comments/21406426.json"}, "html": {"href": "#!/ignitionrobotics/ign-math/pull-requests/118/_/diff#comment-21406426"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 118, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-math/pullrequests/118.json"}, "html": {"href": "#!/ignitionrobotics/ign-math/pull-requests/118"}}, "title": "pass string literal to project() to make the project name parsable"}, "content": {"raw": "For preserving both the `<package_name> == ${PROJECT_NAME}` and the \"use string literal for project()\" requirements (even if it is not clear to me which parser is imposing the string literal requirement, so I could say something wrong) an easy (but ugly) fix would be:\n\n~~~\nproject (ignition-math2)\nset (IGN_PROJECT_NAME \"math\")\nstring (SUBSTRING ${PROJECT_NAME} 13 -1 IGN_PROJECT_MAJOR_VERSION)\n~~~\n(and reverting all the `PROJECT_NAME_NO_VERSION` --> `PROJECT_NAME` changes).", "markup": "markdown", "html": "<p>For preserving both the <code>&lt;package_name&gt; == ${PROJECT_NAME}</code> and the \"use string literal for project()\" requirements (even if it is not clear to me which parser is imposing the string literal requirement, so I could say something wrong) an easy (but ugly) fix would be:</p>\n<div class=\"codehilite\"><pre><span></span>project (ignition-math2)\nset (IGN_PROJECT_NAME &quot;math&quot;)\nstring (SUBSTRING <span class=\"cp\">${</span><span class=\"n\">PROJECT_NAME</span><span class=\"cp\">}</span> 13 -1 IGN_PROJECT_MAJOR_VERSION)\n</pre></div>\n\n\n<p>(and reverting all the <code>PROJECT_NAME_NO_VERSION</code> --&gt; <code>PROJECT_NAME</code> changes).</p>", "type": "rendered"}, "created_on": "2016-07-23T09:41:58.809345+00:00", "user": {"display_name": "Silvio Traversaro", "uuid": "{34f404cb-5642-4f27-a032-e04c7143d776}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D"}, "html": {"href": "https://bitbucket.org/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6/578caaa1-056c-45a2-8bf9-bee94c3bebef/128"}}, "nickname": "traversaro", "type": "user", "account_id": "557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6"}, "updated_on": "2016-07-23T09:42:40.885414+00:00", "type": "pullrequest_comment", "id": 21406426}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-math/pullrequests/118/comments/21408407.json"}, "html": {"href": "#!/ignitionrobotics/ign-math/pull-requests/118/_/diff#comment-21408407"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 118, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-math/pullrequests/118.json"}, "html": {"href": "#!/ignitionrobotics/ign-math/pull-requests/118"}}, "title": "pass string literal to project() to make the project name parsable"}, "content": {"raw": "The goal to have a literal string as the project comes from the fact that this project provides no meta information at all. From an automation point of view neither the name of the project nor its dependencies are declared anywhere. A human can read the README and follow the instructions a program simply can't. And the minimal information to leverage externally configured information like the dependencies is the name of the project. If the project name is contained as a literal string of the project() call it can be easily extracted.", "markup": "markdown", "html": "<p>The goal to have a literal string as the project comes from the fact that this project provides no meta information at all. From an automation point of view neither the name of the project nor its dependencies are declared anywhere. A human can read the README and follow the instructions a program simply can't. And the minimal information to leverage externally configured information like the dependencies is the name of the project. If the project name is contained as a literal string of the project() call it can be easily extracted.</p>", "type": "rendered"}, "created_on": "2016-07-23T20:04:15.573045+00:00", "user": {"display_name": "Dirk Thomas", "uuid": "{a8effe61-90f2-4949-89a8-9c6972071de7}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Ba8effe61-90f2-4949-89a8-9c6972071de7%7D"}, "html": {"href": "https://bitbucket.org/%7Ba8effe61-90f2-4949-89a8-9c6972071de7%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/2f77876936467715bd75258c967bcaa4d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsDT-2.png"}}, "nickname": "Dirk Thomas", "type": "user", "account_id": "557058:763d049c-c4c6-4e59-85a5-2d7a8fbbdd58"}, "updated_on": "2016-07-23T20:04:15.578017+00:00", "type": "pullrequest_comment", "id": 21408407}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-math/pullrequests/118/comments/21408419.json"}, "html": {"href": "#!/ignitionrobotics/ign-math/pull-requests/118/_/diff#comment-21408419"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 118, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-math/pullrequests/118.json"}, "html": {"href": "#!/ignitionrobotics/ign-math/pull-requests/118"}}, "title": "pass string literal to project() to make the project name parsable"}, "content": {"raw": "From the many CMake projects I have seen appending the major version number seems uncommon to me. It might allow for some interesting use cases or make some use cases easier but nevertheless it is rather unexpected by users in my opinion.\n\nI think before we can move on with this ticket (and consider how to implement it with what pros and cons) the maintainers have to make a decision about the project name. Is it desired to embed the major version number into the name or not?", "markup": "markdown", "html": "<p>From the many CMake projects I have seen appending the major version number seems uncommon to me. It might allow for some interesting use cases or make some use cases easier but nevertheless it is rather unexpected by users in my opinion.</p>\n<p>I think before we can move on with this ticket (and consider how to implement it with what pros and cons) the maintainers have to make a decision about the project name. Is it desired to embed the major version number into the name or not?</p>", "type": "rendered"}, "created_on": "2016-07-23T20:07:38.483449+00:00", "user": {"display_name": "Dirk Thomas", "uuid": "{a8effe61-90f2-4949-89a8-9c6972071de7}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Ba8effe61-90f2-4949-89a8-9c6972071de7%7D"}, "html": {"href": "https://bitbucket.org/%7Ba8effe61-90f2-4949-89a8-9c6972071de7%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/2f77876936467715bd75258c967bcaa4d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsDT-2.png"}}, "nickname": "Dirk Thomas", "type": "user", "account_id": "557058:763d049c-c4c6-4e59-85a5-2d7a8fbbdd58"}, "updated_on": "2016-07-23T20:07:38.488602+00:00", "type": "pullrequest_comment", "id": 21408419}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-math/pullrequests/118/comments/21456318.json"}, "html": {"href": "#!/ignitionrobotics/ign-math/pull-requests/118/_/diff#comment-21456318"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 118, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-math/pullrequests/118.json"}, "html": {"href": "#!/ignitionrobotics/ign-math/pull-requests/118"}}, "title": "pass string literal to project() to make the project name parsable"}, "content": {"raw": "The important part in the CMake docs about the installation prefixes searched by [find_package()](https://cmake.org/cmake/help/v3.5/command/find_package.html) is the `*` after `<name>*`. So if two versions of a package `foo` install their CMake config and version files into `foo1` and `foo2` you can find_package them both using `find_package` and select the desired package based on the passed version (e.g. `find_package(foo 1)`). Imo that would be the \"right\" way to install this package.", "markup": "markdown", "html": "<p>The important part in the CMake docs about the installation prefixes searched by <a data-is-external-link=\"true\" href=\"https://cmake.org/cmake/help/v3.5/command/find_package.html\" rel=\"nofollow\">find_package()</a> is the <code>*</code> after <code>&lt;name&gt;*</code>. So if two versions of a package <code>foo</code> install their CMake config and version files into <code>foo1</code> and <code>foo2</code> you can find_package them both using <code>find_package</code> and select the desired package based on the passed version (e.g. <code>find_package(foo 1)</code>). Imo that would be the \"right\" way to install this package.</p>", "type": "rendered"}, "created_on": "2016-07-25T17:29:55.375664+00:00", "user": {"display_name": "Dirk Thomas", "uuid": "{a8effe61-90f2-4949-89a8-9c6972071de7}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Ba8effe61-90f2-4949-89a8-9c6972071de7%7D"}, "html": {"href": "https://bitbucket.org/%7Ba8effe61-90f2-4949-89a8-9c6972071de7%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/2f77876936467715bd75258c967bcaa4d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsDT-2.png"}}, "nickname": "Dirk Thomas", "type": "user", "account_id": "557058:763d049c-c4c6-4e59-85a5-2d7a8fbbdd58"}, "updated_on": "2016-07-25T17:29:55.381257+00:00", "type": "pullrequest_comment", "id": 21456318}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-math/pullrequests/118/comments/21586210.json"}, "html": {"href": "#!/ignitionrobotics/ign-math/pull-requests/118/_/diff#comment-21586210"}}, "parent": {"id": 21456318, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-math/pullrequests/118/comments/21456318.json"}, "html": {"href": "#!/ignitionrobotics/ign-math/pull-requests/118/_/diff#comment-21456318"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 118, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-math/pullrequests/118.json"}, "html": {"href": "#!/ignitionrobotics/ign-math/pull-requests/118"}}, "title": "pass string literal to project() to make the project name parsable"}, "content": {"raw": "Maybe @nkoenig and @\\_jrivero_ can chime in here? @traversaro has illustrated that this change breaks `find_package` on Windows ([broken appveyor build](https://ci.appveyor.com/project/scpeters/ign-math/build/1.0.614) from pull request #119)", "markup": "markdown", "html": "<p>Maybe @nkoenig and @_jrivero_ can chime in here? @traversaro has illustrated that this change breaks <code>find_package</code> on Windows (<a data-is-external-link=\"true\" href=\"https://ci.appveyor.com/project/scpeters/ign-math/build/1.0.614\" rel=\"nofollow\">broken appveyor build</a> from <a href=\"#!/ignitionrobotics/ign-math/pull-requests/119/check-if-find_package-ignition-math\" rel=\"nofollow\" class=\"ap-connect-link\">pull request #119</a>)</p>", "type": "rendered"}, "created_on": "2016-07-27T19:56:51.854059+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2016-07-27T19:56:51.862463+00:00", "type": "pullrequest_comment", "id": 21586210}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-math/pullrequests/118/comments/21697311.json"}, "html": {"href": "#!/ignitionrobotics/ign-math/pull-requests/118/_/diff#comment-21697311"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 118, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-math/pullrequests/118.json"}, "html": {"href": "#!/ignitionrobotics/ign-math/pull-requests/118"}}, "title": "pass string literal to project() to make the project name parsable"}, "content": {"raw": "Please correct any mistakes; cmake can sometimes confuse the hell out of me.\n\nThe problem is that `ignition-math2-config.cmake` is not installed in the correct directory path with this pull request, correct?\n\nCan this issue be resolved by fixing/altering the `CMAKE_CONFIG_INSTALL_DIR` variable in the main `CMakeLists.txt` file?\n\n", "markup": "markdown", "html": "<p>Please correct any mistakes; cmake can sometimes confuse the hell out of me.</p>\n<p>The problem is that <code>ignition-math2-config.cmake</code> is not installed in the correct directory path with this pull request, correct?</p>\n<p>Can this issue be resolved by fixing/altering the <code>CMAKE_CONFIG_INSTALL_DIR</code> variable in the main <code>CMakeLists.txt</code> file?</p>", "type": "rendered"}, "created_on": "2016-07-29T18:25:53.951909+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "updated_on": "2016-07-29T18:25:53.953963+00:00", "type": "pullrequest_comment", "id": 21697311}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-math/pullrequests/118/comments/21710955.json"}, "html": {"href": "#!/ignitionrobotics/ign-math/pull-requests/118/_/diff#comment-21710955"}}, "parent": {"id": 21697311, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-math/pullrequests/118/comments/21697311.json"}, "html": {"href": "#!/ignitionrobotics/ign-math/pull-requests/118/_/diff#comment-21697311"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 118, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-math/pullrequests/118.json"}, "html": {"href": "#!/ignitionrobotics/ign-math/pull-requests/118"}}, "title": "pass string literal to project() to make the project name parsable"}, "content": {"raw": "> The problem is that `ignition-math2-config.cmake` is not installed in the correct directory path with this pull request, correct?\n\nThe problem is that  `ignition-math2-config.cmake` is not installed in the correct directory path only when the default `CMAKE_INSTALL_PREFIX` is used. \nOn Windows  the default `CMAKE_INSTALL_PREFIX` is `C:\\Program Files\\${PROJECT_NAME}` , where `PROJECT_NAME` is the string passed to the `project` command [1][2]. \n\n`CMAKE_CONFIG_INSTALL_DIR` on Windows is `CMake`. \n\nThis PR changes the `PROJECT_NAME` from `ignition-math2` to `ignition-math`, and so the location of the installed `ignition-math2-config.cmake`\nchanges from:\n~~~\nC:\\Program Files\\ignition-math2\\CMake\\ignition-math2-config.cmake\n~~~\nto \n~~~\nC:\\Program Files\\ignition-math\\CMake\\ignition-math2-config.cmake\n~~~\n\nNote that as `CMAKE_CONFIG_INSTALL_DIR` defines only the `CMake` part of this path, so it can be used to fix the problem that the PROJECT_NAME is different from the PACKAGE_NAME used in `find_package` for this library.\n\n[1] : Note that this behavior is unfortunately bad documented : https://gitlab.kitware.com/cmake/cmake/issues/16211 \n\n[2] This is not always true, actually: the the `C:` drive letter can change, and also `Program Files` can be `Program Files (x86)` if the library is compiled as 32-bit on 64-bit. `Program Files` can also be localized.  ", "markup": "markdown", "html": "<blockquote>\n<p>The problem is that <code>ignition-math2-config.cmake</code> is not installed in the correct directory path with this pull request, correct?</p>\n</blockquote>\n<p>The problem is that  <code>ignition-math2-config.cmake</code> is not installed in the correct directory path only when the default <code>CMAKE_INSTALL_PREFIX</code> is used. \nOn Windows  the default <code>CMAKE_INSTALL_PREFIX</code> is <code>C:\\Program Files\\${PROJECT_NAME}</code> , where <code>PROJECT_NAME</code> is the string passed to the <code>project</code> command [1][2]. </p>\n<p><code>CMAKE_CONFIG_INSTALL_DIR</code> on Windows is <code>CMake</code>. </p>\n<p>This PR changes the <code>PROJECT_NAME</code> from <code>ignition-math2</code> to <code>ignition-math</code>, and so the location of the installed <code>ignition-math2-config.cmake</code>\nchanges from:</p>\n<div class=\"codehilite\"><pre><span></span>C:\\Program Files\\ignition-math2\\CMake\\ignition-math2-config.cmake\n</pre></div>\n\n\n<p>to </p>\n<div class=\"codehilite\"><pre><span></span>C:\\Program Files\\ignition-math\\CMake\\ignition-math2-config.cmake\n</pre></div>\n\n\n<p>Note that as <code>CMAKE_CONFIG_INSTALL_DIR</code> defines only the <code>CMake</code> part of this path, so it can be used to fix the problem that the PROJECT_NAME is different from the PACKAGE_NAME used in <code>find_package</code> for this library.</p>\n<p>[1] : Note that this behavior is unfortunately bad documented : <a href=\"https://gitlab.kitware.com/cmake/cmake/issues/16211\" rel=\"nofollow\" class=\"ap-connect-link\">https://gitlab.kitware.com/cmake/cmake/issues/16211</a> </p>\n<p>[2] This is not always true, actually: the the <code>C:</code> drive letter can change, and also <code>Program Files</code> can be <code>Program Files (x86)</code> if the library is compiled as 32-bit on 64-bit. <code>Program Files</code> can also be localized.  </p>", "type": "rendered"}, "created_on": "2016-07-30T16:57:23.489745+00:00", "user": {"display_name": "Silvio Traversaro", "uuid": "{34f404cb-5642-4f27-a032-e04c7143d776}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D"}, "html": {"href": "https://bitbucket.org/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6/578caaa1-056c-45a2-8bf9-bee94c3bebef/128"}}, "nickname": "traversaro", "type": "user", "account_id": "557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6"}, "updated_on": "2016-07-30T16:58:05.782894+00:00", "type": "pullrequest_comment", "id": 21710955}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-math/pullrequests/118/comments/21752063.json"}, "html": {"href": "#!/ignitionrobotics/ign-math/pull-requests/118/_/diff#comment-21752063"}}, "parent": {"id": 21710955, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-math/pullrequests/118/comments/21710955.json"}, "html": {"href": "#!/ignitionrobotics/ign-math/pull-requests/118/_/diff#comment-21710955"}}, "depth": 2}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 118, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-math/pullrequests/118.json"}, "html": {"href": "#!/ignitionrobotics/ign-math/pull-requests/118"}}, "title": "pass string literal to project() to make the project name parsable"}, "content": {"raw": "I don't think there is a way to distinguish if `CMAKE_INSTALL_PREFIX` was set to its default value or if the caller specified the value on the command line. So assuming that we want to support the literal project name without a version number I see two options for Windows:\n\n* document that the user should pass a version specific install prefix or\n* append the major version to the `CMAKE_INSTALL_PREFIX` if it points to the default location (with the chance that the user actually passed that value)", "markup": "markdown", "html": "<p>I don't think there is a way to distinguish if <code>CMAKE_INSTALL_PREFIX</code> was set to its default value or if the caller specified the value on the command line. So assuming that we want to support the literal project name without a version number I see two options for Windows:</p>\n<ul>\n<li>document that the user should pass a version specific install prefix or</li>\n<li>append the major version to the <code>CMAKE_INSTALL_PREFIX</code> if it points to the default location (with the chance that the user actually passed that value)</li>\n</ul>", "type": "rendered"}, "created_on": "2016-08-01T15:45:31.146814+00:00", "user": {"display_name": "Dirk Thomas", "uuid": "{a8effe61-90f2-4949-89a8-9c6972071de7}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Ba8effe61-90f2-4949-89a8-9c6972071de7%7D"}, "html": {"href": "https://bitbucket.org/%7Ba8effe61-90f2-4949-89a8-9c6972071de7%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/2f77876936467715bd75258c967bcaa4d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsDT-2.png"}}, "nickname": "Dirk Thomas", "type": "user", "account_id": "557058:763d049c-c4c6-4e59-85a5-2d7a8fbbdd58"}, "updated_on": "2016-08-01T15:45:37.157958+00:00", "type": "pullrequest_comment", "id": 21752063}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-math/pullrequests/118/comments/21768227.json"}, "html": {"href": "#!/ignitionrobotics/ign-math/pull-requests/118/_/diff#comment-21768227"}}, "parent": {"id": 21752063, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-math/pullrequests/118/comments/21752063.json"}, "html": {"href": "#!/ignitionrobotics/ign-math/pull-requests/118/_/diff#comment-21752063"}}, "depth": 3}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 118, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-math/pullrequests/118.json"}, "html": {"href": "#!/ignitionrobotics/ign-math/pull-requests/118"}}, "title": "pass string literal to project() to make the project name parsable"}, "content": {"raw": ">  document that the user should pass a version specific install prefix \n\nIf possible, I would avoid to do that. If a manual intervention in the process is necessary, then the much more standard setting of the `ignition-math2_DIR` or `CMAKE_PREFIX_PATH` environmental variable is much easier to explain to a user that \"You need to add a 2 in `CMAKE_INSTALL_PREFIX` between `ignition-math` and `\\CMake`. \n\n> append the major version to the `CMAKE_INSTALL_PREFIX` if it points to the default location (with the chance that the user actually passed that value)\n\nHow would you check if `CMAKE_INSTALL_PREFIX` points to the default location? The possible slightly variations such as `Program Files`/`Program Files (x86)` or due to localization make me fear that any check of this kind would be quite fragile. \n\nJust to understand, what is preventing 8s of passing `ignition-math2` as a string literal to `project(...)`, as suggested in #!/ignitionrobotics/ign-math/pull-requests/118/pass-string-literal-to-project-to-make-the/diff#comment-21406426 ? This seems to cover all the use cases, i.e. string literal passed to `project()` and `<package_name> == ${PROJECT_NAME}` for successful default installation in Windows.", "markup": "markdown", "html": "<blockquote>\n<p>document that the user should pass a version specific install prefix </p>\n</blockquote>\n<p>If possible, I would avoid to do that. If a manual intervention in the process is necessary, then the much more standard setting of the <code>ignition-math2_DIR</code> or <code>CMAKE_PREFIX_PATH</code> environmental variable is much easier to explain to a user that \"You need to add a 2 in <code>CMAKE_INSTALL_PREFIX</code> between <code>ignition-math</code> and <code>\\CMake</code>. </p>\n<blockquote>\n<p>append the major version to the <code>CMAKE_INSTALL_PREFIX</code> if it points to the default location (with the chance that the user actually passed that value)</p>\n</blockquote>\n<p>How would you check if <code>CMAKE_INSTALL_PREFIX</code> points to the default location? The possible slightly variations such as <code>Program Files</code>/<code>Program Files (x86)</code> or due to localization make me fear that any check of this kind would be quite fragile. </p>\n<p>Just to understand, what is preventing 8s of passing <code>ignition-math2</code> as a string literal to <code>project(...)</code>, as suggested in <a href=\"#!/ignitionrobotics/ign-math/pull-requests/118/pass-string-literal-to-project-to-make-the/diff#comment-21406426\" rel=\"nofollow\" class=\"ap-connect-link\">#!/ignitionrobotics/ign-math/pull-requests/118/pass-string-literal-to-project-to-make-the/diff#comment-21406426</a> ? This seems to cover all the use cases, i.e. string literal passed to <code>project()</code> and <code>&lt;package_name&gt; == ${PROJECT_NAME}</code> for successful default installation in Windows.</p>", "type": "rendered"}, "created_on": "2016-08-01T22:21:11.661692+00:00", "user": {"display_name": "Silvio Traversaro", "uuid": "{34f404cb-5642-4f27-a032-e04c7143d776}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D"}, "html": {"href": "https://bitbucket.org/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6/578caaa1-056c-45a2-8bf9-bee94c3bebef/128"}}, "nickname": "traversaro", "type": "user", "account_id": "557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6"}, "updated_on": "2016-08-01T22:21:29.898506+00:00", "type": "pullrequest_comment", "id": 21768227}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-math/pullrequests/118/comments/21768867.json"}, "html": {"href": "#!/ignitionrobotics/ign-math/pull-requests/118/_/diff#comment-21768867"}}, "parent": {"id": 21768227, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-math/pullrequests/118/comments/21768227.json"}, "html": {"href": "#!/ignitionrobotics/ign-math/pull-requests/118/_/diff#comment-21768227"}}, "depth": 4}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 118, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-math/pullrequests/118.json"}, "html": {"href": "#!/ignitionrobotics/ign-math/pull-requests/118"}}, "title": "pass string literal to project() to make the project name parsable"}, "content": {"raw": "Imo this is a hack and not the way its \"supposed\" to be done in CMake. But since it satisfies my newly brought up use case (using a literal string) and works better on Windows its okay with me. Should I provide a PR with these changes?", "markup": "markdown", "html": "<p>Imo this is a hack and not the way its \"supposed\" to be done in CMake. But since it satisfies my newly brought up use case (using a literal string) and works better on Windows its okay with me. Should I provide a PR with these changes?</p>", "type": "rendered"}, "created_on": "2016-08-01T22:46:06.345321+00:00", "user": {"display_name": "Dirk Thomas", "uuid": "{a8effe61-90f2-4949-89a8-9c6972071de7}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Ba8effe61-90f2-4949-89a8-9c6972071de7%7D"}, "html": {"href": "https://bitbucket.org/%7Ba8effe61-90f2-4949-89a8-9c6972071de7%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/2f77876936467715bd75258c967bcaa4d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsDT-2.png"}}, "nickname": "Dirk Thomas", "type": "user", "account_id": "557058:763d049c-c4c6-4e59-85a5-2d7a8fbbdd58"}, "updated_on": "2016-08-01T22:46:06.350832+00:00", "type": "pullrequest_comment", "id": 21768867}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-math/pullrequests/118/comments/21809215.json"}, "html": {"href": "#!/ignitionrobotics/ign-math/pull-requests/118/_/diff#comment-21809215"}}, "parent": {"id": 21768867, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-math/pullrequests/118/comments/21768867.json"}, "html": {"href": "#!/ignitionrobotics/ign-math/pull-requests/118/_/diff#comment-21768867"}}, "depth": 5}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 118, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-math/pullrequests/118.json"}, "html": {"href": "#!/ignitionrobotics/ign-math/pull-requests/118"}}, "title": "pass string literal to project() to make the project name parsable"}, "content": {"raw": "+1", "markup": "markdown", "html": "<p>+1</p>", "type": "rendered"}, "created_on": "2016-08-02T15:44:43.145149+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "updated_on": "2016-08-02T15:44:43.148132+00:00", "type": "pullrequest_comment", "id": 21809215}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-math/pullrequests/118/comments/21828498.json"}, "html": {"href": "#!/ignitionrobotics/ign-math/pull-requests/118/_/diff#comment-21828498"}}, "parent": {"id": 21809215, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-math/pullrequests/118/comments/21809215.json"}, "html": {"href": "#!/ignitionrobotics/ign-math/pull-requests/118/_/diff#comment-21809215"}}, "depth": 6}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 118, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-math/pullrequests/118.json"}, "html": {"href": "#!/ignitionrobotics/ign-math/pull-requests/118"}}, "title": "pass string literal to project() to make the project name parsable"}, "content": {"raw": "Please see [#123](#!/ignitionrobotics/ign-math/pull-requests/123/)", "markup": "markdown", "html": "<p>Please see <a data-is-external-link=\"true\" href=\"#!/ignitionrobotics/ign-math/pull-requests/123/\" rel=\"nofollow\">#123</a></p>", "type": "rendered"}, "created_on": "2016-08-02T22:41:23.403641+00:00", "user": {"display_name": "Dirk Thomas", "uuid": "{a8effe61-90f2-4949-89a8-9c6972071de7}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Ba8effe61-90f2-4949-89a8-9c6972071de7%7D"}, "html": {"href": "https://bitbucket.org/%7Ba8effe61-90f2-4949-89a8-9c6972071de7%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/2f77876936467715bd75258c967bcaa4d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsDT-2.png"}}, "nickname": "Dirk Thomas", "type": "user", "account_id": "557058:763d049c-c4c6-4e59-85a5-2d7a8fbbdd58"}, "updated_on": "2016-08-02T22:41:23.405899+00:00", "type": "pullrequest_comment", "id": 21828498}], "page": 1, "size": 16}