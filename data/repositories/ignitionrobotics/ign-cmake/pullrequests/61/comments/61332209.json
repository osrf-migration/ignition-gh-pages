{"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/61/comments/61332209.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/61/_/diff#comment-61332209"}}, "parent": {"id": 61329769, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/61/comments/61329769.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/61/_/diff#comment-61329769"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 61, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/61.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/61"}}, "title": "Install cmake files to share instead of lib"}, "content": {"raw": "To elaborate on Jose's comment, it seems that trying to use `make DESTDIR=/dest/dir install` has some rather problematic behavior. Apparently `DESTDIR=/dest/dir` will prefix the install paths (including `CMAKE_INSTALL_PREFIX`) with `/dest/dir`. So if `CMAKE_INSTALL_PREFIX` was `/usr/local`, then `make DESTDIR=/dest/dir install` will have the installed files go to `/dest/dir/usr/local`.\n\nThis is problematic because the example projects (which are set to be installed to `/path/to/build/folder/install`) will inadvertently get installed to `/dest/dir/path/to/build/folder/install`, which is **outside** of the build directory.\n\nWe need a way of removing the build and installation of the example projects from the build and installation of `all` (preferably by tying those to `make test` instead), or else we won't be able to correctly support `make DESTDIR=<path> install`.", "markup": "markdown", "html": "<p>To elaborate on Jose's comment, it seems that trying to use <code>make DESTDIR=/dest/dir install</code> has some rather problematic behavior. Apparently <code>DESTDIR=/dest/dir</code> will prefix the install paths (including <code>CMAKE_INSTALL_PREFIX</code>) with <code>/dest/dir</code>. So if <code>CMAKE_INSTALL_PREFIX</code> was <code>/usr/local</code>, then <code>make DESTDIR=/dest/dir install</code> will have the installed files go to <code>/dest/dir/usr/local</code>.</p>\n<p>This is problematic because the example projects (which are set to be installed to <code>/path/to/build/folder/install</code>) will inadvertently get installed to <code>/dest/dir/path/to/build/folder/install</code>, which is <strong>outside</strong> of the build directory.</p>\n<p>We need a way of removing the build and installation of the example projects from the build and installation of <code>all</code> (preferably by tying those to <code>make test</code> instead), or else we won't be able to correctly support <code>make DESTDIR=&lt;path&gt; install</code>.</p>", "type": "rendered"}, "created_on": "2018-04-11T22:50:05.315626+00:00", "user": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "updated_on": "2018-04-11T22:50:48.610381+00:00", "type": "pullrequest_comment", "id": 61332209}