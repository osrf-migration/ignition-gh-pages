{"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/107/comments/72120430.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/107/_/diff#comment-72120430"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 107, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/107.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/107"}}, "title": "Use NO_CMAKE_ENVIRONMENT_PATH when finding ogre"}, "content": {"raw": "Without this change, the PKG\\_CONFIG\\_PATH env var at [the time of](#!/ignitionrobotics/ign-cmake/pull-requests/107/set-pkg_config_path-to-full-list-before/diff#Lcmake/FindIgnOGRE.cmakeF108T109) `execute_process(COMMAND pkg-config --variable=plugindir OGRE`is set to whatever item in the `PKG_CONFIG_PATH_TMP` list caused [this loop to break](#!/ignitionrobotics/ign-cmake/pull-requests/107/set-pkg_config_path-to-full-list-before/diff#Lcmake/FindIgnOGRE.cmakeF84T84).\n\nIt looks like it might have been intentional that we narrow down the PKG\\_CONFIG\\_PATH like that.\n\nIs it possible that \\(at least on OS X \\), a different path from the list needs to be setup for the step that finds the plugindir? This PR is working under the assumption of \u2018yes\u2019 to that question, but another possibility is that the PKG\\_CONFIG\\_PATH env var should be set to the original value for the plugindir to be found on OSX, because looking at [the diff between FindOGRE \\(used for last successful osx bottle\\) and FindIgnOGRE now](https://www.diffchecker.com/Q9pdwX2F), the PKG\\_CONFIG\\_PATH env var didn\u2019t used to get set at all. So, another approach could be to set it back to the original PKG\\_CONFIG\\_PATH env var.\n\nI still don\u2019t know for sure yet if it will fix OSX, but if the changes look reasonable and we can get this merged either way, I will re-bottle ign-cmake1 with it and then check if it fixes the ign-rendering0 bottling process.", "markup": "markdown", "html": "<p>Without this change, the PKG_CONFIG_PATH env var at <a data-is-external-link=\"true\" href=\"#!/ignitionrobotics/ign-cmake/pull-requests/107/set-pkg_config_path-to-full-list-before/diff#Lcmake/FindIgnOGRE.cmakeF108T109\" rel=\"nofollow\">the time of</a> <code>execute_process(COMMAND pkg-config --variable=plugindir OGRE</code>is set to whatever item in the <code>PKG_CONFIG_PATH_TMP</code> list caused <a data-is-external-link=\"true\" href=\"#!/ignitionrobotics/ign-cmake/pull-requests/107/set-pkg_config_path-to-full-list-before/diff#Lcmake/FindIgnOGRE.cmakeF84T84\" rel=\"nofollow\">this loop to break</a>.</p>\n<p>It looks like it might have been intentional that we narrow down the PKG_CONFIG_PATH like that.</p>\n<p>Is it possible that (at least on OS X ), a different path from the list needs to be setup for the step that finds the plugindir? This PR is working under the assumption of \u2018yes\u2019 to that question, but another possibility is that the PKG_CONFIG_PATH env var should be set to the original value for the plugindir to be found on OSX, because looking at <a data-is-external-link=\"true\" href=\"https://www.diffchecker.com/Q9pdwX2F\" rel=\"nofollow\">the diff between FindOGRE (used for last successful osx bottle) and FindIgnOGRE now</a>, the PKG_CONFIG_PATH env var didn\u2019t used to get set at all. So, another approach could be to set it back to the original PKG_CONFIG_PATH env var.</p>\n<p>I still don\u2019t know for sure yet if it will fix OSX, but if the changes look reasonable and we can get this merged either way, I will re-bottle ign-cmake1 with it and then check if it fixes the ign-rendering0 bottling process.</p>", "type": "rendered"}, "created_on": "2018-08-06T18:20:31.194807+00:00", "user": {"display_name": "Deanna Hood", "uuid": "{40d490b4-7de9-4c89-ac1c-2219a22057eb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B40d490b4-7de9-4c89-ac1c-2219a22057eb%7D"}, "html": {"href": "https://bitbucket.org/%7B40d490b4-7de9-4c89-ac1c-2219a22057eb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:ec666897-79d8-48b4-ae27-4f0e9e56f5b5/f7b56737-eb1f-481f-beb1-50c179565cf4/128"}}, "nickname": "d_hood", "type": "user", "account_id": "557058:ec666897-79d8-48b4-ae27-4f0e9e56f5b5"}, "updated_on": "2018-08-06T18:20:31.204571+00:00", "type": "pullrequest_comment", "id": 72120430}