{"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/101/comments/70532107.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/101/_/diff#comment-70532107"}}, "parent": {"id": 70525397, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/101/comments/70525397.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/101/_/diff#comment-70525397"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 101, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/101.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/101"}}, "title": "Warning suppression utility"}, "content": {"raw": "I investigated this some more.\n\nI think the reason for the discrepancy between Windows and Unix might actually be the way Windows uses generators. I noticed that on Ubuntu, the `ignition-cmake1-utilities-targets.cmake` file *was* getting created and placed in the build directory, even though that didn\u2019t seem to be happening on Windows. Maybe Windows defers file configuration until the end of the build system? Or maybe it gets deferred until generation time?\n\nWhatever the case may be, I came up with an alternative fake install scheme which seemed to work for me on both Windows and Ubuntu: e530748\n\nBasically, whenever testing is enabled, we do a duplicated configure of `ign-cmake` within a subdirectory of the build folder and then install that duplicated configure to an \u201cinstall\u201d folder, also in the build directory. Of course we disable testing for the duplicate configure, because otherwise we would get infinite recursion.\n\nNow we should always get an exact replica of an `ign-cmake` installation for the tests.", "markup": "markdown", "html": "<p>I investigated this some more.</p>\n<p>I think the reason for the discrepancy between Windows and Unix might actually be the way Windows uses generators. I noticed that on Ubuntu, the <code>ignition-cmake1-utilities-targets.cmake</code> file <em>was</em> getting created and placed in the build directory, even though that didn\u2019t seem to be happening on Windows. Maybe Windows defers file configuration until the end of the build system? Or maybe it gets deferred until generation time?</p>\n<p>Whatever the case may be, I came up with an alternative fake install scheme which seemed to work for me on both Windows and Ubuntu: <a href=\"#!/ignitionrobotics/ign-cmake/commits/e530748\" rel=\"nofollow\" class=\"ap-connect-link\">e530748</a></p>\n<p>Basically, whenever testing is enabled, we do a duplicated configure of <code>ign-cmake</code> within a subdirectory of the build folder and then install that duplicated configure to an \u201cinstall\u201d folder, also in the build directory. Of course we disable testing for the duplicate configure, because otherwise we would get infinite recursion.</p>\n<p>Now we should always get an exact replica of an <code>ign-cmake</code> installation for the tests.</p>", "type": "rendered"}, "created_on": "2018-07-20T04:39:22.349631+00:00", "user": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "updated_on": "2018-07-20T04:40:14.251874+00:00", "type": "pullrequest_comment", "id": 70532107}