{"pagelen": 100, "values": [{"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/12/comments/49708092.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/12/_/diff#comment-49708092"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 12, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/12.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/12"}}, "title": "Finalize settings for Windows"}, "content": {"raw": "jenkins CI jobs didn't get started for this...", "markup": "markdown", "html": "<p>jenkins CI jobs didn't get started for this...</p>", "type": "rendered"}, "created_on": "2017-11-16T02:27:21.165720+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2017-11-16T02:27:21.168823+00:00", "type": "pullrequest_comment", "id": 49708092}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/12/comments/49717636.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/12/_/diff#comment-49717636"}}, "parent": {"id": 49708092, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/12/comments/49708092.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/12/_/diff#comment-49708092"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 12, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/12.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/12"}}, "title": "Finalize settings for Windows"}, "content": {"raw": "I started them manually and they passed", "markup": "markdown", "html": "<p>I started them manually and they passed</p>", "type": "rendered"}, "created_on": "2017-11-16T06:57:13.561527+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2017-11-16T06:57:13.563794+00:00", "type": "pullrequest_comment", "id": 49717636}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/12/comments/49718261.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/12/_/diff#comment-49718261"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 12, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/12.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/12"}}, "title": "Finalize settings for Windows"}, "content": {"raw": "sounds reasonable to me. I assume the demonstration will be when we can successfully build both ign-common and ign-msgs on windows?", "markup": "markdown", "html": "<p>sounds reasonable to me. I assume the demonstration will be when we can successfully build both ign-common and ign-msgs on windows?</p>", "type": "rendered"}, "created_on": "2017-11-16T07:10:05.820901+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2017-11-16T07:10:05.823909+00:00", "type": "pullrequest_comment", "id": 49718261}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/12/comments/50028109.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/12/_/diff#comment-50028109"}}, "parent": {"id": 49718261, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/12/comments/49718261.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/12/_/diff#comment-49718261"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 12, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/12.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/12"}}, "title": "Finalize settings for Windows"}, "content": {"raw": "Stable for `ign-common`: https://build.osrfoundation.org/view/main/view/ignition/job/ignition_common-ci-pr_any-windows7-amd64/355/\n\nUnstable for `ign-msgs` due to warning `C4251` in the auto-generated headers: https://build.osrfoundation.org/job/ignition_msgs-ci-pr_any-windows7-amd64/76/\n\nEdit: `ign-msgs` also suffers from MSVC warning `C4146` in the auto-generated headers, and a little bit of `C4305` in `Utility_TEST.cc`.", "markup": "markdown", "html": "<p>Stable for <code>ign-common</code>: <a href=\"https://build.osrfoundation.org/view/main/view/ignition/job/ignition_common-ci-pr_any-windows7-amd64/355/\" rel=\"nofollow\" class=\"ap-connect-link\">https://build.osrfoundation.org/view/main/view/ignition/job/ignition_common-ci-pr_any-windows7-amd64/355/</a></p>\n<p>Unstable for <code>ign-msgs</code> due to warning <code>C4251</code> in the auto-generated headers: <a href=\"https://build.osrfoundation.org/job/ignition_msgs-ci-pr_any-windows7-amd64/76/\" rel=\"nofollow\" class=\"ap-connect-link\">https://build.osrfoundation.org/job/ignition_msgs-ci-pr_any-windows7-amd64/76/</a></p>\n<p>Edit: <code>ign-msgs</code> also suffers from MSVC warning <code>C4146</code> in the auto-generated headers, and a little bit of <code>C4305</code> in <code>Utility_TEST.cc</code>.</p>", "type": "rendered"}, "created_on": "2017-11-20T21:15:24.672107+00:00", "user": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "updated_on": "2017-11-20T21:21:02.088761+00:00", "type": "pullrequest_comment", "id": 50028109}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/12/comments/49833011.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-cmake/diff/ignitionrobotics/ign-cmake:c63bc30fce90..dccbae051758?path=cmake%2FIgnSetCompilerFlags.cmake"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/12/_/diff#comment-49833011"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 12, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/12.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/12"}}, "title": "Finalize settings for Windows"}, "content": {"raw": "If I understand correctly, this means using `/MDd` on both Debug and Release builds.\n\nIf I am not  wrong, this could create problem in linking third-party libraries that in Release are compiled with `/MD` (as the STL ABI is not compatible between Release and Debug). For example the libraries compiled in Release with the default triplet in `vcpkg` use `/MD`.\nThere is some reason for not using `/MD` in Release builds?", "markup": "markdown", "html": "<p>If I understand correctly, this means using <code>/MDd</code> on both Debug and Release builds.</p>\n<p>If I am not  wrong, this could create problem in linking third-party libraries that in Release are compiled with <code>/MD</code> (as the STL ABI is not compatible between Release and Debug). For example the libraries compiled in Release with the default triplet in <code>vcpkg</code> use <code>/MD</code>.\nThere is some reason for not using <code>/MD</code> in Release builds?</p>", "type": "rendered"}, "created_on": "2017-11-17T08:12:39.178317+00:00", "user": {"display_name": "Silvio Traversaro", "uuid": "{34f404cb-5642-4f27-a032-e04c7143d776}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D"}, "html": {"href": "https://bitbucket.org/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6/578caaa1-056c-45a2-8bf9-bee94c3bebef/128"}}, "nickname": "traversaro", "type": "user", "account_id": "557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6"}, "inline": {"to": 280, "from": null, "path": "cmake/IgnSetCompilerFlags.cmake"}, "updated_on": "2017-11-17T09:10:29.220582+00:00", "type": "pullrequest_comment", "id": 49833011}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/12/comments/49896176.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-cmake/diff/ignitionrobotics/ign-cmake:189c956decb0..dccbae051758?path=cmake%2FIgnSetCompilerFlags.cmake"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/12/_/diff#comment-49896176"}}, "parent": {"id": 49833011, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/12/comments/49833011.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/12/_/diff#comment-49833011"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 12, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/12.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/12"}}, "title": "Finalize settings for Windows"}, "content": {"raw": "You're exactly right, and this is something I've been deliberating for the past week. The concerns you've raised are pretty compelling: Users are generally going to hope that release settings across different libraries are compatible with each other without needing to do any manual configuration, and they'll be confused when the builds appear to work, only to crash when they actually get run. I think that's a compelling enough reason for me to backpedal on this design choice and just accept the default cmake flags. We could do something like what protobuf does, and provide an option to switch to the static runtime when `BUILD_SHARED_LIBS` is set to off, while still respecting the debug vs non-debug settings.\n\nThe reason I originally decided to use `/MDd` as a default at all times was because I thought it would be helpful to always use the debug version of the runtime. I figured that would make it easier to identify and debug undefined behavior during CI and while running tests/experiments. Perhaps it's sufficient to only use `/MDd` for debug builds, and switch over to a debug build when things are not behaving as expected.\n\nThe next question would be whether our CI should build the ignition libraries in `Debug` or `RelWithDebInfo` mode. I've already precompiled `RelWithDebInfo` `/MDd` versions of most of our third-party Windows dependencies, but I have to admit that it wasn't very easy since it goes against conventional settings. I suspect that using the debug runtime in our CI might help to catch undefined behavior, but I don't know for certain if that's true.", "markup": "markdown", "html": "<p>You're exactly right, and this is something I've been deliberating for the past week. The concerns you've raised are pretty compelling: Users are generally going to hope that release settings across different libraries are compatible with each other without needing to do any manual configuration, and they'll be confused when the builds appear to work, only to crash when they actually get run. I think that's a compelling enough reason for me to backpedal on this design choice and just accept the default cmake flags. We could do something like what protobuf does, and provide an option to switch to the static runtime when <code>BUILD_SHARED_LIBS</code> is set to off, while still respecting the debug vs non-debug settings.</p>\n<p>The reason I originally decided to use <code>/MDd</code> as a default at all times was because I thought it would be helpful to always use the debug version of the runtime. I figured that would make it easier to identify and debug undefined behavior during CI and while running tests/experiments. Perhaps it's sufficient to only use <code>/MDd</code> for debug builds, and switch over to a debug build when things are not behaving as expected.</p>\n<p>The next question would be whether our CI should build the ignition libraries in <code>Debug</code> or <code>RelWithDebInfo</code> mode. I've already precompiled <code>RelWithDebInfo</code> <code>/MDd</code> versions of most of our third-party Windows dependencies, but I have to admit that it wasn't very easy since it goes against conventional settings. I suspect that using the debug runtime in our CI might help to catch undefined behavior, but I don't know for certain if that's true.</p>", "type": "rendered"}, "created_on": "2017-11-17T18:59:09.954653+00:00", "user": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "inline": {"to": null, "from": null, "path": "cmake/IgnSetCompilerFlags.cmake"}, "updated_on": "2017-11-17T19:00:51.717233+00:00", "type": "pullrequest_comment", "id": 49896176}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/12/comments/49910377.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-cmake/diff/ignitionrobotics/ign-cmake:189c956decb0..dccbae051758?path=cmake%2FIgnSetCompilerFlags.cmake"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/12/_/diff#comment-49910377"}}, "parent": {"id": 49833011, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/12/comments/49833011.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/12/_/diff#comment-49833011"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 12, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/12.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/12"}}, "title": "Finalize settings for Windows"}, "content": {"raw": "This is addressed in 764ed31", "markup": "markdown", "html": "<p>This is addressed in <a href=\"#!/ignitionrobotics/ign-cmake/commits/764ed31\" rel=\"nofollow\" class=\"ap-connect-link\">764ed31</a></p>", "type": "rendered"}, "created_on": "2017-11-17T23:31:49.418831+00:00", "user": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "inline": {"to": null, "from": null, "path": "cmake/IgnSetCompilerFlags.cmake"}, "updated_on": "2017-11-17T23:31:49.422748+00:00", "type": "pullrequest_comment", "id": 49910377}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/12/comments/50035993.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/12/_/diff#comment-50035993"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 12, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/12.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/12"}}, "title": "Finalize settings for Windows"}, "content": {"raw": " Thanks for the research work, pretty interesting. One minor comment: although it is useful to get the most information from our CI builds \\(/MdD \\+ .dll\\), it is also useful to be able to test the same software with the same configurations that the ones that will be shipped to final users \\(.lib\\). We could create complementary CI builds but seems to me that it is useful to give a try everyday to the binaries and packages that are going to be finally distributed.\n\nA part from this, the PR works just fine on Linux to build ign-math4.", "markup": "markdown", "html": "<p>Thanks for the research work, pretty interesting. One minor comment: although it is useful to get the most information from our CI builds (/MdD + .dll), it is also useful to be able to test the same software with the same configurations that the ones that will be shipped to final users (.lib). We could create complementary CI builds but seems to me that it is useful to give a try everyday to the binaries and packages that are going to be finally distributed.</p>\n<p>A part from this, the PR works just fine on Linux to build ign-math4.</p>", "type": "rendered"}, "created_on": "2017-11-20T23:17:24.756041+00:00", "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "updated_on": "2017-11-20T23:17:24.759182+00:00", "type": "pullrequest_comment", "id": 50035993}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/12/comments/50036860.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/12/_/diff#comment-50036860"}}, "parent": {"id": 50035993, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/12/comments/50035993.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/12/_/diff#comment-50035993"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 12, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/12.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/12"}}, "title": "Finalize settings for Windows"}, "content": {"raw": "I definitely agree, in the long-term it would be great for us to test several different configurations, especially (1) the most informative configuration and (2) the configuration that users are most likely to run.\n\nI'm deferring on supporting multiple configurations in the CI until we have some time to investigate `vcpkg` which I think might be specifically designed to facilitate exactly that.", "markup": "markdown", "html": "<p>I definitely agree, in the long-term it would be great for us to test several different configurations, especially (1) the most informative configuration and (2) the configuration that users are most likely to run.</p>\n<p>I'm deferring on supporting multiple configurations in the CI until we have some time to investigate <code>vcpkg</code> which I think might be specifically designed to facilitate exactly that.</p>", "type": "rendered"}, "created_on": "2017-11-20T23:33:47.648073+00:00", "user": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "updated_on": "2017-11-20T23:33:47.650258+00:00", "type": "pullrequest_comment", "id": 50036860}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/12/comments/50036059.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-cmake/diff/ignitionrobotics/ign-cmake:189c956decb0..dccbae051758?path=examples%2FCMakeLists.txt"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/12/_/diff#comment-50036059"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 12, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/12.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/12"}}, "title": "Finalize settings for Windows"}, "content": {"raw": "Minor note: include examples together with the software has some value. Not critical, but useful sometimes.", "markup": "markdown", "html": "<p>Minor note: include examples together with the software has some value. Not critical, but useful sometimes.</p>", "type": "rendered"}, "created_on": "2017-11-20T23:18:33.404003+00:00", "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "inline": {"to": 50, "from": null, "path": "examples/CMakeLists.txt"}, "updated_on": "2017-11-20T23:18:33.406262+00:00", "type": "pullrequest_comment", "id": 50036059}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/12/comments/50037021.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-cmake/diff/ignitionrobotics/ign-cmake:189c956decb0..dccbae051758?path=examples%2FCMakeLists.txt"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/12/_/diff#comment-50037021"}}, "parent": {"id": 50036059, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/12/comments/50036059.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/12/_/diff#comment-50036059"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 12, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/12.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/12"}}, "title": "Finalize settings for Windows"}, "content": {"raw": "In this case the \"examples\" are really closer to unit tests. They're not intended to be referred to as actual examples of how to use `ign-cmake`.\n\nWe might want to consider moving these from the `examples` subdirectory to the `test` subdirectory, but I'm not sure if @scpeters had a specific reason for putting them in a separate subdirectory.", "markup": "markdown", "html": "<p>In this case the \"examples\" are really closer to unit tests. They're not intended to be referred to as actual examples of how to use <code>ign-cmake</code>.</p>\n<p>We might want to consider moving these from the <code>examples</code> subdirectory to the <code>test</code> subdirectory, but I'm not sure if @scpeters had a specific reason for putting them in a separate subdirectory.</p>", "type": "rendered"}, "created_on": "2017-11-20T23:36:46.392047+00:00", "user": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "inline": {"to": null, "from": null, "path": "examples/CMakeLists.txt"}, "updated_on": "2017-11-20T23:36:46.401372+00:00", "type": "pullrequest_comment", "id": 50037021}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/12/comments/50537578.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-cmake/diff/ignitionrobotics/ign-cmake:b6ac2cb06608..dccbae051758?path=examples%2FCMakeLists.txt"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/12/_/diff#comment-50537578"}}, "parent": {"id": 50037021, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/12/comments/50037021.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/12/_/diff#comment-50037021"}}, "depth": 2}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 12, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/12.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/12"}}, "title": "Finalize settings for Windows"}, "content": {"raw": "currently there are just trivial examples, but I think we would like to add non-trivial examples there eventually. If we want to move the trivial examples to a test folder, that's ok with me, but it will duplicate a little bit of our cmake code", "markup": "markdown", "html": "<p>currently there are just trivial examples, but I think we would like to add non-trivial examples there eventually. If we want to move the trivial examples to a test folder, that's ok with me, but it will duplicate a little bit of our cmake code</p>", "type": "rendered"}, "created_on": "2017-11-27T21:25:28.244516+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "inline": {"to": null, "from": null, "path": "examples/CMakeLists.txt"}, "updated_on": "2017-11-27T21:25:28.246949+00:00", "type": "pullrequest_comment", "id": 50537578}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/12/comments/50537663.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-cmake/diff/ignitionrobotics/ign-cmake:b6ac2cb06608..dccbae051758?path=examples%2FCMakeLists.txt"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/12/_/diff#comment-50537663"}}, "parent": {"id": 50537578, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/12/comments/50537578.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/12/_/diff#comment-50537578"}}, "depth": 3}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 12, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/12.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/12"}}, "title": "Finalize settings for Windows"}, "content": {"raw": "That's what macros are for :wink: ", "markup": "markdown", "html": "<p>That's what macros are for <img class=\"emoji\" src=\"data/pf-emoji-service--cdn.us-east-1.prod.public.atl-paas.net/standard/551c9814-1d37-4573-819d-afab3afeaf32/48x48/1f609.png\" alt=\"\ud83d\ude09\" title=\":wink:\" data-emoji-short-name=\":wink:\" /> </p>", "type": "rendered"}, "created_on": "2017-11-27T21:26:47.171989+00:00", "user": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "inline": {"to": null, "from": null, "path": "examples/CMakeLists.txt"}, "updated_on": "2017-11-27T21:26:47.174452+00:00", "type": "pullrequest_comment", "id": 50537663}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/12/comments/50281106.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-cmake/diff/ignitionrobotics/ign-cmake:189c956decb0..dccbae051758?path=cmake%2FIgnSetCompilerFlags.cmake"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/12/_/diff#comment-50281106"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 12, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/12.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/12"}}, "title": "Finalize settings for Windows"}, "content": {"raw": "I may be wrong, but it seems that `IGN_RUNTIME_LIBRARY` is not used anymore. ", "markup": "markdown", "html": "<p>I may be wrong, but it seems that <code>IGN_RUNTIME_LIBRARY</code> is not used anymore. </p>", "type": "rendered"}, "created_on": "2017-11-23T08:32:40.567408+00:00", "user": {"display_name": "Silvio Traversaro", "uuid": "{34f404cb-5642-4f27-a032-e04c7143d776}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D"}, "html": {"href": "https://bitbucket.org/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6/578caaa1-056c-45a2-8bf9-bee94c3bebef/128"}}, "nickname": "traversaro", "type": "user", "account_id": "557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6"}, "inline": {"to": 304, "from": null, "path": "cmake/IgnSetCompilerFlags.cmake"}, "updated_on": "2017-11-23T08:32:40.606876+00:00", "type": "pullrequest_comment", "id": 50281106}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/12/comments/50536113.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-cmake/diff/ignitionrobotics/ign-cmake:b6ac2cb06608..dccbae051758?path=cmake%2FIgnSetCompilerFlags.cmake"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/12/_/diff#comment-50536113"}}, "parent": {"id": 50281106, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/12/comments/50281106.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/12/_/diff#comment-50281106"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 12, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/12.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/12"}}, "title": "Finalize settings for Windows"}, "content": {"raw": "`IGN_RUNTIME_LIBRARY` is removed in 4b4bbf1", "markup": "markdown", "html": "<p><code>IGN_RUNTIME_LIBRARY</code> is removed in <a href=\"#!/ignitionrobotics/ign-cmake/commits/4b4bbf1\" rel=\"nofollow\" class=\"ap-connect-link\">4b4bbf1</a></p>", "type": "rendered"}, "created_on": "2017-11-27T21:05:48.729370+00:00", "user": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "inline": {"to": null, "from": null, "path": "cmake/IgnSetCompilerFlags.cmake"}, "updated_on": "2017-11-27T21:05:48.731885+00:00", "type": "pullrequest_comment", "id": 50536113}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/12/comments/49832655.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/12/_/diff#comment-49832655"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 12, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/12.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/12"}}, "title": "Finalize settings for Windows"}, "content": {"raw": "This comment could not be backed up from BitBucket, so this dummy comment was inserted in it's place.", "markup": "markdown", "html": "<p>This comment could not be backed up from BitBucket, so this dummy comment was inserted in it's place.</p>", "type": "rendered"}, "created_on": "1970-01-01T00:00:00.000000+00:00", "user": {"display_name": "Unknown User", "uuid": "{00000000-0000-0000-0000-000000000000}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B00000000-0000-0000-0000-000000000000%7D"}, "html": {"href": "https://bitbucket.org/%7B00000000-0000-0000-0000-000000000000%7D/"}, "avatar": {"href": "data/missing_avatar.png"}}, "nickname": "unknownuser", "type": "user", "account_id": "000000:00000000-0000-0000-0000-000000000000"}, "updated_on": "1970-01-01T00:00:00.000000+00:00", "type": "pullrequest_comment", "id": 49832655}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/12/comments/49896407.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-cmake/diff/ignitionrobotics/ign-cmake:764ed31c7da4..dccbae051758?path=CMakeLists.txt"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/12/_/diff#comment-49896407"}}, "parent": {"id": 49832655, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/12/comments/49832655.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/12/_/diff#comment-49832655"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 12, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/12.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/12"}}, "title": "Finalize settings for Windows"}, "content": {"raw": "Thanks for figuring this out! We've certainly been bewildered by this, and just decided to sweep it under the rug for the moment.\n\nI like the idea of explicitly disabling the install step. I'll give that a try and see if it works.", "markup": "markdown", "html": "<p>Thanks for figuring this out! We've certainly been bewildered by this, and just decided to sweep it under the rug for the moment.</p>\n<p>I like the idea of explicitly disabling the install step. I'll give that a try and see if it works.</p>", "type": "rendered"}, "created_on": "2017-11-17T19:02:34.676828+00:00", "user": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "inline": {"to": null, "from": null, "path": "CMakeLists.txt"}, "updated_on": "2017-11-17T19:02:34.683118+00:00", "type": "pullrequest_comment", "id": 49896407}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/12/comments/49910322.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-cmake/diff/ignitionrobotics/ign-cmake:189c956decb0..dccbae051758?path=CMakeLists.txt"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/12/_/diff#comment-49910322"}}, "parent": {"id": 49832655, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/12/comments/49832655.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/12/_/diff#comment-49832655"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 12, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/12.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/12"}}, "title": "Finalize settings for Windows"}, "content": {"raw": "This is fixed in 189c956", "markup": "markdown", "html": "<p>This is fixed in <a href=\"#!/ignitionrobotics/ign-cmake/commits/189c956\" rel=\"nofollow\" class=\"ap-connect-link\">189c956</a></p>", "type": "rendered"}, "created_on": "2017-11-17T23:30:05.025440+00:00", "user": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "inline": {"to": null, "from": null, "path": "CMakeLists.txt"}, "updated_on": "2017-11-17T23:30:05.029731+00:00", "type": "pullrequest_comment", "id": 49910322}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/12/comments/50281447.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-cmake/diff/ignitionrobotics/ign-cmake:189c956decb0..dccbae051758?path=cmake%2FIgnUtils.cmake"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/12/_/diff#comment-50281447"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 12, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/12.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/12"}}, "title": "Finalize settings for Windows"}, "content": {"raw": "The `STATIC_DEFINE` option is useful if you want to generate an header that can be used to compile both the static and shared version of the library (see https://cmake.org/cmake/help/v3.10/module/GenerateExportHeader.html).\n\nWith this setup, the `generate_export_header` macro will generate the right macros by inspecting if `${lib_name}` is shared or static, and so there is not reason \nfor an additional STATIC_DEFINE.\n\nI think that also the `target_compile_definitions(${lib_name} PUBLIC -D${PROJECT_NAME_NO_VERSION_UPPER}_STATIC)` can be removed.", "markup": "markdown", "html": "<p>The <code>STATIC_DEFINE</code> option is useful if you want to generate an header that can be used to compile both the static and shared version of the library (see <a href=\"https://cmake.org/cmake/help/v3.10/module/GenerateExportHeader.html\" rel=\"nofollow\" class=\"ap-connect-link\">https://cmake.org/cmake/help/v3.10/module/GenerateExportHeader.html</a>).</p>\n<p>With this setup, the <code>generate_export_header</code> macro will generate the right macros by inspecting if <code>${lib_name}</code> is shared or static, and so there is not reason \nfor an additional STATIC_DEFINE.</p>\n<p>I think that also the <code>target_compile_definitions(${lib_name} PUBLIC -D${PROJECT_NAME_NO_VERSION_UPPER}_STATIC)</code> can be removed.</p>", "type": "rendered"}, "created_on": "2017-11-23T08:36:21.742901+00:00", "user": {"display_name": "Silvio Traversaro", "uuid": "{34f404cb-5642-4f27-a032-e04c7143d776}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D"}, "html": {"href": "https://bitbucket.org/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6/578caaa1-056c-45a2-8bf9-bee94c3bebef/128"}}, "nickname": "traversaro", "type": "user", "account_id": "557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6"}, "inline": {"to": 561, "from": null, "path": "cmake/IgnUtils.cmake"}, "updated_on": "2017-11-23T08:36:21.805377+00:00", "type": "pullrequest_comment", "id": 50281447}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/12/comments/50535315.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-cmake/diff/ignitionrobotics/ign-cmake:189c956decb0..dccbae051758?path=cmake%2FIgnUtils.cmake"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/12/_/diff#comment-50535315"}}, "parent": {"id": 50281447, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/12/comments/50281447.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/12/_/diff#comment-50281447"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 12, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/12.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/12"}}, "title": "Finalize settings for Windows"}, "content": {"raw": "Right, my intention here was just to make a \"nicer looking\" `STATIC_DEFINE` variable. Although there's a bit of a problem, since ${PROJECT_NAME_NO_VERSION_UPPER}` contains a dash `-` instead of an underscore. `generate_export_header` is smart enough to convert the dash into an underscore, but `target_compile_definitions` is not so smart, so that's not ideal.\n\nI investigated the exact behavior of `generate_export_header` (because the cmake documentation does not really dive into the details), and the results are somewhat unintuitive (at least to me):\n\n- If you compile with `BUILD_SHARED_LIBS` set to ON, then the visibility macros will be generated as expected, and a compile definition `<library>_EXPORTS` will be added privately for your library\n- If you compile with `BUILD_SHARED_LIBS` set to OFF, then the visibility macros will all be left blank, and no compile definitions will be set\n\nSo the export header itself is actually generated differently depending on whether the target library is shared or static. It doesn't seem like this will cause any problems for us, because installing either version of the export header should work just fine when it gets used by dependent libraries.\n\nThe only thing we'd need to watch out for is if we ever decide to build both a static and a shared version of the library within one run of the build system, in which case we'd need to ensure that we only generate the headers on the shared target, and then add the `STATIC_DEFINE` compile definition for the static target.\n\nIn any case, you're correct: the `target_compile_definitions` call should be removed here.", "markup": "markdown", "html": "<p>Right, my intention here was just to make a \"nicer looking\" <code>STATIC_DEFINE</code> variable. Although there's a bit of a problem, since ${PROJECT_NAME_NO_VERSION_UPPER}<code>contains a dash</code>-<code>instead of an underscore.</code>generate_export_header<code>is smart enough to convert the dash into an underscore, but</code>target_compile_definitions` is not so smart, so that's not ideal.</p>\n<p>I investigated the exact behavior of <code>generate_export_header</code> (because the cmake documentation does not really dive into the details), and the results are somewhat unintuitive (at least to me):</p>\n<ul>\n<li>If you compile with <code>BUILD_SHARED_LIBS</code> set to ON, then the visibility macros will be generated as expected, and a compile definition <code>&lt;library&gt;_EXPORTS</code> will be added privately for your library</li>\n<li>If you compile with <code>BUILD_SHARED_LIBS</code> set to OFF, then the visibility macros will all be left blank, and no compile definitions will be set</li>\n</ul>\n<p>So the export header itself is actually generated differently depending on whether the target library is shared or static. It doesn't seem like this will cause any problems for us, because installing either version of the export header should work just fine when it gets used by dependent libraries.</p>\n<p>The only thing we'd need to watch out for is if we ever decide to build both a static and a shared version of the library within one run of the build system, in which case we'd need to ensure that we only generate the headers on the shared target, and then add the <code>STATIC_DEFINE</code> compile definition for the static target.</p>\n<p>In any case, you're correct: the <code>target_compile_definitions</code> call should be removed here.</p>", "type": "rendered"}, "created_on": "2017-11-27T20:54:59.258196+00:00", "user": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "inline": {"to": null, "from": null, "path": "cmake/IgnUtils.cmake"}, "updated_on": "2017-11-27T20:54:59.261467+00:00", "type": "pullrequest_comment", "id": 50535315}, {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/12/comments/50536206.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-cmake/diff/ignitionrobotics/ign-cmake:b6ac2cb06608..dccbae051758?path=cmake%2FIgnUtils.cmake"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/12/_/diff#comment-50536206"}}, "parent": {"id": 50281447, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/12/comments/50281447.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/12/_/diff#comment-50281447"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 12, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/12.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/12"}}, "title": "Finalize settings for Windows"}, "content": {"raw": "I've reverted to just using the standard `generate_export_header` settings in 614e82e. Renaming the `STATIC_DEFINE` variable was superficial anyway.", "markup": "markdown", "html": "<p>I've reverted to just using the standard <code>generate_export_header</code> settings in <a href=\"#!/ignitionrobotics/ign-cmake/commits/614e82e\" rel=\"nofollow\" class=\"ap-connect-link\">614e82e</a>. Renaming the <code>STATIC_DEFINE</code> variable was superficial anyway.</p>", "type": "rendered"}, "created_on": "2017-11-27T21:07:01.507275+00:00", "user": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "inline": {"to": null, "from": null, "path": "cmake/IgnUtils.cmake"}, "updated_on": "2017-11-27T21:07:01.510870+00:00", "type": "pullrequest_comment", "id": 50536206}], "page": 1, "size": 21}