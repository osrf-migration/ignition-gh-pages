{"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/147/comments/98905595.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/147/_/diff#comment-98905595"}}, "parent": {"id": 98882995, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/147/comments/98882995.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/147/_/diff#comment-98882995"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 147, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/147.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/147"}}, "title": "Use PRIVATE_FOR to skip cmake dependencies in addition to pkg-config"}, "content": {"raw": "I thought I could just add a fake dependency and a component that never gets built:\n\n~~~\ndiff -r 5ea70693efaf examples/component_deps/CMakeLists.txt\n--- a/examples/component_deps/CMakeLists.txt    Wed Mar 20 18:09:42 2019 +0000\n+++ b/examples/component_deps/CMakeLists.txt    Tue Apr 16 00:11:34 2019 -0700\n@@ -2,7 +2,14 @@\n project(ignition-component_deps VERSION 0.1.0)\n find_package(ignition-cmake2 REQUIRED)\n ign_configure_project()\n+\n+# try to find non-existent package required by component that will never be built\n+# to make sure the non-existent package is not passed as transitive dependency\n+ign_find_package(imaginary_fake_package\n+    REQUIRED_BY never_built\n+    PRIVATE_FOR never_built)\n+\n ign_configure_build(QUIT_IF_BUILD_ERRORS\n-  COMPONENTS child parent)\n+  COMPONENTS child parent never_built)\n ign_create_packages()\n ign_create_docs()\n~~~\n\nbut actually you need to configure the grandparent with the package installed in the system, then try to configure the grandchild with the package unavailable. it's not so easy. I'll just focus on the ign-sensors example, as you suggest", "markup": "markdown", "html": "<p>I thought I could just add a fake dependency and a component that never gets built:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"gh\">diff -r 5ea70693efaf examples/component_deps/CMakeLists.txt</span>\n<span class=\"gd\">--- a/examples/component_deps/CMakeLists.txt    Wed Mar 20 18:09:42 2019 +0000</span>\n<span class=\"gi\">+++ b/examples/component_deps/CMakeLists.txt    Tue Apr 16 00:11:34 2019 -0700</span>\n<span class=\"gu\">@@ -2,7 +2,14 @@</span>\n project(ignition-component_deps VERSION 0.1.0)\n find_package(ignition-cmake2 REQUIRED)\n ign_configure_project()\n<span class=\"gi\">+</span>\n<span class=\"gi\">+# try to find non-existent package required by component that will never be built</span>\n<span class=\"gi\">+# to make sure the non-existent package is not passed as transitive dependency</span>\n<span class=\"gi\">+ign_find_package(imaginary_fake_package</span>\n<span class=\"gi\">+    REQUIRED_BY never_built</span>\n<span class=\"gi\">+    PRIVATE_FOR never_built)</span>\n<span class=\"gi\">+</span>\n ign_configure_build(QUIT_IF_BUILD_ERRORS\n<span class=\"gd\">-  COMPONENTS child parent)</span>\n<span class=\"gi\">+  COMPONENTS child parent never_built)</span>\n ign_create_packages()\n ign_create_docs()\n</pre></div>\n\n\n<p>but actually you need to configure the grandparent with the package installed in the system, then try to configure the grandchild with the package unavailable. it's not so easy. I'll just focus on the ign-sensors example, as you suggest</p>", "type": "rendered"}, "created_on": "2019-04-16T07:13:53.476731+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2019-04-16T07:13:53.497379+00:00", "type": "pullrequest_comment", "id": 98905595}