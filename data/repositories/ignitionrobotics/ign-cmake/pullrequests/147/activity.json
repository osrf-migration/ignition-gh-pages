{"pagelen": 50, "values": [{"update": {"description": "When calling `ign_find_package`, when a component is specified as both `REQUIRED_BY` and `PRIVATE_FOR`, it should not be propagated as a transitive dependency in pkg-config and cmake config files. The code currently handles `PRIVATE_FOR` for pkg-config but not cmake, as noticed in a recent ign-sensors pull request:\r\n\r\n* #!/ignitionrobotics/ign-sensors/pull-requests/51/updating-dependencies/commits\r\n\r\nThe ign-sensors pipeline [installs `libignition-common3-dev`](#!/ignitionrobotics/ign-sensors/src/fe0232e17b05b8ee835c8aac4dd48058956c5288/bitbucket-pipelines.yml?at=update_deps&fileviewer=file-view-default#bitbucket-pipelines.yml-25) but not the graphics sub-component. The pipeline still failed though, wanting to find freeimage, which is [PRIVATE_FOR that component](#!/ignitionrobotics/ign-common/src/357d22cce10e238ce1f257c9be5acb7cfd4a6ed1/CMakeLists.txt?at=default&fileviewer=file-view-default#CMakeLists.txt-79:81).\r\n\r\n* #!/ignitionrobotics/ign-sensors/commits/fe0232e17b05b8ee835c8aac4dd48058956c5288?at=default\r\n\r\nThis sets the `${component}_${PACKAGE_NAME}_PRIVATE` variables earlier, so they can be used by cmake as well as pkg-config, and skips private dependencies for cmake.\r\n\r\nI'm not sure how to write a test for this.", "title": "Use PRIVATE_FOR to skip cmake dependencies in addition to pkg-config", "destination": {"commit": {"hash": "5ea70693efaf", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/commit/5ea70693efaf.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/commits/5ea70693efaf"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake"}, "avatar": {"href": "data/bytebucket.org/ravatar/{3e77bcf7-f260-4cec-a1a0-116b8e298901}ts=default"}}, "type": "repository", "name": "ign-cmake", "full_name": "ignitionrobotics/ign-cmake", "uuid": "{3e77bcf7-f260-4cec-a1a0-116b8e298901}"}, "branch": {"name": "ign-cmake2"}}, "reason": "", "source": {"commit": {"hash": "d64e0467953e", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/commit/d64e0467953e.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/commits/d64e0467953e"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake"}, "avatar": {"href": "data/bytebucket.org/ravatar/{3e77bcf7-f260-4cec-a1a0-116b8e298901}ts=default"}}, "type": "repository", "name": "ign-cmake", "full_name": "ignitionrobotics/ign-cmake", "uuid": "{3e77bcf7-f260-4cec-a1a0-116b8e298901}"}, "branch": {"name": "component_private_for_cmake"}}, "state": "MERGED", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2019-04-17T19:34:40.572972+00:00"}, "pull_request": {"type": "pullrequest", "id": 147, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/147.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/147"}}, "title": "Use PRIVATE_FOR to skip cmake dependencies in addition to pkg-config"}}, {"approval": {"date": "2019-04-17T17:18:34.251428+00:00", "pullrequest": {"type": "pullrequest", "id": 147, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/147.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/147"}}, "title": "Use PRIVATE_FOR to skip cmake dependencies in addition to pkg-config"}, "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}}, "pull_request": {"type": "pullrequest", "id": 147, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/147.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/147"}}, "title": "Use PRIVATE_FOR to skip cmake dependencies in addition to pkg-config"}}, {"update": {"description": "When calling `ign_find_package`, when a component is specified as both `REQUIRED_BY` and `PRIVATE_FOR`, it should not be propagated as a transitive dependency in pkg-config and cmake config files. The code currently handles `PRIVATE_FOR` for pkg-config but not cmake, as noticed in a recent ign-sensors pull request:\r\n\r\n* #!/ignitionrobotics/ign-sensors/pull-requests/51/updating-dependencies/commits\r\n\r\nThe ign-sensors pipeline [installs `libignition-common3-dev`](#!/ignitionrobotics/ign-sensors/src/fe0232e17b05b8ee835c8aac4dd48058956c5288/bitbucket-pipelines.yml?at=update_deps&fileviewer=file-view-default#bitbucket-pipelines.yml-25) but not the graphics sub-component. The pipeline still failed though, wanting to find freeimage, which is [PRIVATE_FOR that component](#!/ignitionrobotics/ign-common/src/357d22cce10e238ce1f257c9be5acb7cfd4a6ed1/CMakeLists.txt?at=default&fileviewer=file-view-default#CMakeLists.txt-79:81).\r\n\r\n* #!/ignitionrobotics/ign-sensors/commits/fe0232e17b05b8ee835c8aac4dd48058956c5288?at=default\r\n\r\nThis sets the `${component}_${PACKAGE_NAME}_PRIVATE` variables earlier, so they can be used by cmake as well as pkg-config, and skips private dependencies for cmake.\r\n\r\nI'm not sure how to write a test for this.", "title": "Use PRIVATE_FOR to skip cmake dependencies in addition to pkg-config", "destination": {"commit": {"hash": "5ea70693efaf", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/commit/5ea70693efaf.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/commits/5ea70693efaf"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake"}, "avatar": {"href": "data/bytebucket.org/ravatar/{3e77bcf7-f260-4cec-a1a0-116b8e298901}ts=default"}}, "type": "repository", "name": "ign-cmake", "full_name": "ignitionrobotics/ign-cmake", "uuid": "{3e77bcf7-f260-4cec-a1a0-116b8e298901}"}, "branch": {"name": "ign-cmake2"}}, "reason": "", "source": {"commit": {"hash": "d64e0467953e", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/commit/d64e0467953e.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/commits/d64e0467953e"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake"}, "avatar": {"href": "data/bytebucket.org/ravatar/{3e77bcf7-f260-4cec-a1a0-116b8e298901}ts=default"}}, "type": "repository", "name": "ign-cmake", "full_name": "ignitionrobotics/ign-cmake", "uuid": "{3e77bcf7-f260-4cec-a1a0-116b8e298901}"}, "branch": {"name": "component_private_for_cmake"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2019-04-16T22:19:15.189834+00:00"}, "pull_request": {"type": "pullrequest", "id": 147, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/147.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/147"}}, "title": "Use PRIVATE_FOR to skip cmake dependencies in addition to pkg-config"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/147/comments/98909772.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/147/_/diff#comment-98909772"}}, "parent": {"id": 98882995, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/147/comments/98882995.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/147/_/diff#comment-98882995"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 147, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/147.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/147"}}, "title": "Use PRIVATE_FOR to skip cmake dependencies in addition to pkg-config"}, "content": {"raw": "ign-sensors:\n\n* fails when `libfreeimage-dev` is not installed right before running examples: #!/ignitionrobotics/ign-sensors/commits/db1ef0570ccd2c317c2d99439fd9ce5131aac9f0\n* passes after building ign-cmake from this branch, and rebuilding ign-common3 with `libfreeimage-dev`, then uninstalling it #!/ignitionrobotics/ign-sensors/branch/fix_private_for#diff\n\nso I think that demonstrates the fix", "markup": "markdown", "html": "<p>ign-sensors:</p>\n<ul>\n<li>fails when <code>libfreeimage-dev</code> is not installed right before running examples: <a href=\"#!/ignitionrobotics/ign-sensors/commits/db1ef0570ccd2c317c2d99439fd9ce5131aac9f0\" rel=\"nofollow\" class=\"ap-connect-link\">#!/ignitionrobotics/ign-sensors/commits/db1ef0570ccd2c317c2d99439fd9ce5131aac9f0</a></li>\n<li>passes after building ign-cmake from this branch, and rebuilding ign-common3 with <code>libfreeimage-dev</code>, then uninstalling it <a href=\"#!/ignitionrobotics/ign-sensors/branch/fix_private_for#diff\" rel=\"nofollow\" class=\"ap-connect-link\">#!/ignitionrobotics/ign-sensors/branch/fix_private_for#diff</a></li>\n</ul>\n<p>so I think that demonstrates the fix</p>", "type": "rendered"}, "created_on": "2019-04-16T07:40:41.521258+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2019-04-16T07:40:41.533851+00:00", "type": "pullrequest_comment", "id": 98909772}, "pull_request": {"type": "pullrequest", "id": 147, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/147.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/147"}}, "title": "Use PRIVATE_FOR to skip cmake dependencies in addition to pkg-config"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/147/comments/98905595.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/147/_/diff#comment-98905595"}}, "parent": {"id": 98882995, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/147/comments/98882995.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/147/_/diff#comment-98882995"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 147, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/147.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/147"}}, "title": "Use PRIVATE_FOR to skip cmake dependencies in addition to pkg-config"}, "content": {"raw": "I thought I could just add a fake dependency and a component that never gets built:\n\n~~~\ndiff -r 5ea70693efaf examples/component_deps/CMakeLists.txt\n--- a/examples/component_deps/CMakeLists.txt    Wed Mar 20 18:09:42 2019 +0000\n+++ b/examples/component_deps/CMakeLists.txt    Tue Apr 16 00:11:34 2019 -0700\n@@ -2,7 +2,14 @@\n project(ignition-component_deps VERSION 0.1.0)\n find_package(ignition-cmake2 REQUIRED)\n ign_configure_project()\n+\n+# try to find non-existent package required by component that will never be built\n+# to make sure the non-existent package is not passed as transitive dependency\n+ign_find_package(imaginary_fake_package\n+    REQUIRED_BY never_built\n+    PRIVATE_FOR never_built)\n+\n ign_configure_build(QUIT_IF_BUILD_ERRORS\n-  COMPONENTS child parent)\n+  COMPONENTS child parent never_built)\n ign_create_packages()\n ign_create_docs()\n~~~\n\nbut actually you need to configure the grandparent with the package installed in the system, then try to configure the grandchild with the package unavailable. it's not so easy. I'll just focus on the ign-sensors example, as you suggest", "markup": "markdown", "html": "<p>I thought I could just add a fake dependency and a component that never gets built:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"gh\">diff -r 5ea70693efaf examples/component_deps/CMakeLists.txt</span>\n<span class=\"gd\">--- a/examples/component_deps/CMakeLists.txt    Wed Mar 20 18:09:42 2019 +0000</span>\n<span class=\"gi\">+++ b/examples/component_deps/CMakeLists.txt    Tue Apr 16 00:11:34 2019 -0700</span>\n<span class=\"gu\">@@ -2,7 +2,14 @@</span>\n project(ignition-component_deps VERSION 0.1.0)\n find_package(ignition-cmake2 REQUIRED)\n ign_configure_project()\n<span class=\"gi\">+</span>\n<span class=\"gi\">+# try to find non-existent package required by component that will never be built</span>\n<span class=\"gi\">+# to make sure the non-existent package is not passed as transitive dependency</span>\n<span class=\"gi\">+ign_find_package(imaginary_fake_package</span>\n<span class=\"gi\">+    REQUIRED_BY never_built</span>\n<span class=\"gi\">+    PRIVATE_FOR never_built)</span>\n<span class=\"gi\">+</span>\n ign_configure_build(QUIT_IF_BUILD_ERRORS\n<span class=\"gd\">-  COMPONENTS child parent)</span>\n<span class=\"gi\">+  COMPONENTS child parent never_built)</span>\n ign_create_packages()\n ign_create_docs()\n</pre></div>\n\n\n<p>but actually you need to configure the grandparent with the package installed in the system, then try to configure the grandchild with the package unavailable. it's not so easy. I'll just focus on the ign-sensors example, as you suggest</p>", "type": "rendered"}, "created_on": "2019-04-16T07:13:53.476731+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2019-04-16T07:13:53.497379+00:00", "type": "pullrequest_comment", "id": 98905595}, "pull_request": {"type": "pullrequest", "id": 147, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/147.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/147"}}, "title": "Use PRIVATE_FOR to skip cmake dependencies in addition to pkg-config"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/147/comments/98882995.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/147/_/diff#comment-98882995"}}, "parent": {"id": 98851970, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/147/comments/98851970.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/147/_/diff#comment-98851970"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 147, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/147.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/147"}}, "title": "Use PRIVATE_FOR to skip cmake dependencies in addition to pkg-config"}, "content": {"raw": "A test would be great! But also this PR looks like a very good solution to the problem, and I can't imagine any possible negative side-effects, so I'll approve even without a test. \\(If nothing else, the issue for `ign-sensors` can act as a test case.\\)", "markup": "markdown", "html": "<p>A test would be great! But also this PR looks like a very good solution to the problem, and I can't imagine any possible negative side-effects, so I'll approve even without a test. (If nothing else, the issue for <code>ign-sensors</code> can act as a test case.)</p>", "type": "rendered"}, "created_on": "2019-04-16T01:51:26.580942+00:00", "user": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "updated_on": "2019-04-16T01:51:26.590338+00:00", "type": "pullrequest_comment", "id": 98882995}, "pull_request": {"type": "pullrequest", "id": 147, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/147.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/147"}}, "title": "Use PRIVATE_FOR to skip cmake dependencies in addition to pkg-config"}}, {"approval": {"date": "2019-04-16T01:49:24.322121+00:00", "pullrequest": {"type": "pullrequest", "id": 147, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/147.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/147"}}, "title": "Use PRIVATE_FOR to skip cmake dependencies in addition to pkg-config"}, "user": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}}, "pull_request": {"type": "pullrequest", "id": 147, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/147.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/147"}}, "title": "Use PRIVATE_FOR to skip cmake dependencies in addition to pkg-config"}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/147/comments/98851970.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/147/_/diff#comment-98851970"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 147, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/147.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/147"}}, "title": "Use PRIVATE_FOR to skip cmake dependencies in addition to pkg-config"}, "content": {"raw": "I have an idea for a test; I'll start working on it", "markup": "markdown", "html": "<p>I have an idea for a test; I'll start working on it</p>", "type": "rendered"}, "created_on": "2019-04-15T18:39:33.251089+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2019-04-15T18:39:33.260778+00:00", "type": "pullrequest_comment", "id": 98851970}, "pull_request": {"type": "pullrequest", "id": 147, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/147.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/147"}}, "title": "Use PRIVATE_FOR to skip cmake dependencies in addition to pkg-config"}}, {"update": {"description": "When calling `ign_find_package`, when a component is specified as both `REQUIRED_BY` and `PRIVATE_FOR`, it should not be propagated as a transitive dependency in pkg-config and cmake config files. The code currently handles `PRIVATE_FOR` for pkg-config but not cmake, as noticed in a recent ign-sensors pull request:\r\n\r\n* #!/ignitionrobotics/ign-sensors/pull-requests/51/updating-dependencies/commits\r\n\r\nThe ign-sensors pipeline [installs `libignition-common3-dev`](#!/ignitionrobotics/ign-sensors/src/fe0232e17b05b8ee835c8aac4dd48058956c5288/bitbucket-pipelines.yml?at=update_deps&fileviewer=file-view-default#bitbucket-pipelines.yml-25) but not the graphics sub-component. The pipeline still failed though, wanting to find freeimage, which is [PRIVATE_FOR that component](#!/ignitionrobotics/ign-common/src/357d22cce10e238ce1f257c9be5acb7cfd4a6ed1/CMakeLists.txt?at=default&fileviewer=file-view-default#CMakeLists.txt-79:81).\r\n\r\n* #!/ignitionrobotics/ign-sensors/commits/fe0232e17b05b8ee835c8aac4dd48058956c5288?at=default\r\n\r\nThis sets the `${component}_${PACKAGE_NAME}_PRIVATE` variables earlier, so they can be used by cmake as well as pkg-config, and skips private dependencies for cmake.\r\n\r\nI'm not sure how to write a test for this.", "title": "Use PRIVATE_FOR to skip cmake dependencies in addition to pkg-config", "destination": {"commit": {"hash": "5ea70693efaf", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/commit/5ea70693efaf.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/commits/5ea70693efaf"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake"}, "avatar": {"href": "data/bytebucket.org/ravatar/{3e77bcf7-f260-4cec-a1a0-116b8e298901}ts=default"}}, "type": "repository", "name": "ign-cmake", "full_name": "ignitionrobotics/ign-cmake", "uuid": "{3e77bcf7-f260-4cec-a1a0-116b8e298901}"}, "branch": {"name": "ign-cmake2"}}, "reason": "", "source": {"commit": {"hash": "d64e0467953e", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/commit/d64e0467953e.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/commits/d64e0467953e"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake"}, "avatar": {"href": "data/bytebucket.org/ravatar/{3e77bcf7-f260-4cec-a1a0-116b8e298901}ts=default"}}, "type": "repository", "name": "ign-cmake", "full_name": "ignitionrobotics/ign-cmake", "uuid": "{3e77bcf7-f260-4cec-a1a0-116b8e298901}"}, "branch": {"name": "component_private_for_cmake"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2019-04-15T15:44:04.798494+00:00"}, "pull_request": {"type": "pullrequest", "id": 147, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/147.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/147"}}, "title": "Use PRIVATE_FOR to skip cmake dependencies in addition to pkg-config"}}, {"update": {"description": "When calling `ign_find_package`, when a component is specified as both `REQUIRED_BY` and `PRIVATE_FOR`, it should not be propagated as a transitive dependency in pkg-config and cmake config files. The code currently handles `PRIVATE_FOR` for pkg-config but not cmake, as noticed in a recent ign-sensors pull request:\r\n\r\n* #!/ignitionrobotics/ign-sensors/pull-requests/51/updating-dependencies/commits\r\n\r\nThe ign-sensors pipeline [installs `libignition-common3-dev`](#!/ignitionrobotics/ign-sensors/src/fe0232e17b05b8ee835c8aac4dd48058956c5288/bitbucket-pipelines.yml?at=update_deps&fileviewer=file-view-default#bitbucket-pipelines.yml-25) but not the graphics sub-component. The pipeline still failed though, wanting to find freeimage, which is [PRIVATE_FOR that component](#!/ignitionrobotics/ign-common/src/357d22cce10e238ce1f257c9be5acb7cfd4a6ed1/CMakeLists.txt?at=default&fileviewer=file-view-default#CMakeLists.txt-79:81).\r\n\r\n* #!/ignitionrobotics/ign-sensors/commits/fe0232e17b05b8ee835c8aac4dd48058956c5288?at=default\r\n\r\nThis sets the `${component}_${PACKAGE_NAME}_PRIVATE` variables earlier, so they can be used by cmake as well as pkg-config, and skips private dependencies for cmake.", "title": "Use PRIVATE_FOR to skip cmake dependencies in addition to pkg-config", "destination": {"commit": {"hash": "5ea70693efaf", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/commit/5ea70693efaf.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/commits/5ea70693efaf"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake"}, "avatar": {"href": "data/bytebucket.org/ravatar/{3e77bcf7-f260-4cec-a1a0-116b8e298901}ts=default"}}, "type": "repository", "name": "ign-cmake", "full_name": "ignitionrobotics/ign-cmake", "uuid": "{3e77bcf7-f260-4cec-a1a0-116b8e298901}"}, "branch": {"name": "ign-cmake2"}}, "reason": "", "source": {"commit": {"hash": "d64e0467953e", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/commit/d64e0467953e.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/commits/d64e0467953e"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake"}, "avatar": {"href": "data/bytebucket.org/ravatar/{3e77bcf7-f260-4cec-a1a0-116b8e298901}ts=default"}}, "type": "repository", "name": "ign-cmake", "full_name": "ignitionrobotics/ign-cmake", "uuid": "{3e77bcf7-f260-4cec-a1a0-116b8e298901}"}, "branch": {"name": "component_private_for_cmake"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2019-04-15T15:43:34.863641+00:00"}, "pull_request": {"type": "pullrequest", "id": 147, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/147.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/147"}}, "title": "Use PRIVATE_FOR to skip cmake dependencies in addition to pkg-config"}}, {"update": {"description": "When calling `ign_find_package`, when a component is specified as both `REQUIRED_BY` and `PRIVATE_FOR`, it should not be propagated as a transitive dependency in pkg-config and cmake config files. The code currently handles `PRIVATE_FOR` for pkg-config but not cmake, as noticed in a recent ign-sensors pull request:\r\n\r\n* #!/ignitionrobotics/ign-sensors/pull-requests/51/updating-dependencies/commits\r\n\r\nThe ign-sensors pipeline [installs `libignition-common3-dev`](#!/ignitionrobotics/ign-sensors/src/fe0232e17b05b8ee835c8aac4dd48058956c5288/bitbucket-pipelines.yml?at=update_deps&fileviewer=file-view-default#bitbucket-pipelines.yml-25) but not the graphics sub-component. The pipeline still failed though, wanting to find freeimage, which is [PRIVATE_FOR that component](#!/ignitionrobotics/ign-common/src/357d22cce10e238ce1f257c9be5acb7cfd4a6ed1/CMakeLists.txt?at=default&fileviewer=file-view-default#CMakeLists.txt-79:81).\r\n\r\n* #!/ignitionrobotics/ign-sensors/commits/fe0232e17b05b8ee835c8aac4dd48058956c5288?at=default\r\n\r\nThis sets the `${component}_${PACKAGE_NAME}_PRIVATE` variables earlier, so they can be used by cmake as well as pkg-config, and skips private dependencies for cmake.", "title": "Use PRIVATE_FOR to skip cmake dependencies in addition to pkg-config", "destination": {"commit": {"hash": "5ea70693efaf", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/commit/5ea70693efaf.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/commits/5ea70693efaf"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake"}, "avatar": {"href": "data/bytebucket.org/ravatar/{3e77bcf7-f260-4cec-a1a0-116b8e298901}ts=default"}}, "type": "repository", "name": "ign-cmake", "full_name": "ignitionrobotics/ign-cmake", "uuid": "{3e77bcf7-f260-4cec-a1a0-116b8e298901}"}, "branch": {"name": "ign-cmake2"}}, "reason": "", "source": {"commit": {"hash": "d64e0467953e", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/commit/d64e0467953e.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/commits/d64e0467953e"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake"}, "avatar": {"href": "data/bytebucket.org/ravatar/{3e77bcf7-f260-4cec-a1a0-116b8e298901}ts=default"}}, "type": "repository", "name": "ign-cmake", "full_name": "ignitionrobotics/ign-cmake", "uuid": "{3e77bcf7-f260-4cec-a1a0-116b8e298901}"}, "branch": {"name": "component_private_for_cmake"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2019-04-15T15:43:34.697145+00:00"}, "pull_request": {"type": "pullrequest", "id": 147, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/pullrequests/147.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/pull-requests/147"}}, "title": "Use PRIVATE_FOR to skip cmake dependencies in addition to pkg-config"}}]}