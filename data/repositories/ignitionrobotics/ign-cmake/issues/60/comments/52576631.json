{"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/issues/60/comments/52576631.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/issues/60#comment-52576631"}}, "issue": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake/issues/60.json"}}, "type": "issue", "id": 60, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake"}, "avatar": {"href": "data/bytebucket.org/ravatar/{3e77bcf7-f260-4cec-a1a0-116b8e298901}ts=default"}}, "type": "repository", "name": "ign-cmake", "full_name": "ignitionrobotics/ign-cmake", "uuid": "{3e77bcf7-f260-4cec-a1a0-116b8e298901}"}, "title": "Error evaluating generator expression: $<TARGET_PROPERTY:protobuf::libprotobuf,INTERFACE_INCLUDE_DIRECTORIES> Target \"protobuf::libprotobuf\" not found."}, "content": {"raw": "I added the following before `find_package(ignition-transport4 REQUIRED)`\n\n```\nFIND_PACKAGE(ignition-cmake0 REQUIRED)\n\nmessage(\"PROTOBUF_FOUND Before:${PROTOBUF_FOUND}\")\nmessage(\"Protobuf_FOUND Before:${Protobuf_FOUND}\")\nfind_package(IgnProtobuf REQUIRED)\nmessage(\"PROTOBUF_FOUND After:${PROTOBUF_FOUND}\")\nmessage(\"Protobuf_FOUND After:${Protobuf_FOUND}\"\n```\n\nResults are:\n\n```\nPROTOBUF_FOUND Before:TRUE\nProtobuf_FOUND Before:TRUE\nPROTOBUF_FOUND After:TRUE\nProtobuf_FOUND After:0\n```\n\nMy projects `CMakeLists.txt` is available on github. It\u2019s not a simple structure though and cutting it down to a MWE is a non-trivial matter, so I am not sure how much help it would be. The module where we are finding ignition-transport4 is [here](https://github.com/NUbots/NUbots/blob/zahn/gazebo/module/support/Gazebo/CMakeLists.txt). The point where we find protobuf is in the [top-level file](https://github.com/NUbots/NUbots/blob/zahn/gazebo/CMakeLists.txt#L21), via this [module](https://github.com/NUbots/NUbots/blob/zahn/gazebo/cmake/Modules/SharedLibraries.cmake#L5).\n\nI can confirm that there is some sort of clash between the two detections of protobuf. If I edit [this file](https://github.com/NUbots/NUbots/blob/zahn/gazebo/cmake/Modules/SharedLibraries.cmake) to first find ignition-cmake0 and then IgnProtobuf \\(instead of finding Protobuf\\), everything works as expected. Not sure what could be happening though. \\(I need to revert your suggested PR to make this work though\\).", "markup": "markdown", "html": "<p>I added the following before <code>find_package(ignition-transport4 REQUIRED)</code></p>\n<div class=\"codehilite\"><pre><span></span>FIND_PACKAGE(ignition-cmake0 REQUIRED)\n\nmessage(&quot;PROTOBUF_FOUND Before:<span class=\"cp\">${</span><span class=\"n\">PROTOBUF_FOUND</span><span class=\"cp\">}</span>&quot;)\nmessage(&quot;Protobuf_FOUND Before:<span class=\"cp\">${</span><span class=\"n\">Protobuf_FOUND</span><span class=\"cp\">}</span>&quot;)\nfind_package(IgnProtobuf REQUIRED)\nmessage(&quot;PROTOBUF_FOUND After:<span class=\"cp\">${</span><span class=\"n\">PROTOBUF_FOUND</span><span class=\"cp\">}</span>&quot;)\nmessage(&quot;Protobuf_FOUND After:<span class=\"cp\">${</span><span class=\"n\">Protobuf_FOUND</span><span class=\"cp\">}</span>&quot;\n</pre></div>\n\n\n<p>Results are:</p>\n<div class=\"codehilite\"><pre><span></span>PROTOBUF_FOUND Before:TRUE\nProtobuf_FOUND Before:TRUE\nPROTOBUF_FOUND After:TRUE\nProtobuf_FOUND After:0\n</pre></div>\n\n\n<p>My projects <code>CMakeLists.txt</code> is available on github. It\u2019s not a simple structure though and cutting it down to a MWE is a non-trivial matter, so I am not sure how much help it would be. The module where we are finding ignition-transport4 is <a data-is-external-link=\"true\" href=\"https://github.com/NUbots/NUbots/blob/zahn/gazebo/module/support/Gazebo/CMakeLists.txt\" rel=\"nofollow\">here</a>. The point where we find protobuf is in the <a data-is-external-link=\"true\" href=\"https://github.com/NUbots/NUbots/blob/zahn/gazebo/CMakeLists.txt#L21\" rel=\"nofollow\">top-level file</a>, via this <a data-is-external-link=\"true\" href=\"https://github.com/NUbots/NUbots/blob/zahn/gazebo/cmake/Modules/SharedLibraries.cmake#L5\" rel=\"nofollow\">module</a>.</p>\n<p>I can confirm that there is some sort of clash between the two detections of protobuf. If I edit <a data-is-external-link=\"true\" href=\"https://github.com/NUbots/NUbots/blob/zahn/gazebo/cmake/Modules/SharedLibraries.cmake\" rel=\"nofollow\">this file</a> to first find ignition-cmake0 and then IgnProtobuf (instead of finding Protobuf), everything works as expected. Not sure what could be happening though. (I need to revert your suggested PR to make this work though).</p>", "type": "rendered"}, "created_on": "2019-06-14T06:37:44.270955+00:00", "user": {"display_name": "Alex Biddulph", "uuid": "{7233770a-f9aa-4483-a5ac-99792cc8a1c7}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B7233770a-f9aa-4483-a5ac-99792cc8a1c7%7D"}, "html": {"href": "https://bitbucket.org/%7B7233770a-f9aa-4483-a5ac-99792cc8a1c7%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/6c9212fd2965b7f87428c6e7a3742e27d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsAB-6.png"}}, "nickname": "Bidski", "type": "user", "account_id": "557058:3c43686a-61ba-4e59-a463-54b7b753f6b0"}, "updated_on": "2019-06-14T07:46:25.853518+00:00", "type": "issue_comment", "id": 52576631}