{"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake"}, "avatar": {"href": "data/bytebucket.org/ravatar/{3e77bcf7-f260-4cec-a1a0-116b8e298901}ts=default"}}, "type": "repository", "name": "ign-cmake", "full_name": "ignitionrobotics/ign-cmake", "uuid": "{3e77bcf7-f260-4cec-a1a0-116b8e298901}"}, "links": {"attachments": {"href": "data/repositories/ignitionrobotics/ign-cmake/issues/65/attachments_page=1.json"}, "self": {"href": "data/repositories/ignitionrobotics/ign-cmake/issues/65.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-cmake/issues/65/watch"}, "comments": {"href": "data/repositories/ignitionrobotics/ign-cmake/issues/65/comments_page=1.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/issues/65/ignimporttarget-does-not-work-correctly"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-cmake/issues/65/vote"}}, "reporter": {"display_name": "Silvio Traversaro", "uuid": "{34f404cb-5642-4f27-a032-e04c7143d776}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D"}, "html": {"href": "https://bitbucket.org/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6/578caaa1-056c-45a2-8bf9-bee94c3bebef/128"}}, "nickname": "traversaro", "type": "user", "account_id": "557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6"}, "title": "IgnImportTarget does not work correctly with <project>_LIBRARIES variables that contains link-time keyworks", "component": null, "votes": 0, "watches": 1, "content": {"raw": "# Prerequisites\r\n\r\n* \\[x\\] Put an X between the brackets on this line if you have done all of the following:\r\n\r\n    * Checked the Q&A board for common solutions: [http://answers.gazebosim.org](http://answers.gazebosim.org)\r\n    * Checked that your issue isn't already filed.\r\n    * Checked that there is not already an Ignition package that provides the described functionality: [https://ignitionrobotics.org/libs](https://ignitionrobotics.org/libs)\r\n    \r\n\r\n# Description\r\n\r\nIf a variable `<project>_LIBRARIES` contains a link-type keyword such as `optimized` or `debug` \\(such as \\`optimized;C:/vcpkg/installed/x64-windows/lib/libcurl.lib;debug;C:/vcpkg/installed/x64-windows/debug/lib/libcurl-d.lib\\`, see [https://cmake.org/cmake/help/latest/command/target\\_link\\_libraries.html#overview](https://cmake.org/cmake/help/latest/command/target_link_libraries.html#overview)\\), the `ign_import_target` CMake function does not work correctly. \r\n\r\n# Steps to Reproduce\r\n\r\n1. Install curl via vcpkg \\(that install curl both in Release and in Debug\\) \r\n2. Configure a CMake project with the following code: \r\n\r\n```\r\nfind_package(CURL REQUIRED)\r\nign_import_target(curl\r\n  LIB_VAR CURL_LIBRARIES\r\n  INCLUDE_VAR CURL_INCLUDE_DIRS)\r\n```\r\n\r\n**Expected behavior:**\r\n\r\nThe `curl::curl` is correctly created without any error.\r\n\r\n**Actual behavior:**\r\n\r\n```\r\n-- Found CURL: optimized;C:/vsts/_work/1/s/installed/arm64-windows/lib/libcurl.lib;debug;C:/vsts/_work/1/s/installed/arm64-windows/debug/lib/libcurl-d.lib (found version \"7.65.2-DEV\")  \r\nCMake Error at C:/vsts/_work/1/s/installed/arm64-windows/share/ignition-cmake0/cmake0/IgnImportTarget.cmake:172 (set_target_properties):\r\n  Property INTERFACE_LINK_LIBRARIES may not contain link-type keyword\r\n  \"debug\".  The INTERFACE_LINK_LIBRARIES property may contain\r\n  configuration-sensitive generator-expressions which may be used to specify\r\n  per-configuration rules.\r\nCall Stack (most recent call first):\r\n  C:/vsts/_work/1/s/installed/arm64-windows/share/ignition-cmake0/cmake0/IgnImportTarget.cmake:100 (_ign_sort_libraries)\r\n  C:/vsts/_work/1/s/installed/arm64-windows/share/ignition-cmake0/cmake0/FindIgnCURL.cmake:52 (ign_import_target)\r\n  C:/vsts/_work/1/s/scripts/buildsystems/vcpkg.cmake:256 (_find_package)\r\n  C:/vsts/_work/1/s/installed/arm64-windows/share/ignition-cmake0/cmake0/IgnUtils.cmake:146 (find_package)\r\n  CMakeLists.txt:31 (ign_find_package)\r\n\r\n\r\nCMake Error at C:/vsts/_work/1/s/installed/arm64-windows/share/ignition-cmake0/cmake0/IgnImportTarget.cmake:106 (set_target_properties):\r\n  Property INTERFACE_LINK_LIBRARIES may not contain link-type keyword\r\n  \"optimized\".  The INTERFACE_LINK_LIBRARIES property may contain\r\n  configuration-sensitive generator-expressions which may be used to specify\r\n  per-configuration rules.\r\nCall Stack (most recent call first):\r\n  C:/vsts/_work/1/s/installed/arm64-windows/share/ignition-cmake0/cmake0/FindIgnCURL.cmake:52 (ign_import_target)\r\n  C:/vsts/_work/1/s/scripts/buildsystems/vcpkg.cmake:256 (_find_package)\r\n  C:/vsts/_work/1/s/installed/arm64-windows/share/ignition-cmake0/cmake0/IgnUtils.cmake:146 (find_package)\r\n  CMakeLists.txt:31 (ign_find_package)\r\n\r\n\r\n-- Looking for IgnCURL - found\r\n```\r\n\r\n**Reproduces how often:**\r\n\r\nAll the time. \r\n\r\n# Versions\r\n\r\nignition-cmake0 0.6.1 \r\n\r\n# Additional Information\r\n\r\nProblem emerged in [https://github.com/microsoft/vcpkg/pull/8136#issuecomment-530560128](https://github.com/microsoft/vcpkg/pull/8136#issuecomment-530560128) .", "markup": "markdown", "html": "<h1 id=\"markdown-header-prerequisites\">Prerequisites</h1>\n<ul>\n<li>\n<p>[x] Put an X between the brackets on this line if you have done all of the following:</p>\n<ul>\n<li>Checked the Q&amp;A board for common solutions: <a data-is-external-link=\"true\" href=\"http://answers.gazebosim.org\" rel=\"nofollow\">http://answers.gazebosim.org</a></li>\n<li>Checked that your issue isn't already filed.</li>\n<li>Checked that there is not already an Ignition package that provides the described functionality: <a data-is-external-link=\"true\" href=\"https://ignitionrobotics.org/libs\" rel=\"nofollow\">https://ignitionrobotics.org/libs</a></li>\n</ul>\n</li>\n</ul>\n<h1 id=\"markdown-header-description\">Description</h1>\n<p>If a variable <code>&lt;project&gt;_LIBRARIES</code> contains a link-type keyword such as <code>optimized</code> or <code>debug</code> (such as `optimized;C:/vcpkg/installed/x64-windows/lib/libcurl.lib;debug;C:/vcpkg/installed/x64-windows/debug/lib/libcurl-d.lib`, see <a data-is-external-link=\"true\" href=\"https://cmake.org/cmake/help/latest/command/target_link_libraries.html#overview\" rel=\"nofollow\">https://cmake.org/cmake/help/latest/command/target_link_libraries.html#overview</a>), the <code>ign_import_target</code> CMake function does not work correctly. </p>\n<h1 id=\"markdown-header-steps-to-reproduce\">Steps to Reproduce</h1>\n<ol>\n<li>Install curl via vcpkg (that install curl both in Release and in Debug) </li>\n<li>Configure a CMake project with the following code: </li>\n</ol>\n<div class=\"codehilite\"><pre><span></span>find_package(CURL REQUIRED)\nign_import_target(curl\n  LIB_VAR CURL_LIBRARIES\n  INCLUDE_VAR CURL_INCLUDE_DIRS)\n</pre></div>\n\n\n<p><strong>Expected behavior:</strong></p>\n<p>The <code>curl::curl</code> is correctly created without any error.</p>\n<p><strong>Actual behavior:</strong></p>\n<div class=\"codehilite\"><pre><span></span><span class=\"nt\">--</span> <span class=\"nt\">Found</span> <span class=\"nt\">CURL</span><span class=\"o\">:</span> <span class=\"nt\">optimized</span><span class=\"o\">;</span><span class=\"nt\">C</span><span class=\"o\">:/</span><span class=\"nt\">vsts</span><span class=\"o\">/</span><span class=\"nt\">_work</span><span class=\"o\">/</span><span class=\"nt\">1</span><span class=\"o\">/</span><span class=\"nt\">s</span><span class=\"o\">/</span><span class=\"nt\">installed</span><span class=\"o\">/</span><span class=\"nt\">arm64-windows</span><span class=\"o\">/</span><span class=\"nt\">lib</span><span class=\"o\">/</span><span class=\"nt\">libcurl</span><span class=\"p\">.</span><span class=\"nc\">lib</span><span class=\"o\">;</span><span class=\"nt\">debug</span><span class=\"o\">;</span><span class=\"nt\">C</span><span class=\"o\">:/</span><span class=\"nt\">vsts</span><span class=\"o\">/</span><span class=\"nt\">_work</span><span class=\"o\">/</span><span class=\"nt\">1</span><span class=\"o\">/</span><span class=\"nt\">s</span><span class=\"o\">/</span><span class=\"nt\">installed</span><span class=\"o\">/</span><span class=\"nt\">arm64-windows</span><span class=\"o\">/</span><span class=\"nt\">debug</span><span class=\"o\">/</span><span class=\"nt\">lib</span><span class=\"o\">/</span><span class=\"nt\">libcurl-d</span><span class=\"p\">.</span><span class=\"nc\">lib</span> <span class=\"o\">(</span><span class=\"nt\">found</span> <span class=\"nt\">version</span> <span class=\"s2\">&quot;7.65.2-DEV&quot;</span><span class=\"o\">)</span>  \n<span class=\"nt\">CMake</span> <span class=\"nt\">Error</span> <span class=\"nt\">at</span> <span class=\"nt\">C</span><span class=\"o\">:/</span><span class=\"nt\">vsts</span><span class=\"o\">/</span><span class=\"nt\">_work</span><span class=\"o\">/</span><span class=\"nt\">1</span><span class=\"o\">/</span><span class=\"nt\">s</span><span class=\"o\">/</span><span class=\"nt\">installed</span><span class=\"o\">/</span><span class=\"nt\">arm64-windows</span><span class=\"o\">/</span><span class=\"nt\">share</span><span class=\"o\">/</span><span class=\"nt\">ignition-cmake0</span><span class=\"o\">/</span><span class=\"nt\">cmake0</span><span class=\"o\">/</span><span class=\"nt\">IgnImportTarget</span><span class=\"p\">.</span><span class=\"nc\">cmake</span><span class=\"p\">:</span><span class=\"nd\">172</span> <span class=\"o\">(</span><span class=\"nt\">set_target_properties</span><span class=\"o\">):</span>\n  <span class=\"nt\">Property</span> <span class=\"nt\">INTERFACE_LINK_LIBRARIES</span> <span class=\"nt\">may</span> <span class=\"nt\">not</span> <span class=\"nt\">contain</span> <span class=\"nt\">link-type</span> <span class=\"nt\">keyword</span>\n  <span class=\"s2\">&quot;debug&quot;</span><span class=\"o\">.</span>  <span class=\"nt\">The</span> <span class=\"nt\">INTERFACE_LINK_LIBRARIES</span> <span class=\"nt\">property</span> <span class=\"nt\">may</span> <span class=\"nt\">contain</span>\n  <span class=\"nt\">configuration-sensitive</span> <span class=\"nt\">generator-expressions</span> <span class=\"nt\">which</span> <span class=\"nt\">may</span> <span class=\"nt\">be</span> <span class=\"nt\">used</span> <span class=\"nt\">to</span> <span class=\"nt\">specify</span>\n  <span class=\"nt\">per-configuration</span> <span class=\"nt\">rules</span><span class=\"o\">.</span>\n<span class=\"nt\">Call</span> <span class=\"nt\">Stack</span> <span class=\"o\">(</span><span class=\"nt\">most</span> <span class=\"nt\">recent</span> <span class=\"nt\">call</span> <span class=\"nt\">first</span><span class=\"o\">):</span>\n  <span class=\"nt\">C</span><span class=\"o\">:/</span><span class=\"nt\">vsts</span><span class=\"o\">/</span><span class=\"nt\">_work</span><span class=\"o\">/</span><span class=\"nt\">1</span><span class=\"o\">/</span><span class=\"nt\">s</span><span class=\"o\">/</span><span class=\"nt\">installed</span><span class=\"o\">/</span><span class=\"nt\">arm64-windows</span><span class=\"o\">/</span><span class=\"nt\">share</span><span class=\"o\">/</span><span class=\"nt\">ignition-cmake0</span><span class=\"o\">/</span><span class=\"nt\">cmake0</span><span class=\"o\">/</span><span class=\"nt\">IgnImportTarget</span><span class=\"p\">.</span><span class=\"nc\">cmake</span><span class=\"p\">:</span><span class=\"nd\">100</span> <span class=\"o\">(</span><span class=\"nt\">_ign_sort_libraries</span><span class=\"o\">)</span>\n  <span class=\"nt\">C</span><span class=\"o\">:/</span><span class=\"nt\">vsts</span><span class=\"o\">/</span><span class=\"nt\">_work</span><span class=\"o\">/</span><span class=\"nt\">1</span><span class=\"o\">/</span><span class=\"nt\">s</span><span class=\"o\">/</span><span class=\"nt\">installed</span><span class=\"o\">/</span><span class=\"nt\">arm64-windows</span><span class=\"o\">/</span><span class=\"nt\">share</span><span class=\"o\">/</span><span class=\"nt\">ignition-cmake0</span><span class=\"o\">/</span><span class=\"nt\">cmake0</span><span class=\"o\">/</span><span class=\"nt\">FindIgnCURL</span><span class=\"p\">.</span><span class=\"nc\">cmake</span><span class=\"p\">:</span><span class=\"nd\">52</span> <span class=\"o\">(</span><span class=\"nt\">ign_import_target</span><span class=\"o\">)</span>\n  <span class=\"nt\">C</span><span class=\"o\">:/</span><span class=\"nt\">vsts</span><span class=\"o\">/</span><span class=\"nt\">_work</span><span class=\"o\">/</span><span class=\"nt\">1</span><span class=\"o\">/</span><span class=\"nt\">s</span><span class=\"o\">/</span><span class=\"nt\">scripts</span><span class=\"o\">/</span><span class=\"nt\">buildsystems</span><span class=\"o\">/</span><span class=\"nt\">vcpkg</span><span class=\"p\">.</span><span class=\"nc\">cmake</span><span class=\"p\">:</span><span class=\"nd\">256</span> <span class=\"o\">(</span><span class=\"nt\">_find_package</span><span class=\"o\">)</span>\n  <span class=\"nt\">C</span><span class=\"o\">:/</span><span class=\"nt\">vsts</span><span class=\"o\">/</span><span class=\"nt\">_work</span><span class=\"o\">/</span><span class=\"nt\">1</span><span class=\"o\">/</span><span class=\"nt\">s</span><span class=\"o\">/</span><span class=\"nt\">installed</span><span class=\"o\">/</span><span class=\"nt\">arm64-windows</span><span class=\"o\">/</span><span class=\"nt\">share</span><span class=\"o\">/</span><span class=\"nt\">ignition-cmake0</span><span class=\"o\">/</span><span class=\"nt\">cmake0</span><span class=\"o\">/</span><span class=\"nt\">IgnUtils</span><span class=\"p\">.</span><span class=\"nc\">cmake</span><span class=\"p\">:</span><span class=\"nd\">146</span> <span class=\"o\">(</span><span class=\"nt\">find_package</span><span class=\"o\">)</span>\n  <span class=\"nt\">CMakeLists</span><span class=\"p\">.</span><span class=\"nc\">txt</span><span class=\"p\">:</span><span class=\"nd\">31</span> <span class=\"o\">(</span><span class=\"nt\">ign_find_package</span><span class=\"o\">)</span>\n\n\n<span class=\"nt\">CMake</span> <span class=\"nt\">Error</span> <span class=\"nt\">at</span> <span class=\"nt\">C</span><span class=\"o\">:/</span><span class=\"nt\">vsts</span><span class=\"o\">/</span><span class=\"nt\">_work</span><span class=\"o\">/</span><span class=\"nt\">1</span><span class=\"o\">/</span><span class=\"nt\">s</span><span class=\"o\">/</span><span class=\"nt\">installed</span><span class=\"o\">/</span><span class=\"nt\">arm64-windows</span><span class=\"o\">/</span><span class=\"nt\">share</span><span class=\"o\">/</span><span class=\"nt\">ignition-cmake0</span><span class=\"o\">/</span><span class=\"nt\">cmake0</span><span class=\"o\">/</span><span class=\"nt\">IgnImportTarget</span><span class=\"p\">.</span><span class=\"nc\">cmake</span><span class=\"p\">:</span><span class=\"nd\">106</span> <span class=\"o\">(</span><span class=\"nt\">set_target_properties</span><span class=\"o\">):</span>\n  <span class=\"nt\">Property</span> <span class=\"nt\">INTERFACE_LINK_LIBRARIES</span> <span class=\"nt\">may</span> <span class=\"nt\">not</span> <span class=\"nt\">contain</span> <span class=\"nt\">link-type</span> <span class=\"nt\">keyword</span>\n  <span class=\"s2\">&quot;optimized&quot;</span><span class=\"o\">.</span>  <span class=\"nt\">The</span> <span class=\"nt\">INTERFACE_LINK_LIBRARIES</span> <span class=\"nt\">property</span> <span class=\"nt\">may</span> <span class=\"nt\">contain</span>\n  <span class=\"nt\">configuration-sensitive</span> <span class=\"nt\">generator-expressions</span> <span class=\"nt\">which</span> <span class=\"nt\">may</span> <span class=\"nt\">be</span> <span class=\"nt\">used</span> <span class=\"nt\">to</span> <span class=\"nt\">specify</span>\n  <span class=\"nt\">per-configuration</span> <span class=\"nt\">rules</span><span class=\"o\">.</span>\n<span class=\"nt\">Call</span> <span class=\"nt\">Stack</span> <span class=\"o\">(</span><span class=\"nt\">most</span> <span class=\"nt\">recent</span> <span class=\"nt\">call</span> <span class=\"nt\">first</span><span class=\"o\">):</span>\n  <span class=\"nt\">C</span><span class=\"o\">:/</span><span class=\"nt\">vsts</span><span class=\"o\">/</span><span class=\"nt\">_work</span><span class=\"o\">/</span><span class=\"nt\">1</span><span class=\"o\">/</span><span class=\"nt\">s</span><span class=\"o\">/</span><span class=\"nt\">installed</span><span class=\"o\">/</span><span class=\"nt\">arm64-windows</span><span class=\"o\">/</span><span class=\"nt\">share</span><span class=\"o\">/</span><span class=\"nt\">ignition-cmake0</span><span class=\"o\">/</span><span class=\"nt\">cmake0</span><span class=\"o\">/</span><span class=\"nt\">FindIgnCURL</span><span class=\"p\">.</span><span class=\"nc\">cmake</span><span class=\"p\">:</span><span class=\"nd\">52</span> <span class=\"o\">(</span><span class=\"nt\">ign_import_target</span><span class=\"o\">)</span>\n  <span class=\"nt\">C</span><span class=\"o\">:/</span><span class=\"nt\">vsts</span><span class=\"o\">/</span><span class=\"nt\">_work</span><span class=\"o\">/</span><span class=\"nt\">1</span><span class=\"o\">/</span><span class=\"nt\">s</span><span class=\"o\">/</span><span class=\"nt\">scripts</span><span class=\"o\">/</span><span class=\"nt\">buildsystems</span><span class=\"o\">/</span><span class=\"nt\">vcpkg</span><span class=\"p\">.</span><span class=\"nc\">cmake</span><span class=\"p\">:</span><span class=\"nd\">256</span> <span class=\"o\">(</span><span class=\"nt\">_find_package</span><span class=\"o\">)</span>\n  <span class=\"nt\">C</span><span class=\"o\">:/</span><span class=\"nt\">vsts</span><span class=\"o\">/</span><span class=\"nt\">_work</span><span class=\"o\">/</span><span class=\"nt\">1</span><span class=\"o\">/</span><span class=\"nt\">s</span><span class=\"o\">/</span><span class=\"nt\">installed</span><span class=\"o\">/</span><span class=\"nt\">arm64-windows</span><span class=\"o\">/</span><span class=\"nt\">share</span><span class=\"o\">/</span><span class=\"nt\">ignition-cmake0</span><span class=\"o\">/</span><span class=\"nt\">cmake0</span><span class=\"o\">/</span><span class=\"nt\">IgnUtils</span><span class=\"p\">.</span><span class=\"nc\">cmake</span><span class=\"p\">:</span><span class=\"nd\">146</span> <span class=\"o\">(</span><span class=\"nt\">find_package</span><span class=\"o\">)</span>\n  <span class=\"nt\">CMakeLists</span><span class=\"p\">.</span><span class=\"nc\">txt</span><span class=\"p\">:</span><span class=\"nd\">31</span> <span class=\"o\">(</span><span class=\"nt\">ign_find_package</span><span class=\"o\">)</span>\n\n\n<span class=\"nt\">--</span> <span class=\"nt\">Looking</span> <span class=\"nt\">for</span> <span class=\"nt\">IgnCURL</span> <span class=\"nt\">-</span> <span class=\"nt\">found</span>\n</pre></div>\n\n\n<p><strong>Reproduces how often:</strong></p>\n<p>All the time. </p>\n<h1 id=\"markdown-header-versions\">Versions</h1>\n<p>ignition-cmake0 0.6.1 </p>\n<h1 id=\"markdown-header-additional-information\">Additional Information</h1>\n<p>Problem emerged in <a data-is-external-link=\"true\" href=\"https://github.com/microsoft/vcpkg/pull/8136#issuecomment-530560128\" rel=\"nofollow\">https://github.com/microsoft/vcpkg/pull/8136#issuecomment-530560128</a> .</p>", "type": "rendered"}, "assignee": null, "state": "new", "version": null, "edited_on": null, "created_on": "2019-09-14T13:27:23.235890+00:00", "milestone": null, "updated_on": "2019-09-14T13:27:23.235890+00:00", "type": "issue", "id": 65}