{"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake"}, "avatar": {"href": "data/bytebucket.org/ravatar/{3e77bcf7-f260-4cec-a1a0-116b8e298901}ts=default"}}, "type": "repository", "name": "ign-cmake", "full_name": "ignitionrobotics/ign-cmake", "uuid": "{3e77bcf7-f260-4cec-a1a0-116b8e298901}"}, "links": {"attachments": {"href": "data/repositories/ignitionrobotics/ign-cmake/issues/61/attachments_page=1.json"}, "self": {"href": "data/repositories/ignitionrobotics/ign-cmake/issues/61.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-cmake/issues/61/watch"}, "comments": {"href": "data/repositories/ignitionrobotics/ign-cmake/issues/61/comments_page=1.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/issues/61/ignition_cmake_version_major-changes-after"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-cmake/issues/61/vote"}}, "reporter": {"display_name": "Brian Marchi", "uuid": "{9f5fd161-7ec9-482b-8aeb-cadf55822196}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9f5fd161-7ec9-482b-8aeb-cadf55822196%7D"}, "html": {"href": "https://bitbucket.org/%7B9f5fd161-7ec9-482b-8aeb-cadf55822196%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/fb746a0b0e811e5b44ff336b6eceef98d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsBM-6.png"}}, "nickname": "BEMarchi", "type": "user", "account_id": "5c7ff8ef007e34313a3e587b"}, "title": "IGNITION_CMAKE_VERSION_MAJOR changes after finding packages that use newer version of ign-cmake", "component": null, "votes": 0, "watches": 1, "content": {"raw": "## **Prerequisites**\r\n\r\n\\* \\[X\\] Put an X between the brackets on this line if you have done all of the following:  \r\n\\* Checked the QA board for common solutions: http://answers.gazebosim.org  \r\n\\* Checked that your issue isn't already filed.  \r\n\\* Checked that there is not already an Ignition package that provides the described functionality: https://ignitionrobotics.org/libs\r\n\r\n## **Description**\r\n\r\nWhen trying to use a package that links against cmake2 and another one that links against cmake1, I get the following:\r\n\r\n```\r\nCMake Error at CMakeLists.txt:13 (add_library):\r\nTarget example links to target ignition-cmake1::utilities; but the\r\ntarget was not found. Perhaps a find_package() call is missing for an\r\nIMPORTED target, or an ALIAS target is missing?\r\n```\r\n\r\n---\r\n\r\n## **Steps to Reproduce**\r\n\r\n1\\. Clone ign-cmake1  \r\n2\\. Clone ign-cmake2  \r\n3\\. Clone ign-common3  \r\n4\\. Clone ign-math6  \r\n5\\. Clone ign-msgs2 branch #!/ignitionrobotics/ign-msgs/pull-requests/138/use-math6  \r\n6\\. Clone ign-transport5  \r\n7\\. Create a project with a CMakeLists.txt like this:\r\n\r\n```\r\ncmake_minimum_required(VERSION 3.5 FATAL_ERROR)\r\nproject(example_project LANGUAGES C CXX VERSION 3.0.0)\r\nfind_package(ignition-common3 REQUIRED COMPONENTS graphics)\r\nfind_package(ignition-math6 REQUIRED)\r\nfind_package(ignition-msgs2 REQUIRED)\r\nfind_package(ignition-transport5 REQUIRED COMPONENTS log)\r\n\r\nadd_library(example\r\n  example.cc)\r\ntarget_link_libraries(example\r\n    ignition-common3::ignition-common3\r\n    ignition-transport5::core\r\n    ignition-transport5::log\r\n    ignition-msgs2::ignition-msgs2)\r\ninstall(TARGETS example\r\nRUNTIME DESTINATION bin\r\nLIBRARY DESTINATION lib\r\nARCHIVE DESTINATION lib)\r\n```\r\n\r\n\u200c\r\n\r\n8\\. Create an empty **example.cc** file living in the same dir as the above **CMakeLists.txt**\r\n\r\n9\\. **Build** and **install** all projects\r\n\r\n## **Expected behavior:**\r\n\r\nLibrary example should build normally\r\n\r\n## **Actual behavior:**\r\n\r\nLibrary example doesn\u2019t build\r\n\r\n## **Reproduces how often:**\r\n\r\nAlways\r\n\r\n## **Versions**\r\n\r\nign-cmake2, ign-cmake1, ign-transport5, ign-msgs2 branch msgs2\\_use\\_math6, ign-common3.  \r\nOS: Ubuntu 18.04", "markup": "markdown", "html": "<h2 id=\"markdown-header-prerequisites\"><strong>Prerequisites</strong></h2>\n<p>* [X] Put an X between the brackets on this line if you have done all of the following:<br />\n* Checked the QA board for common solutions: <a href=\"http://answers.gazebosim.org\" rel=\"nofollow\" class=\"ap-connect-link\">http://answers.gazebosim.org</a><br />\n* Checked that your issue isn't already filed.<br />\n* Checked that there is not already an Ignition package that provides the described functionality: <a href=\"https://ignitionrobotics.org/libs\" rel=\"nofollow\" class=\"ap-connect-link\">https://ignitionrobotics.org/libs</a></p>\n<h2 id=\"markdown-header-description\"><strong>Description</strong></h2>\n<p>When trying to use a package that links against cmake2 and another one that links against cmake1, I get the following:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"nt\">CMake</span> <span class=\"nt\">Error</span> <span class=\"nt\">at</span> <span class=\"nt\">CMakeLists</span><span class=\"p\">.</span><span class=\"nc\">txt</span><span class=\"p\">:</span><span class=\"nd\">13</span> <span class=\"o\">(</span><span class=\"nt\">add_library</span><span class=\"o\">):</span>\n<span class=\"nt\">Target</span> <span class=\"nt\">example</span> <span class=\"nt\">links</span> <span class=\"nt\">to</span> <span class=\"nt\">target</span> <span class=\"nt\">ignition-cmake1</span><span class=\"p\">::</span><span class=\"nd\">utilities</span><span class=\"o\">;</span> <span class=\"nt\">but</span> <span class=\"nt\">the</span>\n<span class=\"nt\">target</span> <span class=\"nt\">was</span> <span class=\"nt\">not</span> <span class=\"nt\">found</span><span class=\"o\">.</span> <span class=\"nt\">Perhaps</span> <span class=\"nt\">a</span> <span class=\"nt\">find_package</span><span class=\"o\">()</span> <span class=\"nt\">call</span> <span class=\"nt\">is</span> <span class=\"nt\">missing</span> <span class=\"nt\">for</span> <span class=\"nt\">an</span>\n<span class=\"nt\">IMPORTED</span> <span class=\"nt\">target</span><span class=\"o\">,</span> <span class=\"nt\">or</span> <span class=\"nt\">an</span> <span class=\"nt\">ALIAS</span> <span class=\"nt\">target</span> <span class=\"nt\">is</span> <span class=\"nt\">missing</span><span class=\"o\">?</span>\n</pre></div>\n\n\n<hr />\n<h2 id=\"markdown-header-steps-to-reproduce\"><strong>Steps to Reproduce</strong></h2>\n<p>1. Clone ign-cmake1<br />\n2. Clone ign-cmake2<br />\n3. Clone ign-common3<br />\n4. Clone ign-math6<br />\n5. Clone ign-msgs2 branch <a href=\"#!/ignitionrobotics/ign-msgs/pull-requests/138/use-math6\" rel=\"nofollow\" class=\"ap-connect-link\">#!/ignitionrobotics/ign-msgs/pull-requests/138/use-math6</a><br />\n6. Clone ign-transport5<br />\n7. Create a project with a CMakeLists.txt like this:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"nb\">cmake_minimum_required</span><span class=\"p\">(</span><span class=\"s\">VERSION</span> <span class=\"s\">3.5</span> <span class=\"s\">FATAL_ERROR</span><span class=\"p\">)</span>\n<span class=\"nb\">project</span><span class=\"p\">(</span><span class=\"s\">example_project</span> <span class=\"s\">LANGUAGES</span> <span class=\"s\">C</span> <span class=\"s\">CXX</span> <span class=\"s\">VERSION</span> <span class=\"s\">3.0.0</span><span class=\"p\">)</span>\n<span class=\"nb\">find_package</span><span class=\"p\">(</span><span class=\"s\">ignition-common3</span> <span class=\"s\">REQUIRED</span> <span class=\"s\">COMPONENTS</span> <span class=\"s\">graphics</span><span class=\"p\">)</span>\n<span class=\"nb\">find_package</span><span class=\"p\">(</span><span class=\"s\">ignition-math6</span> <span class=\"s\">REQUIRED</span><span class=\"p\">)</span>\n<span class=\"nb\">find_package</span><span class=\"p\">(</span><span class=\"s\">ignition-msgs2</span> <span class=\"s\">REQUIRED</span><span class=\"p\">)</span>\n<span class=\"nb\">find_package</span><span class=\"p\">(</span><span class=\"s\">ignition-transport5</span> <span class=\"s\">REQUIRED</span> <span class=\"s\">COMPONENTS</span> <span class=\"s\">log</span><span class=\"p\">)</span>\n\n<span class=\"nb\">add_library</span><span class=\"p\">(</span><span class=\"s\">example</span>\n  <span class=\"s\">example.cc</span><span class=\"p\">)</span>\n<span class=\"nb\">target_link_libraries</span><span class=\"p\">(</span><span class=\"s\">example</span>\n    <span class=\"s\">ignition-common3::ignition-common3</span>\n    <span class=\"s\">ignition-transport5::core</span>\n    <span class=\"s\">ignition-transport5::log</span>\n    <span class=\"s\">ignition-msgs2::ignition-msgs2</span><span class=\"p\">)</span>\n<span class=\"nb\">install</span><span class=\"p\">(</span><span class=\"s\">TARGETS</span> <span class=\"s\">example</span>\n<span class=\"s\">RUNTIME</span> <span class=\"s\">DESTINATION</span> <span class=\"s\">bin</span>\n<span class=\"s\">LIBRARY</span> <span class=\"s\">DESTINATION</span> <span class=\"s\">lib</span>\n<span class=\"s\">ARCHIVE</span> <span class=\"s\">DESTINATION</span> <span class=\"s\">lib</span><span class=\"p\">)</span>\n</pre></div>\n\n\n<p>\u200c</p>\n<p>8. Create an empty <strong>example.cc</strong> file living in the same dir as the above <strong>CMakeLists.txt</strong></p>\n<p>9. <strong>Build</strong> and <strong>install</strong> all projects</p>\n<h2 id=\"markdown-header-expected-behavior\"><strong>Expected behavior:</strong></h2>\n<p>Library example should build normally</p>\n<h2 id=\"markdown-header-actual-behavior\"><strong>Actual behavior:</strong></h2>\n<p>Library example doesn\u2019t build</p>\n<h2 id=\"markdown-header-reproduces-how-often\"><strong>Reproduces how often:</strong></h2>\n<p>Always</p>\n<h2 id=\"markdown-header-versions\"><strong>Versions</strong></h2>\n<p>ign-cmake2, ign-cmake1, ign-transport5, ign-msgs2 branch msgs2_use_math6, ign-common3.<br />\nOS: Ubuntu 18.04</p>", "type": "rendered"}, "assignee": null, "state": "new", "version": null, "edited_on": null, "created_on": "2019-07-04T15:44:51.309215+00:00", "milestone": null, "updated_on": "2019-07-11T21:01:45.011392+00:00", "type": "issue", "id": 61}