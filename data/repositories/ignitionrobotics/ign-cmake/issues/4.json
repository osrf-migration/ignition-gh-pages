{"priority": "minor", "kind": "proposal", "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-cmake.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake"}, "avatar": {"href": "data/bytebucket.org/ravatar/{3e77bcf7-f260-4cec-a1a0-116b8e298901}ts=default"}}, "type": "repository", "name": "ign-cmake", "full_name": "ignitionrobotics/ign-cmake", "uuid": "{3e77bcf7-f260-4cec-a1a0-116b8e298901}"}, "links": {"attachments": {"href": "data/repositories/ignitionrobotics/ign-cmake/issues/4/attachments_page=1.json"}, "self": {"href": "data/repositories/ignitionrobotics/ign-cmake/issues/4.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-cmake/issues/4/watch"}, "comments": {"href": "data/repositories/ignitionrobotics/ign-cmake/issues/4/comments_page=1.json"}, "html": {"href": "#!/ignitionrobotics/ign-cmake/issues/4/find-one-of-multiple-packages"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-cmake/issues/4/vote"}}, "reporter": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}, "title": "Find one of multiple packages", "component": null, "votes": 0, "watches": 1, "content": {"raw": "Proposal\r\n\r\n```CMake\r\n# find ignition-math3, or ignition-math4\r\n# copy all variables prefixed with the found project name into variables prefixed with ${OUTPUT_VAR}\r\nign_find_package(\r\n    OUTPUT_VAR\r\n        some-math-version\r\n    ONE_OF\r\n        ignition-math4\r\n        ignition-math3\r\n    REQUIRED)\r\n\r\n # ...\r\n\r\ntarget_link_libraries(my_lib ${some-math-version_LIBRARIES})\r\n```\r\n\r\nDeveloping on the default branch of ignition projects has one minor annoyance that occurs fairly frequently. The major version being bumped on one branch breaks the build of every downstream project. If the upstream project doesn't have a release then downstream must choose between everything-from-source builds being broken, or CI being broken. To get around this some projects have been finding either ignition-math3 or ignition-math4.", "markup": "markdown", "html": "<p>Proposal</p>\n<div class=\"codehilite language-CMake\"><pre><span></span><span class=\"c\"># find ignition-math3, or ignition-math4</span>\n<span class=\"c\"># copy all variables prefixed with the found project name into variables prefixed with ${OUTPUT_VAR}</span>\n<span class=\"nb\">ign_find_package</span><span class=\"p\">(</span>\n    <span class=\"s\">OUTPUT_VAR</span>\n        <span class=\"s\">some-math-version</span>\n    <span class=\"s\">ONE_OF</span>\n        <span class=\"s\">ignition-math4</span>\n        <span class=\"s\">ignition-math3</span>\n    <span class=\"s\">REQUIRED</span><span class=\"p\">)</span>\n\n <span class=\"c\"># ...</span>\n\n<span class=\"nb\">target_link_libraries</span><span class=\"p\">(</span><span class=\"s\">my_lib</span> <span class=\"o\">${</span><span class=\"nv\">some-math-version_LIBRARIES</span><span class=\"o\">}</span><span class=\"p\">)</span>\n</pre></div>\n\n\n<p>Developing on the default branch of ignition projects has one minor annoyance that occurs fairly frequently. The major version being bumped on one branch breaks the build of every downstream project. If the upstream project doesn't have a release then downstream must choose between everything-from-source builds being broken, or CI being broken. To get around this some projects have been finding either ignition-math3 or ignition-math4.</p>", "type": "rendered"}, "assignee": null, "state": "new", "version": null, "edited_on": null, "created_on": "2017-10-20T21:23:53.829125+00:00", "milestone": null, "updated_on": "2017-10-20T22:23:13.058120+00:00", "type": "issue", "id": 4}