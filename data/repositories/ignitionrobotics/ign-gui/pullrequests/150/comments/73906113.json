{"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gui/pullrequests/150/comments/73906113.json"}, "html": {"href": "#!/ignitionrobotics/ign-gui/pull-requests/150/_/diff#comment-73906113"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 150, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gui/pullrequests/150.json"}, "html": {"href": "#!/ignitionrobotics/ign-gui/pull-requests/150"}}, "title": "Realtime factor display plugin: Attach RTF text to Camera of the Scene"}, "content": {"raw": "I switched to using a timer in [#!/ignitionrobotics/ign-gui/commits/55df1c5d24b5786d89a3e57f81daa4bd32e97f2a?at=default](#!/ignitionrobotics/ign-gui/commits/55df1c5d24b5786d89a3e57f81daa4bd32e97f2a?at=default). it\u2019s low frequency because it doesn\u2019t need to be very fast to respond to image resizes.\n\n![](data/bitbucket.org/repo/64K5zaR/images/3837963032-RealtimeFactorDisplay_overlay_timer.gif)\n\u200c\n\nCalling UpdateTextPose is necessary when the image is resized, and also when the plugin first loads. Just after the Scene3D\u2019s camera is created, a resize event is called, where the camera properties are set to match what is present in the Scene3D widget. Without the timer, the text doesn\u2019t get positioned correctly on startup of the RealtimeFactorDisplay plugin.\n\nThis is what happens on startup with one camera, if UpdateTextPose is only called once from the display plugin\u2019s initialisation:\n\n`In Scene3d load. Camera dimensions: 640, 480`\n\n`In Scene3d load: Camera aspect ratio: 1.33333`\n\n`UpdateTextPose using camera dimensions: 640, 480`\n\n`UpdateTextPose using camera aspect ratio: 1.33333`\n\n`In Scene3d resize event. Camera dimensions: 640, 480`\n\n`In Scene3d resize event. Camera aspect ratio: 1.01144`\n\nThe values after the resize event are the correct values. I\u2019ll add a comment explaining that the timer works around this.", "markup": "markdown", "html": "<p>I switched to using a timer in <a data-is-external-link=\"true\" href=\"#!/ignitionrobotics/ign-gui/commits/55df1c5d24b5786d89a3e57f81daa4bd32e97f2a?at=default\" rel=\"nofollow\">#!/ignitionrobotics/ign-gui/commits/55df1c5d24b5786d89a3e57f81daa4bd32e97f2a?at=default</a>. it\u2019s low frequency because it doesn\u2019t need to be very fast to respond to image resizes.</p>\n<p><img alt=\"\" src=\"data/bitbucket.org/repo/64K5zaR/images/3837963032-RealtimeFactorDisplay_overlay_timer.gif\" />\n\u200c</p>\n<p>Calling UpdateTextPose is necessary when the image is resized, and also when the plugin first loads. Just after the Scene3D\u2019s camera is created, a resize event is called, where the camera properties are set to match what is present in the Scene3D widget. Without the timer, the text doesn\u2019t get positioned correctly on startup of the RealtimeFactorDisplay plugin.</p>\n<p>This is what happens on startup with one camera, if UpdateTextPose is only called once from the display plugin\u2019s initialisation:</p>\n<p><code>In Scene3d load. Camera dimensions: 640, 480</code></p>\n<p><code>In Scene3d load: Camera aspect ratio: 1.33333</code></p>\n<p><code>UpdateTextPose using camera dimensions: 640, 480</code></p>\n<p><code>UpdateTextPose using camera aspect ratio: 1.33333</code></p>\n<p><code>In Scene3d resize event. Camera dimensions: 640, 480</code></p>\n<p><code>In Scene3d resize event. Camera aspect ratio: 1.01144</code></p>\n<p>The values after the resize event are the correct values. I\u2019ll add a comment explaining that the timer works around this.</p>", "type": "rendered"}, "created_on": "2018-08-23T22:46:50.359743+00:00", "user": {"display_name": "Deanna Hood", "uuid": "{40d490b4-7de9-4c89-ac1c-2219a22057eb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B40d490b4-7de9-4c89-ac1c-2219a22057eb%7D"}, "html": {"href": "https://bitbucket.org/%7B40d490b4-7de9-4c89-ac1c-2219a22057eb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:ec666897-79d8-48b4-ae27-4f0e9e56f5b5/f7b56737-eb1f-481f-beb1-50c179565cf4/128"}}, "nickname": "d_hood", "type": "user", "account_id": "557058:ec666897-79d8-48b4-ae27-4f0e9e56f5b5"}, "updated_on": "2018-08-23T22:46:50.367324+00:00", "type": "pullrequest_comment", "id": 73906113}