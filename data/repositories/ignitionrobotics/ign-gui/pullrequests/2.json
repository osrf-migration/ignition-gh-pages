{"rendered": {"description": {"raw": "This fixes a crash during `ignition::gui::stop()` caused by a double free on plugins. Qt [steals ownership](http://doc.qt.io/qt-5/objecttrees.html) of all `QWidget` given to it, and deletes them when the window containing the widgets is closed. When `stop()` calls `g_plugins.clear()` it causes the destructor to be called on objects that have already been deleted by Qt. This fixes it by releasing ownership from the smart pointers after giving them to Qt.", "markup": "markdown", "html": "<p>This fixes a crash during <code>ignition::gui::stop()</code> caused by a double free on plugins. Qt <a data-is-external-link=\"true\" href=\"http://doc.qt.io/qt-5/objecttrees.html\" rel=\"nofollow\">steals ownership</a> of all <code>QWidget</code> given to it, and deletes them when the window containing the widgets is closed. When <code>stop()</code> calls <code>g_plugins.clear()</code> it causes the destructor to be called on objects that have already been deleted by Qt. This fixes it by releasing ownership from the smart pointers after giving them to Qt.</p>", "type": "rendered"}, "title": {"raw": "Remove double-free on plugins after giving ownership to Qt", "markup": "markdown", "html": "<p>Remove double-free on plugins after giving ownership to Qt</p>", "type": "rendered"}}, "type": "pullrequest", "description": "This fixes a crash during `ignition::gui::stop()` caused by a double free on plugins. Qt [steals ownership](http://doc.qt.io/qt-5/objecttrees.html) of all `QWidget` given to it, and deletes them when the window containing the widgets is closed. When `stop()` calls `g_plugins.clear()` it causes the destructor to be called on objects that have already been deleted by Qt. This fixes it by releasing ownership from the smart pointers after giving them to Qt.", "links": {"decline": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-gui/pullrequests/2/decline"}, "diffstat": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-gui/diffstat/ignitionrobotics/ign-gui:3b19303e9258%0Da1422e465de5?from_pullrequest_id=2"}, "commits": {"href": "data/repositories/ignitionrobotics/ign-gui/pullrequests/2/commits.json"}, "self": {"href": "data/repositories/ignitionrobotics/ign-gui/pullrequests/2.json"}, "comments": {"href": "data/repositories/ignitionrobotics/ign-gui/pullrequests/2/comments_page=1.json"}, "merge": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-gui/pullrequests/2/merge"}, "html": {"href": "#!/ignitionrobotics/ign-gui/pull-requests/2"}, "activity": {"href": "data/repositories/ignitionrobotics/ign-gui/pullrequests/2/activity.json"}, "diff": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-gui/diff/ignitionrobotics/ign-gui:3b19303e9258%0Da1422e465de5?from_pullrequest_id=2"}, "approve": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-gui/pullrequests/2/approve"}, "statuses": {"href": "data/repositories/ignitionrobotics/ign-gui/pullrequests/2/statuses_page=1.json"}}, "title": "Remove double-free on plugins after giving ownership to Qt", "close_source_branch": true, "reviewers": [], "id": 2, "destination": {"commit": {"hash": "a1422e465de5", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gui/commit/a1422e465de5.json"}, "html": {"href": "#!/ignitionrobotics/ign-gui/commits/a1422e465de5"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gui.json"}, "html": {"href": "#!/ignitionrobotics/ign-gui"}, "avatar": {"href": "data/bytebucket.org/ravatar/{d80b97c2-f3f9-42b2-86b0-8c1fd4aa845f}ts=1406854"}}, "type": "repository", "name": "ign-gui", "full_name": "ignitionrobotics/ign-gui", "uuid": "{d80b97c2-f3f9-42b2-86b0-8c1fd4aa845f}"}, "branch": {"name": "default"}}, "created_on": "2017-05-12T16:10:06.491374+00:00", "summary": {"raw": "This fixes a crash during `ignition::gui::stop()` caused by a double free on plugins. Qt [steals ownership](http://doc.qt.io/qt-5/objecttrees.html) of all `QWidget` given to it, and deletes them when the window containing the widgets is closed. When `stop()` calls `g_plugins.clear()` it causes the destructor to be called on objects that have already been deleted by Qt. This fixes it by releasing ownership from the smart pointers after giving them to Qt.", "markup": "markdown", "html": "<p>This fixes a crash during <code>ignition::gui::stop()</code> caused by a double free on plugins. Qt <a data-is-external-link=\"true\" href=\"http://doc.qt.io/qt-5/objecttrees.html\" rel=\"nofollow\">steals ownership</a> of all <code>QWidget</code> given to it, and deletes them when the window containing the widgets is closed. When <code>stop()</code> calls <code>g_plugins.clear()</code> it causes the destructor to be called on objects that have already been deleted by Qt. This fixes it by releasing ownership from the smart pointers after giving them to Qt.</p>", "type": "rendered"}, "source": {"commit": {"hash": "0596192512a9", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gui/commit/0596192512a9.json"}, "html": {"href": "#!/ignitionrobotics/ign-gui/commits/0596192512a9"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gui.json"}, "html": {"href": "#!/ignitionrobotics/ign-gui"}, "avatar": {"href": "data/bytebucket.org/ravatar/{d80b97c2-f3f9-42b2-86b0-8c1fd4aa845f}ts=1406854"}}, "type": "repository", "name": "ign-gui", "full_name": "ignitionrobotics/ign-gui", "uuid": "{d80b97c2-f3f9-42b2-86b0-8c1fd4aa845f}"}, "branch": {"name": "plugin-double-free"}}, "comment_count": 1, "state": "MERGED", "task_count": 0, "participants": [{"role": "PARTICIPANT", "participated_on": "2017-06-13T16:32:00.277245+00:00", "type": "participant", "approved": true, "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}}], "reason": "", "updated_on": "2017-06-13T16:32:19.797006+00:00", "author": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}, "merge_commit": {"hash": "3b19303e9258", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gui/commit/3b19303e9258.json"}, "html": {"href": "#!/ignitionrobotics/ign-gui/commits/3b19303e9258"}}}, "closed_by": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}}