{"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gui/pullrequests/180/comments/86352853.json"}, "html": {"href": "#!/ignitionrobotics/ign-gui/pull-requests/180/_/diff#comment-86352853"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 180, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-gui/pullrequests/180.json"}, "html": {"href": "#!/ignitionrobotics/ign-gui/pull-requests/180"}}, "title": "Fix for ign-gui1 windows compilation"}, "content": {"raw": "Umm so the moc visibility is not that trivial. If we don't set visibility using `IGNITION_GUI_VISIBLE`the tests are failing due to not finding the necessary symbols. If we add visiblity the fail with:\n\n    moc_worldstats.cpp(222): error C2491: 'ignition::gui::plugins::WorldStats::staticMetaObject': definition of dllimport static data member not allowed [D:\\Jenkins\\workspace\\ign_gui-pr-win\\ws\\build\\ignition-gui1\\include\\ignition\\gui\\plugins\\WorldStats.vcxproj]\n\nTested here: [https://build.osrfoundation.org/view/All/job/ign\\_gui-pr-win/13/console](https://build.osrfoundation.org/view/All/job/ign_gui-pr-win/13/console)", "markup": "markdown", "html": "<p>Umm so the moc visibility is not that trivial. If we don't set visibility using <code>IGNITION_GUI_VISIBLE</code>the tests are failing due to not finding the necessary symbols. If we add visiblity the fail with:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"n\">moc_worldstats</span><span class=\"o\">.</span><span class=\"n\">cpp</span><span class=\"p\">(</span><span class=\"mi\">222</span><span class=\"p\">):</span> <span class=\"n\">error</span> <span class=\"n\">C2491</span><span class=\"p\">:</span> <span class=\"s1\">&#39;ignition::gui::plugins::WorldStats::staticMetaObject&#39;</span><span class=\"p\">:</span> <span class=\"n\">definition</span> <span class=\"n\">of</span> <span class=\"n\">dllimport</span> <span class=\"n\">static</span> <span class=\"n\">data</span> <span class=\"n\">member</span> <span class=\"ow\">not</span> <span class=\"n\">allowed</span> <span class=\"p\">[</span><span class=\"n\">D</span><span class=\"p\">:</span>\\<span class=\"n\">Jenkins</span>\\<span class=\"n\">workspace</span>\\<span class=\"n\">ign_gui</span><span class=\"o\">-</span><span class=\"n\">pr</span><span class=\"o\">-</span><span class=\"n\">win</span>\\<span class=\"n\">ws</span>\\<span class=\"n\">build</span>\\<span class=\"n\">ignition</span><span class=\"o\">-</span><span class=\"n\">gui1</span>\\<span class=\"n\">include</span>\\<span class=\"n\">ignition</span>\\<span class=\"n\">gui</span>\\<span class=\"n\">plugins</span>\\<span class=\"n\">WorldStats</span><span class=\"o\">.</span><span class=\"n\">vcxproj</span><span class=\"p\">]</span>\n</pre></div>\n\n\n<p>Tested here: <a data-is-external-link=\"true\" href=\"https://build.osrfoundation.org/view/All/job/ign_gui-pr-win/13/console\" rel=\"nofollow\">https://build.osrfoundation.org/view/All/job/ign_gui-pr-win/13/console</a></p>", "type": "rendered"}, "created_on": "2018-12-20T17:05:37.482685+00:00", "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "updated_on": "2018-12-20T17:05:52.012134+00:00", "type": "pullrequest_comment", "id": 86352853}