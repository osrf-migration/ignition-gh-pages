{"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-common/pullrequests/76/comments/47367641.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-common/diff/ignitionrobotics/ign-common:d2dbf5b5ff77..cba80b52089e?path=src%2FVideo.cc"}, "html": {"href": "#!/ignitionrobotics/ign-common/pull-requests/76/_/diff#comment-47367641"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 76, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-common/pullrequests/76.json"}, "html": {"href": "#!/ignitionrobotics/ign-common/pull-requests/76"}}, "title": "Fix brew compiler warnings and tests"}, "content": {"raw": "While it duplicates a bit more code, I find something like the following more readable:\n\n```\n    enum AVMediaType codec_type;\n#if LIBAVCODEC_VERSION_INT >= AV_VERSION_INT(57, 48, 101)\n    codec_type = this->dataPtr->formatCtx->streams[i]->codecpar->codec_type;\n#else\n    codec_type = this->dataPtr->formatCtx->streams[i]->codec->codec_type;\n#endif\n    if (codec_type == AVMEDIA_TYPE_VIDEO)\n```\n\nSame below.", "markup": "markdown", "html": "<p>While it duplicates a bit more code, I find something like the following more readable:</p>\n<div class=\"codehilite\"><pre><span></span>    <span class=\"k\">enum</span> <span class=\"n\">AVMediaType</span> <span class=\"n\">codec_type</span>;\n<span class=\"c c-Singleline\">#if LIBAVCODEC_VERSION_INT &gt;= AV_VERSION_INT(57, 48, 101)</span>\n    <span class=\"n\">codec_type</span> = <span class=\"n\">this-</span>&gt;<span class=\"n\">dataPtr-</span>&gt;<span class=\"n\">formatCtx-</span>&gt;<span class=\"n\">streams</span>[<span class=\"n\">i</span>]-&gt;<span class=\"n\">codecpar-</span>&gt;<span class=\"n\">codec_type</span>;\n<span class=\"c c-Singleline\">#else</span>\n    <span class=\"n\">codec_type</span> = <span class=\"n\">this-</span>&gt;<span class=\"n\">dataPtr-</span>&gt;<span class=\"n\">formatCtx-</span>&gt;<span class=\"n\">streams</span>[<span class=\"n\">i</span>]-&gt;<span class=\"n\">codec-</span>&gt;<span class=\"n\">codec_type</span>;\n<span class=\"c c-Singleline\">#endif</span>\n    <span class=\"k\">if</span> (<span class=\"n\">codec_type</span> == <span class=\"n\">AVMEDIA_TYPE_VIDEO</span>)\n</pre></div>\n\n\n<p>Same below.</p>", "type": "rendered"}, "created_on": "2017-10-17T17:25:53.770162+00:00", "user": {"display_name": "clalancette", "uuid": "{02b311e1-297d-4232-89c4-5485d0a02911}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B02b311e1-297d-4232-89c4-5485d0a02911%7D"}, "html": {"href": "https://bitbucket.org/%7B02b311e1-297d-4232-89c4-5485d0a02911%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:ad6ed80b-ec66-45cb-9504-b1094a415b7f/048a0933-60ac-4910-a6a5-ed058bdea8eb/128"}}, "nickname": "clalancette", "type": "user", "account_id": "557058:ad6ed80b-ec66-45cb-9504-b1094a415b7f"}, "inline": {"to": 114, "from": null, "outdated": true, "path": "src/Video.cc"}, "updated_on": "2017-10-17T17:26:18.980012+00:00", "type": "pullrequest_comment", "id": 47367641}