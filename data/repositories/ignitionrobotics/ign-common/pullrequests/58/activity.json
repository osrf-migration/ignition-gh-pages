{"pagelen": 50, "values": [{"update": {"description": "Prior to this PR, when outputting to ignmsg or igndbg (basically, one of the std::cout streams), no output would be printed until much later (often until the program quitted).  This happened despite the fact that std::ios_base::unitbuf was set on all of the streams.  The reason for this is simple; Logger::Buffer::sync() output any trailing newline in the wrong position due to the color handling.  That is, the original output buffer got stored, but the last thing to be sent out to std::cout was always a color-end escape sequence, not a carriage return.  To remedy this, this PR looks into the buffer prior to outputting it, and if the last character is \\n, it outputs an additional \\n on the end.  Note that I believe this works on Windows and Unixen, though I have only tested that it works properly on Linux.", "title": "Add a trailing newline if necessary.", "destination": {"commit": {"hash": "619d95a26559", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-common/commit/619d95a26559.json"}, "html": {"href": "#!/ignitionrobotics/ign-common/commits/619d95a26559"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-common.json"}, "html": {"href": "#!/ignitionrobotics/ign-common"}, "avatar": {"href": "data/bytebucket.org/ravatar/{1dfbdd30-34c5-4b09-82ef-9bfe2917877b}ts=1533303"}}, "type": "repository", "name": "ign-common", "full_name": "ignitionrobotics/ign-common", "uuid": "{1dfbdd30-34c5-4b09-82ef-9bfe2917877b}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "72265766fea3", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-common/commit/72265766fea3.json"}, "html": {"href": "#!/ignitionrobotics/ign-common/commits/72265766fea3"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-common.json"}, "html": {"href": "#!/ignitionrobotics/ign-common"}, "avatar": {"href": "data/bytebucket.org/ravatar/{1dfbdd30-34c5-4b09-82ef-9bfe2917877b}ts=1533303"}}, "type": "repository", "name": "ign-common", "full_name": "ignitionrobotics/ign-common", "uuid": "{1dfbdd30-34c5-4b09-82ef-9bfe2917877b}"}, "branch": {"name": "add-trailing-newline"}}, "state": "MERGED", "author": {"display_name": "clalancette", "uuid": "{02b311e1-297d-4232-89c4-5485d0a02911}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B02b311e1-297d-4232-89c4-5485d0a02911%7D"}, "html": {"href": "https://bitbucket.org/%7B02b311e1-297d-4232-89c4-5485d0a02911%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:ad6ed80b-ec66-45cb-9504-b1094a415b7f/048a0933-60ac-4910-a6a5-ed058bdea8eb/128"}}, "nickname": "clalancette", "type": "user", "account_id": "557058:ad6ed80b-ec66-45cb-9504-b1094a415b7f"}, "date": "2017-08-11T14:04:23.125627+00:00"}, "pull_request": {"type": "pullrequest", "id": 58, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-common/pullrequests/58.json"}, "html": {"href": "#!/ignitionrobotics/ign-common/pull-requests/58"}}, "title": "Add a trailing newline if necessary."}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-common/pullrequests/58/comments/42665713.json"}, "html": {"href": "#!/ignitionrobotics/ign-common/pull-requests/58/_/diff#comment-42665713"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 58, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-common/pullrequests/58.json"}, "html": {"href": "#!/ignitionrobotics/ign-common/pull-requests/58"}}, "title": "Add a trailing newline if necessary."}, "content": {"raw": "Thanks for the reviews, I'm merging this in.", "markup": "markdown", "html": "<p>Thanks for the reviews, I'm merging this in.</p>", "type": "rendered"}, "created_on": "2017-08-11T14:04:16.753124+00:00", "user": {"display_name": "clalancette", "uuid": "{02b311e1-297d-4232-89c4-5485d0a02911}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B02b311e1-297d-4232-89c4-5485d0a02911%7D"}, "html": {"href": "https://bitbucket.org/%7B02b311e1-297d-4232-89c4-5485d0a02911%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:ad6ed80b-ec66-45cb-9504-b1094a415b7f/048a0933-60ac-4910-a6a5-ed058bdea8eb/128"}}, "nickname": "clalancette", "type": "user", "account_id": "557058:ad6ed80b-ec66-45cb-9504-b1094a415b7f"}, "updated_on": "2017-08-11T14:04:16.756151+00:00", "type": "pullrequest_comment", "id": 42665713}, "pull_request": {"type": "pullrequest", "id": 58, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-common/pullrequests/58.json"}, "html": {"href": "#!/ignitionrobotics/ign-common/pull-requests/58"}}, "title": "Add a trailing newline if necessary."}}, {"approval": {"date": "2017-08-10T17:40:47.540155+00:00", "pullrequest": {"type": "pullrequest", "id": 58, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-common/pullrequests/58.json"}, "html": {"href": "#!/ignitionrobotics/ign-common/pull-requests/58"}}, "title": "Add a trailing newline if necessary."}, "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}}, "pull_request": {"type": "pullrequest", "id": 58, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-common/pullrequests/58.json"}, "html": {"href": "#!/ignitionrobotics/ign-common/pull-requests/58"}}, "title": "Add a trailing newline if necessary."}}, {"approval": {"date": "2017-08-10T17:04:58.770661+00:00", "pullrequest": {"type": "pullrequest", "id": 58, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-common/pullrequests/58.json"}, "html": {"href": "#!/ignitionrobotics/ign-common/pull-requests/58"}}, "title": "Add a trailing newline if necessary."}, "user": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}}, "pull_request": {"type": "pullrequest", "id": 58, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-common/pullrequests/58.json"}, "html": {"href": "#!/ignitionrobotics/ign-common/pull-requests/58"}}, "title": "Add a trailing newline if necessary."}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-common/pullrequests/58/comments/42480852.json"}, "html": {"href": "#!/ignitionrobotics/ign-common/pull-requests/58/_/diff#comment-42480852"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 58, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-common/pullrequests/58.json"}, "html": {"href": "#!/ignitionrobotics/ign-common/pull-requests/58"}}, "title": "Add a trailing newline if necessary."}, "content": {"raw": "Thanks Nate, I merged that in.", "markup": "markdown", "html": "<p>Thanks Nate, I merged that in.</p>", "type": "rendered"}, "created_on": "2017-08-09T13:36:23.413678+00:00", "user": {"display_name": "clalancette", "uuid": "{02b311e1-297d-4232-89c4-5485d0a02911}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B02b311e1-297d-4232-89c4-5485d0a02911%7D"}, "html": {"href": "https://bitbucket.org/%7B02b311e1-297d-4232-89c4-5485d0a02911%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:ad6ed80b-ec66-45cb-9504-b1094a415b7f/048a0933-60ac-4910-a6a5-ed058bdea8eb/128"}}, "nickname": "clalancette", "type": "user", "account_id": "557058:ad6ed80b-ec66-45cb-9504-b1094a415b7f"}, "updated_on": "2017-08-09T13:36:23.418007+00:00", "type": "pullrequest_comment", "id": 42480852}, "pull_request": {"type": "pullrequest", "id": 58, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-common/pullrequests/58.json"}, "html": {"href": "#!/ignitionrobotics/ign-common/pull-requests/58"}}, "title": "Add a trailing newline if necessary."}}, {"update": {"description": "Prior to this PR, when outputting to ignmsg or igndbg (basically, one of the std::cout streams), no output would be printed until much later (often until the program quitted).  This happened despite the fact that std::ios_base::unitbuf was set on all of the streams.  The reason for this is simple; Logger::Buffer::sync() output any trailing newline in the wrong position due to the color handling.  That is, the original output buffer got stored, but the last thing to be sent out to std::cout was always a color-end escape sequence, not a carriage return.  To remedy this, this PR looks into the buffer prior to outputting it, and if the last character is \\n, it outputs an additional \\n on the end.  Note that I believe this works on Windows and Unixen, though I have only tested that it works properly on Linux.", "title": "Add a trailing newline if necessary.", "destination": {"commit": {"hash": "619d95a26559", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-common/commit/619d95a26559.json"}, "html": {"href": "#!/ignitionrobotics/ign-common/commits/619d95a26559"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-common.json"}, "html": {"href": "#!/ignitionrobotics/ign-common"}, "avatar": {"href": "data/bytebucket.org/ravatar/{1dfbdd30-34c5-4b09-82ef-9bfe2917877b}ts=1533303"}}, "type": "repository", "name": "ign-common", "full_name": "ignitionrobotics/ign-common", "uuid": "{1dfbdd30-34c5-4b09-82ef-9bfe2917877b}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "72265766fea3", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-common/commit/72265766fea3.json"}, "html": {"href": "#!/ignitionrobotics/ign-common/commits/72265766fea3"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-common.json"}, "html": {"href": "#!/ignitionrobotics/ign-common"}, "avatar": {"href": "data/bytebucket.org/ravatar/{1dfbdd30-34c5-4b09-82ef-9bfe2917877b}ts=1533303"}}, "type": "repository", "name": "ign-common", "full_name": "ignitionrobotics/ign-common", "uuid": "{1dfbdd30-34c5-4b09-82ef-9bfe2917877b}"}, "branch": {"name": "add-trailing-newline"}}, "state": "OPEN", "author": {"display_name": "clalancette", "uuid": "{02b311e1-297d-4232-89c4-5485d0a02911}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B02b311e1-297d-4232-89c4-5485d0a02911%7D"}, "html": {"href": "https://bitbucket.org/%7B02b311e1-297d-4232-89c4-5485d0a02911%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:ad6ed80b-ec66-45cb-9504-b1094a415b7f/048a0933-60ac-4910-a6a5-ed058bdea8eb/128"}}, "nickname": "clalancette", "type": "user", "account_id": "557058:ad6ed80b-ec66-45cb-9504-b1094a415b7f"}, "date": "2017-08-09T13:29:34.644033+00:00"}, "pull_request": {"type": "pullrequest", "id": 58, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-common/pullrequests/58.json"}, "html": {"href": "#!/ignitionrobotics/ign-common/pull-requests/58"}}, "title": "Add a trailing newline if necessary."}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-common/pullrequests/58/comments/42428087.json"}, "html": {"href": "#!/ignitionrobotics/ign-common/pull-requests/58/_/diff#comment-42428087"}}, "parent": {"id": 42427680, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-common/pullrequests/58/comments/42427680.json"}, "html": {"href": "#!/ignitionrobotics/ign-common/pull-requests/58/_/diff#comment-42427680"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 58, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-common/pullrequests/58.json"}, "html": {"href": "#!/ignitionrobotics/ign-common/pull-requests/58"}}, "title": "Add a trailing newline if necessary."}, "content": {"raw": "It looks like @nkoenig 's tweaks in 0062a3e address my concerns.", "markup": "markdown", "html": "<p>It looks like @nkoenig 's tweaks in <a href=\"#!/ignitionrobotics/ign-common/commits/0062a3e\" rel=\"nofollow\" class=\"ap-connect-link\">0062a3e</a> address my concerns.</p>", "type": "rendered"}, "created_on": "2017-08-08T22:05:32.403715+00:00", "user": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "inline": {}, "updated_on": "2017-08-08T22:05:32.421412+00:00", "type": "pullrequest_comment", "id": 42428087}, "pull_request": {"type": "pullrequest", "id": 58, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-common/pullrequests/58.json"}, "html": {"href": "#!/ignitionrobotics/ign-common/pull-requests/58"}}, "title": "Add a trailing newline if necessary."}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-common/pullrequests/58/comments/42427680.json"}, "html": {"href": "#!/ignitionrobotics/ign-common/pull-requests/58/_/diff#comment-42427680"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 58, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-common/pullrequests/58.json"}, "html": {"href": "#!/ignitionrobotics/ign-common/pull-requests/58"}}, "title": "Add a trailing newline if necessary."}, "content": {"raw": "Can we guarantee that the string will be non-empty? If not, trying to access the last element could produce a segfault. To be safe, maybe we could have\n\n```\nconst char lastchar = outstr.empty() ? '\\0' : outstr.back();\n```\n\nThat would have the added benefit of reducing calls to `this->str()`.", "markup": "markdown", "html": "<p>Can we guarantee that the string will be non-empty? If not, trying to access the last element could produce a segfault. To be safe, maybe we could have</p>\n<div class=\"codehilite\"><pre><span></span>const char lastchar = outstr.empty() ? &#39;\\0&#39; : outstr.back();\n</pre></div>\n\n\n<p>That would have the added benefit of reducing calls to <code>this-&gt;str()</code>.</p>", "type": "rendered"}, "created_on": "2017-08-08T21:56:30.556644+00:00", "user": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "inline": {}, "updated_on": "2017-08-08T21:56:30.559336+00:00", "type": "pullrequest_comment", "id": 42427680}, "pull_request": {"type": "pullrequest", "id": 58, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-common/pullrequests/58.json"}, "html": {"href": "#!/ignitionrobotics/ign-common/pull-requests/58"}}, "title": "Add a trailing newline if necessary."}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-common/pullrequests/58/comments/42427286.json"}, "html": {"href": "#!/ignitionrobotics/ign-common/pull-requests/58/_/diff#comment-42427286"}}, "parent": {"id": 42427027, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-common/pullrequests/58/comments/42427027.json"}, "html": {"href": "#!/ignitionrobotics/ign-common/pull-requests/58/_/diff#comment-42427027"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 58, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-common/pullrequests/58.json"}, "html": {"href": "#!/ignitionrobotics/ign-common/pull-requests/58"}}, "title": "Add a trailing newline if necessary."}, "content": {"raw": "Never mind, I just tested this, and non-const references aren't supported for whatever crazy type `str()` returns.\n\nEdit: Looking more into it, it seems that `str()` returns a temporary copy of a `basic_string` type, so we should perhaps try to avoid frequent calls to it, or else we'll needlessly copy it over and over. The first time we call it, we should get the benefit of copy elision, but calls that come after that might be wasteful, depending on how good the compiler is at optimizing.", "markup": "markdown", "html": "<p>Never mind, I just tested this, and non-const references aren't supported for whatever crazy type <code>str()</code> returns.</p>\n<p>Edit: Looking more into it, it seems that <code>str()</code> returns a temporary copy of a <code>basic_string</code> type, so we should perhaps try to avoid frequent calls to it, or else we'll needlessly copy it over and over. The first time we call it, we should get the benefit of copy elision, but calls that come after that might be wasteful, depending on how good the compiler is at optimizing.</p>", "type": "rendered"}, "created_on": "2017-08-08T21:48:53.796362+00:00", "user": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "inline": {}, "updated_on": "2017-08-08T21:55:17.673268+00:00", "type": "pullrequest_comment", "id": 42427286}, "pull_request": {"type": "pullrequest", "id": 58, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-common/pullrequests/58.json"}, "html": {"href": "#!/ignitionrobotics/ign-common/pull-requests/58"}}, "title": "Add a trailing newline if necessary."}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-common/pullrequests/58/comments/42427027.json"}, "html": {"href": "#!/ignitionrobotics/ign-common/pull-requests/58/_/diff#comment-42427027"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 58, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-common/pullrequests/58.json"}, "html": {"href": "#!/ignitionrobotics/ign-common/pull-requests/58"}}, "title": "Add a trailing newline if necessary."}, "content": {"raw": "I would propose making `outstr` a reference (like `std::string &outstr = this->str()`) to avoid a string copy (which can be surprisingly expensive for large strings).", "markup": "markdown", "html": "<p>I would propose making <code>outstr</code> a reference (like <code>std::string &amp;outstr = this-&gt;str()</code>) to avoid a string copy (which can be surprisingly expensive for large strings).</p>", "type": "rendered"}, "created_on": "2017-08-08T21:43:42.688738+00:00", "user": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "inline": {}, "updated_on": "2017-08-08T21:43:42.692346+00:00", "type": "pullrequest_comment", "id": 42427027}, "pull_request": {"type": "pullrequest", "id": 58, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-common/pullrequests/58.json"}, "html": {"href": "#!/ignitionrobotics/ign-common/pull-requests/58"}}, "title": "Add a trailing newline if necessary."}}, {"comment": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-common/pullrequests/58/comments/42426660.json"}, "html": {"href": "#!/ignitionrobotics/ign-common/pull-requests/58/_/diff#comment-42426660"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 58, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-common/pullrequests/58.json"}, "html": {"href": "#!/ignitionrobotics/ign-common/pull-requests/58"}}, "title": "Add a trailing newline if necessary."}, "content": {"raw": "Here are some tweaks: 0062a3e", "markup": "markdown", "html": "<p>Here are some tweaks: <a href=\"#!/ignitionrobotics/ign-common/commits/0062a3e\" rel=\"nofollow\" class=\"ap-connect-link\">0062a3e</a></p>", "type": "rendered"}, "created_on": "2017-08-08T21:36:05.610746+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "updated_on": "2017-08-08T21:36:05.613188+00:00", "type": "pullrequest_comment", "id": 42426660}, "pull_request": {"type": "pullrequest", "id": 58, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-common/pullrequests/58.json"}, "html": {"href": "#!/ignitionrobotics/ign-common/pull-requests/58"}}, "title": "Add a trailing newline if necessary."}}, {"update": {"description": "Prior to this PR, when outputting to ignmsg or igndbg (basically, one of the std::cout streams), no output would be printed until much later (often until the program quitted).  This happened despite the fact that std::ios_base::unitbuf was set on all of the streams.  The reason for this is simple; Logger::Buffer::sync() output any trailing newline in the wrong position due to the color handling.  That is, the original output buffer got stored, but the last thing to be sent out to std::cout was always a color-end escape sequence, not a carriage return.  To remedy this, this PR looks into the buffer prior to outputting it, and if the last character is \\n, it outputs an additional \\n on the end.  Note that I believe this works on Windows and Unixen, though I have only tested that it works properly on Linux.", "title": "Add a trailing newline if necessary.", "destination": {"commit": {"hash": "727286640fa2", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-common/commit/727286640fa2.json"}, "html": {"href": "#!/ignitionrobotics/ign-common/commits/727286640fa2"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-common.json"}, "html": {"href": "#!/ignitionrobotics/ign-common"}, "avatar": {"href": "data/bytebucket.org/ravatar/{1dfbdd30-34c5-4b09-82ef-9bfe2917877b}ts=1533303"}}, "type": "repository", "name": "ign-common", "full_name": "ignitionrobotics/ign-common", "uuid": "{1dfbdd30-34c5-4b09-82ef-9bfe2917877b}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "795c1af5e349", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-common/commit/795c1af5e349.json"}, "html": {"href": "#!/ignitionrobotics/ign-common/commits/795c1af5e349"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-common.json"}, "html": {"href": "#!/ignitionrobotics/ign-common"}, "avatar": {"href": "data/bytebucket.org/ravatar/{1dfbdd30-34c5-4b09-82ef-9bfe2917877b}ts=1533303"}}, "type": "repository", "name": "ign-common", "full_name": "ignitionrobotics/ign-common", "uuid": "{1dfbdd30-34c5-4b09-82ef-9bfe2917877b}"}, "branch": {"name": "add-trailing-newline"}}, "state": "OPEN", "author": {"display_name": "clalancette", "uuid": "{02b311e1-297d-4232-89c4-5485d0a02911}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B02b311e1-297d-4232-89c4-5485d0a02911%7D"}, "html": {"href": "https://bitbucket.org/%7B02b311e1-297d-4232-89c4-5485d0a02911%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:ad6ed80b-ec66-45cb-9504-b1094a415b7f/048a0933-60ac-4910-a6a5-ed058bdea8eb/128"}}, "nickname": "clalancette", "type": "user", "account_id": "557058:ad6ed80b-ec66-45cb-9504-b1094a415b7f"}, "date": "2017-08-07T16:00:19.822097+00:00"}, "pull_request": {"type": "pullrequest", "id": 58, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-common/pullrequests/58.json"}, "html": {"href": "#!/ignitionrobotics/ign-common/pull-requests/58"}}, "title": "Add a trailing newline if necessary."}}, {"update": {"description": "Prior to this PR, when outputting to ignmsg or igndbg (basically, one of the std::cout streams), no output would be printed until much later (often until the program quitted).  This happened despite the fact that std::ios_base::unitbuf was set on all of the streams.  The reason for this is simple; Logger::Buffer::sync() output any trailing newline in the wrong position due to the color handling.  That is, the original output buffer got stored, but the last thing to be sent out to std::cout was always a color-end escape sequence, not a carriage return.  To remedy this, this PR looks into the buffer prior to outputting it, and if the last character is \\n, it outputs an additional \\n on the end.  Note that I believe this works on Windows and Unixen, though I have only tested that it works properly on Linux.", "title": "Add a trailing newline if necessary.", "destination": {"commit": {"hash": "727286640fa2", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-common/commit/727286640fa2.json"}, "html": {"href": "#!/ignitionrobotics/ign-common/commits/727286640fa2"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-common.json"}, "html": {"href": "#!/ignitionrobotics/ign-common"}, "avatar": {"href": "data/bytebucket.org/ravatar/{1dfbdd30-34c5-4b09-82ef-9bfe2917877b}ts=1533303"}}, "type": "repository", "name": "ign-common", "full_name": "ignitionrobotics/ign-common", "uuid": "{1dfbdd30-34c5-4b09-82ef-9bfe2917877b}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "795c1af5e349", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-common/commit/795c1af5e349.json"}, "html": {"href": "#!/ignitionrobotics/ign-common/commits/795c1af5e349"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-common.json"}, "html": {"href": "#!/ignitionrobotics/ign-common"}, "avatar": {"href": "data/bytebucket.org/ravatar/{1dfbdd30-34c5-4b09-82ef-9bfe2917877b}ts=1533303"}}, "type": "repository", "name": "ign-common", "full_name": "ignitionrobotics/ign-common", "uuid": "{1dfbdd30-34c5-4b09-82ef-9bfe2917877b}"}, "branch": {"name": "add-trailing-newline"}}, "state": "OPEN", "author": {"display_name": "clalancette", "uuid": "{02b311e1-297d-4232-89c4-5485d0a02911}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B02b311e1-297d-4232-89c4-5485d0a02911%7D"}, "html": {"href": "https://bitbucket.org/%7B02b311e1-297d-4232-89c4-5485d0a02911%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:ad6ed80b-ec66-45cb-9504-b1094a415b7f/048a0933-60ac-4910-a6a5-ed058bdea8eb/128"}}, "nickname": "clalancette", "type": "user", "account_id": "557058:ad6ed80b-ec66-45cb-9504-b1094a415b7f"}, "date": "2017-08-07T16:00:19.691036+00:00"}, "pull_request": {"type": "pullrequest", "id": 58, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-common/pullrequests/58.json"}, "html": {"href": "#!/ignitionrobotics/ign-common/pull-requests/58"}}, "title": "Add a trailing newline if necessary."}}]}