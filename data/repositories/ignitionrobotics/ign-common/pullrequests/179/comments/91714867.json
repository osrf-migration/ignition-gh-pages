{"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-common/pullrequests/179/comments/91714867.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-common/diff/koonpeng/ign-common:7ad0e0f95d6f..00c27facbfc2?path=graphics%2Finclude%2Fignition%2Fcommon%2FNodeTransform.hh"}, "html": {"href": "#!/ignitionrobotics/ign-common/pull-requests/179/_/diff#comment-91714867"}}, "parent": {"id": 91675946, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-common/pullrequests/179/comments/91675946.json"}, "html": {"href": "#!/ignitionrobotics/ign-common/pull-requests/179/_/diff#comment-91675946"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 179, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-common/pullrequests/179.json"}, "html": {"href": "#!/ignitionrobotics/ign-common/pull-requests/179"}}, "title": "port gazebo collada mixamo fix over"}, "content": {"raw": "The problem I\u2019m facing is this line of code\n\n    animation[targetBoneName][times[i]] =\n                          _skel->NodeById(targetBone)->Transforms();\n\nThis creates a copy of `std::vector<NodeTransform>` and assigns it to `animation`. Since `data` is a raw pointer, it does a shallow copy and all the keyframes now reference to the same `NodeTransformPrivate`. The new copy constructor does a deep copy and the `unique_ptr` helps take care of move semantics and other stuffs.", "markup": "markdown", "html": "<p>The problem I\u2019m facing is this line of code</p>\n<div class=\"codehilite\"><pre><span></span>animation[targetBoneName][times[i]] =\n                      _skel-&gt;NodeById(targetBone)-&gt;Transforms();\n</pre></div>\n\n\n<p>This creates a copy of <code>std::vector&lt;NodeTransform&gt;</code> and assigns it to <code>animation</code>. Since <code>data</code> is a raw pointer, it does a shallow copy and all the keyframes now reference to the same <code>NodeTransformPrivate</code>. The new copy constructor does a deep copy and the <code>unique_ptr</code> helps take care of move semantics and other stuffs.</p>", "type": "rendered"}, "created_on": "2019-02-15T02:06:30.944940+00:00", "user": {"display_name": "Teo Koon Peng", "uuid": "{1ec15fb5-59a2-4750-86ab-0900d87b47c6}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B1ec15fb5-59a2-4750-86ab-0900d87b47c6%7D"}, "html": {"href": "https://bitbucket.org/%7B1ec15fb5-59a2-4750-86ab-0900d87b47c6%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/56fb2af5c994aba4bbdf23b8eec5e2e4d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsTP-6.png"}}, "nickname": "koonpeng", "type": "user", "account_id": "5bf383ae368afa1e1c7548ea"}, "inline": {"to": 120, "from": null, "outdated": true, "path": "graphics/include/ignition/common/NodeTransform.hh"}, "updated_on": "2019-02-15T02:06:31.063906+00:00", "type": "pullrequest_comment", "id": 91714867}