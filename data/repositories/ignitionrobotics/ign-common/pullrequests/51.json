{"rendered": {"reason": {"raw": "This PR is being replaced by a newer one where many of the changes done in this PR are practically rewritten, making it somewhat wasteful to review this.", "markup": "markdown", "html": "<p>This PR is being replaced by a newer one where many of the changes done in this PR are practically rewritten, making it somewhat wasteful to review this.</p>", "type": "rendered"}, "description": {"raw": "This pull request expands the existing `ignition::common` plugin framework to accomplish three major goals:\r\n\r\n1. Allow multiple plugins per library\r\n2. Allow multiple interfaces per plugin\r\n3. Squash some subtle bugs in the implementation of plugins\r\n\r\nUnfortunately, this PR pretty much clobbers backwards compatibility with any plugins that were created using the older framework. I made some earnest attempts to allow robust backwards compatibility, but the prior implementation had bugs (mostly pertaining to plugin destruction) that cannot be resolved except by rebuilding the shared libraries of those plugins with these new changes. The current attempt at backwards compatibility introduces memory leaks that will cause the plugin instances to remain in existence until the executable exits.\r\n\r\nThis also completely clobbers the API for using the plugins once they are loaded. This clobbering also relates to the fact that the prior implementation had subtle destruction bugs.\r\n\r\nGiven all these issues, I would recommend we purge out the backwards compatibility entirely and just require all plugin users to adopt the new API and ABI (which should be a relatively painless transition, since all use of these plugins is currently internal).", "markup": "markdown", "html": "<p>This pull request expands the existing <code>ignition::common</code> plugin framework to accomplish three major goals:</p>\n<ol>\n<li>Allow multiple plugins per library</li>\n<li>Allow multiple interfaces per plugin</li>\n<li>Squash some subtle bugs in the implementation of plugins</li>\n</ol>\n<p>Unfortunately, this PR pretty much clobbers backwards compatibility with any plugins that were created using the older framework. I made some earnest attempts to allow robust backwards compatibility, but the prior implementation had bugs (mostly pertaining to plugin destruction) that cannot be resolved except by rebuilding the shared libraries of those plugins with these new changes. The current attempt at backwards compatibility introduces memory leaks that will cause the plugin instances to remain in existence until the executable exits.</p>\n<p>This also completely clobbers the API for using the plugins once they are loaded. This clobbering also relates to the fact that the prior implementation had subtle destruction bugs.</p>\n<p>Given all these issues, I would recommend we purge out the backwards compatibility entirely and just require all plugin users to adopt the new API and ABI (which should be a relatively painless transition, since all use of these plugins is currently internal).</p>", "type": "rendered"}, "title": {"raw": "Expand the functionality of the plugin framework", "markup": "markdown", "html": "<p>Expand the functionality of the plugin framework</p>", "type": "rendered"}}, "type": "pullrequest", "description": "This pull request expands the existing `ignition::common` plugin framework to accomplish three major goals:\r\n\r\n1. Allow multiple plugins per library\r\n2. Allow multiple interfaces per plugin\r\n3. Squash some subtle bugs in the implementation of plugins\r\n\r\nUnfortunately, this PR pretty much clobbers backwards compatibility with any plugins that were created using the older framework. I made some earnest attempts to allow robust backwards compatibility, but the prior implementation had bugs (mostly pertaining to plugin destruction) that cannot be resolved except by rebuilding the shared libraries of those plugins with these new changes. The current attempt at backwards compatibility introduces memory leaks that will cause the plugin instances to remain in existence until the executable exits.\r\n\r\nThis also completely clobbers the API for using the plugins once they are loaded. This clobbering also relates to the fact that the prior implementation had subtle destruction bugs.\r\n\r\nGiven all these issues, I would recommend we purge out the backwards compatibility entirely and just require all plugin users to adopt the new API and ABI (which should be a relatively painless transition, since all use of these plugins is currently internal).", "links": {"decline": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-common/pullrequests/51/decline"}, "diffstat": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-common/diffstat/ignitionrobotics/ign-common:ce821dad2083%0D47f7af1d6a38?from_pullrequest_id=51"}, "commits": {"href": "data/repositories/ignitionrobotics/ign-common/pullrequests/51/commits.json"}, "self": {"href": "data/repositories/ignitionrobotics/ign-common/pullrequests/51.json"}, "comments": {"href": "data/repositories/ignitionrobotics/ign-common/pullrequests/51/comments_page=1.json"}, "merge": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-common/pullrequests/51/merge"}, "html": {"href": "#!/ignitionrobotics/ign-common/pull-requests/51"}, "activity": {"href": "data/repositories/ignitionrobotics/ign-common/pullrequests/51/activity.json"}, "diff": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-common/diff/ignitionrobotics/ign-common:ce821dad2083%0D47f7af1d6a38?from_pullrequest_id=51"}, "approve": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-common/pullrequests/51/approve"}, "statuses": {"href": "data/repositories/ignitionrobotics/ign-common/pullrequests/51/statuses_page=1.json"}}, "title": "Expand the functionality of the plugin framework", "close_source_branch": false, "reviewers": [{"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}], "id": 51, "destination": {"commit": {"hash": "47f7af1d6a38", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-common/commit/47f7af1d6a38.json"}, "html": {"href": "#!/ignitionrobotics/ign-common/commits/47f7af1d6a38"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-common.json"}, "html": {"href": "#!/ignitionrobotics/ign-common"}, "avatar": {"href": "data/bytebucket.org/ravatar/{1dfbdd30-34c5-4b09-82ef-9bfe2917877b}ts=1533303"}}, "type": "repository", "name": "ign-common", "full_name": "ignitionrobotics/ign-common", "uuid": "{1dfbdd30-34c5-4b09-82ef-9bfe2917877b}"}, "branch": {"name": "default"}}, "created_on": "2017-07-27T19:18:56.446059+00:00", "summary": {"raw": "This pull request expands the existing `ignition::common` plugin framework to accomplish three major goals:\r\n\r\n1. Allow multiple plugins per library\r\n2. Allow multiple interfaces per plugin\r\n3. Squash some subtle bugs in the implementation of plugins\r\n\r\nUnfortunately, this PR pretty much clobbers backwards compatibility with any plugins that were created using the older framework. I made some earnest attempts to allow robust backwards compatibility, but the prior implementation had bugs (mostly pertaining to plugin destruction) that cannot be resolved except by rebuilding the shared libraries of those plugins with these new changes. The current attempt at backwards compatibility introduces memory leaks that will cause the plugin instances to remain in existence until the executable exits.\r\n\r\nThis also completely clobbers the API for using the plugins once they are loaded. This clobbering also relates to the fact that the prior implementation had subtle destruction bugs.\r\n\r\nGiven all these issues, I would recommend we purge out the backwards compatibility entirely and just require all plugin users to adopt the new API and ABI (which should be a relatively painless transition, since all use of these plugins is currently internal).", "markup": "markdown", "html": "<p>This pull request expands the existing <code>ignition::common</code> plugin framework to accomplish three major goals:</p>\n<ol>\n<li>Allow multiple plugins per library</li>\n<li>Allow multiple interfaces per plugin</li>\n<li>Squash some subtle bugs in the implementation of plugins</li>\n</ol>\n<p>Unfortunately, this PR pretty much clobbers backwards compatibility with any plugins that were created using the older framework. I made some earnest attempts to allow robust backwards compatibility, but the prior implementation had bugs (mostly pertaining to plugin destruction) that cannot be resolved except by rebuilding the shared libraries of those plugins with these new changes. The current attempt at backwards compatibility introduces memory leaks that will cause the plugin instances to remain in existence until the executable exits.</p>\n<p>This also completely clobbers the API for using the plugins once they are loaded. This clobbering also relates to the fact that the prior implementation had subtle destruction bugs.</p>\n<p>Given all these issues, I would recommend we purge out the backwards compatibility entirely and just require all plugin users to adopt the new API and ABI (which should be a relatively painless transition, since all use of these plugins is currently internal).</p>", "type": "rendered"}, "source": {"commit": {"hash": "ce821dad2083", "type": "commit", "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-common/commit/ce821dad2083.json"}, "html": {"href": "#!/ignitionrobotics/ign-common/commits/ce821dad2083"}}}, "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-common.json"}, "html": {"href": "#!/ignitionrobotics/ign-common"}, "avatar": {"href": "data/bytebucket.org/ravatar/{1dfbdd30-34c5-4b09-82ef-9bfe2917877b}ts=1533303"}}, "type": "repository", "name": "ign-common", "full_name": "ignitionrobotics/ign-common", "uuid": "{1dfbdd30-34c5-4b09-82ef-9bfe2917877b}"}, "branch": {"name": "ExpandPlugins"}}, "comment_count": 3, "state": "DECLINED", "task_count": 0, "participants": [{"role": "REVIEWER", "participated_on": "2017-08-01T23:12:46.129878+00:00", "type": "participant", "approved": false, "user": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}}], "reason": "This PR is being replaced by a newer one where many of the changes done in this PR are practically rewritten, making it somewhat wasteful to review this.", "updated_on": "2017-08-02T00:20:09.769825+00:00", "author": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}, "merge_commit": null, "closed_by": {"display_name": "Michael Grey", "uuid": "{c1cdfe52-2887-474c-ae99-72fdc53a59c9}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D"}, "html": {"href": "https://bitbucket.org/%7Bc1cdfe52-2887-474c-ae99-72fdc53a59c9%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:67759e29-d1df-465f-868d-047738e36fc9/d42d74cf-c1bd-4431-8288-07f543bbe325/128"}}, "nickname": "mxgrey", "type": "user", "account_id": "557058:67759e29-d1df-465f-868d-047738e36fc9"}}