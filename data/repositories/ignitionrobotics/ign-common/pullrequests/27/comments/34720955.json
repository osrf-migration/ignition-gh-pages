{"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-common/pullrequests/27/comments/34720955.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-common/diff/ignitionrobotics/ign-common:a462b14bdefe..b3d0e504a4a7?path=cmake%2FSearchForStuff.cmake"}, "html": {"href": "#!/ignitionrobotics/ign-common/pull-requests/27/_/diff#comment-34720955"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 27, "links": {"self": {"href": "data/repositories/ignitionrobotics/ign-common/pullrequests/27.json"}, "html": {"href": "#!/ignitionrobotics/ign-common/pull-requests/27"}}, "title": "Adds PluginLoader"}, "content": {"raw": "I know this CMake code is copy pasted from Gazebo, but I thinks it is worth anyhow to note something:\n\n* On *nix systems, CMake provides the [`CMAKE_DL_LIBS`](https://cmake.org/cmake/help/v3.0/variable/CMAKE_DL_LIBS.html) variable that contains the library to link to provide the functions provided in the `dlfcn.h` header. The `dlfcn.h` header is contained in the system include directories and so does not need to be found. `CMAKE_DL_LIBS` is tipically `dl` on Linux and macOs , but can be empty on several *BSDs or even `ld` on some strange Unix platforms. \n\n* On Windows, the latest version of dlfcn-win32 [1] comes with full support for relocatable CMake targets, and so it can be used by simply by:\n~~~\nif(WIN32)\n  find_package(dlfcn-win32 REQUIRED)\n  set(CMAKE_DL_LIBS dlfcn-win32::dl)\nendif()\n~~~\nHowever, this depends on version of `dlfcn-win32` will be referenced in the `configure.bat` build script.\n\n[1] : https://github.com/dlfcn-win32/dlfcn-win32/releases/tag/v1.1.0 ", "markup": "markdown", "html": "<p>I know this CMake code is copy pasted from Gazebo, but I thinks it is worth anyhow to note something:</p>\n<ul>\n<li>\n<p>On <em>nix systems, CMake provides the <a data-is-external-link=\"true\" href=\"https://cmake.org/cmake/help/v3.0/variable/CMAKE_DL_LIBS.html\" rel=\"nofollow\"><code>CMAKE_DL_LIBS</code></a> variable that contains the library to link to provide the functions provided in the <code>dlfcn.h</code> header. The <code>dlfcn.h</code> header is contained in the system include directories and so does not need to be found. <code>CMAKE_DL_LIBS</code> is tipically <code>dl</code> on Linux and macOs , but can be empty on several </em>BSDs or even <code>ld</code> on some strange Unix platforms. </p>\n</li>\n<li>\n<p>On Windows, the latest version of dlfcn-win32 [1] comes with full support for relocatable CMake targets, and so it can be used by simply by:</p>\n</li>\n</ul>\n<div class=\"codehilite\"><pre><span></span>if(WIN32)\n  find_package(dlfcn-win32 REQUIRED)\n  set(CMAKE_DL_LIBS dlfcn-win32::dl)\nendif()\n</pre></div>\n\n\n<p>However, this depends on version of <code>dlfcn-win32</code> will be referenced in the <code>configure.bat</code> build script.</p>\n<p>[1] : <a href=\"https://github.com/dlfcn-win32/dlfcn-win32/releases/tag/v1.1.0\" rel=\"nofollow\" class=\"ap-connect-link\">https://github.com/dlfcn-win32/dlfcn-win32/releases/tag/v1.1.0</a> </p>", "type": "rendered"}, "created_on": "2017-04-09T16:40:19.202350+00:00", "user": {"display_name": "Silvio Traversaro", "uuid": "{34f404cb-5642-4f27-a032-e04c7143d776}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D"}, "html": {"href": "https://bitbucket.org/%7B34f404cb-5642-4f27-a032-e04c7143d776%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6/578caaa1-056c-45a2-8bf9-bee94c3bebef/128"}}, "nickname": "traversaro", "type": "user", "account_id": "557058:e1c3e6a0-9a64-4e5f-a668-feebc191c5b6"}, "inline": {"to": 81, "from": null, "outdated": true, "path": "cmake/SearchForStuff.cmake"}, "updated_on": "2017-04-09T16:40:19.295229+00:00", "type": "pullrequest_comment", "id": 34720955}