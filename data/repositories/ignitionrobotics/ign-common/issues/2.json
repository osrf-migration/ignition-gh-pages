{"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-common.json"}, "html": {"href": "#!/ignitionrobotics/ign-common"}, "avatar": {"href": "data/bytebucket.org/ravatar/{1dfbdd30-34c5-4b09-82ef-9bfe2917877b}ts=1533303"}}, "type": "repository", "name": "ign-common", "full_name": "ignitionrobotics/ign-common", "uuid": "{1dfbdd30-34c5-4b09-82ef-9bfe2917877b}"}, "links": {"attachments": {"href": "data/repositories/ignitionrobotics/ign-common/issues/2/attachments_page=1.json"}, "self": {"href": "data/repositories/ignitionrobotics/ign-common/issues/2.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-common/issues/2/watch"}, "comments": {"href": "data/repositories/ignitionrobotics/ign-common/issues/2/comments_page=1.json"}, "html": {"href": "#!/ignitionrobotics/ign-common/issues/2/unit_image_test-failure"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-common/issues/2/vote"}}, "reporter": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "title": "UNIT_Image_TEST failure", "component": null, "votes": 0, "watches": 1, "content": {"raw": "It fails in drone and on my desktop:\r\n\r\n* https://drone.io/bitbucket.org/ignitionrobotics/ign-common/23\r\n\r\n~~~\r\n11: [ RUN      ] ImageTest.Image\r\n11: \u001b[Err] \u001b\u001b[\u001b\u001bImage.cc\u001b\u001b:\u001b\u001b104\u001b\u001b] \u001b\u001bUnable to open image file[\u001b\u001b\u001b\u001b], check your IGNITION_RESOURCE_PATH settings.\r\n11: \u001b\u001b[Err] \u001b\u001b[\u001b\u001bImage.cc\u001b\u001b:\u001b\u001b104\u001b\u001b] \u001b\u001bUnable to open image file[\u001b\u001b\u001b\u001b], check your IGNITION_RESOURCE_PATH settings.\r\n11: /home/ubuntu/src/bitbucket.org/ignitionrobotics/ign-common/src/Image_TEST.cc:31: Failure\r\n11: Value of: img.Load(\"file://media/materials/textures/wood.jpg\")\r\n11:   Actual: -1\r\n11: Expected: 0\r\n11: /home/ubuntu/src/bitbucket.org/ignitionrobotics/ign-common/src/Image_TEST.cc:32: Failure\r\n11: Value of: img.GetWidth()\r\n11:   Actual: 0\r\n11: Expected: static_cast<unsigned int>(496)\r\n11: Which is: 496\r\n11: /home/ubuntu/src/bitbucket.org/ignitionrobotics/ign-common/src/Image_TEST.cc:33: Failure\r\n11: Value of: img.GetHeight()\r\n11:   Actual: 0\r\n11: Expected: static_cast<unsigned int>(329)\r\n11: Which is: 329\r\n11: /home/ubuntu/src/bitbucket.org/ignitionrobotics/ign-common/src/Image_TEST.cc:34: Failure\r\n11: Value of: img.GetBPP()\r\n11:   Actual: 0\r\n11: Expected: static_cast<unsigned int>(24)\r\n11: Which is: 24\r\n11: /home/ubuntu/src/bitbucket.org/ignitionrobotics/ign-common/src/Image_TEST.cc:36: Failure\r\n11: Value of: img.GetPixel(10, 10) == common::Color(0.133333, 0.376471, 0.654902, 1)\r\n11:   Actual: false\r\n11: Expected: true\r\n11: /home/ubuntu/src/bitbucket.org/ignitionrobotics/ign-common/src/Image_TEST.cc:38: Failure\r\n11: Value of: img.GetAvgColor() == common::Color(0.260456, 0.506047, 0.758062, 1)\r\n11:   Actual: false\r\n11: Expected: true\r\n11: /home/ubuntu/src/bitbucket.org/ignitionrobotics/ign-common/src/Image_TEST.cc:40: Failure\r\n11: Value of: img.GetMaxColor() == common::Color(0.807843, 0.909804, 0.964706, 1)\r\n11:   Actual: false\r\n11: Expected: true\r\n11: /home/ubuntu/src/bitbucket.org/ignitionrobotics/ign-common/src/Image_TEST.cc:41: Failure\r\n11: Value of: img.Valid()\r\n11:   Actual: false\r\n11: Expected: true\r\n11: /home/ubuntu/src/bitbucket.org/ignitionrobotics/ign-common/src/Image_TEST.cc:43: Failure\r\n11: Value of: img.GetFilename().find(\"materials/textures/wood.jpg\") != std::string::npos\r\n11:   Actual: false\r\n11: Expected: true\r\n11: /home/ubuntu/src/bitbucket.org/ignitionrobotics/ign-common/src/Image_TEST.cc:48: Failure\r\n11: Value of: size\r\n11:   Actual: 0\r\n11: Expected: static_cast<unsigned int>(489552)\r\n11: Which is: 489552\r\n11: [  FAILED  ] ImageTest.Image (5 ms)\r\n~~~\r\n\r\nMaybe we need to set environment variables like Dirk did in [gazebo pull request 1744](https://drone.io/bitbucket.org/ignitionrobotics/ign-common/23)?", "markup": "markdown", "html": "<p>It fails in drone and on my desktop:</p>\n<ul>\n<li><a href=\"https://drone.io/bitbucket.org/ignitionrobotics/ign-common/23\" rel=\"nofollow\" class=\"ap-connect-link\">https://drone.io/bitbucket.org/ignitionrobotics/ign-common/23</a></li>\n</ul>\n<div class=\"codehilite\"><pre><span></span>11: [ RUN      ] ImageTest.Image\n11: \u001b[Err] \u001b\u001b[\u001b\u001bImage.cc\u001b\u001b:\u001b\u001b104\u001b\u001b] \u001b\u001bUnable to open image file[\u001b\u001b\u001b\u001b], check your IGNITION_RESOURCE_PATH settings.\n11: \u001b\u001b[Err] \u001b\u001b[\u001b\u001bImage.cc\u001b\u001b:\u001b\u001b104\u001b\u001b] \u001b\u001bUnable to open image file[\u001b\u001b\u001b\u001b], check your IGNITION_RESOURCE_PATH settings.\n11: /home/ubuntu/src/bitbucket.org/ignitionrobotics/ign-common/src/Image_TEST.cc:31: Failure\n11: Value of: img.Load(&quot;file://media/materials/textures/wood.jpg&quot;)\n11:   Actual: -1\n11: Expected: 0\n11: /home/ubuntu/src/bitbucket.org/ignitionrobotics/ign-common/src/Image_TEST.cc:32: Failure\n11: Value of: img.GetWidth()\n11:   Actual: 0\n11: Expected: static_cast&lt;unsigned int&gt;(496)\n11: Which is: 496\n11: /home/ubuntu/src/bitbucket.org/ignitionrobotics/ign-common/src/Image_TEST.cc:33: Failure\n11: Value of: img.GetHeight()\n11:   Actual: 0\n11: Expected: static_cast&lt;unsigned int&gt;(329)\n11: Which is: 329\n11: /home/ubuntu/src/bitbucket.org/ignitionrobotics/ign-common/src/Image_TEST.cc:34: Failure\n11: Value of: img.GetBPP()\n11:   Actual: 0\n11: Expected: static_cast&lt;unsigned int&gt;(24)\n11: Which is: 24\n11: /home/ubuntu/src/bitbucket.org/ignitionrobotics/ign-common/src/Image_TEST.cc:36: Failure\n11: Value of: img.GetPixel(10, 10) == common::Color(0.133333, 0.376471, 0.654902, 1)\n11:   Actual: false\n11: Expected: true\n11: /home/ubuntu/src/bitbucket.org/ignitionrobotics/ign-common/src/Image_TEST.cc:38: Failure\n11: Value of: img.GetAvgColor() == common::Color(0.260456, 0.506047, 0.758062, 1)\n11:   Actual: false\n11: Expected: true\n11: /home/ubuntu/src/bitbucket.org/ignitionrobotics/ign-common/src/Image_TEST.cc:40: Failure\n11: Value of: img.GetMaxColor() == common::Color(0.807843, 0.909804, 0.964706, 1)\n11:   Actual: false\n11: Expected: true\n11: /home/ubuntu/src/bitbucket.org/ignitionrobotics/ign-common/src/Image_TEST.cc:41: Failure\n11: Value of: img.Valid()\n11:   Actual: false\n11: Expected: true\n11: /home/ubuntu/src/bitbucket.org/ignitionrobotics/ign-common/src/Image_TEST.cc:43: Failure\n11: Value of: img.GetFilename().find(&quot;materials/textures/wood.jpg&quot;) != std::string::npos\n11:   Actual: false\n11: Expected: true\n11: /home/ubuntu/src/bitbucket.org/ignitionrobotics/ign-common/src/Image_TEST.cc:48: Failure\n11: Value of: size\n11:   Actual: 0\n11: Expected: static_cast&lt;unsigned int&gt;(489552)\n11: Which is: 489552\n11: [  FAILED  ] ImageTest.Image (5 ms)\n</pre></div>\n\n\n<p>Maybe we need to set environment variables like Dirk did in <a data-is-external-link=\"true\" href=\"https://drone.io/bitbucket.org/ignitionrobotics/ign-common/23\" rel=\"nofollow\">gazebo pull request 1744</a>?</p>", "type": "rendered"}, "assignee": null, "state": "resolved", "version": null, "edited_on": null, "created_on": "2015-09-16T01:01:39.065927+00:00", "milestone": null, "updated_on": "2017-10-11T19:38:28.916755+00:00", "type": "issue", "id": 2}