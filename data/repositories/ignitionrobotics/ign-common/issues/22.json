{"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/ignitionrobotics/ign-common.json"}, "html": {"href": "#!/ignitionrobotics/ign-common"}, "avatar": {"href": "data/bytebucket.org/ravatar/{1dfbdd30-34c5-4b09-82ef-9bfe2917877b}ts=1533303"}}, "type": "repository", "name": "ign-common", "full_name": "ignitionrobotics/ign-common", "uuid": "{1dfbdd30-34c5-4b09-82ef-9bfe2917877b}"}, "links": {"attachments": {"href": "data/repositories/ignitionrobotics/ign-common/issues/22/attachments_page=1.json"}, "self": {"href": "data/repositories/ignitionrobotics/ign-common/issues/22.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-common/issues/22/watch"}, "comments": {"href": "data/repositories/ignitionrobotics/ign-common/issues/22/comments_page=1.json"}, "html": {"href": "#!/ignitionrobotics/ign-common/issues/22/gtsmeshutils-delaunay-triangulation-fails"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/ignitionrobotics/ign-common/issues/22/vote"}}, "reporter": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "title": "GTSMeshUtils delaunay triangulation fails on OSX", "component": null, "votes": 0, "watches": 1, "content": {"raw": "Migrated from https://bitbucket.org/osrf/gazebo/issues/1479/gtsmeshutils-delaunay-triangulation-fails originally reported by @iche033\r\n\r\nThere are two test failures related to Delaunay Triangulation using GTS on homebrew:\r\n\r\n* https://build.osrfoundation.org/view/os_homebrew/job/ignition_common-ci-default-homebrew-amd64/65/testReport/(root)/GTSMeshUtils/DelaunayTriangulation/\r\n* https://build.osrfoundation.org/view/os_homebrew/job/ignition_common-ci-default-homebrew-amd64/65/testReport/(root)/Results/test_ran/\r\n\r\nWhile debugging the failure with a judicious use of print statements; I accidentally \"fixed\" the test with the following print statements in the [TriangleIsHole function](#!/ignitionrobotics/ign-common/src/4696c8d7d7edfe2d25143b6d0190fb55dbcb2c58/src/GTSMeshUtils.cc?fileviewer=file-view-default#GTSMeshUtils.cc-100):\r\n\r\n~~~\r\ndiff -r 4696c8d7d7ed src/GTSMeshUtils.cc\r\n--- a/src/GTSMeshUtils.cc   Fri Sep 08 00:11:40 2017 +0000\r\n+++ b/src/GTSMeshUtils.cc   Mon Sep 11 16:17:03 2017 -0700\r\n@@ -116,10 +116,21 @@\r\n\r\n   gts_fifo_foreach(_edgeList, (GtsFunc) Intersection, data);\r\n\r\n+  std::cerr << \"x y intersections: \"\r\n+            << xCenter << \" \"\r\n+            << yCenter << \" \"\r\n+            << intersections << \" \"\r\n+            << intersections % 2 << std::endl;\r\n   if (intersections % 2)\r\n     return false;\r\n   else\r\n+  {\r\n+    std::cerr << \"v1 \" << v1->p.x << \" \" << v1->p.y << \",  \"\r\n+              << \"v2 \" << v2->p.x << \" \" << v2->p.y << \",  \"\r\n+              << \"v3 \" << v3->p.x << \" \" << v3->p.y\r\n+              << std::endl;\r\n     return true;\r\n+  }\r\n }\r\n\r\n //////////////////////////////////////////////////\r\n~~~\r\n\r\nWith only one of the print statements, I see a seg-fault on homebrew at [GTSMeshUtils.cc:72](#!/ignitionrobotics/ign-common/src/4696c8d7d7edfe2d25143b6d0190fb55dbcb2c58/src/GTSMeshUtils.cc?fileviewer=file-view-default#GTSMeshUtils.cc-72):\r\n\r\n~~~\r\ndiff -r 4696c8d7d7ed src/GTSMeshUtils.cc\r\n--- a/src/GTSMeshUtils.cc   Fri Sep 08 00:11:40 2017 +0000\r\n+++ b/src/GTSMeshUtils.cc   Mon Sep 11 16:17:03 2017 -0700\r\n@@ -116,10 +116,21 @@\r\n\r\n   gts_fifo_foreach(_edgeList, (GtsFunc) Intersection, data);\r\n\r\n+  //std::cerr << \"x y intersections: \"\r\n+  //          << xCenter << \" \"\r\n+  //          << yCenter << \" \"\r\n+  //          << intersections << \" \"\r\n+  //          << intersections % 2 << std::endl;\r\n   if (intersections % 2)\r\n     return false;\r\n   else\r\n+  {\r\n+    std::cerr << \"v1 \" << v1->p.x << \" \" << v1->p.y << \",  \"\r\n+              << \"v2 \" << v2->p.x << \" \" << v2->p.y << \",  \"\r\n+              << \"v3 \" << v3->p.x << \" \" << v3->p.y\r\n+              << std::endl;\r\n     return true;\r\n+  }\r\n }\r\n\r\n //////////////////////////////////////////////////\r\n~~~", "markup": "markdown", "html": "<p>Migrated from <a href=\"https://bitbucket.org/osrf/gazebo/issues/1479/gtsmeshutils-delaunay-triangulation-fails\" rel=\"nofollow\" class=\"ap-connect-link\">https://bitbucket.org/osrf/gazebo/issues/1479/gtsmeshutils-delaunay-triangulation-fails</a> originally reported by @iche033</p>\n<p>There are two test failures related to Delaunay Triangulation using GTS on homebrew:</p>\n<ul>\n<li><a href=\"https://build.osrfoundation.org/view/os_homebrew/job/ignition_common-ci-default-homebrew-amd64/65/testReport/(root)/GTSMeshUtils/DelaunayTriangulation/\" rel=\"nofollow\" class=\"ap-connect-link\">https://build.osrfoundation.org/view/os_homebrew/job/ignition_common-ci-default-homebrew-amd64/65/testReport/(root)/GTSMeshUtils/DelaunayTriangulation/</a></li>\n<li><a href=\"https://build.osrfoundation.org/view/os_homebrew/job/ignition_common-ci-default-homebrew-amd64/65/testReport/(root)/Results/test_ran/\" rel=\"nofollow\" class=\"ap-connect-link\">https://build.osrfoundation.org/view/os_homebrew/job/ignition_common-ci-default-homebrew-amd64/65/testReport/(root)/Results/test_ran/</a></li>\n</ul>\n<p>While debugging the failure with a judicious use of print statements; I accidentally \"fixed\" the test with the following print statements in the <a data-is-external-link=\"true\" href=\"#!/ignitionrobotics/ign-common/src/4696c8d7d7edfe2d25143b6d0190fb55dbcb2c58/src/GTSMeshUtils.cc?fileviewer=file-view-default#GTSMeshUtils.cc-100\" rel=\"nofollow\">TriangleIsHole function</a>:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"gh\">diff -r 4696c8d7d7ed src/GTSMeshUtils.cc</span>\n<span class=\"gd\">--- a/src/GTSMeshUtils.cc   Fri Sep 08 00:11:40 2017 +0000</span>\n<span class=\"gi\">+++ b/src/GTSMeshUtils.cc   Mon Sep 11 16:17:03 2017 -0700</span>\n<span class=\"gu\">@@ -116,10 +116,21 @@</span>\n\n   gts_fifo_foreach(_edgeList, (GtsFunc) Intersection, data);\n\n<span class=\"gi\">+  std::cerr &lt;&lt; &quot;x y intersections: &quot;</span>\n<span class=\"gi\">+            &lt;&lt; xCenter &lt;&lt; &quot; &quot;</span>\n<span class=\"gi\">+            &lt;&lt; yCenter &lt;&lt; &quot; &quot;</span>\n<span class=\"gi\">+            &lt;&lt; intersections &lt;&lt; &quot; &quot;</span>\n<span class=\"gi\">+            &lt;&lt; intersections % 2 &lt;&lt; std::endl;</span>\n   if (intersections % 2)\n     return false;\n   else\n<span class=\"gi\">+  {</span>\n<span class=\"gi\">+    std::cerr &lt;&lt; &quot;v1 &quot; &lt;&lt; v1-&gt;p.x &lt;&lt; &quot; &quot; &lt;&lt; v1-&gt;p.y &lt;&lt; &quot;,  &quot;</span>\n<span class=\"gi\">+              &lt;&lt; &quot;v2 &quot; &lt;&lt; v2-&gt;p.x &lt;&lt; &quot; &quot; &lt;&lt; v2-&gt;p.y &lt;&lt; &quot;,  &quot;</span>\n<span class=\"gi\">+              &lt;&lt; &quot;v3 &quot; &lt;&lt; v3-&gt;p.x &lt;&lt; &quot; &quot; &lt;&lt; v3-&gt;p.y</span>\n<span class=\"gi\">+              &lt;&lt; std::endl;</span>\n     return true;\n<span class=\"gi\">+  }</span>\n }\n\n //////////////////////////////////////////////////\n</pre></div>\n\n\n<p>With only one of the print statements, I see a seg-fault on homebrew at <a data-is-external-link=\"true\" href=\"#!/ignitionrobotics/ign-common/src/4696c8d7d7edfe2d25143b6d0190fb55dbcb2c58/src/GTSMeshUtils.cc?fileviewer=file-view-default#GTSMeshUtils.cc-72\" rel=\"nofollow\">GTSMeshUtils.cc:72</a>:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"gh\">diff -r 4696c8d7d7ed src/GTSMeshUtils.cc</span>\n<span class=\"gd\">--- a/src/GTSMeshUtils.cc   Fri Sep 08 00:11:40 2017 +0000</span>\n<span class=\"gi\">+++ b/src/GTSMeshUtils.cc   Mon Sep 11 16:17:03 2017 -0700</span>\n<span class=\"gu\">@@ -116,10 +116,21 @@</span>\n\n   gts_fifo_foreach(_edgeList, (GtsFunc) Intersection, data);\n\n<span class=\"gi\">+  //std::cerr &lt;&lt; &quot;x y intersections: &quot;</span>\n<span class=\"gi\">+  //          &lt;&lt; xCenter &lt;&lt; &quot; &quot;</span>\n<span class=\"gi\">+  //          &lt;&lt; yCenter &lt;&lt; &quot; &quot;</span>\n<span class=\"gi\">+  //          &lt;&lt; intersections &lt;&lt; &quot; &quot;</span>\n<span class=\"gi\">+  //          &lt;&lt; intersections % 2 &lt;&lt; std::endl;</span>\n   if (intersections % 2)\n     return false;\n   else\n<span class=\"gi\">+  {</span>\n<span class=\"gi\">+    std::cerr &lt;&lt; &quot;v1 &quot; &lt;&lt; v1-&gt;p.x &lt;&lt; &quot; &quot; &lt;&lt; v1-&gt;p.y &lt;&lt; &quot;,  &quot;</span>\n<span class=\"gi\">+              &lt;&lt; &quot;v2 &quot; &lt;&lt; v2-&gt;p.x &lt;&lt; &quot; &quot; &lt;&lt; v2-&gt;p.y &lt;&lt; &quot;,  &quot;</span>\n<span class=\"gi\">+              &lt;&lt; &quot;v3 &quot; &lt;&lt; v3-&gt;p.x &lt;&lt; &quot; &quot; &lt;&lt; v3-&gt;p.y</span>\n<span class=\"gi\">+              &lt;&lt; std::endl;</span>\n     return true;\n<span class=\"gi\">+  }</span>\n }\n\n //////////////////////////////////////////////////\n</pre></div>", "type": "rendered"}, "assignee": null, "state": "resolved", "version": null, "edited_on": null, "created_on": "2017-09-12T00:03:05.787980+00:00", "milestone": null, "updated_on": "2017-10-11T19:41:16.413158+00:00", "type": "issue", "id": 22}